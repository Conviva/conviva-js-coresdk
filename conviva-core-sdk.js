/*! (C) 2021 Conviva, Inc. All rights reserved. Confidential and proprietary. */

!function(t,n){"function"===typeof define&&define.amd?define(n):("object"===typeof exports||"object"===typeof module&&module.exports)&&(module.exports=n()),"undefined"!==typeof t&&t&&(t.Conviva||t.ConvivaLoading||(t.ConvivaLoading=!0,t.Conviva=n(),delete t.ConvivaLoading))}(this,function(){var ht={};return function(){"use strict";var ut={};!function(){var T=ht.Constants={};T.version="4.5.4",T.CUSTOMER_KEY="customerKey",T.GATEWAY_URL="gatewayUrl",T.LOG_LEVEL="logLevel",T.ASSET_NAME="Conviva.assetName",T.PLAYER_NAME="Conviva.applicationName",T.APPLICATION_VERSION="c3.app.version",T.IS_LIVE="Conviva.streamType",T.ENCODED_FRAMERATE="Conviva.encodedFrameRate",T.DEFAULT_RESOURCE="Conviva.defaultResource",T.STREAM_URL="Conviva.streamUrl",T.VIEWER_ID="Conviva.viewerId",T.DURATION="Conviva.duration",T.UTM_TRACKING_URL="c3.cm.utmTrackingUrl",T.POD_INDEX="podIndex",T.POD_POSITION="podPosition",T.POD_DURATION="podDuration",T.AD_TYPE="adType",T.MODULE_NAME="Conviva.moduleName",T.MODULE_VERSION="Conviva.moduleVersion",T.FRAMEWORK_NAME="Conviva.frameworkName",T.FRAMEWORK_VERSION="Conviva.frameworkVersion",T.i="Constants not yet configured",T.e="Invalid : Did you report playback ended?",T.s="Invalid : Did you report ad playback ended?",T.o="Player cannot be null",T.u="PlaybackAnlytics already built",T.a="PlaybackAnlytics not yet built",T.Playback={BITRATE:"BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT"},T.Network={SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},T.ErrorSeverity={FATAL:1,WARNING:0},T.NO_SESSION_KEY=-2,T.AdPosition={PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},T.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},T.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},T.AdType={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},T.AdSlates={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},T.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},T.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},T.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},T.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},T.Events={USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},T.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},T.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},T.CallbackFunctions={CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer",GENERATE_HASH:"generateHash",BASE64_ENCODE:"base64Encode"},T.DeviceMetadata={BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},T.AD_PRELOAD_FEATURE="adPreloading",T.AD_TAG_URL="adTagUrl",T.IMASDK_CONTENT_PLAYER="imaMainContentPlayer",T.CONVIVA_AD_MODULE="convivaAdModule",T.CONVIVA_MODULE="convivaModule",T.MEDIA_ELEMENT="mediaElement";var a=ht.Client=function(){var h=this;this.c=!1,this.version=a.version,this.l=null,this.v=null,this.d=null,this.p=-1,this.R=null,this.w=null,this.T=null,this.S=null,this.g=-1,this.N=!1,this.O={},this._=function(){h.l,0},this.A={},this.C=null,this.I=null,this.y=null,this.m=function(){this.T.D("Client.makeIPV4IPV6GlobalSessions",function(){var t;!h.S||null!==(t=h.S.get(q.P))&&t!==H.M&&h.v&&((t=new c).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=h.R.L.indexOf(f.U)>-1?f.U:f.V,h.F=h.v.H(t,null),(t=new c).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=h.R.B.indexOf(f.G)>-1?f.G:f.j,h.K=h.v.H(t,null))})},this.W=function(i){h.T.D("Client.updateConnectionType",function(){if(h.C=i,h.v){var t,n=h.v.q();for(t in n)n[t].Y(i)}})},this.J=function(i){h.T.D("Client.updateLinkEncryption",function(){if(h.I=i,h.v){var t,n=h.v.q();for(t in n)n[t].X(i)}})},this.Q=function(t){h.T.D("Client.updateSignalStrength",function(){h.y=t})},function(t,n,i,e){if(!(t instanceof f))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof R))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!==f.Z+f.z&&t.gatewayUrl!==f.$+f.z||(this.c=!0),e&&(this.version=e),this.R=t.tt(),this.d=n,this.d.nt("SDK",this.R,this.version),this.T=this.d.it(this.version),this.T.D("Client.init",function(){if(h.g=$.et(),h.S=h.d.ot(),h.S.rt(),h.v=h.d.ut(h,h.R,h.S),i)for(var t in i)switch(t){case T.Network.CONNECTION_TYPE:h.W(i[t]);break;case T.Network.LINK_ENCRYPTION:h.J(i[t]);break;case T.Network.SIGNAL_STRENGTH:h.Q(i[t])}h.m()},function(t){throw new Error("Client constructor failed: "+t.message)})}.apply(this,arguments),this.release=function(){this.N||this.T.D("Client.release",function(){h.l,h.v.ht(),h.v=null,h.p=-1,h.g=-1,h.T=null,h.R=null,h.w=null,h.d=null,h.N=!0})},this.createSession=function(t,n,i){var e=a.NO_SESSION_KEY;return this.N||(!t||t instanceof c)&&this.T.D("Client.createSession",function(){e=h.v.ft(t,j.lt.ct,n,(i?T:h).version)}),e},this.createAdSession=function(i,e,s,o,r){var u=a.NO_SESSION_KEY;return this.N||(!e||e instanceof c)&&this.T.D("Client.createAdSession",function(){var t,n;e||(e=new c),!Q.vt(i)||i===a.NO_SESSION_KEY||(t=h.v.dt(i))&&(n=e.custom[T.APPLICATION_VERSION],e.applicationName&&e.viewerId&&"undefined"!==typeof n&&n||t.Et&&t.Et.pt&&(!e.viewerId&&t.Et.pt.viewerId&&(e.viewerId=t.Et.pt.viewerId),!e.applicationName&&t.Et.pt.applicationName&&(e.applicationName=t.Et.pt.applicationName),"undefined"!==typeof n&&n||"undefined"!==typeof(n=t.Et.pt.custom[T.APPLICATION_VERSION])&&n&&(e.custom[T.APPLICATION_VERSION]=n)),e.custom["c3.csid"]=Q.Rt(t.g)),u=h.v.ft(e,j.lt.wt,s,(o?T:h).version,r)}),u},this.reportError=function(n,i,e){this.N||Q.Tt(i)&&(e!==a.ErrorSeverity.FATAL&&e!==a.ErrorSeverity.WARNING||this.T.D("Client.reportError",function(){var t=h.v.dt(n);t&&t.St(i,e)}))},this.updateContentMetadata=function(i,e){this.N||e instanceof c&&this.T.D("Client.updateContentMetadata",function(){var t,n=h.v.dt(i);n&&(t=e.tt(),n.gt(t))})},this.detachPlayer=function(n){this.N||this.T.D("Client.detachPlayer",function(){var t=h.v.dt(n);t&&t.Nt()})},this.Ot=function(n){this.N||this.T.D("Client.offFocus",function(){var t=h.v.dt(n);t&&t.Ot()})},this.attachPlayer=function(n,i){this.N||i instanceof u&&this.T.D("Client.attachPlayer",function(){var t=h.v.dt(n);t&&t._t(i)})},this.At=function(n){this.N||this.T.D("Client.onFocus",function(){var t=h.v.dt(n);t&&t.At()})},this.contentPreload=function(n){this.N||this.T.D("Client.contentPreload",function(){var t=h.v.dt(n);t&&t.Ct()})},this.contentStart=function(n){this.N||this.T.D("Client.contentStart",function(){var t=h.v.dt(n);t&&t.It()})},this.sendCustomEvent=function(i,e,s){this.N||Q.Tt(e)&&(Q.yt(s),this.T.D("Client.sendCustomEvent",function(){i===a.NO_SESSION_KEY&&(h.p<0&&(n=new c,h.p=h.v.H(n,null)),i=h.p);var t=Q.mt(s),n=h.v.Dt(i);n&&n.Pt(e,t)}))},this.adStart=function(n,i,e,s){this.N||i!==a.AdStream.CONTENT&&i!==a.AdStream.SEPARATE||e!==a.AdPlayer.CONTENT&&e!==a.AdPlayer.SEPARATE||(s!==a.AdPosition.PREROLL&&s!==a.AdPosition.MIDROLL&&a.AdPosition.POSTROLL,this.T.D("Client.adStart",function(){var t=h.v.dt(n);t&&t.bt(i,e,s)}))},this.adEnd=function(n){this.N||this.T.D("Client.adEnd",function(){var t=h.v.dt(n);t&&t.Mt()})},this.cleanupSession=function(t){this.N||t!==a.NO_SESSION_KEY&&this.T.D("Client.cleanupSession",function(){h.v.dt(t)&&h.v.Lt(t)})},this.getAttachedPlayer=function(n){var i=null;return this.N||n===a.NO_SESSION_KEY||this.T.D("Client.getAttachedPlayer",function(){var t=h.v.dt(n);t&&(i=t.Ut())}),i},this.isPlayerAttached=function(t){return!this.N&&null!==this.getAttachedPlayer(t)},this.getPlayerStateManager=function(t){if(this.N)throw new Error("This instance of Conviva.Client has been released.");return new u(this.d,(t?T:h).version)},this.releasePlayerStateManager=function(t){if(this.N)throw new Error("This instance of Conviva.Client has been released.");this.T.D("Client.releasePlayerStateManager",function(){t instanceof u&&t.release()})},this.Vt=function(){return this.R},this.getId=function(){return this.g},this.getSessionId=function(n){if(this.N)return T.NO_SESSION_KEY;var i=null;return this.T.D("Client.getSessionId",function(){var t=h.v.dt(n);t&&(i=t.kt())}),i},this.getClientId=function(n){if(this.N)return null;var i=null;return this.T.D("Client.getClientId",function(){var t=h.v.dt(n);t&&(i=t.Ft())}),i},this.Ht=function(n,i,e){this.N||this.T.D("Client.updateCustomMetric",function(){var t=h.v.dt(n);t&&t.Ht(i,e)})},this.setUniqueIdentifier=function(t,n){if(this.N)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)this.O[i]=t[i];n&&(this._=n)},this.setUserPreferenceForDataCollection=function(t,n){if(this.N)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)"false"===t[i]?this.A[i]=n?q.Gt.Bt:q.Gt.jt:this.A[i]=q.Gt.Kt},this.setUserPreferenceForDataDeletion=function(t){if(this.N)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var n in t)"true"===t[n]?this.A[n]=q.Gt.Wt:this.A[n]=q.Gt.Kt}};a.version="4.5.4L",a.NO_SESSION_KEY=T.NO_SESSION_KEY,a.AdPosition={PREROLL:T.AdPosition.PREROLL,MIDROLL:T.AdPosition.MIDROLL,POSTROLL:T.AdPosition.POSTROLL},a.AdStream={CONTENT:T.AdPlayer.CONTENT,SEPARATE:T.AdPlayer.SEPARATE},a.AdPlayer={CONTENT:T.AdPlayer.CONTENT,SEPARATE:T.AdPlayer.SEPARATE},a.ErrorSeverity={FATAL:T.ErrorSeverity.FATAL,WARNING:T.ErrorSeverity.WARNING},a.DeviceType={DESKTOP:T.DeviceType.DESKTOP,CONSOLE:T.DeviceType.CONSOLE,SETTOP:T.DeviceType.SETTOP,MOBILE:T.DeviceType.MOBILE,TABLET:T.DeviceType.TABLET,SMARTTV:T.DeviceType.SMARTTV},a.AdTechnology={CLIENT_SIDE:T.AdType.CLIENT_SIDE,SERVER_SIDE:T.AdType.SERVER_SIDE},a.AdType={BLACKOUT_SLATE:T.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:T.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:T.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:T.AdSlates.OTHER_SLATE,VPAID:T.AdSlates.VPAID,REGULAR:T.AdSlates.REGULAR},a.AdServingType={INLINE:T.AdServingType.INLINE,WRAPPER:T.AdServingType.WRAPPER},a.DeviceCategory={ANDROID_DEVICE:T.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:T.DeviceCategory.APPLE_DEVICE,CHROMECAST:T.DeviceCategory.CHROMECAST,DESKTOP_APP:T.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:T.DeviceCategory.DEVICE_SIMULATOR,LG_TV:T.DeviceCategory.LG_TV,NINTENDO:T.DeviceCategory.NINTENDO,PLAYSTATION:T.DeviceCategory.PLAYSTATION,ROKU:T.DeviceCategory.ROKU,SAMSUNG_TV:T.DeviceCategory.SAMSUNG_TV,SMART_TV:T.DeviceCategory.SMART_TV,SET_TOP_BOX:T.DeviceCategory.SET_TOP_BOX,TIVO:T.DeviceCategory.TIVO,WEB:T.DeviceCategory.WEB,WINDOWS_DEVICE:T.DeviceCategory.WINDOWS_DEVICE,XBOX:T.DeviceCategory.XBOX,KAIOS_DEVICE:T.DeviceCategory.KAIOS_DEVICE};var f=ht.ClientSettings=function(){var i=this;this.xt=null,Q.qt(this,"customerKey",function(){return this.xt}),Q.Yt(this,"customerKey",function(t){Q.Tt(t)&&(this.xt=t)}),this.Jt=f.Xt,Q.qt(this,"heartbeatInterval",function(){return this.Jt}),Q.Yt(this,"heartbeatInterval",function(t){var n;"number"!==typeof t||(n=Q.Qt(t))===t&&(this.Jt=n)}),this.Zt=null,this.L=null,this.B=null,Q.qt(this,"gatewayUrl",function(){return this.Zt}),Q.Yt(this,"gatewayUrl",function(t){var n;Q.Tt(t)&&("https"!==(n=t.split("://"))[0]&&"http"!==n[0]||-1!==t.indexOf(".com",t.length-".com".length)&&(this.Zt=t))}),function(t){if(!Q.Tt(t))throw new Error("customerKey must be valid");this.customerKey=t}.apply(this,arguments),this.equals=function(t){return this.customerKey===t.customerKey&&this.gatewayUrl===t.gatewayUrl&&this.heartbeatInterval===t.heartbeatInterval},this.tt=function(){var t=new f(this.customerKey);return t.gatewayUrl=function(t){if(Q.Tt(t)){var n=t.split("://");if(-1===n[1].indexOf("cws.conviva.com")&&("https"===n[0]||"http"===n[0]))return i.L="https://"+i.customerKey+"."+f.V,i.B="https://"+i.customerKey+"."+f.j,t}return i.L="https://"+i.customerKey+"."+f.U,i.B="https://"+i.customerKey+"."+f.G,"https://"+i.customerKey+"."+f.z}(this.gatewayUrl),t.heartbeatInterval=this.heartbeatInterval,t.L=this.L,t.B=this.B,t}};f.zt="https://conviva.testonly.conviva.com",f.$t="https://cws.conviva.com",f.z="cws.conviva.com",f.U="ipv4.cws.conviva.com",f.G="ipv6.cws.conviva.com",f.tn="conviva.testonly.conviva.com",f.V="ipv4.testonly.conviva.com",f.j="ipv6.testonly.conviva.com",f.Z="https://",f.$="http://",f.nn=5,f.Xt=20;var c=ht.ContentMetadata=function(){this.in=null,Q.qt(this,"assetName",function(){return this.in}),Q.Yt(this,"assetName",function(t){if("string"!==typeof t)return;this.in=t}),this.en={},Q.qt(this,"custom",function(){return this.en}),Q.Yt(this,"custom",function(t){if("object"!==typeof t)return;this.en=Q.mt(t)}),this.sn=null,Q.qt(this,"defaultResource",function(){return this.sn}),Q.Yt(this,"defaultResource",function(t){if("string"!==typeof t)return;this.sn=t}),this.on=null,Q.qt(this,"viewerId",function(){return this.on}),Q.Yt(this,"viewerId",function(t){if("string"!==typeof t)return;this.on=t}),this.rn=null,Q.qt(this,"applicationName",function(){return this.rn}),Q.Yt(this,"applicationName",function(t){if("string"!==typeof t)return;this.rn=t}),this.un=null,Q.qt(this,"streamUrl",function(){return this.un}),Q.Yt(this,"streamUrl",function(t){if("string"!==typeof t)return;this.un=t}),this.hn=c.StreamType.UNKNOWN,Q.qt(this,"streamType",function(){return this.hn}),Q.Yt(this,"streamType",function(t){t!==c.StreamType.UNKNOWN&&t!==c.StreamType.VOD&&t!==c.StreamType.LIVE||(this.hn=t)}),this.an=-1,Q.qt(this,"duration",function(){return this.an}),Q.Yt(this,"duration",function(t){this.an=tt.fn(t)}),this.cn=-1,Q.qt(this,"encodedFrameRate",function(){return this.cn}),Q.Yt(this,"encodedFrameRate",function(t){this.cn=tt.fn(t)}),function(){}.apply(this,arguments),this.tt=function(){var t,n=new c;for(t in n.assetName=this.assetName,n.applicationName=this.applicationName,n.streamUrl=this.streamUrl,n.viewerId=this.viewerId,n.defaultResource=this.defaultResource,n.streamType=this.streamType,n.duration=this.duration,n.encodedFrameRate=this.encodedFrameRate,this.custom)n.custom[t]=this.custom[t];return n}};c.StreamType={UNKNOWN:T.StreamType.UNKNOWN,LIVE:T.StreamType.LIVE,VOD:T.StreamType.VOD},ht.ErrorType={ERROR_UNKNOWN:T.ErrorType.ERROR_UNKNOWN,ERROR_IO:T.ErrorType.ERROR_IO,ERROR_TIMEOUT:T.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:T.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:T.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:T.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:T.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:T.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:T.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:T.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:T.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:T.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:T.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},ht.Events={AD_REQUESTED:T.Events.AD_REQUESTED,AD_RESPONSE:T.Events.AD_RESPONSE,AD_SLOT_STARTED:T.Events.AD_SLOT_STARTED,AD_ATTEMPTED:T.Events.AD_ATTEMPTED,AD_SLOT_ENDED:T.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:T.Events.AD_IMPRESSION_START,AD_START:T.Events.AD_START,AD_FIRST_QUARTILE:T.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:T.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:T.Events.AD_THIRD_QUARTILE,AD_COMPLETE:T.Events.AD_COMPLETE,AD_END:T.Events.AD_END,AD_IMPRESSION_END:T.Events.AD_IMPRESSION_END,AD_SKIPPED:T.Events.AD_SKIPPED,AD_ERROR:T.Events.AD_ERROR,AD_PROGRESS:T.Events.AD_PROGRESS,AD_CLOSE:T.Events.AD_CLOSE,CONTENT_PAUSED:T.Events.CONTENT_PAUSED,CONTENT_RESUMED:T.Events.CONTENT_RESUMED,POD_START:T.Events.POD_START,POD_END:T.Events.POD_END};var u=ht.PlayerStateManager=function(){var e=this;e.ln=null,e.vn=-2,e.dn=u.PlayerState.UNKNOWN,e.En={},e.pn=-2,e.cn=-2,e.an=-2,e.Rn=null,e.wn=null,e.un=null,e.Tn=null,e.Sn=null,e.gn=-1,e.Nn=-1,e.C=null,e.I=null,e.On=null,e._n=[],e.N=!1,this.release=function(){e.N||e.T.D("PlayerStateManager.release",function(){e.ln&&e.ln.An(),e.Cn(),e.d=null,e.T=null,e.N=!0})},this.setPlayheadTime=function(){},this.setBufferLength=function(){},this.setRenderedFrameRate=function(){},this.getEncodedFrameRate=function(){return e.cn},this.setEncodedFrameRate=function(n){e.N||e.T.D("PlayerStateManager.setEncodedFrameRate",function(){var t=tt.fn(n);t>=-1&&(e.cn=t,e.ln&&e.ln.In(e.cn))})},this.getDuration=function(){return e.an},this.setClientMeasureInterface=function(t){Q.yn(t,new ht.ClientMeasureInterface,"ClientMeasureInterface"),this.mn=t},this.getPHT=function(){return this.mn&&"function"===typeof this.mn.getPHT?this.mn.getPHT():u.DEFAULT_PHT},this.getBufferLength=function(){return this.mn&&"function"===typeof this.mn.getBufferLength?this.mn.getBufferLength():u.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.mn&&"function"===typeof this.mn.getSignalStrength?this.mn.getSignalStrength():u.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.mn&&"function"===typeof this.mn.getRenderedFrameRate?this.mn.getRenderedFrameRate():u.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(n){e.N||e.T.D("PlayerStateManager.setDuration",function(){var t=tt.fn(n);t>=-1&&(e.an=t,e.ln&&e.ln.Dn(e.an))})},this.getStreamUrl=function(){return e.un},this.setStreamUrl=function(t){e.N||e.T.D("PlayerStateManager.setStreamUrl",function(){t&&(e.un=t,e.ln&&e.ln.Pn(e.un))})},this.bn=function(){return e.Tn},this.Mn=function(){return e.Sn},this.setModuleNameAndVersion=function(t,n){e.Tn=t,e.Sn=n},this.Ln=function(){return e.wn},this.setPlayerType=function(t){e.N||e.T.D("PlayerStateManager.setPlayerType",function(){e.wn=t,e.ln&&e.ln.Un(e.wn)})},this.Vn=function(){return e.Rn},this.setPlayerVersion=function(t){e.N||e.T.D("PlayerStateManager.setPlayerVersion",function(){e.Rn=t,e.ln&&e.ln.kn(e.Rn)})},this.setMonitoringNotifier=function(t){return!e.N&&(!e.ln&&(e.ln=t,e.l,!0))},this.Cn=function(){e.N||(e.ln=null,e.l)},this.Fn=function(){e.setPlayerState(e.getPlayerState()),e.setBitrateKbps(e.Hn()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.Ln()),e.setPlayerVersion(e.Vn());for(var t=0;t<e._n.length;t++){var n=e._n[t];e.Bn(n)}e._n=[]},this.getPlayerState=function(){return e.dn},this.setPlayerState=function(t){e.N||e.T.D("PlayerStateManager.setPlayerState",function(){u.Gn(t)&&(e.dn=t,e.ln&&e.ln.jn(e.dn))})},this.Hn=function(){return e.vn},this.setBitrateKbps=function(n){e.N||e.T.D("PlayerStateManager.setBitrateKbps",function(){var t=tt.fn(n);t>=-1&&(e.vn=t,e.ln&&e.ln.Kn(e.vn))})},this.setPlayerSeekStart=function(t){e.N||e.T.D("PlayerStateManager.setPlayerSeekStart()",function(){e.ln&&e.ln.Wn(u.SEEK_ACTIONS_TYPE.SEEK_START,t)})},this.setPlayerSeekEnd=function(){e.N||e.T.D("PlayerStateManager.setPlayerSeekEnd()",function(){e.ln&&e.ln.Wn(u.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e.N||e.T.D("PlayerStateManager.setUserSeekButtonUp()",function(){e.ln&&e.ln.Wn(u.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e.N||e.T.D("PlayerStateManager.setUserSeekButtonDown()",function(){e.ln&&e.ln.Wn(u.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(n){e.N||e.T.D("PlayerStateManager.setVideoResolutionWidth()",function(){var t=tt.fn(n);t>0&&(e.gn=t),e.ln&&e.ln.xn(e.gn)})},this.setVideoResolutionHeight=function(n){e.N||e.T.D("PlayerStateManager.setVideoResolutionHeight()",function(){var t=tt.fn(n);t>0&&(e.Nn=t),e.ln&&e.ln.qn(e.Nn)})},this.setConnectionType=function(t){e.N||e.T.D("PlayerStateManager.setConnectionType()",function(){e.C=t,e.ln&&e.ln.Y(e.C)})},this.setLinkEncryption=function(t){e.N||e.T.D("PlayerStateManager.setLinkEncryption()",function(){e.I=t,e.ln&&e.ln.X(e.I)})},this.setSignalStrength=function(){},this.Bn=function(t){var n,i;e.On=t,e.ln?(n=t.errorCode,i=t.severity,e.ln.Yn(n,i)):e._n.push(t)},this.sendError=function(n,i){e.N||e.T.D("PlayerStateManager.sendError",function(){var t=new nt(n,i);e.Bn(t)})},this.reset=function(){e.N||e.T.D("PlayerStateManager.reset",function(){e.vn=-2,e.dn=u.PlayerState.UNKNOWN,e.En={},e.pn=-1,e.cn=-1,e.an=-1,e.Rn=null,e.wn=null,e.un=null,e.On=null,e._n=[]})},this.setCDNServerIP=function(t){e.N||e.T.D("PlayerStateManager.setCDNServerIP",function(){e.ln&&e.ln.Jn(t)})},this.Xn=function(){return e.Qn},this.setDroppedFramesTotal=function(t){e.N||e.T.D("PlayerStateManager.setDroppedFramesTotal",function(){e.ln&&e.ln.Zn(t)})},this.setDroppedFramesCount=function(t){e.N||e.T.D("PlayerStateManager.setDroppedFramesCount",function(){e.ln&&e.ln.zn(t)})},this.$n=function(){return e.On},function(t,n){e.d=t,e.T=e.d.it(n)}.apply(e,arguments)};u.PlayerState={STOPPED:T.PlayerState.STOPPED,PLAYING:T.PlayerState.PLAYING,BUFFERING:T.PlayerState.BUFFERING,PAUSED:T.PlayerState.PAUSED,UNKNOWN:T.PlayerState.UNKNOWN,NOT_MONITORED:T.PlayerState.NOT_MONITORED},u.Gn=function(t){return t===u.PlayerState.STOPPED||t===u.PlayerState.PLAYING||t===u.PlayerState.BUFFERING||t===u.PlayerState.PAUSED||t===u.PlayerState.UNKNOWN||t===u.PlayerState.NOT_MONITORED},u.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},u.DEFAULT_SIGNAL_STRENGTH=1e3,u.DEFAULT_RENDERED_FRAME_RATE=-1,u.DEFAULT_BUFFER_LENGTH=-1,u.DEFAULT_PHT=-1,ht.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}};var r=ht.HttpInterface=function(){this.makeRequest=function(){},this.release=function(){}},h=ht.LoggingInterface=function(){this.consoleLog=function(){},this.release=function(){}},l=ht.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},v=ht.StorageInterface=function(){this.saveData=function(){},this.loadData=function(){},this.release=function(){}},d=ht.SystemInterface=function(){(function(t,n,i,e,s,o){Q.yn(t,new E,"TimeInterface"),Q.yn(n,new p,"TimerInterface"),Q.yn(i,new r,"HttpInterface"),Q.yn(e,new v,"StorageInterface"),Q.yn(s,new l,"MetadataInterface"),Q.yn(o,new h,"LoggingInterface"),this.ti=t,this.ni=n,this.ii=i,this.ei=e,this.si=s,this.oi=o}).apply(this,arguments),this.release=function(){this.ti&&(this.ti.release(),this.ti=null),this.ni&&(this.ni.release(),this.ni=null),this.ii&&(this.ii.release(),this.ii=null),this.ei&&(this.ei.release(),this.ei=null),this.si&&(this.si.release(),this.si=null),this.oi&&(this.oi.release(),this.oi=null)}},E=ht.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},p=ht.TimerInterface=function(){this.createTimer=function(){},this.release=function(){}},R=ht.SystemFactory=function(){var t=this;(function(t,n){if(!(t instanceof d))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.ri=t,this.ti=this.ri.ti,this.ni=this.ri.ni,this.ii=this.ri.ii,this.ei=this.ri.ei,this.si=this.ri.si,this.oi=this.ri.oi,this.R=n instanceof w?n.tt():new w}).apply(this,arguments),this.nt=function(t,n,i){this.ui=t,this.hi=n,this.ai=i},this.release=function(){this.ri.release(),this.ri=null,this.ui=null,this.R=null,this.fi=null};var n=function(){return new et(t.oi,t.ti,t.Vt(),t.fi,t.ui)};this.buildLogger=function(){return n()},this.ut=function(t,n,i){return new W(t,n,i,this)},this.ci=function(t){return new z(this.buildLogger(),this.li(),this.hi,t)},this.vi=function(){return new x(this.buildTimer(t.ai))},this.di=function(){var t=new rt(this.buildLogger(),this.ni,new J(this.buildLogger(),null,this.Vt()));return new x(t)},this.li=function(){return new it(this.buildLogger(),this.ii,this.di(),this.Vt())},this.it=function(t){return new J(this.buildLogger(),this.ci(t),this.Vt())},this.buildTime=function(){return new ot(this.ti,this.buildLogger())},this.buildTimer=function(t){return new rt(this.buildLogger(),this.ni,this.it(t))},this.Ei=function(){return new ut.Storage(this.buildLogger(),this.ei,this.vi(),this.Vt())},this.ot=function(){return new q(this.buildLogger(),this.Ei(),this.pi())},this.Ri=function(t){return new st(this.buildLogger(),this.si,this.it(t))},this.wi=function(){return new H},this.Ti=function(t,n){return new X(t,this.buildLogger(),this.li(),this.pi(),n)},this.Si=function(t,n,i,e,s){var o=this.Ti(n,e.custom["c3.domain"]);return new j(this.gi(),t,n,this.buildLogger(),this.it(s),this.buildTimer(s),o,this.wi(),this.buildTime(),this.Ni(),i,e,s)},this.Oi=function(t,n,i,e,s,o,r){o=this.Si(t,n.tt(),i,o,r);return new K(e,s,i,this.Ri(r),o,this.it(r),this.buildLogger())},this.gi=function(){return new Y},this.pi=function(){return new B},this.Ni=function(){return this.fi},this.Vt=function(){return this.R},this.fi=new Z},w=ht.SystemSettings=function(){this._i=w.Ai,Q.qt(this,"logLevel",function(){return this._i}),Q.Yt(this,"logLevel",function(t){var n;"number"!==typeof t||(n=Q.Qt(t))===t&&n>=w.LogLevel.DEBUG&&n<=w.LogLevel.ERROR&&(this._i=n)}),this.Ci=w.Ii,Q.qt(this,"allowUncaughtExceptions",function(){return this.Ci}),Q.Yt(this,"allowUncaughtExceptions",function(t){Q.yi(t)&&(this.Ci=t)}),this.mi=w.Di,Q.qt(this,"storageTimeout",function(){return this.mi}),Q.Yt(this,"storageTimeout",function(t){var n;"number"!==typeof t||(n=Q.Qt(t))===t&&(this.mi=n)}),this.Pi=w.bi,Q.qt(this,"httpTimeout",function(){return this.Pi}),Q.Yt(this,"httpTimeout",function(t){var n;"number"!==typeof t||(n=Q.Qt(t))===t&&(this.Pi=n)}),function(){}.apply(this,arguments),this.equals=function(t){return this.logLevel===t.logLevel&&this.allowUncaughtExceptions===t.allowUncaughtExceptions&&this.storageTimeout===t.storageTimeout&&this.httpTimeout===t.httpTimeout},this.tt=function(){var t=new w;return t.logLevel=this.logLevel,t.allowUncaughtExceptions=this.allowUncaughtExceptions,t.storageTimeout=this.storageTimeout,t.httpTimeout=this.httpTimeout,t}};w.LogLevel={DEBUG:T.LogLevel.DEBUG,INFO:T.LogLevel.INFO,WARNING:T.LogLevel.WARNING,ERROR:T.LogLevel.ERROR,NONE:T.LogLevel.NONE},w.Mi=w.LogLevel.DEBUG,w.Ai=w.LogLevel.NONE,w.Li=!0,w.Ii=!1,w.Di=10,w.bi=10;var i=ut.AdAnalytics=function(){var e=this;function n(t){e.Ui?(Q.yt(t)>0&&e.setAdInfo(t),e.Ui.Vi()||(e.Ui.ki(e.Fi),e.Ui.Hi(!0))):e.l}e.Bi=null,e.d=null,e.Gi=null,e.Fi=null,e.Ui=null,e.ji=null,e.Ki=null,e.Wi=null,function(t,n,i){e.Bi=t,e.Wi=i,e.d=n,i&&(e.Fi=i.xi()),e.Gi=n.buildTimer(T.version),e.Ui=new o(e.Bi,e.Gi),g.call(this)}.apply(this,arguments),this.setAdInfo=function(t){Q.yt(t)<=0?e.l:(e.l,e.Ui&&e.Ui.qi(t))},this.setAdPlayerInfo=function(t){Q.yt(t)<=0?e.l:(e.l,e.Ui&&e.Ui.qi(t))},this.reportAdMetric=function(){0!==arguments.length?1===arguments.length?e.Yi(arguments[0]):2===arguments.length?e.Yi(arguments[0],arguments[1]):3===arguments.length?e.Yi(arguments[0],arguments[1],arguments[2]):4===arguments.length&&e.Yi(arguments[0],arguments[1],arguments[2],arguments[3]):e.l},this.setCallback=function(t){e.Ui&&e.Ui.Ji(t)},this.reportAdFailed=function(t,n){e.Ui?(Q.yt(n)>0&&e.setAdInfo(n),e.Ui.Vi()?(e.l,e.reportAdError(t,a.ErrorSeverity.FATAL),e.reportAdEnded()):(e.Ui.ki(e.Fi),e.l,t=new nt(t,a.ErrorSeverity.FATAL),e.Ui.Hi(!0,t))):e.l},this.reportAdLoaded=function(t){e.l,n(t)},this.reportAdStarted=function(t){e.l,n(t)},this.reportAdEnded=function(){e.Ui?(e.l,e.Ui.Vi()&&(e.Ui.ki(null),e.Ui.Hi(!1))):e.l},this.reportAdError=function(t,n){e.Ui?(e.l,n=new nt(t,n),e.Ui.Bn(n)):e.l},this.reportAdPlayerEvent=function(t,n){if(Q.Tt(t))if(e.l,0,e.Ui)switch(t){case T.Events.USER_WAIT_STARTED:case T.Events.BUMPER_VIDEO_STARTED:e.Ui.Nt();break;case T.Events.USER_WAIT_ENDED:case T.Events.BUMPER_VIDEO_ENDED:e.Ui._t();break;default:e.Ui.Xi(t,n)}else e.l;else e.l},this.reportAdSkipped=function(){e.Ui?(e.l,e.reportAdPlayerEvent(T.Events.AD_SKIPPED),e.reportAdEnded()):e.l},this.release=function(){e.l,e.Ui&&(e.Ui.Vi()&&(e.Ui.ki(null),e.Ui.Hi(!1)),e.Ui.Ji(null),e.Ui.Qi(),e.Ui=null),"undefined"!==typeof ht.AdProxyMonitor&&e.Ki&&(ht.AdProxyMonitor.release(e.Ki),e.Ki=null)},this.setAdListener=function(t,n){t&&("undefined"!==typeof n&&"undefined"!==typeof n.convivaModule?ht.AdProxyMonitor=n.convivaModule.AdProxyMonitor:"undefined"!==typeof ConvivaModule&&(ht.AdProxyMonitor=ConvivaModule.AdProxyMonitor),"undefined"!==typeof ht.AdProxyMonitor&&(!t&&e.Ki?(ht.AdProxyMonitor.release(e.Ki),e.Ki=null):t&&e.Ki?(ht.AdProxyMonitor.release(e.Ki),e.l,e.Ki=ht.AdProxyMonitor.initConvivaDropIn(t,n,this,ht,e.d)):t&&!e.Ki&&(e.l,e.Ki=ht.AdProxyMonitor.initConvivaDropIn(t,n,this,ht,e.d))))},this.reportAdBreakStarted=function(t,n,i){e.Fi&&(e.l,e.Zi=t,e.ji=n,e.Fi.zi(t,n,i))},this.reportAdBreakEnded=function(){e.Fi&&(e.l,e.Zi=null,e.ji=null,e.Fi.$i())},this.getSessionId=function(){return e.Fi?(e.l,e.Ui.kt()):T.NO_SESSION_KEY},this.getClientId=function(){return e.Fi?(e.l,e.Ui.Ft()):null},this.getPlayerMonitor=function(){return e.Fi},this.getAdPlayerMonitor=function(){return e.Ui},this.getVideoAnalytics=function(){return e.Wi},this.getAdType=function(){return e.Fi?e.Fi.Zi:null},this.te=function(){return e.Fi?e.Fi.ji:null},i.prototype=Object.create(g.prototype),i.prototype.constructor=i},o=ut.AdPlayerMonitorImpl=function(){var s=this;s.ne=null,s.ie=null,function(t,n){N.call(this,t,n)}.apply(this,arguments),this.ki=function(t){this.ee()!==t&&(this.se(),s.ie=t||null)},this.ee=function(){return s.ie},this.oe=function(t){var n,i=this.ee(),e={};e.error=t,s.ne&&(s.re=s.ne.getPlayerStateManager(!0),s.ue(),s.re.setClientMeasureInterface(this),n=null,i&&(n=i.he()),s.ae=s.ne.createAdSession(n,s.pt,s.re,!0,e),"undefined"!==typeof t&&(s.fe(),s.Qi()))},o.prototype=Object.create(N.prototype),o.prototype.constructor=o},S=ht.Analytics={init:function(t,n,i){if(this.Bi,0,arguments.length<=0)throw new Error("customerKey must be valid");var e=null,s=null,o=null;if("string"===typeof t&&(e=t,!Q.Tt(e)))throw new Error("customerKey must be valid");arguments.length>=2&&"object"===typeof n&&(s=n),arguments.length>=3&&"object"===typeof i&&(o=i);var r=new f(e),u=new w;Q.yt(o)>0&&(o[T.GATEWAY_URL]&&(r.gatewayUrl=o[T.GATEWAY_URL]),o[T.LOG_LEVEL]>=0&&(u.logLevel=o[T.LOG_LEVEL]));t=new ht.Impl.Html5Logging,n=new ht.Impl.Html5Storage,i=new ht.Impl.Html5Http,e=new ht.Impl.Html5Timer,o=new ht.Impl.Html5Time;this.si||(this.si=new ht.Impl.Html5Metadata),s&&(s[T.CallbackFunctions.CONSOLE_LOG]&&(t.consoleLog=s[T.CallbackFunctions.CONSOLE_LOG]),s[T.CallbackFunctions.MAKE_REQUEST]&&(i.makeRequest=s[T.CallbackFunctions.MAKE_REQUEST]),s[T.CallbackFunctions.SAVE_DATA]&&(n.saveData=s[T.CallbackFunctions.SAVE_DATA]),s[T.CallbackFunctions.LOAD_DATA]&&(n.loadData=s[T.CallbackFunctions.LOAD_DATA]),s[T.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(o.getEpochTimeMs=s[T.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),s[T.CallbackFunctions.CREATE_TIMER]&&(e.createTimer=s[T.CallbackFunctions.CREATE_TIMER])),this.ri=new d(o,e,i,n,this.si,t),this.d=new R(this.ri,u),this.d.nt("Analytics",r),this.Bi=new a(r,this.d,this.ce,S.version)},release:function(){var t=0;if(this.le){for(t=0;t<this.le.length;t++){var n=this.le[t];n&&(n.release(),n.l=null,n.Gi=null,this.le.splice(t,1),t--)}this.le=null}if(this.ve){for(t=0;t<this.ve.length;t++){var i=this.ve[t];i&&(i.release(),i.l=null,i.Gi=null,this.ve.splice(t,1),t--)}this.ve=null}this.d&&(this.d.release(),this.d=null),this.Bi&&(this.Bi.release(),this.Bi=null),this.Bi=null,this.l=null,this.ri=null,this.si=null,this.ce=null},setUniqueIdentifier:function(t,n){if(!this.Bi)throw new Error(T.i);this.Bi.setUniqueIdentifier(t,n)},setUserPreferenceForDataCollection:function(t,n){if(!this.Bi)throw new Error(T.i);this.Bi.setUserPreferenceForDataCollection(t,n)},setUserPreferenceForDataDeletion:function(t){if(!this.Bi)throw new Error(T.i);this.Bi.setUserPreferenceForDataDeletion(t)},reportAppEvent:function(t,n){if(!this.Bi)throw new Error(T.i);this.Bi.sendCustomEvent(a.NO_SESSION_KEY,t,n)},reportAppBackgrounded:function(){if(!this.Bi)throw new Error(T.i);this.Bi.sendCustomEvent(a.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(!this.Bi)throw new Error(T.i);this.Bi.sendCustomEvent(a.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(t){if(!(t instanceof a))throw new Error(T.i);this.Bi=t,this.d=this.Bi.d},buildVideoAnalytics:function(){if(!this.Bi)throw new Error(T.i);var t=new C(this.Bi,this.d);return this.ve||(this.ve=[]),this.ve.push(t),t},buildAdAnalytics:function(t){if(!this.Bi)throw new Error(T.i);t=new i(this.Bi,this.d,t||null);return this.le||(this.le=[]),this.le.push(t),t},setDeviceMetadata:function(t){var n,i,e;arguments.length<=0||0===Q.yt(t)||(this.si||(this.si=new ht.Impl.Html5Metadata),t[T.DeviceMetadata.BRAND]&&(this.si.getDeviceBrand=function(){return t[T.DeviceMetadata.BRAND]}),t[T.DeviceMetadata.MANUFACTURER]&&(this.si.getDeviceManufacturer=function(){return t[T.DeviceMetadata.MANUFACTURER]}),t[T.DeviceMetadata.MODEL]&&(this.si.getDeviceModel=function(){return t[T.DeviceMetadata.MODEL]}),t[T.DeviceMetadata.TYPE]&&(this.si.getDeviceType=function(){return t[T.DeviceMetadata.TYPE]}),t[T.DeviceMetadata.VERSION]&&(this.si.getDeviceVersion=function(){return t[T.DeviceMetadata.VERSION]}),t[T.DeviceMetadata.OS_NAME]&&(this.si.getOperatingSystemName=function(){return t[T.DeviceMetadata.OS_NAME]}),t[T.DeviceMetadata.OS_VERSION]&&(this.si.getOperatingSystemVersion=function(){return t[T.DeviceMetadata.OS_VERSION]}),t[T.DeviceMetadata.CATEGORY]&&(this.si.getDeviceCategory=function(){return t[T.DeviceMetadata.CATEGORY]}),n=t[T.DeviceMetadata.SCREEN_RESOLUTION_WIDTH],Q.vt(n)&&(this.si.getScreenWidth=function(){return n.toString()}),i=t[T.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT],Q.vt(i)&&(this.si.getScreenHeight=function(){return i.toString()}),e=t[T.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR],Q.vt(e)&&(this.si.getScaleFactor=function(){return e.toString()}))},reportDeviceMetric:function(t,n){switch(this.ce||(this.ce={}),t){case T.Network.CONNECTION_TYPE:if(!Q.Tt(n))return void 0;this.ce[t]=n,this.Bi&&this.Bi.W(this.ce[T.Network.CONNECTION_TYPE]);break;case T.Network.LINK_ENCRYPTION:if(!Q.Tt(n))return void 0;this.ce[t]=n,this.Bi&&this.Bi.J(this.ce[T.Network.LINK_ENCRYPTION]);break;case T.Network.SIGNAL_STRENGTH:var i=parseInt(n,10);if(!Q.vt(i))return void 0;if(u.DEFAULT_SIGNAL_STRENGTH===i)return void 0;this.ce[t]=i,this.Bi&&this.Bi.Q(i);break;default:0}}};S.version="4.5.4";var g=ut.AnalyticsImpl=function(){var a=this;function f(){var t=!!a.Ui,n=a.getAdType(),i=a.te();return n===T.AdType.SERVER_SIDE&&i===T.AdPlayer.CONTENT?g.Ee.de:n!==T.AdType.SERVER_SIDE||i!==T.AdPlayer.SEPARATE?n===T.AdType.CLIENT_SIDE&&i===T.AdPlayer.CONTENT?g.Ee.pe:(n===T.AdType.CLIENT_SIDE&&T.AdPlayer.SEPARATE,t?g.Ee.pe:g.Ee.Re):void 0}function c(t,n,i){t=parseInt(t,10),n=parseInt(n,10);isNaN(t)&&isNaN(n)||(isNaN(t),isNaN(n),!a.Ui||i!==g.Ee.pe&&i!==g.Ee.de||a.Ui.we(t,n),!a.Fi||i!==g.Ee.Re&&i!==g.Ee.de||a.Fi.we(t,n))}function l(t,n){u.Gn(t)&&(!a.Ui||n!==g.Ee.pe&&n!==g.Ee.de||a.Ui.Te(t),(a.Fi&&n===g.Ee.Re||n===g.Ee.de)&&a.Fi.Te(t))}function v(t,n){t=parseInt(t,10);isNaN(t)||(!a.Ui||n!==g.Ee.pe&&n!==g.Ee.de||a.Ui.Se(t),!a.Fi||n!==g.Ee.Re&&n!==g.Ee.de||a.Fi.Se(t))}function d(t,n){t=parseInt(t,10);isNaN(t)||(!a.Ui||n!==g.Ee.pe&&n!==g.Ee.de||a.Ui.ge(t),!a.Fi||n!==g.Ee.Re&&n!==g.Ee.de||a.Fi.ge(t))}function E(t,n){t=parseInt(t,10);!a.Ui||n!==g.Ee.pe&&n!==g.Ee.de||a.Ui.Ne(!0,t),!a.Fi||n!==g.Ee.Re&&n!==g.Ee.de||a.Fi.Ne(!0,t)}function p(t){!a.Ui||t!==g.Ee.pe&&t!==g.Ee.de||a.Ui.Ne(!1,-1),!a.Fi||t!==g.Ee.Re&&t!==g.Ee.de||a.Fi.Ne(!1,-1)}function R(t,n){t=parseInt(t,10);isNaN(t)||(!a.Ui||n!==g.Ee.pe&&n!==g.Ee.de||a.Ui.Oe(t),!a.Fi||n!==g.Ee.Re&&n!==g.Ee.de||a.Fi.Oe(t))}function w(t,n){t=parseInt(t,10);isNaN(t)||(!a.Ui||n!==g.Ee.pe&&n!==g.Ee.de||a.Ui._e(t),!a.Fi||n!==g.Ee.Re&&n!==g.Ee.de||a.Fi._e(t))}(function(){}).apply(this,arguments),this.Yi=function(t,n,i,e){switch(0,t){case T.Playback.BITRATE:0,e===g.Ee.pe?R(n,g.Ee.pe):R(n,f());break;case T.Playback.PLAY_HEAD_TIME:e===g.Ee.pe?v(n,g.Ee.pe):v(n,f());break;case T.Playback.RESOLUTION:e===g.Ee.pe?c(n,i,g.Ee.pe):c(n,i,f());break;case T.Playback.BUFFER_LENGTH:e===g.Ee.pe?d(n,g.Ee.pe):d(n,f());break;case T.Playback.PLAYER_STATE:e===g.Ee.pe?l(n,g.Ee.pe):l(n,f());break;case T.Playback.RENDERED_FRAMERATE:e===g.Ee.pe?w(n,g.Ee.pe):w(n,f());break;case T.Playback.SEEK_STARTED:arguments.length>=2&&"CONVIVA"!==n?E(n,f()):i===g.Ee.pe?E(-1,g.Ee.pe):E(-1,f());break;case T.Playback.SEEK_ENDED:i===g.Ee.pe?p(g.Ee.pe):p(f());break;case T.Playback.CDN_IP:0,u=n,h=f(),Q.Tt(u)&&(!a.Ui||h!==g.Ee.pe&&h!==g.Ee.de||a.Ui.Ae(u),!a.Fi||h!==g.Ee.Re&&h!==g.Ee.de||a.Fi.Ae(u));break;case T.Playback.DROPPED_FRAMES_TOTAL:0,r=n,u=f(),r=parseInt(r,10),isNaN(r)||(!a.Ui||u!==g.Ee.pe&&u!==g.Ee.de||a.Ui.Ce(r),!a.Fi||u!==g.Ee.Re&&u!==g.Ee.de||a.Fi.Ce(r));break;case T.Playback.DROPPED_FRAMES_COUNT:0,s=n,o=f(),s=parseInt(s,10),isNaN(s)||(!a.Ui||o!==g.Ee.pe&&o!==g.Ee.de||a.Ui.Ie(s),!a.Fi||o!==g.Ee.Re&&o!==g.Ee.de||a.Fi.Ie(s));break;default:r=t,o=n,s=f(),!void(Q.Tt(r)&&o&&(!a.Ui||s!==g.Ee.pe&&s!==g.Ee.de||a.Ui.Ht(r,o),!a.Fi||s!==g.Ee.Re&&s!==g.Ee.de||a.Fi.Ht(r,o)))}var s,o,r,u,h}};ut.AnalyticsImpl.Ee={pe:1,Re:2,de:3};var e=ut.PlayerMonitor=function(){var e=this;this.ye=null,this.me=null,this.pt=null,this.De=null,this.dn=u.PlayerState.UNKNOWN,this.Pe=-1,this.be=-1,this._n=[],this.Me=null,this.Le=null,this.Ue=-2,this.pn=-1,this.y=u.DEFAULT_SIGNAL_STRENGTH,this.Ve=null,this.Qn=null,this.I=null,this.C=null,this.Gi=null,this.ke=null,this.Fe=null,this.He=null,this.Be=null,this.Zi=null,this.ji=null,function(t){e.Gi=t}.apply(this,arguments),this.Ge=function(){return e.dn},this.Te=function(t){e.dn!==t&&(e.se(),e.dn=t,e.je())},this.Ke=function(){return e.We},this.xe=function(){return e.qe},this.Ne=function(t,n){e.se(),e.We=t,e.qe=n,e.Ye()},this.Je=function(){return e.Pe},this.Se=function(t){e.Pe=t},this.Xe=function(){return e.be},this.ge=function(t){e.be=t},this.Qe=function(){return e.Ue},this.Oe=function(t){e.Ue!==t&&(e.Ue=t,e.je())},this.Ze=function(){return e.pn},this._e=function(t){e.pn=t},this.ze=function(){return e.Ve},this.Ae=function(t){e.Ve=t,e.je()},this.Xn=function(){return e.Qn},this.Ce=function(t){e.Qn=t,e.je()},this.Ie=function(t){e.$e(t)},this.ts=function(){return e.y},this.ns=function(){return e.es},this.ss=function(){return e.os},this.we=function(t,n){t<0&&(t=0),n<0&&(n=0),e.es===t&&e.os===n||(e.es=t,e.os=n,e.je())},this.rs=function(){return e.me},this.us=function(){e.rs()&&(e.pt=new c,e.De={},e.Fe={},e.hs())},this.as=function(t){(e.me||t)&&(this.se(),e.me&&(e.me=null,e.us()),t&&(e.me=Q.fs(e.me,t),e.us()))},this.qi=function(t){if(t)if(e.pt){var n,i=!1;for(n in t)if(e.pt[n]!==t[n]){i=!0;break}i&&(e.se(),e.me=Q.fs(t),e.hs())}else e.as(t)},this.Ji=function(t){t?e.He!==t&&(e.He=t,e.cs()):(e.He=null,e.fe())},this.se=function(){e.ls||e.He&&(e.ls=!0,e.He(),e.ls=!1)},this.Vi=function(){return e.ye},this.Hi=function(t,n){e.ye!==t&&(e.se(),e.ye&&(e.vs(),e.fe(),e.Qi()),e.ye=t,e.ye&&e.oe(n))},this.ds=function(){return e.Me},this.Es=function(){return e.Le||null},this.ps=function(){return e._n},this.Rs=function(){e._n=[]},this.Bn=function(t){this.se(),e._n.push(t),e.Yn()},this.Xi=function(t,n){e.se(),e.Me=t,e.Le=n,e.ws()},this.Ts=function(){e.se()},this.cs=function(){e.fe(),e.ke=e.Gi.create(e.Ts,1e3,"PlayerMonitor.update")},this.fe=function(){e.ke&&(e.ke(),e.ke=null)},this.zi=function(t,n,i){e.Be=i,e.Zi=t,e.Ss(),e.ji=n,e.Zi&&T.AdType.CLIENT_SIDE===e.Zi&&(e.dn=T.PlayerState.UNKNOWN,e.gs(e.Zi,n,i?i[T.POD_POSITION]:null))},this.$i=function(){e.Zi&&T.AdType.CLIENT_SIDE===e.Zi&&(e.Ns(),e.dn=T.PlayerState.UNKNOWN),e.Os(),e.Zi=null,e.ji=null},this._s=function(){return e.Be},this.As=function(){return e.Zi},this.getContentMetadata=function(){return this.pt},this.Qi=function(){this.ye=null,this.me=null,this.pt=null,this.De=null,this.dn=u.PlayerState.UNKNOWN,this.Pe=-1,this.be=-1,this._n=[],this.Me=null,this.Le=null,this.Ue=-2,this.pn=-1,this.y=u.DEFAULT_SIGNAL_STRENGTH,this.Ve=null,this.Qn=null,this.I=null,this.C=null,this.Gi=null,this.ke=null,this.Fe=null,this.He=null,this.Be=null,this.Zi=null,this.ji=null,e.re=null,e.ae=a.NO_SESSION_KEY}},N=ut.PlayerMonitorImpl=function(){var r=this;r.ne=null,r.re=null,r.ae=a.NO_SESSION_KEY,function(t,n){e.call(this,n),r.ne=t}.apply(this,arguments),this.getPHT=function(){return r.Je()},this.getBufferLength=function(){return r.Xe()},this.getRenderedFrameRate=function(){return r.Ze()},this.getSignalStrength=function(){return r.ts()},this.Ye=function(){r.re&&r.Cs!==a.NO_SESSION_KEY&&(r.Ke()?r.re.setPlayerSeekStart(r.xe()):r.re.setPlayerSeekEnd())},this.je=function(){r.re&&(r.re.setPlayerState(r.Ge()),r.Qe()>0&&r.re.setBitrateKbps(r.Qe()),r.ns()>0&&r.re.setVideoResolutionWidth(r.ns()),r.ss()>0&&r.re.setVideoResolutionHeight(r.ss()),r.ze()&&r.re.setCDNServerIP(r.ze()),Q.vt(r.Xn())&&r.re.setDroppedFramesTotal(r.Xn()))},this.gt=function(){r.ae!==a.NO_SESSION_KEY&&r.ne&&r.ne.updateContentMetadata(r.ae,r.pt)},this.ue=function(){if(r.re){var t,n,i;r.Fe&&Q.yt(r.Fe)>0&&(r.Fe[T.MODULE_NAME]&&r.Fe[T.MODULE_VERSION]&&(t=r.Fe[T.MODULE_NAME],n=r.Fe[T.MODULE_VERSION],Q.Tt(t)&&Q.Tt(n)&&r.re.setModuleNameAndVersion(t,n)),r.Fe[T.FRAMEWORK_NAME]&&(i=r.Fe[T.FRAMEWORK_NAME],Q.Tt(i)&&r.re.setPlayerType(i)),r.Fe[T.FRAMEWORK_VERSION]&&(i=r.Fe[T.FRAMEWORK_VERSION],Q.Tt(i)&&r.re.setPlayerVersion(i)));var e=r.ps();r.Rs();for(var s=0;s<e.length;s++){var o=e[s];r.re.Bn(o)}}},this.Ns=function(){r.re&&r.ae!==a.NO_SESSION_KEY&&(r.je(),this.Is())},this._t=function(){r.re&&r.ae!==a.NO_SESSION_KEY&&(r.je(),r.ne.At(r.ae))},this.Is=function(){r.ne&&r.ae!==T.NO_SESSION_KEY&&r.ne.adEnd(r.ae)},this.gs=function(t,n,i){var e;r.re&&r.ae!==T.NO_SESSION_KEY&&(e=null,T.AdType.CLIENT_SIDE===t?e=a.AdStream.SEPARATE:T.AdType.SERVER_SIDE===t&&(e=a.AdStream.CONTENT),r.ys(e,n,i))},this.Nt=function(){r.re&&r.ae!==T.NO_SESSION_KEY&&r.ne.Ot(r.ae)},this.ys=function(t,n,i){r.ne&&r.ae!==T.NO_SESSION_KEY&&r.ne.adStart(r.ae,t,n,i)},this.oe=function(){if(r.ne){r.re=r.ne.getPlayerStateManager(!0),r.ue(),r.re.setClientMeasureInterface(this);try{var t;r.pt&&r.pt.custom&&!r.pt.custom[T.UTM_TRACKING_URL]&&(Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var e,s=[],o=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)r in n&&(e=n[r],t.call(o,e,r,n)&&s.push(e));return s}),""!==(t=Q.ms().split("?").join("").split("&").filter(function(t){return 2===t.split("=").length&&t.split("=")[0].toLowerCase().indexOf("utm_")>=0}).join("&"))&&(r.pt.custom[T.UTM_TRACKING_URL]=t))}catch(t){r.l.error("PlayerMonitorImpl _createSession : "+t)}r.ae=r.ne.createSession(r.pt,r.re,!0)}},this.vs=function(){r.ne&&(r.re&&(r.re.setPlayerState(T.PlayerState.STOPPED),r.re=null),r.ae!==T.NO_SESSION_KEY&&(r.ne.cleanupSession(r.ae),r.ae=T.NO_SESSION_KEY))},this.Yn=function(){if(r.ne&&r.ae!==a.NO_SESSION_KEY){var t=r.ps();r.Rs();for(var n=0;n<t.length;n++){var i=t[n];r.ne.reportError(r.ae,i.Ds(),i.Ps())}}},this.ws=function(){r.ae!==a.NO_SESSION_KEY&&r.ne&&r.ne.sendCustomEvent(r.ae,r.ds(),r.Es())},this.hs=function(){var t,n=r.rs(),i=!1,e=!1;for(t in n){var s=n[t];if(Q.Tt(t)&&null!==s&&void 0!==s)switch(t){case T.STREAM_URL:e=!0,r.pt.streamUrl=s;break;case T.ASSET_NAME:e=!0,r.pt.assetName=s;break;case T.DEFAULT_RESOURCE:e=!0,r.pt.defaultResource=s;break;case T.VIEWER_ID:e=!0,r.pt.viewerId=s;break;case T.PLAYER_NAME:e=!0,r.pt.applicationName=s;break;case T.DURATION:e=!0,r.pt.duration=s;break;case T.IS_LIVE:e=!0,r.pt.streamType=s;break;case T.ENCODED_FRAMERATE:e=!0,r.pt.encodedFrameRate=s;break;case T.MODULE_NAME:case T.MODULE_VERSION:case T.FRAMEWORK_NAME:case T.FRAMEWORK_VERSION:i=!0,r.Fe[t]=s;break;case T.APPLICATION_VERSION:default:e=!0,r.pt.custom[t]=s}}i&&this.ue(),e&&this.gt()},this.Ss=function(){this.bs(T.Events.POD_START)},this.Os=function(){this.bs(T.Events.POD_END)},this.bs=function(t){var n,i,e,s;r.ne&&r.ae!==T.NO_SESSION_KEY&&(i={},(n=this._s())&&((e=n[T.POD_POSITION])&&(i[T.POD_POSITION]=e),(e=n[T.POD_INDEX])&&(i[T.POD_INDEX]=e+""),t!==T.Events.POD_START||(s=n[T.POD_DURATION])&&(i[T.POD_DURATION]=s+"")),(s=this.As())&&(i[T.AD_TYPE]=s),r.ne.sendCustomEvent(r.ae,t,i))},this.$e=function(t){r.re.setDroppedFramesCount(t)},this.Ms=function(t){this.ae===T.NO_SESSION_KEY&&t!==T.NO_SESSION_KEY&&(this.ae=t)},this.he=function(){return this.ae},this.kt=function(){return r.ne.getSessionId(this.ae)},this.Ft=function(){return r.ne.getClientId(this.ae)},this.Ht=function(t,n){r.ne.Ht(this.ae,t,n)},N.prototype=Object.create(e.prototype),N.prototype.constructor=N};ht.Impl=ht.Impl||{},ht.Impl.Html5Http=function(){(function(){}).apply(this,arguments),this.makeRequest=function(){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(t,n,i,e,s,o){var r=new XMLHttpRequest;return r.open(t,n,!0),e&&r.overrideMimeType&&(r.overrideMimeType=e),e&&r.setRequestHeader&&r.setRequestHeader("Content-Type",e),s>0&&(r.timeout=s,r.ontimeout=function(){r.ontimeout=r.onreadystatechange=null,o&&o(!1,"timeout after "+s+" ms")}),r.onreadystatechange=function(){4===r.readyState&&(r.ontimeout=r.onreadystatechange=null,200===r.status?o&&o(!0,r.responseText):o&&o(!1,"http status "+r.status))},r.send(i),null},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Logging=function(){(function(){}).apply(this,arguments),this.consoleLog=function(t,n){"undefined"!==typeof console&&(console.log&&n===w.LogLevel.DEBUG||n===w.LogLevel.INFO?console.log(t):console.warn&&n===w.LogLevel.WARNING?console.warn(t):console.error&&n===w.LogLevel.ERROR&&console.error(t))},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Metadata=function(){(function(){}).apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!==typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Storage=function(){(function(){}).apply(this,arguments),this.saveData=function(t,n,i,e){var s=t+"."+n;try{localStorage.setItem(s,i),e(!0,null)}catch(t){e(!1,t.toString())}},this.loadData=function(t,n,i){var e=t+"."+n;try{i(!0,localStorage.getItem(e))}catch(t){i(!1,t.toString())}},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Time=function(){(function(){}).apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Timer=function(){(function(){}).apply(this,arguments),this.createTimer=function(t,n){var i=setInterval(t,n);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}};var n,s,O,_,A,C=ut.VideoAnalytics=function(){var s=this;s.Bi=null,s.d=null,s.Gi=null,s.Fi=null,s.Ki=null,this.release=function(){s.l,s.Fi&&s.Fi.Vi()&&s.Fi.Hi(!1),"undefined"!==typeof ht.ProxyMonitor&&s.Ki&&(ht.ProxyMonitor.release(s.Ki),s.Ki=null),s.Fi&&(s.Fi.Ji(null),s.Fi.Qi(),s.Fi=null),s.Gi=null},function(t,n){s.Bi=t,s.d=n,s.Gi=n.buildTimer(T.version),s.Fi=new N(s.Bi,s.Gi),g.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(t){s.l,s.Fi&&(Q.yt(t)>0&&s.setContentInfo(t),s.Fi.Vi()||s.Fi.Hi(!0))},this.reportPlaybackEnded=function(){s.l,s.Fi&&s.Fi.Vi()&&(s.Fi.Hi(!1),"undefined"!==typeof ht.ProxyMonitor&&s.Ki&&(ht.ProxyMonitor.release(s.Ki),s.Ki=null),s.Fi.Ji(null))},this.reportPlaybackFailed=function(t,n){s.Fi&&(Q.yt(n)>0&&s.setContentInfo(n),s.Fi.Vi()||s.Fi.Hi(!0),s.l,s.reportPlaybackError(t,a.ErrorSeverity.FATAL),s.reportPlaybackEnded())},this.setContentInfo=function(t){Q.yt(t)<=0||s.Fi&&(s.l,s.Fi.qi(t))},this.setPlayerInfo=function(t){Q.yt(t)<=0||s.Fi&&(s.l,s.Fi.qi(t))},this.reportPlaybackMetric=function(){0!==arguments.length&&(1===arguments.length?s.Yi(arguments[0]):2===arguments.length?s.Yi(arguments[0],arguments[1]):3===arguments.length?s.Yi(arguments[0],arguments[1],arguments[2]):4===arguments.length&&s.Yi(arguments[0],arguments[1],arguments[2],arguments[3]))},this.reportPlaybackError=function(t,n){s.Fi&&Q.Tt(t)&&(s.l,n=new nt(t,n),s.Fi.Bn(n))},this.reportPlaybackEvent=function(t,n){if(Q.Tt(t)&&s.Fi&&(s.l,s.Fi))switch(t){case T.Events.USER_WAIT_STARTED:case T.Events.BUMPER_VIDEO_STARTED:s.Fi.Nt();break;case T.Events.USER_WAIT_ENDED:case T.Events.BUMPER_VIDEO_ENDED:s.Fi._t();break;default:s.Fi.Xi(t,n)}},this.setCallback=function(t){s.l,s.Fi&&s.Fi.Ji(t)},this.reportAdBreakStarted=function(t,n,i){s.Fi&&(s.l,s.Fi.zi(t,n,i))},this.reportAdBreakEnded=function(){s.Fi&&(s.l,s.Fi.$i())},this.setPlayer=function(t,n){var i,e;void 0!==t&&(n&&(i=n[T.CONVIVA_MODULE],e=n[T.MEDIA_ELEMENT]),"undefined"!==typeof i?ht.ProxyMonitor=i.ProxyMonitor:"undefined"!==typeof ConvivaModule&&(ht.ProxyMonitor=ConvivaModule.ProxyMonitor),"undefined"!==typeof ht.ProxyMonitor&&(s.l,!t&&s.Ki?(ht.ProxyMonitor.release(s.Ki),s.Ki=null):t?(s.Ki&&ht.ProxyMonitor.release(s.Ki),s.l,s.Ki="undefined"!==typeof e?ht.ProxyMonitor.initConvivaDropIn(t,e,s.d,this,ht):ht.ProxyMonitor.initConvivaDropIn(t,s.d,this,ht)):t||"undefined"===typeof e||(s.Ki=ht.ProxyMonitor.initConvivaDropIn(t,e,s.d,this,ht))))},this.setAdAnalytics=function(t){t?s.getAdType()&&(s.getAdType()===T.AdType.SERVER_SIDE?s.Ui=t.getAdPlayerMonitor():s.getAdType()===T.AdType.CLIENT_SIDE&&s.l):s.Ui=null},this.configureExistingSession=function(t){t!==T.NO_SESSION_KEY&&s.Fi&&(s.l,s.Fi.Ms(t))},this.getSessionId=function(){return s.Fi?(s.l,s.Fi.kt()):T.NO_SESSION_KEY},this.getClientId=function(){return s.Fi?(s.l,s.Fi.Ft()):null},this.xi=function(){return s.l,this.Fi},this.getAdType=function(){return s.Fi?s.Fi.Zi:null},this.te=function(){return s.Fi?s.Fi.ji:null},C.prototype=Object.create(g.prototype),C.prototype.constructor=C};function I(t){throw{name:"SyntaxError",message:t,at:n,text:O}}function y(t){return t&&t!==s&&I("Expected '"+t+"' instead of '"+s+"'"),s=O.charAt(n),n+=1,s}function t(){var t,n="";for("-"===s&&y(n="-");s>="0"&&s<="9";)n+=s,y();if("."===s)for(n+=".";y()&&s>="0"&&s<="9";)n+=s;if("e"===s||"E"===s)for(n+=s,y(),"-"!==s&&"+"!==s||(n+=s,y());s>="0"&&s<="9";)n+=s,y();if(t=+n,!isNaN(t))return t;I("Bad number")}function m(){var t,n,i,e="";if('"'===s)for(;y();){if('"'===s)return y(),e;if("\\"===s)if(y(),"u"===s){for(n=i=0;n<4&&(t=parseInt(y(),16),isFinite(t));n+=1)i=16*i+t;e+=String.fromCharCode(i)}else{if("string"!==typeof _[s])break;e+=_[s]}else e+=s}I("Bad string")}function D(){for(;s&&s<=" ";)y()}ut.JsonParse=(_={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},A=function(){switch(D(),s){case"{":return function(){var t,n={};if("{"===s){if(y("{"),D(),"}"===s)return y("}"),n;for(;s;){if(t=m(),D(),y(":"),Object.hasOwnProperty.call(n,t)&&I('Duplicate key "'+t+'"'),n[t]=A(),D(),"}"===s)return y("}"),n;y(","),D()}}I("Bad object")}();case"[":return function(){var t=[];if("["===s){if(y("["),D(),"]"===s)return y("]"),t;for(;s;){if(t.push(A()),D(),"]"===s)return y("]"),t;y(","),D()}}I("Bad array")}();case'"':return m();case"-":return t();default:return(s>="0"&&s<="9"?t:function(){switch(s){case"t":return y("t"),y("r"),y("u"),y("e"),!0;case"f":return y("f"),y("a"),y("l"),y("s"),y("e"),!1;case"n":return y("n"),y("u"),y("l"),y("l"),null}I("Unexpected '"+s+"'")})()}},function(t,r){return O=t,n=0,s=" ",t=A(),D(),s&&I("Syntax error"),"function"===typeof r?function t(n,i){var e,s,o=n[i];if(o&&"object"===typeof o)for(e in o)Object.hasOwnProperty.call(o,e)&&(void 0!==(s=t(o,e))?o[e]=s:delete o[e]);return r.call(n,i,o)}({"":t},""):t});var P,b,M,L,U,V=ut.JSON2={};function k(t){return t<10?"0"+t:t}function F(t){return P.lastIndex=0,P.test(t)?'"'+t.replace(P,function(t){var n=L[t];return"string"===typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!==typeof V.stringify&&(P=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,L={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},V.stringify=function(t,n,i){var e;if(M=b="","number"===typeof i)for(e=0;e<i;e+=1)M+=" ";else"string"===typeof i&&(M=i);if((U=n)&&"function"!==typeof n&&("object"!==typeof n||"number"!==typeof n.length))throw new Error("JSON2.stringify");return function t(n,i){var e,s,o,r,u,h=b,a=i[n];switch(a&&"object"===typeof a&&"function"===typeof a.toJSON&&(a=a.toJSON(n)),"function"===typeof U&&(a=U.call(i,n,a)),typeof a){case"string":return F(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(b+=M,u=[],Object.prototype.toString.apply(a)===Object.prototype.toString.apply([])){for(r=a.length,e=0;e<r;e+=1)u[e]=t(e,a)||"null";return o=0===u.length?"[]":b?"[\n"+b+u.join(",\n"+b)+"\n"+h+"]":"["+u.join(",")+"]",b=h,o}if(U&&"object"===typeof U)for(r=U.length,e=0;e<r;e+=1)"string"===typeof U[e]&&(o=t(s=U[e],a))&&u.push(F(s)+(b?": ":":")+o);else for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o=t(s,a))&&u.push(F(s)+(b?": ":":")+o);return o=0===u.length?"{}":b?"{\n"+b+u.join(",\n"+b)+"\n"+h+"}":"{"+u.join(",")+"}",b=h,o}}("",{"":t})});var H=ut.CwsProtocol=function(){this.Ls=function(t,n,i,e){return e.seq=t,e.st=n,e.t=i,e},this.Us=function(t,n){var i=H.Vs;return this.Ls(t,n,i,{})}};H.version="2.6",H.ks="/0/wsg",H.M="0",H.Fs=!1,H.Hs=2,H.Bs=-1,H.Gs=-1,H.js=1e3,H.Ks="sdk.js.1",H.Ws="CwsStateChangeEvent",H.xs="CwsErrorEvent",H.Vs="CwsSessionEndEvent",H.qs="CwsCustomEvent",H.Ys="CwsSeekEvent",H.Js="CwsDataSamplesEvent",H.Xs="ok",H.Qs="err",H.Zs="clid",H.zs="cfg",H.$s="evs",H.no="maxhbinfos",H.io="slg",H.eo="hbi",H.so="gw",H.oo="fp",H.ro="csi_en",H.uo="CwsSessionHb",H.ho="t",H.ao="st",H.fo="sst",H.co="lv",H.lo="seq",H.vo="cid",H.do="clid",H.Eo="clv",H.po="pver",H.Ro="iid",H.wo="sid",H.To="vid",H.So="an",H.go="pn",H.No="tags",H.Oo="sf",H._o="evs",H.Ao="lg",H.Co="hbinfos",H.Io="sdk",H.yo="pj",H.mo="ps",H.Do="br",H.Po="cl",H.bo="efps",H.Mo="afps",H.Lo="rfpstot",H.Uo="rfpscnt",H.Vo="rs",H.ko="pht",H.Fo="bl",H.Ho="url",H.Bo="caps",H.Go="pm",H.jo="w",H.Ko="h",H.Wo="ct",H.xo="le",H.qo="dftot",H.Yo="dfcnt",H.Jo="ss",H.Xo="csi_n",H.Qo="csi_t",H.Zo="csi_l",H.zo="csi_v",H.$o="csi_c",H.tr="sch",H.nr="br",H.ir="brv",H.er="dvb",H.sr="dvma",H.or="dvm",H.rr="dvt",H.ur="dvv",H.hr="sw",H.ar="sh",H.fr="scf",H.cr="fw",H.lr="fwv",H.vr="cc",H.dr="mn",H.Er="mv",H.pr="os",H.Rr="osv",H.wr="cat",H.Tr="caps",H.Sr="t",H.gr="seq",H.Nr="st",H.Or="act",H._r="skto",H.Ar="err",H.Cr="ft",H.Ir="new",H.yr="old",H.mr="name",H.Dr="attr",H.Pr="seq",H.br="err",H.Mr="rtt",H.Lr="ad",H.Ur="csi",H.Vr=function(t){switch(t){case u.PlayerState.STOPPED:return H.kr;case u.PlayerState.PLAYING:return H.Fr;case u.PlayerState.BUFFERING:return H.Hr;case u.PlayerState.PAUSED:return H.Br;case u.PlayerState.NOT_MONITORED:return H.Gr;default:return H.jr}},H.kr=1,H.Fr=3,H.Hr=6,H.Br=12,H.Gr=98,H.jr=100,H.Kr={Wr:0,ct:1,xr:2,qr:4},H.Yr={Jr:0};var B=ut.LibJSONInterface=function(){this.Xr=function(t){var n=null;try{n=V.stringify(t)}catch(t){return n}return n},this.Qr=function(t){var n=null;try{n=ut.JsonParse(t)}catch(t){return n}return Q.Zr(n)||(n=null),n}},G=ut.CwsHeartbeat=function(){this.zr={},function(){}.apply(this,arguments),this.get=function(){return this.zr},this.$r=function(t,n){this.zr[t]=n},this.tu=function(t,n,i){this.zr[t]||(this.zr[t]={}),this.zr[t][n]=i},this.nu=function(t){this.$r(H.ho,t)},this.iu=function(t){this.$r(H.ao,t)},this.eu=function(t){this.$r(H.fo,t)},this.su=function(t){this.$r(H.co,t)},this.ou=function(t){this.$r(H.lo,t)},this.ru=function(t){this.$r(H.vo,t)},this.uu=function(t){this.$r(H.do,t)},this.hu=function(t){this.$r(H.Eo,t)},this.au=function(t){this.$r(H.po,t)},this.fu=function(t){this.$r(H.Tr,t)},this.cu=function(t){this.$r(H.wo,t)},this.lu=function(t){this.$r(H.Ro,t)},this.vu=function(t){this.$r(H.To,t)},this.du=function(t){this.$r(H.So,t)},this.Eu=function(t){this.$r(H.go,t)},this.pu=function(t){this.$r(H.No,t)},this.Ru=function(t){this.$r(H.Oo,t)},this.wu=function(t){this.$r(H.Bo,t)},this.Tu=function(t){this.$r(H._o,t)},this.Su=function(t){this.$r(H.Io,t)},this.gu=function(t){this.$r(H.Ao,t)},this.Nu=function(t){this.$r(H.Co,t)},this.Te=function(t){this.$r(H.mo,t)},this.Ou=function(t){this.$r(H.yo,t)},this._u=function(t){this.$r(H.Po,t)},this.Au=function(t){this.$r(H.Do,t)},this.Cu=function(t){this.$r(H.Vo,t)},this.Iu=function(t){this.$r(H.bo,t)},this.yu=function(t){this.$r(H.Mo,t)},this.mu=function(t){this.$r(H.Uo,t)},this.Du=function(t){this.$r(H.Lo,t)},this.Pu=function(t){this.tu(H.Go,H.tr,t)},this.bu=function(t){this.tu(H.Go,H.nr,t)},this.Mu=function(t){this.tu(H.Go,H.ir,t)},this.Lu=function(t){this.tu(H.Go,H.er,t)},this.Uu=function(t){this.tu(H.Go,H.sr,t)},this.Vu=function(t){this.tu(H.Go,H.or,t)},this.ku=function(t){this.tu(H.Go,H.rr,t)},this.Fu=function(t){this.tu(H.Go,H.ur,t)},this.Hu=function(t){this.tu(H.Go,H.cr,t),this.$r(H.cr,t)},this.Bu=function(t){this.tu(H.Go,H.lr,t),this.$r(H.lr,t)},this.Gu=function(t){this.tu(H.Go,H.pr,t.toUpperCase())},this.ju=function(t){this.tu(H.Go,H.Rr,t)},this.Ku=function(t){this.tu(H.Go,H.wr,t)},this.Wu=function(t){this.tu(H.Go,H.hr,t)},this.xu=function(t){this.tu(H.Go,H.ar,t)},this.qu=function(t){this.tu(H.Go,H.fr,t)},this.Yu=function(t){this.$r(H.qo,t)},this.$e=function(t){this.$r(H.Yo,t)},this.Ju=function(t){this.$r(H.ko,t)},this.Xu=function(t){this.$r(H.Fo,t)},this.Qu=function(t){this.$r(H.Ho,t)},this.Zu=function(t){this.$r(H.jo,t)},this.zu=function(t){this.$r(H.Ko,t)},this.$u=function(t){this.$r(H.Wo,t)},this.th=function(t){this.$r(H.xo,t)},this.nh=function(){this.$r(H.Lr,!0)},this.ih=function(t){this.$r(H.Jo,t)},this.setModuleName=function(t){this.tu(H.vr,H.dr,t)},this.eh=function(t){this.tu(H.vr,H.Er,t)},this.sh=function(t){this.$r(H.Ur,t)},this.oh=function(t){t&&this.$r(H.Xo,t)},this.rh=function(t){t&&this.$r(H.Qo,t)},this.uh=function(t){t&&this.$r(H.Zo,t)},this.hh=function(t){t&&this.$r(H.zo,t)},this.ah=function(t){t&&this.$r(H.$o,t)}},j=ut.CwsSession=function(){var p=this;p.fh=null,p.pt=null,p.ch=0,p.lh=0,p.vh=H.Kr.Wr,p.dh=H.Yr.Jr,p.Eh=[],p.ph=-1,p.vn=-2,p.Qn=-1,p.Rh=-1,p.wh=null,p.dn=u.PlayerState.UNKNOWN,p.cn=-1,p.Th=-1,p.un=null,p.gn=-1,p.Nn=-1,p.re=null,p.in=null,p.on=null,p.Sh=null,p.gh=null,p.Nh={},p.Oh=null,p._h=null,p.Ah=null,p.Ch=null,p.Ih=null,p.yh=null,p.mh=null,p.Dh=null,p.Ph=null,p.bh=null,p.Mh=null,p.Lh=null,p.Uh=null,p.Vh=null,p.kh=null,p.Tn=null,p.Sn=null,p.C=null,p.I=null,p.Ve=null,p.Fh=null,p.Hh=!1,p.Bh=!1,p.Gh=!1,p.jh=!1,p.Kh=null,p.Wh=1e3,p.xh=0,p.qh=0,p.Yh={},p.O={},p.Jh=!1,p.Xh=null,p.Qh=null,p.Zh=null,p.zh=null,p.$h=null,p.ta=null,p.na=12e4,p.ia=H.Fs,p.ea=!1,p.sa=null,p.ai=null,function(t,n,i,e,s,o,r,u,h,a,f,c,l){this.oa=t,this.Bi=n,this.hi=i,this.l=e,this.l.setModuleName("CwsSession"),this.T=s,this.Gi=o,this.ra=r,this.ua=u,this.ha=h,this.fi=a,this.aa=f,this.pt=c,this.pt&&(p.cn=this.pt.encodedFrameRate,p.un=this.pt.streamUrl,p.Th=this.pt.duration),this.aa&&(p.sa=p.aa.get(q.P)),p.ai=l}.apply(this,arguments),this.ht=function(){this.aa=null,this.fi=null,this.w=null,this.ha=null,this.ua=null,this.ra=null,this.Gi=null,this.T=null,this.l=null,this.hi=null,this.Bi=null,this.oa.fa(),this.oa=null,this.Fh=null,this.Gh=!0},this.ca=function(t){this.la=t,this.va=this.la.va,this.l.cu(this.la.g),this.ch=this.ha.current(),this.da()||this.Ea()?(this.vh+=j.pa,p.l.info("start(): assetName="+p.pt.assetName)):p.l.info("start()"+p.Ra())},this.wa=function(){this.jh=!0},this.Ta=function(){this.l.debug("initialize()"),(this.da()||this.Ea()||this.Sa())&&(p.ga(),p.Na(),p.Oa(),(this.da()||this.Ea())&&p._a())},this.Aa=function(){this.l.debug("end(): schedule the last hb before session cleanup"+p.Ra()),this.Ca(),this.Ia(),this.ya(),this.ma()},this.Da=function(){this.jh||(this.ma(),this.Pa())},this.bu=function(t){var n=p.Oh;n!==t&&t&&(p.l.debug("Change browserName from "+n+" to "+t),p.Oh=t)},this.Mu=function(t){var n=p._h;n!==t&&t&&(p.l.debug("Change browserVersion from "+n+" to "+t),p._h=t)},this.Lu=function(t){var n=p.Ah;n!==t&&t&&(p.l.debug("Change deviceBrand from "+n+" to "+t),p.Ah=t)},this.Uu=function(t){var n=p.Ch;n!==t&&t&&(p.l.debug("Change deviceManufacturer from "+n+" to "+t),p.Ch=t)},this.Vu=function(t){var n=p.Ih;n!==t&&t&&(p.l.debug("Change deviceModel from "+n+" to "+t),p.Ih=t)},this.ku=function(t){var n=p.yh;n!==t&&t&&(p.l.debug("Change deviceType from "+n+" to "+t),p.yh=t)},this.Fu=function(t){var n=p.mh;n!==t&&t&&(p.l.debug("Change deviceVersion from "+n+" to "+t),p.mh=t)},this.Gu=function(t){var n=p.bh;n!==t&&t&&(p.l.debug("Change operatingSystemName from "+n+" to "+t),p.bh=t)},this.ju=function(t){var n=p.Mh;n!==t&&t&&(p.l.debug("Change operatingSystemVersion from "+n+" to "+t),p.Mh=t)},this.Ku=function(t){var n=p.Lh;n!==t&&t&&(p.l.debug("Change deviceCategory from "+n+" to "+t),p.Lh=t)},this.Wu=function(t){var n=p.Uh;n!==t&&t&&(p.l.debug("Change screenWidth from "+n+" to "+t),p.Uh=t)},this.xu=function(t){var n=p.Vh;n!==t&&t&&(p.l.debug("Change screenHeight from "+n+" to "+t),p.Vh=t)},this.qu=function(t){var n=p.Lh;n!==t&&t&&(p.l.debug("Change scaleFactor from "+n+" to "+t),p.kh=t)},this.ba=function(){return p.Dh},this.Hu=function(t){var n=p.Dh;n!==t&&t&&(p.l.debug("Change frameworkName from "+n+" to "+t),p.Dh=t)},this.Ma=function(){return p.Ph},this.Bu=function(t){var n=p.Ph;n!==t&&t&&(p.l.debug("Change frameworkVersion from "+n+" to "+t),p.Ph=t)},this.Qu=function(t){var n;p.pt.streamUrl||(n=p.un)!==t&&t&&(p.l.debug("Change stream url from "+n+" to "+t),p.un=t)},this.La=function(){p.Ia(),p.ea||(p.Ua(),p.ta=p.Gi.create(p.Ua,p.na,"CwsSession.startCdnTimer"),p.l.debug("fetching cdn ip timer started"))},this.Ia=function(){p.ta&&(p.ta(),p.Va(null,null,null,null,null),p.ta=null)},this.Ua=function(){p.l.debug("detectCDNServerIp(): For "+p.un),p.ia?p.ka():p.Ia()},this.ka=function(){try{var t;"function"===typeof XMLHttpRequest||"object"===typeof XMLHttpRequest?((t=new XMLHttpRequest).open("HEAD",p.un,!0),t.setRequestHeader("Pragma","akamai-x-cache-on"),t.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(this.getAllResponseHeaders().indexOf("x-cache")>=0||this.getAllResponseHeaders().indexOf("X-Cache")>=0)?p.Va("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):p.Va("null","header","null","null",""+this.status))},t.send()):p.l.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){p.l.info("Exception caught in makeAkamaiHeadRequest")}},this.Va=function(t,n,i,e,s){var o={},r={};p.Xh!==t&&(null!==p.Xh&&(r[H.Xo]=p.Xh),p.Xh=t,null===p.Xh?o[H.Xo]="null":o[H.Xo]=p.Xh),p.Qh!==n&&(null!==p.Qh&&(r[H.Qo]=p.Qh),p.Qh=n,null===p.Qh?o[H.Qo]="null":o[H.Qo]=p.Qh),p.Zh!==i&&(null!==p.Zh&&(r[H.Zo]=p.Zh),p.Zh=i,null===p.Zh?o[H.Zo]="null":o[H.Zo]=p.Zh),p.zh!==e&&(null!==p.zh&&(r[H.zo]=p.zh),p.zh=e,null===p.zh?o[H.zo]="null":o[H.zo]=p.zh),p.$h!==s&&(null!==p.$h&&(r[H.$o]=p.$h),p.$h=s,null===p.$h?o[H.$o]="null":o[H.$o]=p.$h),"{}"!==JSON.stringify(o)&&p.Fa(o,r)},this.Ha=function(t){var n=p.vn;n!==t&&t>0&&(p.l.info("Change bitrate from "+n+" to "+t),p.Ba(n,t),p.vn=t)},this.Yu=function(t){var n=p.Qn;n!==t&&t>=0&&(p.l.info("Change dropped frames total from "+n+" to "+t),p.Ga(n,t),p.Qn=t)},this.$e=function(t){var n=p.Rh,i=t+(-1===p.Rh?0:p.Rh);n!==t&&i>=0&&(p.l.info("Change dropped frames count from "+n+" to "+i),p.ja(n,i),p.Rh=i)},this.Cu=function(t){var n=p.wh;n!==t&&t&&(p.l.info("Change resource from "+n+" to "+t),p.wh=t)},this.du=function(t){p.in!==t&&t&&(p.l.info("Change assetName from "+p.in+" to "+t),p.in=t)},this.su=function(t){var n=p.gh;n!==t&&Q.yi(t)&&(p.l.info("Change isLive from "+n+" to "+t),p.gh=t)},this.vu=function(t){var n=p.on;n!==t&&t&&(p.l.info("Change viewerId from "+n+" to "+t),p.on=t)},this.Eu=function(t){var n=p.Sh;n!==t&&t&&(p.l.info("Change playerName from "+n+" to "+t),p.Sh=t)},this.pu=function(t){var n=p.Nh;!Q.Ka(n,t)&&t&&(p.l.info("Change tags from "+Q.Wa(n)+" to "+Q.Wa(t)),p.Nh=t)},this.Iu=function(t){p.pt.encodedFrameRate>0||(p.l.debug("setEncodedFrameRate(): "+t),p.cn=t)},this._u=function(t){p.pt.duration>0||(p.l.debug("setContentLength(): "+t),p.Th=t)},this.Te=function(t){var n;p.Bh||t!==u.PlayerState.PLAYING||(p.Bh=!0,Q.Tt(p.pt.viewerId)||p.l.error("Missing viewerId. viewerId should be updated before first frame is rendered."),Q.Tt(p.pt.streamType)&&c.StreamType.UNKNOWN!==p.pt.streamType||p.l.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),Q.Tt(p.pt.applicationName)||p.l.error("Missing applicationName. applicationName should be updated before first frame is rendered.")),p.dn!==t&&(n=p.dn,p.l.info("setPlayerState(): changing player state from "+n+" to "+t),p.xa(n,t),p.dn=t)},this.qa=function(t){var n=p.gn;n!==t&&t>0&&(p.l.debug("Change stream resolution width from "+n+" to "+t),p.Ya(n,t),p.gn=t)},this.Ja=function(t){var n=p.Nn;n!==t&&t>0&&(p.l.debug("Change stream resolution height from "+n+" to "+t),p.Xa(n,t),p.Nn=t)},this.$u=function(t){var n=p.C;n!==t&&t&&(p.l.debug("Change network connection type from "+n+" to "+t),p.Qa(n,t),p.C=t)},this.th=function(t){var n=p.I;n!==t&&t&&(p.l.debug("Change network link encryption from "+n+" to "+t),p.Za(n,t),p.I=t)},this.sh=function(t){p.ea=!0,p.Ia();var n=p.Ve;n!==t&&Q.Tt(t)&&(p.l.debug("Change CDN Server IP from "+n+" to "+t),p.za(n,t),p.Ve=t)},this.$a=function(t){var n;p.l.debug("togglePauseJoin()"),p.Hh!==t?(n=p.Hh,t=!p.Hh,p.tf(n,t),p.Hh=!p.Hh):p.l.debug("togglePauseJoin(): same value, ignoring")},this.nf=function(t,n){p.if(t,n)},this.ef=function(t,n){var i;n[H.Sr]=t,n[H.Nr]=this.sf(),n[H.gr]=this.oa.rf(),this.re&&(i=tt.uf(this.re.getPHT(),0,null,-1),t=tt.uf(this.re.getBufferLength(),0,null,-1),i>=0&&(n[H.ko]=i),t>0&&(n[H.Fo]=t)),this.oa.hf(n)},this.af=function(t){p.re=t,p.re?p.ff():p.cf()},this.Ca=function(){var t=this.ua.Us(this.lf(),this.sf());this.oa.hf(t)},this.if=function(t,n){var i={};i[H.Ar]=t,i[H.Cr]=n,this.ef(H.xs,i)},this.Ba=function(t,n){var i={},e={};t>0&&(e[H.Do]=t),i[H.Do]=n,this.Fa(i,e)},this.vf=function(t,n){var i={};i[H.Or]=t,n>=0&&(i[H._r]=n),this.ef(H.Ys,i)},this.Ya=function(t,n){var i={},e={};-1!==t&&(e[H.jo]=t),i[H.jo]=n,this.Fa(i,e)},this.Xa=function(t,n){var i={},e={};-1!==t&&(e[H.Ko]=t),i[H.Ko]=n,this.Fa(i,e)},this.Qa=function(t,n){var i={},e={};null!==t&&(e[H.Wo]=t),i[H.Wo]=n,this.Fa(i,e)},this.Za=function(t,n){var i={},e={};null!==t&&(e[H.xo]=t),i[H.xo]=n,this.Fa(i,e)},this.za=function(t,n){var i={},e={};Q.Tt(t)&&(e[H.Ur]=t),i[H.Ur]=n,this.Fa(i,e)},this.Ga=function(t,n){var i={},e={};t>=0&&(e[H.qo]=t),i[H.qo]=n,this.Fa(i,e)},this.ja=function(t,n){var i={},e={};t>=0&&(e[H.Yo]=t),i[H.Yo]=n,this.Fa(i,e)},this.tf=function(t,n){var i={},e={};e[H.yo]=t,i[H.yo]=n,this.Fa(i,e)},this.xa=function(t,n){var i={},e={};i[H.mo]=H.Vr(n),e[H.mo]=H.Vr(t),this.Fa(i,e)},this.Fa=function(t,n){var i={};i[H.Ir]=t,n&&Q.yt(n)>0&&(i[H.yr]=n),this.ef(H.Ws,i)},this.df=function(t,n){var i={};i[H.mr]=t,Q.yt(n)>0&&(i[H.Dr]=n),this.ef(H.qs,i)},this.ya=function(){p.fh&&(p.fh(),p.fh=null)},this.Pa=function(){p.ya();var t=1e3*p.hi.heartbeatInterval;p.fh=p.Gi.create(p.ma,t,"Session.sendHeartbeat:"+this.va)},this.cf=function(){p.Kh&&(p.Kh(),p.Kh=null)},this.ff=function(){p.cf(),p.Kh=p.Gi.create(p.Ef,p.Wh,"Session.startRfpsTimer")},this.pf=function(){var t={err:"pending"};t.seq=p.lh-1,t.sentAt=p.sf(),t.rtt=-1,p.Eh.push(t);for(var n=0;n<p.Eh.length;n++)"ok"===(t=p.Eh[n]).err&&(p.Eh.splice(n,1),n--)},this.Rf=function(t,n){for(var i=0;i<p.Eh.length;i++){var e=p.Eh[i];e.seq===t&&(e.rtt=p.sf()-e.sentAt,e.err=n)}},this.wf=function(t){for(var n=0;n<p.Eh.length;n++){var i=p.Eh[n];i.seq===t&&(i.rtt=p.sf()-i.sentAt,i.err="ok")}},this.Tf=function(){for(var t,n,i=p.aa.get(q.Sf),e=[],s=-1,o=0;o<p.Eh.length;o++)if("ok"===(n=p.Eh[o]).err){s=n.seq;break}for(var r=0;r<p.Eh.length;r++)((t=(n=p.Eh[r]).seq)<p.lh-i||t<s)&&e.push(r);for(var u=[],h=0;h<p.Eh.length;h++)t=(n=p.Eh[h]).seq,e.indexOf(h)<0&&u.push(p.Eh[h]);p.Eh=u},this.gf=function(){p.Tf();for(var t=[],n=0;n<p.Eh.length;n++){var i=p.Eh[n],e={};e[H.Pr]=i.seq,e[H.Mr]=i.rtt,e[H.br]=i.err,t.push(e)}return t},this.Nf=function(){var t,n=-1,i=-1,e=p.oa.fa();if(p.Sa()&&0===e.length)return null;var s=new G;s.nu(H.uo),s.ru(p.hi.customerKey),s.uu(p.aa.get(q.P)),s.cu(p.la.g),s.ou(p.lh),s.au(H.version);var o=T.version;if(p.ai&&(o=p.ai),s.hu(o),s.lu(p.Bi.g),s.fu(0),p.Bi.C?s.$u(p.Bi.C):p.C&&s.$u(p.C),p.Bi.I?s.th(p.Bi.I):p.I&&s.th(p.I),Q.Tt(p.Ve)&&s.sh(p.Ve),s.Pu(H.Ks),p.Oh&&s.bu(p.Oh),p._h&&s.Mu(p._h),p.Ah&&s.Lu(p.Ah),p.Ch&&s.Uu(p.Ch),p.Ih&&s.Vu(p.Ih),p.yh&&s.ku(p.yh),p.mh&&s.Fu(p.mh),p.bh&&s.Gu(p.bh),p.Mh&&s.ju(p.Mh),p.Lh&&s.Ku(p.Lh),p.Dh&&s.Hu(p.Dh),p.Ph&&s.Bu(p.Ph),p.Uh&&!isNaN(p.Uh)&&s.Wu(parseInt(p.Uh,10)),p.Vh&&!isNaN(p.Vh)&&s.xu(parseInt(p.Vh,10)),p.kh&&!isNaN(p.kh)?s.qu(parseFloat(p.kh)):(p.Uh&&!isNaN(p.Uh)||p.Vh&&!isNaN(p.Vh))&&s.qu(1),p.re&&(p.Tn=p.re.bn(),p.Tn&&s.setModuleName(p.Tn),p.Sn=p.re.Mn(),p.Sn&&s.eh(p.Sn),p.re.Ln()&&(p.Dh=p.re.Ln(),s.Hu(p.Dh)),p.re.Vn()&&(p.Ph=p.re.Vn(),s.Bu(p.Ph))),p.on&&s.vu(p.on),Q.yt(p.Nh)>0&&s.pu(p.Nh),p.da()||p.Ea()){p.Ea()&&s.nh(),p.in&&s.du(p.in),s.Ru(p.vh);o=H.Vr(p.dn);s.Te(o),s.Ou(p.Hh),p.Sh&&s.Eu(p.Sh),Q.yi(p.gh)&&s.su(p.gh),p.Th>0&&s._u(p.Th),p.vn>0&&s.Au(p.vn),null!==p.wh&&s.Cu(p.wh),p.cn>0&&s.Iu(p.cn),p.re&&(n=tt.uf(p.re.getPHT(),0,null,-1),i=tt.uf(p.re.getBufferLength(),0,null,-1)),Q.vt(p.Bi.y)?t=p.Bi.y:p.re&&(t=p.re.getSignalStrength()),n>=0&&s.Ju(n),i>0&&s.Xu(i);i=p.Of();if(i>0&&s.yu(i),p.qh>0&&s.Du(tt.uf(p.qh,0,null,-1)),p.xh>0&&s.mu(tt.uf(p.xh,0,null,-1)),t!==u.DEFAULT_SIGNAL_STRENGTH&&s.ih(t),p.un&&s.Qu(p.un),p.gn>0&&s.Zu(p.gn),p.Nn>0&&s.zu(p.Nn),p.Qn>-1&&s.Yu(p.Qn),p.Rh>-1&&(s.$e(p.Rh),p.Rh>0&&(p.ja(p.Rh,0),p.Rh=0)),"undefined"!==typeof p.Fh)for(var r in p.Fh)s.$r(r,p.Fh[r])}else s.Ru(H.Kr.Wr);return e.length>0&&s.Tu(e),s.wu(p.dh),s.Su(!0),p.aa.get(q._f)&&s.gu(p.fi.fa()),p.aa.get(q.Sf)>0&&((e=p.gf()).length>0&&s.Nu(e)),0===p.lh&&(s=p.Af(s)),0!==p.lh&&(s=p.Cf(s)),s.eu(p.ch),s.iu(p.sf()),p.ia&&(s.oh(p.Xh),s.rh(p.Qh),s.uh(p.Zh),s.hh(p.zh),s.ah(p.$h)),p.lh++,s.get()},this.Cf=function(t){var n,i=p.O,e={};for(n in t.zr.tags)Object.prototype.hasOwnProperty.call(i,n)||(e[n]=t.zr.tags[n]);t.zr.tags=e,p.O={};for(var s=0;s<p.Yh.length;s++)Object.prototype.hasOwnProperty.call(p.Bi.O,p.Yh[s])?Object.prototype.hasOwnProperty.call(p.Bi.A,p.Yh[s])?p.Bi.A[p.Yh[s]]===q.Gt.jt?(p.O[q.If+""+p.Yh[s]]=q.Gt.jt,p.Bi._("End-user chose to opt-out of personal data collection")):p.Bi.A[p.Yh[s]]===q.Gt.Wt?(p.O[q.If+""+p.Yh[s]]=q.Gt.Wt,p.Bi._("End-user chose to opt-out of personal data collection")):p.Bi.A[p.Yh[s]]===q.Gt.Bt?(p.O[q.If+""+p.Yh[s]]=q.Gt.Bt,p.Bi._("End-user used privacy settings and chose to opt-out of personal data collection")):(p.O[q.If+""+p.Yh[s]]=p.Bi.O[p.Yh[s]],p.Bi._("Data collection successful")):(p.O[q.If+""+p.Yh[s]]=p.Bi.O[p.Yh[s]],p.Bi._("Data collection successful")):p.O[q.If+""+p.Yh[s]]=q.Gt.yf;var o,r={};for(o in i){var u=o.split(".");"{}"!==JSON.stringify(p.Yh)&&-1!==p.Yh.indexOf(""+u[2])||i[q.If+""+u[2]]===q.Gt.mf||(p.Bi._("Data collection restricted from Conviva back-end"),p.O[q.If+""+u[2]]=q.Gt.mf,r[q.If+""+u[2]]=q.Gt.mf)}if("{}"!==JSON.stringify(p.O)){var h,a=Q.Df(p.O);for(h in t.zr.tags)a[h]=t.zr.tags[h];if(t.zr.tags=a,!Q.Ka(i,p.O)){var f={};if("{}"!==JSON.stringify(r)&&(f[H.No]=r),"{}"!==JSON.stringify(i)){for(var c in i)p.O[c]&&i[c]!==p.O[c]&&(f[H.No]||(f[H.No]={}),f[H.No][c]=p.O[c]);for(var l in p.O)Object.prototype.hasOwnProperty.call(i,l)&&i[l]===p.O[l]||(f[H.No]||(f[H.No]={}),f[H.No][l]=p.O[l])}"{}"===JSON.stringify(i)&&(f[H.No]=p.O);var v,d,E={};E[H.Ir]=f,E[H.Sr]=H.Ws,E[H.Nr]=p.sf(),E[H.gr]=p.oa.rf(),p.re&&(v=tt.uf(p.re.getPHT(),0,null,-1),d=tt.uf(p.re.getBufferLength(),0,null,-1),v>=0&&(E[H.ko]=v),d>0&&(E[H.Fo]=d)),t.zr.evs||(t.zr.evs=[]),t.zr.evs.push(E)}}return t},this.Af=function(t){var n=p.Pf();if("{}"===JSON.stringify(n))return t;var i,e=Q.Df(n);for(i in t.zr.tags)e[i]=t.zr.tags[i];t.zr.tags=e;var s={};s[H.No]=n;var o={};return o[H.Ir]=s,o[H.Sr]=H.Ws,o[H.Nr]=p.sf(),o[H.gr]=p.oa.rf(),p.re&&(n=tt.uf(p.re.getPHT(),0,null,-1),s=tt.uf(p.re.getBufferLength(),0,null,-1),n>=0&&(o[H.ko]=n),s>0&&(o[H.Fo]=s)),t.zr.evs||(t.zr.evs=[]),t.zr.evs.push(o),t},this.Pf=function(){var t={};if("undefined"!==typeof navigator&&navigator){if(t["c3.fp.cookie"]="undefined"!==typeof navigator.cookieEnabled&&navigator.cookieEnabled?""+navigator.cookieEnabled:"",t["c3.fp.memory"]="undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?""+navigator.deviceMemory:"",t["c3.fp.hwConc"]="undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",t["c3.fp.java"]=""+("function"!==typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),t["c3.fp.lang"]="undefined"!==typeof navigator.language&&navigator.language?""+navigator.language:"",t["c3.fp.langs"]="undefined"!==typeof navigator.languages&&navigator.languages&&navigator.languages.length>0?""+navigator.languages.toString():"",t["c3.fp.maxTp"]="undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",t["c3.fp.plugins"]="","undefined"!==typeof navigator.plugins&&navigator.plugins&&navigator.plugins.length>0)for(var n=0;n<navigator.plugins.length;n++)t["c3.fp.plugins"]+=navigator.plugins[n].name+",";if(t["c3.fp.mime"]="","undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var i=0;i<navigator.mimeTypes.length;i++)t["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";t["c3.fp.sysLang"]="undefined"!==typeof navigator.systemLanguage&&navigator.systemLanguage?""+navigator.systemLanguage:"",t["c3.fp.platform"]="undefined"!==typeof navigator.platform&&navigator.platform?""+navigator.platform:"",t["c3.fp.product"]="undefined"!==typeof navigator.product&&navigator.product?""+navigator.product:"",t["c3.fp.productSub"]="undefined"!==typeof navigator.productSub&&navigator.productSub?""+navigator.productSub:"",t["c3.fp.vendor"]="undefined"!==typeof navigator.vendor&&navigator.vendor?""+navigator.vendor:"",t["c3.fp.vendorSub"]="undefined"!==typeof navigator.vendorSub&&navigator.vendorSub?""+navigator.vendorSub:"";var e=p.bf();""!==e&&(t["c3.fp.canvFp"]=e)}return"undefined"!==typeof window&&window&&("undefined"!==typeof window.screen&&window.screen&&(t["c3.fp.availHeight"]="undefined"!==typeof window.screen.availHeight&&window.screen.availHeight?""+window.screen.availHeight:"",t["c3.fp.availWidth"]="undefined"!==typeof window.screen.availWidth&&window.screen.availWidth?""+window.screen.availWidth:"",t["c3.fp.height"]="undefined"!==typeof window.screen.height&&window.screen.height?""+window.screen.height:"",t["c3.fp.width"]="undefined"!==typeof window.screen.width&&window.screen.width?""+window.screen.width:"",t["c3.fp.colorDepth"]="undefined"!==typeof window.screen.colorDepth&&window.screen.colorDepth?""+window.screen.colorDepth:"",t["c3.fp.deviceXDPI"]="undefined"!==typeof window.screen.deviceXDPI&&window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",t["c3.fp.deviceYDPI"]="undefined"!==typeof window.screen.deviceYDPI&&window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),t["c3.fp.dpi"]="undefined"!==typeof window.devicePixelRatio&&window.devicePixelRatio?""+window.devicePixelRatio:"",t["c3.fp.secure"]="boolean"===typeof window.isSecureContext?""+window.isSecureContext:""),t},this.bf=function(){try{if("undefined"!==typeof document&&document){var t=document.createElement("CANVAS");if("undefined"!==typeof t&&t&&"function"===typeof t.getContext){var n=t.getContext("2d"),i="conviva";return n.textBaseline="top",n.font="14px Arial",n.textBaseline="alphabetic",n.fillStyle="#f40",n.fillRect("undefined"!==typeof navigator.plugins&&navigator.plugins?navigator.plugins.length:0,"undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes?navigator.mimeTypes.length:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0,"undefined"!==typeof navigator.vendor&&navigator.vendor?navigator.vendor.length:0),n.fillStyle="#069",n.fillText(i,"undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>=0?navigator.maxTouchPoints:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(i,"undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?navigator.deviceMemory:0,"undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),Q.Mf(t.toDataURL())}}return""}catch(t){return""}},this.ma=function(){var t;p.Gh||(t=p.Nf())&&p.Lf(t)},this.Ef=function(){var t;p.dn!==u.PlayerState.PLAYING||!p.re||(t=p.re.getRenderedFrameRate())>0&&(p.qh+=t,p.xh++)},this.Of=function(){return p.qh>0&&p.xh>0?Q.Uf.Cast(+p.qh/p.xh):(this.Ef(),p.qh>0&&p.xh>0?Q.Uf.Cast(+p.qh/p.xh):u.DEFAULT_RENDERED_FRAME_RATE)},this.Lf=function(t){p.pf();var i=p.lh-1;p.l.info("postHeartbeat(): Send HB["+i+"]"+p.Ra());p.ra.Vf(t,function(t,n){p.kf(t,n,i)})},this.kf=function(e,s,o){p.Gh||p.T.D("onHeartbeatResponse",function(){var t,n,i;e?s?(p.l.debug("onHeartbeatResponse(): received valid response for HB["+o+"]"),p.wf(o),!(i=s[H.Zs])||i!==(t=p.aa.get(q.P))&&(p.l.debug("onHeartbeatResponse(): setting the client id to "+i+" (from gateway)"),p.aa.set(q.P,i),p.aa.Ff(),t===H.M&&i!==H.M&&p.Bi.m()),(t=s[H.Qs])&&t!==H.Xs&&p.l.error("onHeartbeatResponse(): error from gateway: "+t),"object"===typeof(i=s[H.zs])&&((t=i[H.no])>=0&&p.aa.get(q.Sf)!==t&&(p.l.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+t+" (from gateway)"),p.aa.set(q.Sf,t)),t=i[H.io],(t=!!Q.yi(t)&&t)!==p.aa.get(q._f)&&(p.l.debug("onHeartbeatResponse(): turning "+(t?"on":"off")+" sending of logs"),p.aa.set(q._f,t)),t=i[H.eo],!Q.vt(t)||(n=Q.Uf.Cast(t))!==p.hi.heartbeatInterval&&(p.l.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+n),p.hi.heartbeatInterval=n,p.fh&&p.Pa()),(n=i[H.so])&&n!==p.hi.gatewayUrl&&(p.l.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),p.hi.gatewayUrl=n),p.Hf()||(p.Yh={},(n=i[H.oo])&&(p.Jh||(p.Jh=!0),p.l.debug("onHeartbeatResponse(): received fp from gateway: "+n),p.Yh=n.split(",")),p.ia=i[H.ro],Q.yi(p.ia)&&(p.ia?(p.l.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),p.ta||p.La()):p.Ia())))):p.l.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(i=s,Q.Tt(i)?Q.Bf(i,"HTTP timeout")?p.l.warning("onHeartbeatResponse(): "+i):p.l.error("onHeartbeatResponse(): failed to send heartbeat: "+i):(i=K.Gf,p.l.error("onHeartbeatResponse(): "+i)),p.Rf(o,i))})},this.sf=function(){return Q.Uf.Cast(p.ha.current()-p.ch)},this.lf=function(){return this.oa.rf()},this.Ra=function(){return this.Sa()?" (global session)":""},this.Sa=function(){return this.va===j.lt.Wr},this.Hf=function(){return this.va===j.lt.Wr&&"T"===this.Nh["c3.IPV4IPV6GlobalSession"]},this.da=function(){return this.va===j.lt.ct},this.Ea=function(){return this.va===j.lt.wt},this.gt=function(t){p.jf(t),p.ga()},this.jf=function(t){var n={},i={};if(Q.Tt(t.assetName)&&(p.pt.assetName!==t.assetName?(p.pt.assetName&&(n[H.So]=p.pt.assetName),i[H.So]=t.assetName,p.pt.assetName=t.assetName):p.l.warning("mergeContentMetadata(): assetName was not changed.")),Q.Tt(t.applicationName)&&(p.pt.applicationName!==t.applicationName?(p.pt.applicationName&&(n[H.go]=p.pt.applicationName),i[H.go]=t.applicationName,p.pt.applicationName=t.applicationName):p.l.warning("mergeContentMetadata(): applicationName was not changed.")),Q.Tt(t.streamUrl)&&(p.pt.streamUrl!==t.streamUrl?(p.pt.streamUrl&&(n[H.Ho]=p.pt.streamUrl),i[H.Ho]=t.streamUrl,p.pt.streamUrl=t.streamUrl,p.un=p.pt.streamUrl):p.l.warning("mergeContentMetadata(): streamUrl was not changed.")),Q.Tt(t.viewerId)&&(p.pt.viewerId!==t.viewerId?(p.pt.viewerId&&(n[H.To]=p.pt.viewerId),i[H.To]=t.viewerId,p.pt.viewerId=t.viewerId):p.l.warning("mergeContentMetadata(): viewerId was not changed.")),Q.Tt(t.defaultResource)&&(p.pt.defaultResource!==t.defaultResource?(p.pt.defaultResource&&(n[H.Vo]=p.pt.defaultResource),i[H.Vo]=t.defaultResource,p.pt.defaultResource=t.defaultResource):p.l.warning("mergeContentMetadata(): defaultResource was not changed.")),Q.vt(t.duration)&&t.duration>0&&(p.pt.duration!==t.duration?(p.Th>0&&(n[H.Po]=p.Th),i[H.Po]=t.duration,p.pt.duration=t.duration,p.Th=p.pt.duration):p.l.warning("mergeContentMetadata(): duration was not changed.")),Q.vt(t.encodedFrameRate)&&t.encodedFrameRate>0&&(p.pt.encodedFrameRate!==t.encodedFrameRate?(p.pt.encodedFrameRate>-1&&(n[H.bo]=p.pt.encodedFrameRate),i[H.bo]=t.encodedFrameRate,p.pt.encodedFrameRate=t.encodedFrameRate,p.cn=p.pt.encodedFrameRate):p.l.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!==c.StreamType.UNKNOWN&&(p.pt.streamType!==t.streamType?(p.pt.streamType!==c.StreamType.UNKNOWN&&(p.pt.streamType===c.StreamType.LIVE?n[H.co]=!0:n[H.co]=!1),t.streamType===c.StreamType.LIVE?i[H.co]=!0:i[H.co]=!1,p.pt.streamType=t.streamType):p.l.warning("mergeContentMetadata(): streamType was not changed.")),Q.yt(t.custom)>0){var e,s={},o={};for(e in t.custom)p.pt.custom[e]!==t.custom[e]?(s[e]=t.custom[e],p.pt.custom[e]&&(o[e]=p.pt.custom[e]),p.pt.custom[e]=t.custom[e]):p.l.info("mergeContentMetadata(): custom."+e+" was not changed.");Q.yt(s)>0?(Q.yt(o)>0&&(n[H.No]=o),i[H.No]=s):p.l.warning("mergeContentMetadata(): custom was not changed.")}Q.yt(i)>0&&this.Fa(i,n)},this.ga=function(){var t;p.l.debug("setStatesFromContentMetadata()"),p.pt.defaultResource&&this.Cu(p.pt.defaultResource),p.pt.streamUrl&&this.Qu(p.pt.streamUrl),p.pt.duration>0&&this._u(p.pt.duration),p.pt.encodedFrameRate>0&&this.Iu(p.pt.encodedFrameRate),p.pt.streamType!==c.StreamType.UNKNOWN&&(t=p.pt.streamType===c.StreamType.LIVE,this.su(t)),p.pt.assetName&&this.du(p.pt.assetName),p.pt.viewerId&&this.vu(p.pt.viewerId),(p.pt.applicationName||p.pt.playerName)&&this.Eu(p.pt.applicationName||p.pt.playerName),Q.yt(p.pt.custom)>0&&this.pu(p.pt.custom)},this.Na=function(){var t={};if(this.Sa()||(p.pt.assetName?t[H.So]=p.pt.assetName:p.l.warning("enqueueEventForContentMetadata(): assetName was not set."),p.pt.applicationName?t[H.go]=p.pt.applicationName:p.l.warning("enqueueEventForContentMetadata(): applicationName was not set."),p.pt.streamUrl?t[H.Ho]=p.pt.streamUrl:p.l.warning("enqueueEventForContentMetadata(): streamUrl was not set."),p.pt.viewerId?t[H.To]=p.pt.viewerId:p.l.warning("enqueueEventForContentMetadata(): viewerId was not set."),p.pt.defaultResource?t[H.Vo]=p.pt.defaultResource:p.l.warning("enqueueEventForContentMetadata(): defaultResource was not set."),p.pt.duration>-1?t[H.Po]=p.pt.duration:p.l.warning("enqueueEventForContentMetadata(): duration was not set."),p.pt.encodedFrameRate>-1?t[H.bo]=p.pt.encodedFrameRate:p.l.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),p.pt.streamType!==c.StreamType.UNKNOWN?p.pt.streamType===c.StreamType.LIVE?t[H.co]=!0:t[H.co]=!1:p.l.warning("enqueueEventForContentMetadata(): streamType was not set.")),Q.yt(p.pt.custom)>0)for(var n in t[H.No]={},p.pt.custom)t[H.No][n]=p.pt.custom[n];else this.Sa()||p.l.warning("enqueueEventForContentMetadata(): custom tags were not set.");Q.yt(t)>0&&this.Fa(t,null)},this._a=function(){p.pt&&Q.Tt(p.pt.assetName)||p.l.warning("Missing assetName during session creation"),p.pt&&Q.Tt(p.pt.defaultResource)||p.l.warning("Missing resource during session creation"),p.pt&&Q.Tt(p.pt.streamUrl)||p.l.warning("Missing streamUrl during session creation"),(!p.pt||p.pt.encodedFrameRate<=0)&&p.l.warning("Missing encodedFrameRate during session creation"),p.pt&&Q.Tt(p.pt.viewerId)||p.l.warning("Missing viewerId during session creation"),p.pt&&p.pt.streamType&&c.StreamType.UNKNOWN!==p.pt.streamType||p.l.warning("Missing streamType during session creation"),p.pt&&Q.Tt(p.pt.applicationName)||p.l.warning("Missing applicationName during session creation"),(!p.pt||p.pt.duration<=0)&&p.l.warning("Missing duration during session creation")},this.Ht=function(t,n){p.Fh||(p.Fh={}),p.Fh[t]=n},this.Oa=function(){var t={};p.Bi.C&&(t[H.Wo]=p.Bi.C,p.C=p.Bi.C),p.Bi.I&&(t[H.xo]=p.Bi.I,p.I=p.Bi.I),Q.yt(t)>0&&this.Fa(t,null)}};j.pa=H.Kr.ct+H.Kr.xr+H.Kr.qr,j.lt={ct:"Video",Wr:"Global",wt:"Ad"};var K=ut.Session=function(){var e=this;e.re=null,e.g=0,e.va=j.lt.ct,e.Kf=!1,e.Gh=!1,e.Wf=!1,e.xf=null,e.ji=null,e.qf=null,e.Yf=!1,e.Jf=u.PlayerState.NOT_MONITORED,e.Xf=!1,e.Qf=!1,e.Zf=!1,e.zf=!1,e.$f=!1,function(t,n,i,e,s,o,r){this.g=t,this.va=n,this.aa=i,this.tc=e,this.Et=s,this.T=o,this.l=r}.apply(e,arguments),this.ca=function(t,n){e.Et.ca(this),t&&e._t(t),e.aa.nc()?e.ic(n):e.aa.ec(function(){e.ic(n)})},this.cleanup=function(){e.Kf=!0,e.Et.wa(),e.aa.nc()?e.sc():e.aa.ec(function(){e.sc()})},this.oc=function(){(e.da()||e.Ea())&&e.re&&e.rc(),e.T=null,e.Bi=null,e.aa=null,e.tc=null,e.Et.ht(),e.Et=null,e.Gh=!0},this.sc=function(){e.Et.Aa(),e.oc()},this.ic=function(t){e.Et.Ta(),e.uc(),t?(e.St(t.Ds(),t.Ps()),e.Et.Te(u.PlayerState.STOPPED),e.Et.Aa(),e.oc()):e.Et.Da()},this.uc=function(){var t=e.tc.get(),n=t[st.BROWSER_NAME];n&&e.Et.bu(n);n=t[st.BROWSER_VERSION];n&&e.Et.Mu(n);n=t[st.DEVICE_BRAND];n&&e.Et.Lu(n);n=t[st.DEVICE_MANUFACTURER];n&&e.Et.Uu(n);n=t[st.DEVICE_MODEL];n&&e.Et.Vu(n);n=t[st.DEVICE_TYPE];n&&e.Et.ku(n);n=t[st.DEVICE_VERSION];n&&e.Et.Fu(n);n=t[st.FRAMEWORK_NAME];n&&e.Et.Hu(n);n=t[st.FRAMEWORK_VERSION];n&&e.Et.Bu(n);n=t[st.OPERATING_SYSTEM_NAME];n&&e.Et.Gu(n);n=t[st.OPERATING_SYSTEM_VERSION];n&&e.Et.ju(n);n=t[st.DEVICE_CATEGORY];n&&e.Et.Ku(n);n=t[st.SCREEN_WIDTH];n&&e.Et.Wu(n);n=t[st.SCREEN_HEIGHT];n&&e.Et.xu(n);t=t[st.SCALE_FACTOR];t&&e.Et.qu(t)},this.jn=function(t){e.Et.dn!==t&&(e.Et.dn===u.PlayerState.NOT_MONITORED&&t!==u.PlayerState.NOT_MONITORED&&(e.Jf=t),e.Yf||e.Et.Te(t))},this.Kn=function(t){e.Xf||e.Et.Ha(t)},this.Zn=function(t){e.Qf||e.Et.Yu(t)},this.zn=function(t){e.Qf||e.Et.$e(t)},this.Wn=function(t,n){Q.vt(n)||(n=-1),e.Et.vf(t,n)},this.In=function(t){t>0&&(e.zf||e.Et.Iu(t))},this.Dn=function(t){t>0&&(e.zf||e.Et._u(t))},this.Pn=function(t){e.Et.Qu(t)},this.xn=function(t){e.Et.qa(t)},this.qn=function(t){e.Et.Ja(t)},this.Y=function(t){e.Et.$u(t)},this.X=function(t){e.Et.th(t)},this.Un=function(t){e.Et.ba()||e.Et.Hu(t)},this.kn=function(t){e.Et.Ma()||e.Et.Bu(t)},this.Jn=function(t){e.Et.sh(t)},this.Yn=function(t,n){e.St(t,n)},this.An=function(){e.rc()},this.bt=function(t,n,i){e.Wf||(e.Wf=!0,e.xf=t,e.ji=n,e.qf=i,e.Et.$a(!0),e.xf===a.AdStream.CONTENT||e.ji===a.AdPlayer.SEPARATE?(e.Et.dn!==u.PlayerState.NOT_MONITORED&&(e.Jf=e.Et.dn),e.Et.Te(u.PlayerState.NOT_MONITORED),e.Yf=!0):e.xf===a.AdStream.SEPARATE&&e.ji===a.AdPlayer.CONTENT&&(e.Et.dn!==u.PlayerState.NOT_MONITORED&&(e.Jf=e.Et.dn),e.Et.Te(u.PlayerState.NOT_MONITORED),e.Yf=!0,e.Xf=!0,e.Qf=!0,e.zf=!0,e.Zf=!0))},this.Mt=function(){e.Wf&&(e.Et.$a(!1),e.xf===a.AdStream.CONTENT||e.ji===a.AdPlayer.SEPARATE?e.hc||(e.Yf=!1,e.Et.Te(e.Jf)):e.xf===a.AdStream.SEPARATE&&e.ji===a.AdPlayer.CONTENT&&(e.Xf=!1,e.Qf=!1,e.zf=!1,e.Zf=!1,e.$f=!1,e.hc||(e.Yf=!1,e.Et.Te(e.Jf))),e.Wf=!1,e.xf=e.ji=e.qf=null)},this.Nt=function(){e.re&&e.re&&(e.T.D("Session.detachPlayer",function(){e.re.Cn()}),e.re=null,e.Et.af(null),e.Et.Te(u.PlayerState.NOT_MONITORED))},this.rc=function(){e.re&&(e.T.D("Session.releasePlayerStateManager",function(){e.re.Cn()}),e.re=null,e.Et.af(null),e.Et.Te(u.PlayerState.NOT_MONITORED))},this.Ot=function(){e.Et.$a(!0),e.Et.dn!==u.PlayerState.NOT_MONITORED&&(e.Jf=e.Et.dn),e.Et.Te(u.PlayerState.NOT_MONITORED),e.Yf=!0},this._t=function(t){e.re||t instanceof u&&e.T.D("Session.attachPlayer()",function(){t.setMonitoringNotifier(e,e.g)&&(t.Fn(),e.re=t,e.Et.af(e.re))})},this.At=function(){e.Et.$a(!1),e.Xf=!1,e.Qf=!1,e.zf=!1,e.Zf=!1,e.$f=!1,e.hc||(e.Yf=!1,e.Jf!==u.PlayerState.NOT_MONITORED&&e.Et.Te(e.Jf))},this.Ut=function(){return e.re},this.Ct=function(){e.hc||(e.hc=!0,e.Yf=!0)},this.It=function(){e.hc&&(e.hc=!1,e.Wf||(e.Yf=!1,e.Jf!==u.PlayerState.NOT_MONITORED&&e.Et.Te(e.Jf)))},this.St=function(t,n){Q.Tt(t)&&(n!==a.ErrorSeverity.FATAL&&n!==a.ErrorSeverity.WARNING||e.$f||(n=n===a.ErrorSeverity.FATAL,e.Et.nf(t,n)))},this.gt=function(t){e.T.D("Session.updateContentMetadata",function(){e.Et.gt(t)})},this.Pt=function(t,n){e.Et.df(t,n)},this.Sa=function(){return e.va===j.lt.Wr},this.da=function(){return e.va===j.lt.ct},this.Ea=function(){return e.va===j.lt.wt},this.Ra=function(){return e.Sa()?" (global session)":""},this.kt=function(){return this.g},this.Ft=function(){var t=null;return e.aa.nc()&&(t=e.aa.get(q.P)),t},this.Ht=function(t,n){e.Et.Ht(t,n)}};K.Gf="received no response (or a bad response) to heartbeat POST request";var W=ut.SessionFactory=function(){var o=this;o.fi=null,o.ac=0,o.fc=null,function(t,n,i,e){o.Bi=t,o.hi=n,o.aa=i,o.d=e,o.ac=0,o.fc={}}.apply(o,arguments),this.ht=function(){for(var t in 0,o.fi=null,o.fc)o.fc[t].cleanup();o.fc=null,o.ac=0},this.cc=function(){var t=o.ac;return o.ac++,t},this.ft=function(t,n,i,e,s){return t||(t=new c),o.lc(t,n,i,e,s)},this.H=function(t){return o.lc(t,j.lt.Wr,void 0,T.version)},this.vc=function(){return $.dc()},this.lc=function(t,n,i,e,s){t=o.d.Oi(o.Bi,o.hi,o.aa,o.vc(),n,t.tt(),e),e=o.cc();return"undefined"!==typeof s&&"undefined"!==typeof s.error?t.ca(i,s.error):(o.Ec(e,t),t.ca(i)),e},this.Dt=function(t){t=o.fc[t];return t},this.dt=function(t){t=this.Dt(t);return t&&(t.da()||t.Ea()||(t=null)),t},this.Ec=function(t,n){o.fc[t]=n},this.pc=function(t){delete o.fc[t]},this.Lt=function(t){var n=o.Dt(t);o.pc(t),n.cleanup()},this.q=function(){return o.fc}},x=ut.Rc=function(t){this.Gi=t,this.wc=function(i,t,n){var e=!1;this.Gi.createOnce(function(){e||i(!(e=!0),n+" ("+t+" ms)")},t,"CallbackWithTimeout.wrap");return function(t,n){e||(e=!0,i(t,n))}}},q=ut.Config=function(t,n,i){var e=this;this.Tc=n,this.Sc=i,this.gc={clientId:H.M,sendLogs:!1,maxHbInfos:H.Hs},this.S=Q.Df(this.gc),this.Nc=!1,this.Oc=!1,this._c=[],this.nc=function(){return this.Nc},this.rt=function(){this.Tc.rt(q.Ac,function(t,n){t&&e.Cc(n),e.Nc=!0,e.Ic()})},this.Cc=function(t){t=this.Sc.Qr(t);t?(t=t[q.yc])&&t!==H.M&&""!==t&&"null"!==t&&(this.S[q.P]=t):this.Oc=!0},this.mc=function(){var t={};return t[q.yc]=this.S.clientId,this.Sc.Xr(t)},this.Ff=function(){this.Tc.Ff(q.Ac,this.mc(),function(){0})},this.ec=function(t){this.nc()?t():this._c.push(t)},this.get=function(t){return this.Nc?this.S[t]:null},this.set=function(t,n){this.Nc&&(this.S[t]=n)},this.Ic=function(){for(var t;"undefined"!==typeof(t=this._c.shift());)t()}};q.Ac="sdkConfig",q.yc="clId",q.P="clientId",q._f="sendLogs",q.Sf="maxHbInfos",q.If="c3.fp.",q.Gt={yf:"0",Dc:"1",jt:"2",Bt:"3",mf:"4",Wt:"5",Kt:"6"};var Y=ut.EventQueue=function(){this.Pc=[],this.bc=0,this.hf=function(t){this.Pc.push(t)},this.rf=function(){var t=this.bc;return this.bc++,t},this.fa=function(){var t=this.Pc;return this.Pc=[],t}},J=ut.ExceptionCatcher=function(t,n,i){this.Mc=n,this.w=i,this.D=function(n,t,i){try{t()}catch(t){if(i)i(t);else{if(this.w.allowUncaughtExceptions)throw t;this.Lc(n,t)}}},this.Lc=function(t,n){var i="Uncaught exception: "+t+": "+n.toString();if(this.Mc)try{this.Mc.Vf(i)}catch(t){0}}},X=ut.GatewayControl=function(t,n,i,e,s){var o=this;this.hi=t,this.Uc=i,this.Sc=e,this.Vc=s,this.Vf=function(t,e){var n=(this.Vc?this.Vc.indexOf("ipv4")>-1?this.hi.L:this.hi.B:this.hi.gatewayUrl)+H.ks;this.Uc.kc("POST",n,this.Sc.Xr(t),"application/json",function(t,n){var i;t?(i=o.Sc.Qr(n),e(t,i)):e(t,n)})}},Q=ut.Lang={};Q.Fc=function(t){return Q.Tt(t)&&t&&"undefined"!==t&&"null"!==t},Q.mt=function(t){var n,i,e={};for(n in t)Q.Fc(n)&&(i=t[n],Q.Fc(i)&&(e[n]=i));return e},Q.yn=function(t,n,i){if(!t)throw new Error("Expected "+i+" implementation is null.");for(var e in n)if("function"!==typeof t[e])throw new Error("Expected method "+e+" in "+i+" implementation.")},Q.yt=function(t){var n,i=0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&i++;return i},Q.Rt=function(t){return""+t},Q.Hc=function(t){return Math.floor(t)},Q.Qt=function(t){return Math.abs(Q.Hc(t))},Q.Bc=function(t){return Boolean(t)},Q.Tt=function(t){return"string"===typeof t&&""!==t},Q.Bf=function(t,n){return"string"===typeof t&&"string"===typeof n&&("function"===typeof t.indexOf&&0===t.indexOf(n))},Q.yi=function(t){return"boolean"===typeof t},Q.Gc=function(t){return escape(t)},Q.Zr=function(t){return"object"===typeof t},Q.Wa=function(t){var n,i="";for(n in t)i+=n+"="+t[n];return"Object{"+i+"}"},Q.jc=function(t){var n,i=Q.Df(t);for(n in i)i[n]||delete i[n];return i},Q.Df=function(t){var n,i={};for(n in t)i[n]=t[n];return i},Q.Ka=function(t,n){if(typeof t!==typeof n)return!1;if(t instanceof Object&&n instanceof Object){if(Q.yt(t)!==Q.yt(n))return!1;for(var i in t)if(!(t[i]===n[i]))return!1;return!0}return t===n},Q.fs=function(){for(var t={},n=0;n<arguments.length;n++)for(var i in arguments[n])arguments[n][i]&&(t[i]=arguments[n][i]);return t},Q.vt=function(t){return"number"===typeof t&&Math.round(t)===t},Q.Kc=function(t){return"[object Array]"===Object.prototype.toString.call(t)},Q.Wc=function(t,n){if(t===n)return!0;if(!t||!n)return!1;if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(Q.Kc(t[i])&&Q.Kc(n[i])){if(!Q.Wc(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1;return!0},Q.xc=function(){return"undefined"!==typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()},Q.qt=function(t,n,i){if(Q.xc())Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:i});else{if("undefined"===typeof t.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");t.__defineGetter__(n,i)}},Q.Yt=function(t,n,i){if(Q.xc())Object.defineProperty(t,n,{configurable:!0,set:i});else{if("undefined"===typeof t.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");t.__defineSetter__(n,i)}},Q.Mf=function t(n){function i(t,n){return t>>>n|t<<32-n}for(var e,s,o,r=Math.pow,u=r(2,32),h="length",a="",f=[],c=8*n[h],l=t.h=t.h||[],v=t.k=t.k||[],d=v[h],E={},p=2;d<64;p++)if(!E[p]){for(e=0;e<313;e+=p)E[e]=p;l[d]=r(p,.5)*u|0,v[d++]=r(p,1/3)*u|0}for(n+="\0";n[h]%64-56;)n+="\0";for(e=0;e<n[h];e++){if((s=n.charCodeAt(e))>>8)return null;f[e>>2]|=s<<(3-e)%4*8}for(f[f[h]]=c/u|0,f[f[h]]=c,s=0;s<f[h];){var R=f.slice(s,s+=16),w=l;for(l=l.slice(0,8),e=0;e<64;e++){o=R[e-15],g=R[e-2];var T=l[0],S=l[4],g=l[7]+(i(S,6)^i(S,11)^i(S,25))+(S&l[5]^~S&l[6])+v[e]+(R[e]=e<16?R[e]:R[e-16]+(i(o,7)^i(o,18)^o>>>3)+R[e-7]+(i(g,17)^i(g,19)^g>>>10)|0);(l=[g+((i(T,2)^i(T,13)^i(T,22))+(T&l[1]^T&l[2]^l[1]&l[2]))|0].concat(l))[4]=l[4]+g|0}for(e=0;e<8;e++)l[e]=l[e]+w[e]|0}for(e=0;e<8;e++)for(s=3;s+1;s--){var N=l[e]>>8*s&255;a+=(N<16?0:"")+N.toString(16)}return a},function(){var n={two32:4294967296};n.qc=n.two32-1,n.Yc=0,Q.Jc=n,Q.Jc.Cast=function(t){t=parseInt(t,10);return t>n.qc?t=t%n.two32:t<n.Yc&&(t=-t%n.two32,t=n.two32-t),t},Q.Jc.Xc=function(t){t=parseInt(t,10);return t<=n.qc&&t>=n.Yc};var i={qc:2147483647,Yc:-2147483648};Q.Uf=i,Q.Uf.Cast=function(t){t=parseInt(t,10);return t>i.qc?t=t%i.qc:t<i.Yc&&(t=-t%i.qc,t=i.qc-t),t},Q.Uf.Xc=function(t){t=parseInt(t,10);return t<=i.qc&&t>=i.Yc},Q.ms=function(){return window&&window.location&&window.location.search?window.location.search:""},Q.Qc=function(){return document&&document.referrer?document.referrer:""}}();var Z=ut.LogBuffer=function(){this.Zc=[],this.zc=function(t){this.Zc.length>=32&&this.Zc.shift(),this.Zc.push(t)},this.fa=function(){var t=this.Zc;return this.Zc=[],t}},z=ut.Ping=function(t,n,i,e){this.$c=!1,this.tl=null,this.l=t,this.l.setModuleName("Ping"),this.Uc=n,this.hi=i,this.ai=e,this.Vf=function(t){this.$c||(this.$c=!0,t=this.nl()+"&d="+Q.Gc(t.toString()),this.l.error("send(): "+t),this.Uc.kc("GET",t,null,null,null),this.$c=!1)},this.nl=function(){if(!this.tl){var t=z.il+"?comp="+z.el+"&clv="+(this.ai||a.version);if(this.hi&&(t+="&cid="+this.hi.customerKey),t+="&sch="+H.Ks,!this.hi)return t;this.tl=t}return this.tl}};z.el="sdkjs",z.il="https://pings.conviva.com/ping.ping";var $=ut.sl={};$.ol=4294967295,$.rl=2147483647,$.ul=-2147483648,$.dc=function(){return Math.floor(Math.random()*$.ol)+$.ul},$.et=function(){return Math.floor(Math.random()*$.ol)};var tt=ut.hl={};tt.uf=function(t,n,i,e){if(isNaN(t))return e;if("number"!==typeof t)return e;if(t===e)return e;t=Q.Hc(t);return tt.al(t,n,i)},tt.al=function(t,n,i){return Q.vt(i)&&t>i?t=i:Q.vt(n)&&t<n&&(t=n),t},tt.fn=function(t){return-1===t||-2===t?t:t=tt.uf(t,0,null,-1)};var nt=ut.StreamerError=function(){var i=this;i.errorCode=null,i.severity=a.ErrorSeverity.FATAL,function(t,n){i.errorCode=t,i.severity=n}.apply(i,arguments),this.Ds=function(){return i.errorCode},this.Ps=function(){return i.severity}},it=ut.HttpClient=function(t,n,i,e){this.ii=n,this.fl=i,this.w=e,this.kc=function(t,n,i,e,s){var o=1e3*this.w.httpTimeout,r=null;s&&(r=this.fl.wc(s,o,"HTTP timeout")),this.ii.makeRequest(t,n,i,e,o,r)}},et=ut.Logger=function(t,n,i,e,s){this.oi=t,this.ti=n,this.R=i,this.fi=e,this.ui=s,this.debug=function(t){this.log(t,w.LogLevel.DEBUG)},this.info=function(t){this.log(t,w.LogLevel.INFO)},this.warning=function(t){this.log(t,w.LogLevel.WARNING)},this.error=function(t){this.log(t,w.LogLevel.ERROR)},this.log=function(t,n){t=this.cl(t,n);this.fi.zc(t),this.R.logLevel<=n&&this.oi.consoleLog(t,n)},this.ll=function(t){return"["+this.Tn+"] "+t},this.vl=function(t){return"["+this.ui+"] "+t},this.dl=function(t){return"[Conviva] "+t},this.El=function(t){return"["+(this.ti.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+t},this.pl=function(t,n){return"["+et.Rl(n)+"] "+t},this.wl=function(t){return this.Tl&&(t="sid="+this.Tl+" "+t),t},this.cu=function(t){this.Tl=t},this.setModuleName=function(t){this.Tn=t},this.cl=function(t,n){return this.dl(this.El(this.pl(this.vl(this.ll(this.wl(t))),n)))}};et.Rl=function(t){var n;switch(t){case w.LogLevel.ERROR:n="ERROR";break;case w.LogLevel.WARNING:n="WARNING";break;case w.LogLevel.INFO:n="INFO";break;case w.LogLevel.DEBUG:n="DEBUG"}return n},ut.Storage=function(t,n,i,e){this.ei=n,this.fl=i,this.w=e,this.rt=function(t,n){n=this.fl.wc(n,1e3*this.w.storageTimeout,"storage load timeout");this.ei.loadData(ut.Storage.Sl,t,n)},this.Ff=function(t,n,i){i=this.fl.wc(i,1e3*this.w.storageTimeout,"storage save timeout");this.ei.saveData(ut.Storage.Sl,t,n,i)}},ut.Storage.Sl="Conviva";var st=ut.SystemMetadata=function(t,n,i){this.si=n,this.T=i,this.gl=null,this.get=function(){return this.gl||this.retrieve(),this.gl},this.retrieve=function(){var t={};t[st.BROWSER_NAME]=this.si.getBrowserName,t[st.BROWSER_VERSION]=this.si.getBrowserVersion,t[st.DEVICE_BRAND]=this.si.getDeviceBrand,t[st.DEVICE_MANUFACTURER]=this.si.getDeviceManufacturer,t[st.DEVICE_MODEL]=this.si.getDeviceModel,t[st.DEVICE_TYPE]=this.si.getDeviceType,t[st.DEVICE_VERSION]=this.si.getDeviceVersion,t[st.FRAMEWORK_NAME]=this.si.getFrameworkName,t[st.FRAMEWORK_VERSION]=this.si.getFrameworkVersion,t[st.OPERATING_SYSTEM_NAME]=this.si.getOperatingSystemName,t[st.OPERATING_SYSTEM_VERSION]=this.si.getOperatingSystemVersion,t[st.DEVICE_CATEGORY]=this.si.getDeviceCategory,t[st.SCREEN_WIDTH]=this.si.getScreenWidth,t[st.SCREEN_HEIGHT]=this.si.getScreenHeight,t[st.SCALE_FACTOR]=this.si.getScaleFactor;var n,e=this;for(n in 0,t)!function(n,i){e.T.D("Session.getSystemMetadataSchema(): "+n,function(){var t=i[n];i[n]=t.call(e.si)})}(n,t),Q.Tt(t[n])||delete t[n];var i=!1;if("undefined"!==typeof t[st.DEVICE_TYPE]){for(var s in a.DeviceType)if(t[st.DEVICE_TYPE]===a.DeviceType[s]){i=!0;break}i||delete t[st.DEVICE_TYPE]}if(i=!1,"undefined"!==typeof t[st.DEVICE_CATEGORY]){for(var o in a.DeviceCategory)if(t[st.DEVICE_CATEGORY]===a.DeviceCategory[o]){i=!0;break}i||delete t[st.DEVICE_CATEGORY]}this.gl=Q.jc(t)}};st.BROWSER_NAME="browserName",st.BROWSER_VERSION="browserVersion",st.DEVICE_BRAND="deviceBrand",st.DEVICE_MANUFACTURER="deviceManufacturer",st.DEVICE_MODEL="deviceModel",st.DEVICE_TYPE="deviceType",st.DEVICE_VERSION="deviceVersion",st.FRAMEWORK_NAME="frameworkName",st.FRAMEWORK_VERSION="frameworkVersion",st.OPERATING_SYSTEM_NAME="operatingSystemName",st.OPERATING_SYSTEM_VERSION="operatingSystemVersion",st.DEVICE_CATEGORY="deviceCategory",st.SCREEN_WIDTH="screenWidth",st.SCREEN_HEIGHT="screenHeight",st.SCALE_FACTOR="scaleFactor";var ot=ut.Time=function(t,n){this.ti=t,this.l=n,this.current=function(){var t=this.ti.getEpochTimeMs();return Q.vt(t),t}},rt=ut.Timer=function(t,n,i){var s=this;this.ni=n,this.T=i,this.create=function(t,n,i){return this.createTimer(function(){s.T.D(i,function(){t()})},n,i)},this.createOnce=function(t,n,i){var e={cancel:null};return e.cancel=this.createTimer(function(){s.T.D(i,function(){e&&"function"===typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),t()})},n,i),e.cancel},this.createTimer=function(t,n,i){return this.ni.createTimer(t,n,i)}}}()}(),ht});