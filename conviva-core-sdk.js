/*! (C) 2023 Conviva, Inc. All rights reserved. Confidential and proprietary. */
!function(t,n){"function"===typeof define&&define.amd?define(n):("object"===typeof exports||"object"===typeof module&&module.exports)&&(module.exports=n()),"undefined"===typeof t||!t||t.Conviva||t.ConvivaLoading||(t.ConvivaLoading=!0,t.Conviva=n(),delete t.ConvivaLoading)}(this,function(){var lt={};return function(){"use strict";var n,s,V,k,o,r,F,e,u,A,a,f,c,S,B,H,j,G,K,W,Y,x,h,i,l,q,O,J,X,d,v,E,_,R,Q,p,T,N,I,w,g,Z,z,C,$,tt,nt,y,it,et,st,m,ot,D,P,b,M,rt,ut,L,ht,at,U={};function ft(){var t,n="";for("-"===s&&r(n="-");s>="0"&&s<="9";)n+=s,r();if("."===s)for(n+=".";r()&&s>="0"&&s<="9";)n+=s;if("e"===s||"E"===s)for(n+=s,r(),"-"!==s&&"+"!==s||(n+=s,r());s>="0"&&s<="9";)n+=s,r();if(t=+n,!isNaN(t))return t;o("Bad number")}function t(t){return t<10?"0"+t:t}function ct(t){return E.lastIndex=0,E.test(t)?'"'+t.replace(E,function(t){var n=Q[t];return"string"===typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}A=lt.Constants={version:"4.6.1",CUSTOMER_KEY:"customerKey",GATEWAY_URL:"gatewayUrl",LOG_LEVEL:"logLevel",ASSET_NAME:"Conviva.assetName",PLAYER_NAME:"Conviva.applicationName",APPLICATION_VERSION:"c3.app.version",IS_LIVE:"Conviva.streamType",ENCODED_FRAMERATE:"Conviva.encodedFrameRate",DEFAULT_RESOURCE:"Conviva.defaultResource",STREAM_URL:"Conviva.streamUrl",VIEWER_ID:"Conviva.viewerId",DURATION:"Conviva.duration",UTM_TRACKING_URL:"c3.cm.utmTrackingUrl",POD_INDEX:"podIndex",POD_POSITION:"podPosition",POD_DURATION:"podDuration",AD_TYPE:"adType",MODULE_NAME:"Conviva.moduleName",MODULE_VERSION:"Conviva.moduleVersion",FRAMEWORK_NAME:"Conviva.frameworkName",FRAMEWORK_VERSION:"Conviva.frameworkVersion",i:"Constants not yet configured",o:"Invalid : Did you report playback ended?",u:"Invalid : Did you report ad playback ended?",h:"Player cannot be null",l:"PlaybackAnlytics already built",v:"PlaybackAnlytics not yet built",Playback:{BITRATE:"BITRATE",AVG_BITRATE:"AVG_BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT"},Network:{SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},ErrorSeverity:{FATAL:1,WARNING:0},NO_SESSION_KEY:-2,AdPosition:{PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},AdPlayer:{CONTENT:"CONTENT",SEPARATE:"SEPARATE"},DeviceType:{DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},AdType:{CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},AdSlates:{BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},AdServingType:{INLINE:"Inline",WRAPPER:"Wrapper"},DeviceCategory:{ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},LogLevel:{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},PlayerState:{STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},Events:{USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},ErrorType:{ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},StreamType:{UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},CallbackFunctions:{CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer",GENERATE_HASH:"generateHash",BASE64_ENCODE:"base64Encode"},DeviceMetadata:{BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},AD_PRELOAD_FEATURE:"adPreloading",AD_TAG_URL:"adTagUrl",IMASDK_CONTENT_PLAYER:"imaMainContentPlayer",CONVIVA_AD_MODULE:"convivaAdModule",CONVIVA_MODULE:"convivaModule",MEDIA_ELEMENT:"mediaElement",APP_TRACKER_EVENT:{TYPE:"convivaVideoEvent",INIT:"c3.sdk.init",VIDEO_ATTEMPT:"c3.video.attempt",VIDEO_END:"c3.video.end",VIDEO_PLAY:"c3.video.play",VIDEO_PAUSE:"c3.video.pause",VIDEO_BUFFERING:"c3.video.buffering",VIDEO_ERROR:"c3.video.error",SDK_CUSTOM_EVENT:"c3.sdk.custom_event",VIDEO_CUSTOM_EVENT:"c3.video.custom_event",AD_BREAK_START:"c3.ad.ad_break_start",AD_BREAK_END:"c3.ad.ad_break_end",VIDEO_METADATA_CHANGE:"c3.video.set_content_info",VIDEO_BITRATE_SWITCH:"c3.video.bitrate_switch"}},(a=lt.Client=function(){var h=this;this._=null,this.R=!1,this.version=a.version,this.p=null,this.T=null,this.A=null,this.S=-1,this.O=null,this.N=null,this.I=null,this.g=null,this.C=-1,this.m=!1,this.D={},this.P=function(){h.p},this.M={},this.L=null,this.U=null,this.V=null,this.k=function(){this.I.F("Client.makeIPV4IPV6GlobalSessions",function(){var t;h.g&&null!==(t=h.g.get(y.B))&&t!==g.H&&h.T&&((t=new c).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=h.O.j.indexOf(f.G)>-1?f.G:f.K,h.W=h.T.Y(t,null),(t=new c).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=h.O.q.indexOf(f.J)>-1?f.J:f.X,h.Z=h.T.Y(t,null))})},this.$=function(i){h.I.F("Client.updateConnectionType",function(){if(h.L=i,h.T){var t,n=h.T.tt();for(t in n)n[t].nt(i)}})},this.it=function(i){h.I.F("Client.updateLinkEncryption",function(){if(h.U=i,h.T){var t,n=h.T.tt();for(t in n)n[t].et(i)}})},this.ot=function(t){h.I.F("Client.updateSignalStrength",function(){h.V=t})},function(t,n,i,e){if(!(t instanceof f))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof x))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!==f.rt+f.ut&&t.gatewayUrl!==f.ht+f.ut||(this.R=!0),e&&(this.version=e),this.O=t.ct(),this.A=n,this.A.lt("SDK",this.O,this.version),this.I=this.A.dt(this.version),this.I.F("Client.init",function(){if(h.g=h.A.vt(),h.g.Et(),h.C=h.g.get(y._t),-1!==h.C&&void 0!==h.C&&null!==h.C||(h.C=P.Rt()),h.T=h.A.Tt(h,h.O,h.g),i)for(var t in i)switch(t){case A.Network.CONNECTION_TYPE:h.$(i[t]);break;case A.Network.LINK_ENCRYPTION:h.it(i[t]);break;case A.Network.SIGNAL_STRENGTH:h.ot(i[t])}h.k()},function(t){throw new Error("Client constructor failed: "+t.message)})}.apply(this,arguments),this.release=function(){this.m||this.I.F("Client.release",function(){h.p,h.T.At(),h.T=null,h.S=-1,h.C=-1,h.I=null,h.O=null,h.N=null,h.A=null,h.m=!0})},this.createSession=function(t,n,i){var e=a.NO_SESSION_KEY;return this.m||(!t||t instanceof c)&&this.I.F("Client.createSession",function(){e=h.T.St(t,C.Nt.Ot,n,(i?A:h).version)}),e},this.createAdSession=function(i,e,s,o,r){var u=a.NO_SESSION_KEY;return this.m||(!e||e instanceof c)&&this.I.F("Client.createAdSession",function(){var t,n;e||(e=new c),m.It(i)&&i!==a.NO_SESSION_KEY&&(t=h.T.wt(i))&&(n=e.custom[A.APPLICATION_VERSION],t.gt&&t.gt.Ct&&(!e.viewerId&&t.gt.Ct.viewerId&&(e.viewerId=t.gt.Ct.viewerId),!e.applicationName&&t.gt.Ct.applicationName&&(e.applicationName=t.gt.Ct.applicationName),e.streamType===A.StreamType.UNKNOWN&&t.gt.Ct.streamType!==A.StreamType.UNKNOWN&&(e.streamType=t.gt.Ct.streamType),"undefined"!==typeof n&&n||"undefined"!==typeof(n=t.gt.Ct.custom[A.APPLICATION_VERSION])&&n&&(e.custom[A.APPLICATION_VERSION]=n)),e.custom["c3.csid"]=m.yt(t.C)),u=h.T.St(e,C.Nt.Dt,s,(o?A:h).version,r)}),u},this.reportError=function(n,i,e){this.m||!m.Pt(i)||e!==a.ErrorSeverity.FATAL&&e!==a.ErrorSeverity.WARNING||this.I.F("Client.reportError",function(){var t=h.T.wt(n);t&&t.bt(i,e)})},this.updateContentMetadata=function(i,e){this.m||e instanceof c&&this.I.F("Client.updateContentMetadata",function(){var t,n=h.T.wt(i);n&&(t=e.ct(),n.Mt(t))})},this.detachPlayer=function(n){this.m||this.I.F("Client.detachPlayer",function(){var t=h.T.wt(n);t&&t.Lt()})},this.Ut=function(n){this.m||this.I.F("Client.offFocus",function(){var t=h.T.wt(n);t&&t.Ut()})},this.attachPlayer=function(n,i){this.m||i instanceof S&&this.I.F("Client.attachPlayer",function(){var t=h.T.wt(n);t&&t.Vt(i)})},this.kt=function(n){this.m||this.I.F("Client.onFocus",function(){var t=h.T.wt(n);t&&t.kt()})},this.contentPreload=function(n){this.m||this.I.F("Client.contentPreload",function(){var t=h.T.wt(n);t&&t.Ft()})},this.contentStart=function(n){this.m||this.I.F("Client.contentStart",function(){var t=h.T.wt(n);t&&t.Bt()})},this.sendCustomEvent=function(i,e,s){this.m||m.Pt(e)&&(m.Ht(s),this.I.F("Client.sendCustomEvent",function(){i===a.NO_SESSION_KEY&&(h.S<0&&(t=new c,h.S=h.T.Y(t,null)),i=h.S);var t=m.jt(s),n=h.T.Gt(i);n&&n.Kt(e,t)}))},this.adStart=function(n,i,e,s){this.m||i!==a.AdStream.CONTENT&&i!==a.AdStream.SEPARATE||e!==a.AdPlayer.CONTENT&&e!==a.AdPlayer.SEPARATE||(s!==a.AdPosition.PREROLL&&s!==a.AdPosition.MIDROLL&&a.AdPosition.POSTROLL,this.I.F("Client.adStart",function(){var t=h.T.wt(n);t&&t.Wt(i,e,s)}))},this.adEnd=function(n){this.m||this.I.F("Client.adEnd",function(){var t=h.T.wt(n);t&&t.Yt()})},this.cleanupSession=function(t){this.m||t!==a.NO_SESSION_KEY&&this.I.F("Client.cleanupSession",function(){h.T.wt(t)&&h.T.xt(t)})},this.getAttachedPlayer=function(n){var i=null;return this.m||n!==a.NO_SESSION_KEY&&this.I.F("Client.getAttachedPlayer",function(){var t=h.T.wt(n);t&&(i=t.qt())}),i},this.isPlayerAttached=function(t){return!this.m&&null!==this.getAttachedPlayer(t)},this.getPlayerStateManager=function(t){if(this.m)throw new Error("This instance of Conviva.Client has been released.");return new S(this.A,(t?A:h).version)},this.releasePlayerStateManager=function(t){if(this.m)throw new Error("This instance of Conviva.Client has been released.");this.I.F("Client.releasePlayerStateManager",function(){t instanceof S&&t.release()})},this.Jt=function(){return this.O},this.getId=function(){return this.C},this.getSessionId=function(n){var i;return this.m?A.NO_SESSION_KEY:(i=null,this.I.F("Client.getSessionId",function(){var t=h.T.wt(n);t&&(i=t.Xt())}),i)},this.getClientId=function(n){var i;return this.m?null:(i=null,this.I.F("Client.getClientId",function(){var t=h.T.wt(n);t&&(i=t.Qt())}),i)},this.Zt=function(n,i,e){this.m||this.I.F("Client.updateCustomMetric",function(){var t=h.T.wt(n);t&&t.Zt(i,e)})},this.setUniqueIdentifier=function(t,n){if(this.m)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)this.D[i]=t[i];n&&(this.P=n)},this.setUserPreferenceForDataCollection=function(t,n){if(this.m)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)"false"===t[i]?this.M[i]=n?y.$t.zt:y.$t.tn:this.M[i]=y.$t.nn},this.setUserPreferenceForDataDeletion=function(t){if(this.m)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var n in t)"true"===t[n]?this.M[n]=y.$t.en:this.M[n]=y.$t.nn},this.getConfig=function(){if(this.m)throw new Error("This instance of Conviva.Client has been released.");return this.g}}).version="4.6.1L",a.NO_SESSION_KEY=A.NO_SESSION_KEY,a.AdPosition={PREROLL:A.AdPosition.PREROLL,MIDROLL:A.AdPosition.MIDROLL,POSTROLL:A.AdPosition.POSTROLL},a.AdStream={CONTENT:A.AdPlayer.CONTENT,SEPARATE:A.AdPlayer.SEPARATE},a.AdPlayer={CONTENT:A.AdPlayer.CONTENT,SEPARATE:A.AdPlayer.SEPARATE},a.ErrorSeverity={FATAL:A.ErrorSeverity.FATAL,WARNING:A.ErrorSeverity.WARNING},a.DeviceType={DESKTOP:A.DeviceType.DESKTOP,CONSOLE:A.DeviceType.CONSOLE,SETTOP:A.DeviceType.SETTOP,MOBILE:A.DeviceType.MOBILE,TABLET:A.DeviceType.TABLET,SMARTTV:A.DeviceType.SMARTTV},a.AdTechnology={CLIENT_SIDE:A.AdType.CLIENT_SIDE,SERVER_SIDE:A.AdType.SERVER_SIDE},a.AdType={BLACKOUT_SLATE:A.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:A.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:A.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:A.AdSlates.OTHER_SLATE,VPAID:A.AdSlates.VPAID,REGULAR:A.AdSlates.REGULAR},a.AdServingType={INLINE:A.AdServingType.INLINE,WRAPPER:A.AdServingType.WRAPPER},a.DeviceCategory={ANDROID_DEVICE:A.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:A.DeviceCategory.APPLE_DEVICE,CHROMECAST:A.DeviceCategory.CHROMECAST,DESKTOP_APP:A.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:A.DeviceCategory.DEVICE_SIMULATOR,LG_TV:A.DeviceCategory.LG_TV,NINTENDO:A.DeviceCategory.NINTENDO,PLAYSTATION:A.DeviceCategory.PLAYSTATION,ROKU:A.DeviceCategory.ROKU,SAMSUNG_TV:A.DeviceCategory.SAMSUNG_TV,SMART_TV:A.DeviceCategory.SMART_TV,SET_TOP_BOX:A.DeviceCategory.SET_TOP_BOX,TIVO:A.DeviceCategory.TIVO,WEB:A.DeviceCategory.WEB,WINDOWS_DEVICE:A.DeviceCategory.WINDOWS_DEVICE,XBOX:A.DeviceCategory.XBOX,KAIOS_DEVICE:A.DeviceCategory.KAIOS_DEVICE},(f=lt.ClientSettings=function(){var e=this;this.on=null,m.rn(this,"customerKey",function(){return this.on}),m.un(this,"customerKey",function(t){m.Pt(t)&&(this.on=t)}),this.hn=f.fn,m.rn(this,"heartbeatInterval",function(){return this.hn}),m.un(this,"heartbeatInterval",function(t){var n;"number"===typeof t&&(n=m.cn(t))===t&&(this.hn=n)}),this.ln=null,this.j=null,this.q=null,m.rn(this,"gatewayUrl",function(){return this.ln}),m.un(this,"gatewayUrl",function(t){var n;!m.Pt(t)||"https"!==(n=t.split("://"))[0]&&"http"!==n[0]||-1===t.indexOf(".com",t.length-".com".length)||(this.ln=t)}),function(t){if(!m.Pt(t))throw new Error("customerKey must be valid");this.customerKey=t}.apply(this,arguments),this.equals=function(t){return this.customerKey===t.customerKey&&this.gatewayUrl===t.gatewayUrl&&this.heartbeatInterval===t.heartbeatInterval},this.ct=function(){var t=new f(this.customerKey);return t.gatewayUrl=function(t){if(m.Pt(t)){var n,i=t.split("://");if("https"===i[0]||"http"===i[0])return i[1]!==f.ut&&-1!==i[1].indexOf(f.ut)?(n=i[1].split(f.ut),e.j="https://"+n[0]+f.G,e.q="https://"+n[0]+f.J):i[1]!==f.dn&&-1!==i[1].indexOf("testonly.conviva.com")?(n=i[1].split("testonly.conviva.com"),e.j="https://"+n[0]+f.K,e.q="https://"+n[0]+f.X):i[1]===f.dn?(e.j="https://"+e.customerKey+"."+f.K,e.q="https://"+e.customerKey+"."+f.X):(e.j="https://"+e.customerKey+"."+f.G,e.q="https://"+e.customerKey+"."+f.J,t="https://"+e.customerKey+"."+f.ut),t}return e.j="https://"+e.customerKey+"."+f.G,e.q="https://"+e.customerKey+"."+f.J,"https://"+e.customerKey+"."+f.ut}(this.gatewayUrl),t.heartbeatInterval=this.heartbeatInterval,t.j=this.j,t.q=this.q,t}}).sn="https://conviva.testonly.conviva.com",f.vn="https://cws.conviva.com",f.ut="cws.conviva.com",f.G="ipv4.cws.conviva.com",f.J="ipv6.cws.conviva.com",f.dn="conviva.testonly.conviva.com",f.K="ipv4.testonly.conviva.com",f.X="ipv6.testonly.conviva.com",f.rt="https://",f.ht="http://",f.En=5,f.fn=20,(c=lt.ContentMetadata=function(){this._n=null,m.rn(this,"assetName",function(){return this._n}),m.un(this,"assetName",function(t){"string"===typeof t&&(this._n=t)}),this.Rn={},m.rn(this,"custom",function(){return this.Rn}),m.un(this,"custom",function(t){"object"===typeof t&&(this.Rn=m.jt(t))}),this.Tn=null,m.rn(this,"defaultResource",function(){return this.Tn}),m.un(this,"defaultResource",function(t){"string"===typeof t&&(this.Tn=t)}),this.An=null,m.rn(this,"viewerId",function(){return this.An}),m.un(this,"viewerId",function(t){"string"===typeof t&&(this.An=t)}),this.Sn=null,m.rn(this,"applicationName",function(){return this.Sn}),m.un(this,"applicationName",function(t){"string"===typeof t&&(this.Sn=t)}),this.On=null,m.rn(this,"streamUrl",function(){return this.On}),m.un(this,"streamUrl",function(t){"string"===typeof t&&(this.On=t)}),this.Nn=c.StreamType.UNKNOWN,m.rn(this,"streamType",function(){return this.Nn}),m.un(this,"streamType",function(t){t!==c.StreamType.UNKNOWN&&t!==c.StreamType.VOD&&t!==c.StreamType.LIVE||(this.Nn=t)}),this.In=-1,m.rn(this,"duration",function(){return this.In}),m.un(this,"duration",function(t){this.In=b.wn(t)}),this.gn=-1,m.rn(this,"encodedFrameRate",function(){return this.gn}),m.un(this,"encodedFrameRate",function(t){this.gn=b.wn(t)}),function(){}.apply(this,arguments),this.ct=function(){var t,n=new c;for(t in n.assetName=this.assetName,n.applicationName=this.applicationName,n.streamUrl=this.streamUrl,n.viewerId=this.viewerId,n.defaultResource=this.defaultResource,n.streamType=this.streamType,n.duration=this.duration,n.encodedFrameRate=this.encodedFrameRate,this.custom)n.custom[t]=this.custom[t];return n}}).StreamType={UNKNOWN:A.StreamType.UNKNOWN,LIVE:A.StreamType.LIVE,VOD:A.StreamType.VOD},lt.ErrorType={ERROR_UNKNOWN:A.ErrorType.ERROR_UNKNOWN,ERROR_IO:A.ErrorType.ERROR_IO,ERROR_TIMEOUT:A.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:A.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:A.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:A.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:A.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:A.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:A.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:A.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:A.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:A.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:A.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},lt.Events={AD_REQUESTED:A.Events.AD_REQUESTED,AD_RESPONSE:A.Events.AD_RESPONSE,AD_SLOT_STARTED:A.Events.AD_SLOT_STARTED,AD_ATTEMPTED:A.Events.AD_ATTEMPTED,AD_SLOT_ENDED:A.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:A.Events.AD_IMPRESSION_START,AD_START:A.Events.AD_START,AD_FIRST_QUARTILE:A.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:A.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:A.Events.AD_THIRD_QUARTILE,AD_COMPLETE:A.Events.AD_COMPLETE,AD_END:A.Events.AD_END,AD_IMPRESSION_END:A.Events.AD_IMPRESSION_END,AD_SKIPPED:A.Events.AD_SKIPPED,AD_ERROR:A.Events.AD_ERROR,AD_PROGRESS:A.Events.AD_PROGRESS,AD_CLOSE:A.Events.AD_CLOSE,CONTENT_PAUSED:A.Events.CONTENT_PAUSED,CONTENT_RESUMED:A.Events.CONTENT_RESUMED,POD_START:A.Events.POD_START,POD_END:A.Events.POD_END},(S=lt.PlayerStateManager=function(){var e=this;e.Cn=null,e.yn=-2,e.Dn=-2,e.Pn=S.PlayerState.UNKNOWN,e.bn={},e.Mn=-2,e.gn=-2,e.In=-2,e.Ln=null,e.Un=null,e.On=null,e.Vn=null,e.kn=null,e.Fn=-1,e.Bn=-1,e.L=null,e.U=null,e.Hn=null,e.jn=[],e.m=!1,this.release=function(){e.m||e.I.F("PlayerStateManager.release",function(){e.Cn&&e.Cn.Gn(),e.Kn(),e.A=null,e.I=null,e.m=!0})},this.setPlayheadTime=function(){},this.setBufferLength=function(){},this.setRenderedFrameRate=function(){},this.getEncodedFrameRate=function(){return e.gn},this.setEncodedFrameRate=function(n){e.m||e.I.F("PlayerStateManager.setEncodedFrameRate",function(){var t=b.wn(n);t>=-1&&(e.gn=t,e.Cn)&&e.Cn.Wn(e.gn)})},this.getDuration=function(){return e.In},this.setClientMeasureInterface=function(t){m.Yn(t,new lt.ClientMeasureInterface,"ClientMeasureInterface"),this.xn=t},this.getPHT=function(){return this.xn&&"function"===typeof this.xn.getPHT?this.xn.getPHT():S.DEFAULT_PHT},this.getBufferLength=function(){return this.xn&&"function"===typeof this.xn.getBufferLength?this.xn.getBufferLength():S.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.xn&&"function"===typeof this.xn.getSignalStrength?this.xn.getSignalStrength():S.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.xn&&"function"===typeof this.xn.getRenderedFrameRate?this.xn.getRenderedFrameRate():S.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(n){e.m||e.I.F("PlayerStateManager.setDuration",function(){var t=b.wn(n);t>=-1&&(e.In=t,e.Cn)&&e.Cn.qn(e.In)})},this.getStreamUrl=function(){return e.On},this.setStreamUrl=function(t){e.m||e.I.F("PlayerStateManager.setStreamUrl",function(){t&&(e.On=t,e.Cn)&&e.Cn.Jn(e.On)})},this.Xn=function(){return e.Vn},this.Qn=function(){return e.kn},this.setModuleNameAndVersion=function(t,n){e.Vn=t,e.kn=n},this.Zn=function(){return e.Un},this.setPlayerType=function(t){e.m||e.I.F("PlayerStateManager.setPlayerType",function(){e.Un=t,e.Cn&&e.Cn.zn(e.Un)})},this.$n=function(){return e.Ln},this.setPlayerVersion=function(t){e.m||e.I.F("PlayerStateManager.setPlayerVersion",function(){e.Ln=t,e.Cn&&e.Cn.ti(e.Ln)})},this.setMonitoringNotifier=function(t){return!e.m&&!e.Cn&&(e.Cn=t,e.p,!0)},this.Kn=function(){e.m||(e.Cn=null,e.p)},this.ni=function(){e.setPlayerState(e.getPlayerState()),e.setBitrateKbps(e.ii()),e.setAvgBitrateKbps(e.ei()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.Zn()),e.setPlayerVersion(e.$n());for(var t=0;t<e.jn.length;t++){var n=e.jn[t];e.si(n)}e.jn=[]},this.getPlayerState=function(){return e.Pn},this.setPlayerState=function(t){e.m||e.I.F("PlayerStateManager.setPlayerState",function(){S.oi(t)&&(e.Pn=t,e.Cn)&&e.Cn.ri(e.Pn)})},this.ii=function(){return e.yn},this.setBitrateKbps=function(n){e.m||e.I.F("PlayerStateManager.setBitrateKbps",function(){var t=b.wn(n);t>=-1&&(e.yn=t,e.Cn)&&e.Cn.ui(e.yn)})},this.ei=function(){return e.Dn},this.setAvgBitrateKbps=function(n){e.m||e.I.F("PlayerStateManager.setAvgBitrateKbps",function(){var t=b.wn(n);t>=-1&&(e.Dn=t,e.Cn)&&e.Cn.hi(e.Dn)})},this.setPlayerSeekStart=function(t){e.m||e.I.F("PlayerStateManager.setPlayerSeekStart()",function(){e.Cn&&e.Cn.ai(S.SEEK_ACTIONS_TYPE.SEEK_START,t)})},this.setPlayerSeekEnd=function(){e.m||e.I.F("PlayerStateManager.setPlayerSeekEnd()",function(){e.Cn&&e.Cn.ai(S.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e.m||e.I.F("PlayerStateManager.setUserSeekButtonUp()",function(){e.Cn&&e.Cn.ai(S.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e.m||e.I.F("PlayerStateManager.setUserSeekButtonDown()",function(){e.Cn&&e.Cn.ai(S.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(n){e.m||e.I.F("PlayerStateManager.setVideoResolutionWidth()",function(){var t=b.wn(n);t>0&&(e.Fn=t),e.Cn&&e.Cn.fi(e.Fn)})},this.setVideoResolutionHeight=function(n){e.m||e.I.F("PlayerStateManager.setVideoResolutionHeight()",function(){var t=b.wn(n);t>0&&(e.Bn=t),e.Cn&&e.Cn.ci(e.Bn)})},this.setConnectionType=function(t){e.m||e.I.F("PlayerStateManager.setConnectionType()",function(){e.L=t,e.Cn&&e.Cn.nt(e.L)})},this.setLinkEncryption=function(t){e.m||e.I.F("PlayerStateManager.setLinkEncryption()",function(){e.U=t,e.Cn&&e.Cn.et(e.U)})},this.setSignalStrength=function(){},this.si=function(t){var n,i;e.Hn=t,e.Cn?(n=t.errorCode,i=t.severity,e.Cn.li(n,i)):e.jn.push(t)},this.sendError=function(n,i){e.m||e.I.F("PlayerStateManager.sendError",function(){var t=new M(n,i);e.si(t)})},this.reset=function(){e.m||e.I.F("PlayerStateManager.reset",function(){e.yn=-2,e.Dn=-2,e.Pn=S.PlayerState.UNKNOWN,e.bn={},e.Mn=-1,e.gn=-1,e.In=-1,e.Ln=null,e.Un=null,e.On=null,e.Hn=null,e.jn=[]})},this.setCDNServerIP=function(t){e.m||e.I.F("PlayerStateManager.setCDNServerIP",function(){e.Cn&&e.Cn.di(t)})},this.vi=function(){return e.Ei},this.setDroppedFramesTotal=function(t){e.m||e.I.F("PlayerStateManager.setDroppedFramesTotal",function(){e.Cn&&e.Cn._i(t)})},this.setDroppedFramesCount=function(t){e.m||e.I.F("PlayerStateManager.setDroppedFramesCount",function(){e.Cn&&e.Cn.Ri(t)})},this.pi=function(){return e.Hn},function(t,n){e.A=t,e.I=e.A.dt(n)}.apply(e,arguments)}).PlayerState={STOPPED:A.PlayerState.STOPPED,PLAYING:A.PlayerState.PLAYING,BUFFERING:A.PlayerState.BUFFERING,PAUSED:A.PlayerState.PAUSED,UNKNOWN:A.PlayerState.UNKNOWN,NOT_MONITORED:A.PlayerState.NOT_MONITORED},S.oi=function(t){return t===S.PlayerState.STOPPED||t===S.PlayerState.PLAYING||t===S.PlayerState.BUFFERING||t===S.PlayerState.PAUSED||t===S.PlayerState.UNKNOWN||t===S.PlayerState.NOT_MONITORED},S.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},S.DEFAULT_SIGNAL_STRENGTH=1e3,S.DEFAULT_RENDERED_FRAME_RATE=-1,S.DEFAULT_BUFFER_LENGTH=-1,S.DEFAULT_PHT=-1,lt.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}},B=lt.HttpInterface=function(){this.makeRequest=function(){},this.release=function(){}},H=lt.LoggingInterface=function(){this.consoleLog=function(){},this.release=function(){}},j=lt.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},G=lt.StorageInterface=function(){this.saveData=function(){},this.loadData=function(){},this.release=function(){}},K=lt.SystemInterface=function(){!function(t,n,i,e,s,o){m.Yn(t,new W,"TimeInterface"),m.Yn(n,new Y,"TimerInterface"),m.Yn(i,new B,"HttpInterface"),m.Yn(e,new G,"StorageInterface"),m.Yn(s,new j,"MetadataInterface"),m.Yn(o,new H,"LoggingInterface"),this.Ti=t,this.Ai=n,this.Si=i,this.Oi=e,this.Ni=s,this.Ii=o}.apply(this,arguments),this.release=function(){this.Ti&&(this.Ti.release(),this.Ti=null),this.Ai&&(this.Ai.release(),this.Ai=null),this.Si&&(this.Si.release(),this.Si=null),this.Oi&&(this.Oi.release(),this.Oi=null),this.Ni&&(this.Ni.release(),this.Ni=null),this.Ii&&(this.Ii.release(),this.Ii=null)}},W=lt.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},Y=lt.TimerInterface=function(){this.createTimer=function(){},this.release=function(){}},x=lt.SystemFactory=function(){var t=this;!function(t,n){if(!(t instanceof K))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.wi=t,this.Ti=this.wi.Ti,this.Ai=this.wi.Ai,this.Si=this.wi.Si,this.Oi=this.wi.Oi,this.Ni=this.wi.Ni,this.Ii=this.wi.Ii,n instanceof h?this.O=n.ct():this.O=new h}.apply(this,arguments),this.lt=function(t,n,i){this.gi=t,this.Ci=n,this.yi=i},this.release=function(){this.wi.release(),this.wi=null,this.gi=null,this.O=null,this.mi=null};var n=function(){return new ut(t.Ii,t.Ti,t.Jt(),t.mi,t.gi)};this.buildLogger=function(){return n()},this.Tt=function(t,n,i){return new tt(t,n,i,this)},this.Di=function(t){return new D(this.buildLogger(),this.Pi(),this.Ci,t)},this.bi=function(){return new nt(this.buildTimer(t.yi))},this.Mi=function(){var t=new at(this.buildLogger(),this.Ai,new et(this.buildLogger(),null,this.Jt()));return new nt(t)},this.Pi=function(){return new rt(this.buildLogger(),this.Si,this.Mi(),this.Jt())},this.dt=function(t){return new et(this.buildLogger(),this.Di(t),this.Jt())},this.buildTime=function(){return new ht(this.Ti,this.buildLogger())},this.buildTimer=function(t){return new at(this.buildLogger(),this.Ai,this.dt(t))},this.Li=function(){return new U.Storage(this.buildLogger(),this.Oi,this.bi(),this.Jt())},this.vt=function(){return new y(this.buildLogger(),this.Li(),this.Ui())},this.Vi=function(t){return new L(this.buildLogger(),this.Ni,this.dt(t))},this.ki=function(){return new g},this.Fi=function(t,n){return new st(t,this.buildLogger(),this.Pi(),this.Ui(),n)},this.Bi=function(t,n,i,e,s){var o=this.Fi(n,e.custom["c3.domain"]);return new C(this.Hi(),t,n,this.buildLogger(),this.dt(s),this.buildTimer(s),o,this.ki(),this.buildTime(),this.ji(),i,e,s)},this.Gi=function(t,n,i,e,s,o,r){t=this.Bi(t,n.ct(),i,o,r);return new $(e,s,i,this.Vi(r),t,this.dt(r),this.buildLogger())},this.Hi=function(){return new it},this.Ui=function(){return new Z},this.ji=function(){return this.mi},this.Jt=function(){return this.O},this.mi=new ot},(h=lt.SystemSettings=function(){this.Ki=h.Wi,m.rn(this,"logLevel",function(){return this.Ki}),m.un(this,"logLevel",function(t){var n;"number"===typeof t&&(n=m.cn(t))===t&&n>=h.LogLevel.DEBUG&&n<=h.LogLevel.ERROR&&(this.Ki=n)}),this.Yi=h.xi,m.rn(this,"allowUncaughtExceptions",function(){return this.Yi}),m.un(this,"allowUncaughtExceptions",function(t){m.qi(t)&&(this.Yi=t)}),this.Ji=h.Xi,m.rn(this,"storageTimeout",function(){return this.Ji}),m.un(this,"storageTimeout",function(t){var n;"number"===typeof t&&(n=m.cn(t))===t&&(this.Ji=n)}),this.Qi=h.Zi,m.rn(this,"httpTimeout",function(){return this.Qi}),m.un(this,"httpTimeout",function(t){var n;"number"===typeof t&&(n=m.cn(t))===t&&(this.Qi=n)}),function(){}.apply(this,arguments),this.equals=function(t){return this.logLevel===t.logLevel&&this.allowUncaughtExceptions===t.allowUncaughtExceptions&&this.storageTimeout===t.storageTimeout&&this.httpTimeout===t.httpTimeout},this.ct=function(){var t=new h;return t.logLevel=this.logLevel,t.allowUncaughtExceptions=this.allowUncaughtExceptions,t.storageTimeout=this.storageTimeout,t.httpTimeout=this.httpTimeout,t}}).LogLevel={DEBUG:A.LogLevel.DEBUG,INFO:A.LogLevel.INFO,WARNING:A.LogLevel.WARNING,ERROR:A.LogLevel.ERROR,NONE:A.LogLevel.NONE},h.zi=h.LogLevel.DEBUG,h.Wi=h.LogLevel.NONE,h.$i=!0,h.xi=!1,h.Xi=10,h.Zi=10,i=U.AdAnalytics=function(){var e=this;function n(t){e.te?(m.Ht(t)>0&&e.setAdInfo(t),e.te.ne()||(e.te.ie(e.ee),e.te.se(!0),e.getAdType()===A.AdType.SERVER_SIDE&&e.reportAdMetric(A.Playback.BITRATE,e.ee.oe()))):e.p}e.re=null,e.A=null,e.ue=null,e.ee=null,e.te=null,e.he=null,e.ae=null,e.fe=null,function(t,n,i){e.re=t,e.fe=i,e.A=n,i&&(e.ee=i.ce()),e.ue=n.buildTimer(A.version),e.te=new l(e.re,e.ue),O.call(this)}.apply(this,arguments),this.setAdInfo=function(t){m.Ht(t)<=0?e.p:(e.p,e.te&&e.te.le(t))},this.setAdPlayerInfo=function(t){m.Ht(t)<=0?e.p:(e.p,e.te&&e.te.le(t))},this.reportAdMetric=function(){0===arguments.length?e.p:1===arguments.length?e.de(arguments[0]):2===arguments.length?e.de(arguments[0],arguments[1]):3===arguments.length?e.de(arguments[0],arguments[1],arguments[2]):4===arguments.length&&e.de(arguments[0],arguments[1],arguments[2],arguments[3])},this.setCallback=function(t){e.te&&e.te.ve(t)},this.reportAdFailed=function(t,n){e.te?(m.Ht(n)>0&&e.setAdInfo(n),e.te.ne()?(e.p,e.reportAdError(t,a.ErrorSeverity.FATAL),e.reportAdEnded()):(e.te.ie(e.ee),e.p,n=new M(t,a.ErrorSeverity.FATAL),e.te.se(!0,n))):e.p},this.reportAdLoaded=function(t){e.p,n(t)},this.reportAdStarted=function(t){e.p,n(t)},this.reportAdEnded=function(){e.te?(e.p,e.te.ne()&&(e.te.ie(null),e.te.se(!1))):e.p},this.reportAdError=function(t,n){e.te?(e.p,t=new M(t,n),e.te.si(t)):e.p},this.reportAdPlayerEvent=function(t,n){if(m.Pt(t))if(e.p,e.te)switch(t){case A.Events.USER_WAIT_STARTED:case A.Events.BUMPER_VIDEO_STARTED:e.te.Lt();break;case A.Events.USER_WAIT_ENDED:case A.Events.BUMPER_VIDEO_ENDED:e.te.Vt();break;default:e.te.Ee(t,n)}else e.p;else e.p},this.reportAdSkipped=function(){e.te?(e.p,e.reportAdPlayerEvent(A.Events.AD_SKIPPED),e.reportAdEnded()):e.p},this.release=function(){e.p,e.te&&(e.te.ne()&&(e.te.ie(null),e.te.se(!1)),e.te.ve(null),e.te._e(),e.te=null),"undefined"!==typeof lt.AdProxyMonitor&&e.ae&&(lt.AdProxyMonitor.release(e.ae),e.ae=null)},this.setAdListener=function(t,n){t&&("undefined"!==typeof n&&"undefined"!==typeof n.convivaModule?lt.AdProxyMonitor=n.convivaModule.AdProxyMonitor:"undefined"!==typeof ConvivaModule&&(lt.AdProxyMonitor=ConvivaModule.AdProxyMonitor),"undefined"!==typeof lt.AdProxyMonitor)&&(!t&&e.ae?(lt.AdProxyMonitor.release(e.ae),e.ae=null):t&&e.ae?(lt.AdProxyMonitor.release(e.ae),e.p,e.ae=lt.AdProxyMonitor.initConvivaDropIn(t,n,this,lt,e.A)):t&&!e.ae&&(e.p,e.ae=lt.AdProxyMonitor.initConvivaDropIn(t,n,this,lt,e.A)))},this.reportAdBreakStarted=function(t,n,i){e.ee&&(e.p,e.Re=t,e.he=n,e.ee.pe(t,n,i))},this.reportAdBreakEnded=function(){e.ee&&(e.p,e.Re=null,e.he=null,e.ee.Te())},this.getSessionId=function(){return e.ee?(e.p,e.te.Xt()):A.NO_SESSION_KEY},this.getClientId=function(){return e.ee?(e.p,e.te.Qt()):null},this.getPlayerMonitor=function(){return e.ee},this.getAdPlayerMonitor=function(){return e.te},this.getVideoAnalytics=function(){return e.fe},this.getAdType=function(){return e.ee?e.ee.Re:null},this.Ae=function(){return e.ee?e.ee.he:null},i.prototype=Object.create(O.prototype),i.prototype.constructor=i},l=U.AdPlayerMonitorImpl=function(){var s=this;s.Se=null,s.Oe=null,function(t,n){d.call(this,t,n)}.apply(this,arguments),this.ie=function(t){this.Ne()!==t&&(this.Ie(),s.Oe=t||null)},this.Ne=function(){return s.Oe},this.we=function(t){var n,i=this.Ne(),e={};e.error=t,s.Se&&(s.ge=s.Se.getPlayerStateManager(!0),s.Ce(),s.ge.setClientMeasureInterface(this),n=null,i&&(n=i.ye()),s.me=s.Se.createAdSession(n,s.Ct,s.ge,!0,e),"undefined"!==typeof t)&&(s.De(),s._e())},l.prototype=Object.create(d.prototype),l.prototype.constructor=l},q=lt.Analytics={init:function(){if(this.re,arguments.length<=0)throw new Error("customerKey must be valid");var t=null,n=null,i=null;if("string"===typeof arguments[0]&&!m.Pt(t=arguments[0]))throw new Error("customerKey must be valid");arguments.length>=2&&"object"===typeof arguments[1]&&(n=arguments[1]),arguments.length>=3&&"object"===typeof arguments[2]&&(i=arguments[2]);var t=new f(t),e=new h,i=(m.Ht(i)>0&&(i[A.GATEWAY_URL]&&(t.gatewayUrl=i[A.GATEWAY_URL]),i[A.LOG_LEVEL]>=0)&&(e.logLevel=i[A.LOG_LEVEL]),new lt.Impl.Html5Logging),s=new lt.Impl.Html5Storage,o=new lt.Impl.Html5Http,r=new lt.Impl.Html5Timer,u=new lt.Impl.Html5Time;this.Ni||(this.Ni=new lt.Impl.Html5Metadata),n&&(n[A.CallbackFunctions.CONSOLE_LOG]&&(i.consoleLog=n[A.CallbackFunctions.CONSOLE_LOG]),n[A.CallbackFunctions.MAKE_REQUEST]&&(o.makeRequest=n[A.CallbackFunctions.MAKE_REQUEST]),n[A.CallbackFunctions.SAVE_DATA]&&(s.saveData=n[A.CallbackFunctions.SAVE_DATA]),n[A.CallbackFunctions.LOAD_DATA]&&(s.loadData=n[A.CallbackFunctions.LOAD_DATA]),n[A.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(u.getEpochTimeMs=n[A.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),n[A.CallbackFunctions.CREATE_TIMER])&&(r.createTimer=n[A.CallbackFunctions.CREATE_TIMER]),this.wi=new K(u,r,o,s,this.Ni,i),this.A=new x(this.wi,e),this.A.lt("Analytics",t),this.re=new a(t,this.A,this.Pe,q.version),this.re._=new J(this.re,this),this.re._.be()},release:function(){var t=0;if(this.Me){for(t=0;t<this.Me.length;t++){var n=this.Me[t];n&&(n.release(),n.p=null,n.ue=null,this.Me.splice(t,1),t--)}this.Me=null}if(this.Le){for(t=0;t<this.Le.length;t++){var i=this.Le[t];i&&(i.release(),i.p=null,i.ue=null,this.Le.splice(t,1),t--)}this.Le=null}this.A&&(this.A.release(),this.A=null),this.re&&(this.re.release(),this.re=null),this.re=null,this.p=null,this.wi=null,this.Ni=null,this.Pe=null},setUniqueIdentifier:function(t,n){if(!this.re)throw new Error(A.i);this.re.setUniqueIdentifier(t,n)},setUserPreferenceForDataCollection:function(t,n){if(!this.re)throw new Error(A.i);this.re.setUserPreferenceForDataCollection(t,n)},setUserPreferenceForDataDeletion:function(t){if(!this.re)throw new Error(A.i);this.re.setUserPreferenceForDataDeletion(t)},reportAppEvent:function(t,n){if(!this.re)throw new Error(A.i);this.re.sendCustomEvent(a.NO_SESSION_KEY,t,n)},reportAppBackgrounded:function(){if(!this.re)throw new Error(A.i);this.re.sendCustomEvent(a.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(!this.re)throw new Error(A.i);this.re.sendCustomEvent(a.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(t){if(!(t instanceof a))throw new Error(A.i);this.re=t,this.A=this.re.A},buildVideoAnalytics:function(){var t;if(this.re)return t=new v(this.re,this.A),this.Le||(this.Le=[]),this.Le.push(t),t;throw new Error(A.i)},buildAdAnalytics:function(t){if(this.re)return t=new i(this.re,this.A,t||null),this.Me||(this.Me=[]),this.Me.push(t),t;throw new Error(A.i)},setDeviceMetadata:function(t){var n,i,e;arguments.length<=0||0===m.Ht(t)||(this.Ni||(this.Ni=new lt.Impl.Html5Metadata),t[A.DeviceMetadata.BRAND]&&(this.Ni.getDeviceBrand=function(){return t[A.DeviceMetadata.BRAND]}),t[A.DeviceMetadata.MANUFACTURER]&&(this.Ni.getDeviceManufacturer=function(){return t[A.DeviceMetadata.MANUFACTURER]}),t[A.DeviceMetadata.MODEL]&&(this.Ni.getDeviceModel=function(){return t[A.DeviceMetadata.MODEL]}),t[A.DeviceMetadata.TYPE]&&(this.Ni.getDeviceType=function(){return t[A.DeviceMetadata.TYPE]}),t[A.DeviceMetadata.VERSION]&&(this.Ni.getDeviceVersion=function(){return t[A.DeviceMetadata.VERSION]}),t[A.DeviceMetadata.OS_NAME]&&(this.Ni.getOperatingSystemName=function(){return t[A.DeviceMetadata.OS_NAME]}),t[A.DeviceMetadata.OS_VERSION]&&(this.Ni.getOperatingSystemVersion=function(){return t[A.DeviceMetadata.OS_VERSION]}),t[A.DeviceMetadata.CATEGORY]&&(this.Ni.getDeviceCategory=function(){return t[A.DeviceMetadata.CATEGORY]}),n=t[A.DeviceMetadata.SCREEN_RESOLUTION_WIDTH],m.It(n)&&(this.Ni.getScreenWidth=function(){return n.toString()}),i=t[A.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT],m.It(i)&&(this.Ni.getScreenHeight=function(){return i.toString()}),e=t[A.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR],m.It(e)&&(this.Ni.getScaleFactor=function(){return e.toString()}))},reportDeviceMetric:function(t,n){switch(this.Pe||(this.Pe={}),t){case A.Network.CONNECTION_TYPE:m.Pt(n)&&(this.Pe[t]=n,this.re)&&this.re.$(this.Pe[A.Network.CONNECTION_TYPE]);break;case A.Network.LINK_ENCRYPTION:m.Pt(n)&&(this.Pe[t]=n,this.re)&&this.re.it(this.Pe[A.Network.LINK_ENCRYPTION]);break;case A.Network.SIGNAL_STRENGTH:var i=parseInt(n,10);m.It(i)&&S.DEFAULT_SIGNAL_STRENGTH!==i&&(this.Pe[t]=i,this.re)&&this.re.ot(i)}},version:"4.6.1"},O=U.AnalyticsImpl=function(){var a=this;function f(){var t=!!a.te,n=a.getAdType(),i=a.Ae();return n===A.AdType.SERVER_SIDE&&i===A.AdPlayer.CONTENT?O.Ve.Ue:n!==A.AdType.SERVER_SIDE||i!==A.AdPlayer.SEPARATE?n===A.AdType.CLIENT_SIDE&&i===A.AdPlayer.CONTENT||(n===A.AdType.CLIENT_SIDE&&A.AdPlayer.SEPARATE,t)?O.Ve.ke:O.Ve.Fe:void 0}function c(t,n,i){t=parseInt(t,10),n=parseInt(n,10);isNaN(t)&&isNaN(n)||(isNaN(t),isNaN(n),!a.te||i!==O.Ve.ke&&i!==O.Ve.Ue||a.te.Be(t,n),!a.ee)||i!==O.Ve.Fe&&i!==O.Ve.Ue||a.ee.Be(t,n)}function l(t,n){S.oi(t)&&(!a.te||n!==O.Ve.ke&&n!==O.Ve.Ue||a.te.He(t),a.ee&&n===O.Ve.Fe||n===O.Ve.Ue)&&a.ee.He(t)}function d(t,n){t=parseInt(t,10);isNaN(t)||(!a.te||n!==O.Ve.ke&&n!==O.Ve.Ue||a.te.je(t),!a.ee)||n!==O.Ve.Fe&&n!==O.Ve.Ue||a.ee.je(t)}function v(t,n){t=parseInt(t,10);isNaN(t)||(!a.te||n!==O.Ve.ke&&n!==O.Ve.Ue||a.te.Ge(t),!a.ee)||n!==O.Ve.Fe&&n!==O.Ve.Ue||a.ee.Ge(t)}function E(t,n){t=parseInt(t,10);!a.te||n!==O.Ve.ke&&n!==O.Ve.Ue||a.te.Ke(!0,t),!a.ee||n!==O.Ve.Fe&&n!==O.Ve.Ue||a.ee.Ke(!0,t)}function _(t){!a.te||t!==O.Ve.ke&&t!==O.Ve.Ue||a.te.Ke(!1,-1),!a.ee||t!==O.Ve.Fe&&t!==O.Ve.Ue||a.ee.Ke(!1,-1)}function R(t,n){t=parseInt(t,10);isNaN(t)||(!a.te||n!==O.Ve.ke&&n!==O.Ve.Ue||a.te.We(t),!a.ee)||n!==O.Ve.Fe&&n!==O.Ve.Ue||a.ee.We(t)}function p(t,n){t=parseInt(t,10);isNaN(t)||(!a.te||n!==O.Ve.ke&&n!==O.Ve.Ue||a.te.Ye(t),!a.ee)||n!==O.Ve.Fe&&n!==O.Ve.Ue||a.ee.Ye(t)}function T(t,n){t=parseInt(t,10);isNaN(t)||(!a.te||n!==O.Ve.ke&&n!==O.Ve.Ue||a.te.xe(t),!a.ee)||n!==O.Ve.Fe&&n!==O.Ve.Ue||a.ee.xe(t)}!function(){}.apply(this,arguments),this.de=function(t,n,i,e){switch(t){case A.Playback.BITRATE:e===O.Ve.ke?R(n,O.Ve.ke):R(n,f());break;case A.Playback.AVG_BITRATE:e===O.Ve.ke?p(n,O.Ve.ke):p(n,f());break;case A.Playback.PLAY_HEAD_TIME:e===O.Ve.ke?d(n,O.Ve.ke):d(n,f());break;case A.Playback.RESOLUTION:e===O.Ve.ke?c(n,i,O.Ve.ke):c(n,i,f());break;case A.Playback.BUFFER_LENGTH:e===O.Ve.ke?v(n,O.Ve.ke):v(n,f());break;case A.Playback.PLAYER_STATE:e===O.Ve.ke?l(n,O.Ve.ke):l(n,f());break;case A.Playback.RENDERED_FRAMERATE:e===O.Ve.ke?T(n,O.Ve.ke):T(n,f());break;case A.Playback.SEEK_STARTED:arguments.length>=2&&"CONVIVA"!==n?E(n,f()):i===O.Ve.ke?E(-1,O.Ve.ke):E(-1,f());break;case A.Playback.SEEK_ENDED:i===O.Ve.ke?_(O.Ve.ke):_(f());break;case A.Playback.CDN_IP:u=n,h=f(),m.Pt(u)&&(!a.te||h!==O.Ve.ke&&h!==O.Ve.Ue||a.te.qe(u),!a.ee||h!==O.Ve.Fe&&h!==O.Ve.Ue||a.ee.qe(u));break;case A.Playback.DROPPED_FRAMES_TOTAL:h=n,u=f();h=parseInt(h,10),isNaN(h)||(!a.te||u!==O.Ve.ke&&u!==O.Ve.Ue||a.te.Je(h),!a.ee)||u!==O.Ve.Fe&&u!==O.Ve.Ue||a.ee.Je(h);break;case A.Playback.DROPPED_FRAMES_COUNT:var s=n,o=f();s=parseInt(s,10),isNaN(s)||(!a.te||o!==O.Ve.ke&&o!==O.Ve.Ue||a.te.Xe(s),!a.ee)||o!==O.Ve.Fe&&o!==O.Ve.Ue||a.ee.Xe(s);break;default:o=t,s=n,r=f(),m.Pt(o)&&s&&(!a.te||r!==O.Ve.ke&&r!==O.Ve.Ue||a.te.Zt(o,s),!a.ee||r!==O.Ve.Fe&&r!==O.Ve.Ue||a.ee.Zt(o,s))}var r,u,h}},U.AnalyticsImpl.Ve={ke:1,Fe:2,Ue:3},J=U.AppAnalyticsHandler=function(){var o=this;o.re=null,o.Qe=null,o.Ze=null,o.ze=null,o.gt=null,function(t,n){o.re=t,o.Qe=n,o.Ze=document.createEvent("HTMLEvents"),o.Ze.initEvent(A.APP_TRACKER_EVENT.TYPE,!0,!0)}.apply(this,arguments),this.be=function(){o.$e(A.APP_TRACKER_EVENT.INIT)},this.ts=function(){o.$e(A.APP_TRACKER_EVENT.VIDEO_ATTEMPT)},this.ns=function(){o.$e(A.APP_TRACKER_EVENT.VIDEO_END),o.gt=null},this.es=function(t){o.$e(A.APP_TRACKER_EVENT.VIDEO_PLAY,t)},this.ss=function(t){o.$e(A.APP_TRACKER_EVENT.VIDEO_PAUSE,t)},this.os=function(t){o.$e(A.APP_TRACKER_EVENT.VIDEO_ERROR,t)},this.rs=function(t){o.$e(A.APP_TRACKER_EVENT.VIDEO_BUFFERING,t)},this.us=function(t){o.$e(A.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH,t)},this.hs=function(t){o.$e(A.APP_TRACKER_EVENT.VIDEO_METADATA_CHANGE,t)},this.fs=function(t){t={cen:t.name,ced:t.data};o.$e(A.APP_TRACKER_EVENT.VIDEO_CUSTOM_EVENT,t)},this.cs=function(t){t={cen:t.name,ced:t.data};o.$e(A.APP_TRACKER_EVENT.SDK_CUSTOM_EVENT,t)},this.ls=function(t){o.$e(A.APP_TRACKER_EVENT.AD_BREAK_START,{cen:"PodStart",ced:t})},this.ds=function(){o.$e(A.APP_TRACKER_EVENT.AD_BREAK_END,{cen:"PodEnd"})},this.$e=function(t,n){try{if(o.vs(),o.Ze.name=o.ze.name=t,o.Ze.iid=o.ze.iid=o.re.getConfig().getIid(),o.Ze.clid=o.ze.clid=o.re.getConfig().getClientId(),o.gt){var i=o.gt;if(i.Es()?(o.Ze.sid=o.ze.sid=i._s.Xt(),o.Ze.sst=o.ze.sst=i.Rs,o.Ze.url=o.ze.url=i.On,o.Ze.st=o.ze.st=i.ps(),o.Ze.an=o.ze.an=i._n,o.Ze.pn=o.ze.pn=i.Ts,o.Ze.tags=o.ze.tags=JSON.stringify(i.Ct.Rn),o.Ze.vid=o.ze.vid=i.An,i.As>=0&&(o.Ze.cl=o.ze.cl=i.As),o.Ze.lv=o.ze.lv=i.Ss,o.Ze.fw=o.ze.fw=i.Os(),o.Ze.fwv=o.ze.fwv=i.Ns(),o.Ze.mn=o.ze.mn=i.Vn,o.Ze.mv=o.ze.mv=i.kn,i.yn>=0&&(o.Ze.br=o.ze.br=i.yn)):i.Is()&&(o.Ze.sid=o.ze.sid=i._s.Xt(),o.Ze.sst=o.ze.sst=i.Rs,o.Ze.st=o.ze.st=i.ps(),o.Ze.mn=o.ze.mn=i.Vn,o.Ze.mv=o.ze.mv=i.kn),n)for(var e=Object.keys(n),s=0;s<e.length;s++)"object"===typeof n[e[s]]?o.Ze[e[s]]=o.ze[e[s]]=JSON.stringify(n[e[s]]):o.Ze[e[s]]=o.ze[e[s]]=n[e[s]]}document.dispatchEvent(o.Ze)}catch(t){throw new Error(t)}},this.vs=function(){if(null!==o.ze)for(var t=Object.keys(o.ze),n=0;n<t.length;n++)delete o.Ze[t[n]];o.ze={}},this.ws=function(t,n,i){try{((o.gt=i).Es()||i.Is())&&(t===g.gs?n[g.Cs][g.ys]?n[g.Cs][g.ys]===g.Ds?o.es(n):n[g.Cs][g.ys]===g.Ps?o.rs(n):n[g.Cs][g.ys]===g.bs&&o.ss(n):n[g.Cs][g.Ms]?o.us(n):o.hs(n):t===g.Ls?o.os({err:n[g.Us],ft:n[g.Vs]}):t===g.ks&&(n[g.Fs]===A.Events.POD_START?o.ls(n[g.Bs]):n[g.Fs]===A.Events.POD_END?o.ds(n[g.Bs]):o.gt.Es()?o.fs({name:n[g.Fs],data:n[g.Bs]}):o.cs({name:n[g.Fs],data:n[g.Bs]})))}catch(t){throw new Error(t)}}},X=U.PlayerMonitor=function(){var e=this;this.Hs=null,this.js=null,this.Ct=null,this.Gs=null,this.Pn=S.PlayerState.UNKNOWN,this.Ks=-1,this.Ws=-1,this.jn=[],this.Ys=null,this.xs=null,this.qs=-2,this.Js=-2,this.Mn=-1,this.V=S.DEFAULT_SIGNAL_STRENGTH,this.Xs=null,this.Ei=null,this.U=null,this.L=null,this.ue=null,this.Qs=null,this.Zs=null,this.zs=null,this.$s=null,this.Re=null,this.he=null,function(t){e.ue=t}.apply(this,arguments),this.no=function(){return e.Pn},this.He=function(t){e.Pn!==t&&(e.Ie(),e.Pn=t,e.io())},this.eo=function(){return e.so},this.oo=function(){return e.ro},this.Ke=function(t,n){e.Ie(),e.so=t,e.ro=n,e.uo()},this.ho=function(){return e.Ks},this.je=function(t){e.Ks=t},this.ao=function(){return e.Ws},this.Ge=function(t){e.Ws=t},this.oe=function(){return e.qs},this.We=function(t){e.qs!==t&&(e.qs=t,e.io())},this.fo=function(){return e.Js},this.Ye=function(t){e.Js!==t&&(e.Js=t,e.io())},this.co=function(){return e.Mn},this.xe=function(t){e.Mn=t},this.lo=function(){return e.Xs},this.qe=function(t){e.Xs=t,e.io()},this.vi=function(){return e.Ei},this.Je=function(t){e.Ei=t,e.io()},this.Xe=function(t){e.do(t)},this.vo=function(){return e.V},this.Eo=function(){return e._o},this.Ro=function(){return e.po},this.Be=function(t,n){n<0&&(n=0),e._o===(t=t<0?0:t)&&e.po===n||(e._o=t,e.po=n,e.io())},this.To=function(){return e.js},this.Ao=function(){e.To()&&(e.Ct=new c,e.Gs={},e.Zs={},e.So())},this.Oo=function(t){(e.js||t)&&(this.Ie(),e.js&&(e.js=null,e.Ao()),t)&&(e.js=m.No(e.js,t),e.Ao())},this.le=function(t){if(t)if(e.Ct){var n,i=!1;for(n in t)if(e.Ct[n]!==t[n]){i=!0;break}i&&(e.Ie(),e.js=m.No(t),e.So())}else e.Oo(t)},this.ve=function(t){t?e.zs!==t&&(e.zs=t,e.Io()):(e.zs=null,e.De())},this.Ie=function(){e.wo||e.zs&&(e.wo=!0,e.zs(),e.wo=!1)},this.ne=function(){return e.Hs},this.se=function(t,n){e.Hs!==t&&(e.Ie(),e.Hs&&(e.Co(),e.De(),e._e()),e.Hs=t,e.Hs)&&e.we(n)},this.yo=function(){return e.Ys},this.mo=function(){return e.xs||null},this.Do=function(){return e.jn},this.Po=function(){e.jn=[]},this.si=function(t){this.Ie(),e.jn.push(t),e.li()},this.Ee=function(t,n){e.Ie(),e.Ys=t,e.xs=n,e.bo()},this.Mo=function(){e.Ie()},this.Io=function(){e.De(),e.Qs=e.ue.create(e.Mo,1e3,"PlayerMonitor.update")},this.De=function(){e.Qs&&(e.Qs(),e.Qs=null)},this.pe=function(t,n,i){e.$s=i,e.Re=t,e.Lo(),e.he=n,e.Re&&A.AdType.CLIENT_SIDE===e.Re&&(e.Pn=A.PlayerState.UNKNOWN,e.Uo(e.Re,n,i?i[A.POD_POSITION]:null))},this.Te=function(){e.Re&&A.AdType.CLIENT_SIDE===e.Re&&(e.Vo(),e.Pn=A.PlayerState.UNKNOWN),e.ko(),e.Re=null,e.he=null},this.Fo=function(){return e.$s},this.Bo=function(){return e.Re},this.getContentMetadata=function(){return this.Ct},this._e=function(){this.Hs=null,this.js=null,this.Ct=null,this.Gs=null,this.Pn=S.PlayerState.UNKNOWN,this.Ks=-1,this.Ws=-1,this.jn=[],this.Ys=null,this.xs=null,this.qs=-2,this.Js=-2,this.Mn=-1,this.V=S.DEFAULT_SIGNAL_STRENGTH,this.Xs=null,this.Ei=null,this.U=null,this.L=null,this.ue=null,this.Qs=null,this.Zs=null,this.zs=null,this.$s=null,this.Re=null,this.he=null,e.ge=null,e.me=a.NO_SESSION_KEY}},d=U.PlayerMonitorImpl=function(){var o=this;o.Se=null,o.ge=null,o.me=a.NO_SESSION_KEY,function(t,n){X.call(this,n),o.Se=t}.apply(this,arguments),this.getPHT=function(){return o.ho()},this.getBufferLength=function(){return o.ao()},this.getRenderedFrameRate=function(){return o.co()},this.getSignalStrength=function(){return o.vo()},this.uo=function(){o.ge&&o._ContentSessionKey!==a.NO_SESSION_KEY&&(o.eo()?o.ge.setPlayerSeekStart(o.oo()):o.ge.setPlayerSeekEnd())},this.io=function(){o.ge&&(o.ge.setPlayerState(o.no()),o.oe()>0&&o.ge.setBitrateKbps(o.oe()),o.fo()>0&&o.ge.setAvgBitrateKbps(o.fo()),o.Eo()>0&&o.ge.setVideoResolutionWidth(o.Eo()),o.Ro()>0&&o.ge.setVideoResolutionHeight(o.Ro()),o.lo()&&o.ge.setCDNServerIP(o.lo()),m.It(o.vi()))&&o.ge.setDroppedFramesTotal(o.vi())},this.Mt=function(){o.me!==a.NO_SESSION_KEY&&o.Se&&o.Se.updateContentMetadata(o.me,o.Ct)},this.Ce=function(){if(o.ge){o.Zs&&m.Ht(o.Zs)>0&&(o.Zs[A.MODULE_NAME]&&o.Zs[A.MODULE_VERSION]&&(t=o.Zs[A.MODULE_NAME],n=o.Zs[A.MODULE_VERSION],m.Pt(t))&&m.Pt(n)&&o.ge.setModuleNameAndVersion(t,n),o.Zs[A.FRAMEWORK_NAME]&&(t=o.Zs[A.FRAMEWORK_NAME],m.Pt(t))&&o.ge.setPlayerType(t),o.Zs[A.FRAMEWORK_VERSION])&&(n=o.Zs[A.FRAMEWORK_VERSION],m.Pt(n))&&o.ge.setPlayerVersion(n);var t,n,i=o.Do();o.Po();for(var e=0;e<i.length;e++){var s=i[e];o.ge.si(s)}}},this.Vo=function(){o.ge&&o.me!==a.NO_SESSION_KEY&&(o.io(),this.Ho())},this.Vt=function(){o.ge&&o.me!==a.NO_SESSION_KEY&&(o.io(),o.Se.kt(o.me))},this.Ho=function(){o.Se&&o.me!==A.NO_SESSION_KEY&&o.Se.adEnd(o.me)},this.Uo=function(t,n,i){var e;o.ge&&o.me!==A.NO_SESSION_KEY&&(e=null,A.AdType.CLIENT_SIDE===t?e=a.AdStream.SEPARATE:A.AdType.SERVER_SIDE===t&&(e=a.AdStream.CONTENT),o.jo(e,n,i))},this.Lt=function(){o.ge&&o.me!==A.NO_SESSION_KEY&&o.Se.Ut(o.me)},this.jo=function(t,n,i){o.Se&&o.me!==A.NO_SESSION_KEY&&o.Se.adStart(o.me,t,n,i)},this.we=function(){if(o.Se){o.ge=o.Se.getPlayerStateManager(!0),o.Ce(),o.ge.setClientMeasureInterface(this);try{var t;o.Ct&&o.Ct.custom&&!o.Ct.custom[A.UTM_TRACKING_URL]&&(Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var e,s=[],o=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)r in n&&(e=n[r],t.call(o,e,r,n))&&s.push(e);return s}),""!==(t=m.Go().split("?").join("").split("&").filter(function(t){return 2===t.split("=").length&&t.split("=")[0].toLowerCase().indexOf("utm_")>=0}).join("&")))&&(o.Ct.custom[A.UTM_TRACKING_URL]=t)}catch(t){o.p.error("PlayerMonitorImpl _createSession : "+t)}o.me=o.Se.createSession(o.Ct,o.ge,!0)}},this.Co=function(){o.Se&&(o.ge&&(o.ge.setPlayerState(A.PlayerState.STOPPED),o.ge=null),o.me!==A.NO_SESSION_KEY)&&(o.Se.cleanupSession(o.me),o.me=A.NO_SESSION_KEY)},this.li=function(){if(o.Se&&o.me!==a.NO_SESSION_KEY){var t=o.Do();o.Po();for(var n=0;n<t.length;n++){var i=t[n];o.Se.reportError(o.me,i.Ko(),i.Wo())}}},this.bo=function(){o.me!==a.NO_SESSION_KEY&&o.Se&&o.Se.sendCustomEvent(o.me,o.yo(),o.mo())},this.So=function(){var t,n=o.To(),i=!1,e=!1;for(t in n){var s=n[t];if(m.Pt(t)&&null!==s&&void 0!==s)switch(t){case A.STREAM_URL:e=!0,o.Ct.streamUrl=s;break;case A.ASSET_NAME:e=!0,o.Ct.assetName=s;break;case A.DEFAULT_RESOURCE:e=!0,o.Ct.defaultResource=s;break;case A.VIEWER_ID:e=!0,o.Ct.viewerId=s;break;case A.PLAYER_NAME:e=!0,o.Ct.applicationName=s;break;case A.DURATION:e=!0,o.Ct.duration=s;break;case A.IS_LIVE:e=!0,o.Ct.streamType=s;break;case A.ENCODED_FRAMERATE:e=!0,o.Ct.encodedFrameRate=s;break;case A.MODULE_NAME:case A.MODULE_VERSION:case A.FRAMEWORK_NAME:case A.FRAMEWORK_VERSION:i=!0,o.Zs[t]=s;break;default:A.APPLICATION_VERSION;e=!0,o.Ct.custom[t]=s}}i&&this.Ce(),e&&this.Mt()},this.Lo=function(){this.Yo(A.Events.POD_START)},this.ko=function(){this.Yo(A.Events.POD_END)},this.Yo=function(t){var n,i,e;o.Se&&o.me!==A.NO_SESSION_KEY&&(n={},(e=this.Fo())&&((i=e[A.POD_POSITION])&&(n[A.POD_POSITION]=i),(i=e[A.POD_INDEX])&&(n[A.POD_INDEX]=i+""),t===A.Events.POD_START)&&(i=e[A.POD_DURATION])&&(n[A.POD_DURATION]=i+""),(e=this.Bo())&&(n[A.AD_TYPE]=e),o.Se.sendCustomEvent(o.me,t,n))},this.do=function(t){o.ge.setDroppedFramesCount(t)},this.xo=function(t){this.me===A.NO_SESSION_KEY&&t!==A.NO_SESSION_KEY&&(this.me=t)},this.ye=function(){return this.me},this.Xt=function(){return o.Se.getSessionId(this.me)},this.Qt=function(){return o.Se.getClientId(this.me)},this.Zt=function(t,n){o.Se.Zt(this.me,t,n)},d.prototype=Object.create(X.prototype),d.prototype.constructor=d},lt.Impl=lt.Impl||{},lt.Impl.Html5Http=function(){!function(){}.apply(this,arguments),this.makeRequest=function(){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(t,n,i,e,s,o){var r=new XMLHttpRequest;return r.open(t,n,!0),e&&r.overrideMimeType&&(r.overrideMimeType=e),e&&r.setRequestHeader&&r.setRequestHeader("Content-Type",e),s>0&&(r.timeout=s,r.ontimeout=function(){r.ontimeout=r.onreadystatechange=null,o&&o(!1,"timeout after "+s+" ms")}),r.onreadystatechange=function(){4===r.readyState&&(r.ontimeout=r.onreadystatechange=null,200===r.status?o&&o(!0,r.responseText):o&&o(!1,"http status "+r.status))},r.send(i),null},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Logging=function(){!function(){}.apply(this,arguments),this.consoleLog=function(t,n){"undefined"!==typeof console&&(console.log&&n===h.LogLevel.DEBUG||n===h.LogLevel.INFO?console.log(t):console.warn&&n===h.LogLevel.WARNING?console.warn(t):console.error&&n===h.LogLevel.ERROR&&console.error(t))},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Metadata=function(){!function(){}.apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!==typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Storage=function(){!function(){}.apply(this,arguments),this.saveData=function(t,n,i,e){t=t+"."+n;try{localStorage.setItem(t,i),e(!0,null)}catch(t){e(!1,t.toString())}},this.loadData=function(t,n,i){t=t+"."+n;try{i(!0,localStorage.getItem(t))}catch(t){i(!1,t.toString())}},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Time=function(){!function(){}.apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Timer=function(){!function(){}.apply(this,arguments),this.createTimer=function(t,n){var i=setInterval(t,n);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}},v=U.VideoAnalytics=function(){var s=this;s.re=null,s.A=null,s.ue=null,s.ee=null,s.ae=null,this.release=function(){s.p,s.ee&&s.ee.ne()&&s.ee.se(!1),"undefined"!==typeof lt.ProxyMonitor&&s.ae&&(lt.ProxyMonitor.release(s.ae),s.ae=null),s.ee&&(s.ee.ve(null),s.ee._e(),s.ee=null),s.ue=null},function(t,n){s.re=t,s.A=n,s.ue=n.buildTimer(A.version),s.ee=new d(s.re,s.ue),O.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(t){s.p,s.ee&&(m.Ht(t)>0&&s.setContentInfo(t),s.ee.ne()||(s.ee.se(!0),s.re._.ts()))},this.reportPlaybackEnded=function(){s.p,s.ee&&s.ee.ne()&&(s.re._.ns(),s.ee.se(!1),"undefined"!==typeof lt.ProxyMonitor&&s.ae&&(lt.ProxyMonitor.release(s.ae),s.ae=null),s.ee.ve(null))},this.reportPlaybackFailed=function(t,n){s.ee&&(m.Ht(n)>0&&s.setContentInfo(n),s.ee.ne()||s.ee.se(!0),s.p,s.reportPlaybackError(t,a.ErrorSeverity.FATAL),s.reportPlaybackEnded())},this.setContentInfo=function(t){m.Ht(t)<=0||s.ee&&(s.p,s.ee.le(t))},this.setPlayerInfo=function(t){m.Ht(t)<=0||s.ee&&(s.p,s.ee.le(t))},this.reportPlaybackMetric=function(){0!==arguments.length&&(1===arguments.length?s.de(arguments[0]):2===arguments.length?s.de(arguments[0],arguments[1]):3===arguments.length?s.de(arguments[0],arguments[1],arguments[2]):4===arguments.length&&s.de(arguments[0],arguments[1],arguments[2],arguments[3]))},this.reportPlaybackError=function(t,n){s.ee&&m.Pt(t)&&(s.p,t=new M(t,n),s.ee.si(t))},this.reportPlaybackEvent=function(t,n){if(m.Pt(t)&&s.ee&&(s.p,s.ee))switch(t){case A.Events.USER_WAIT_STARTED:case A.Events.BUMPER_VIDEO_STARTED:s.ee.Lt();break;case A.Events.USER_WAIT_ENDED:case A.Events.BUMPER_VIDEO_ENDED:s.ee.Vt();break;default:s.ee.Ee(t,n)}},this.setCallback=function(t){s.p,s.ee&&s.ee.ve(t)},this.reportAdBreakStarted=function(t,n,i){s.ee&&(s.p,s.ee.pe(t,n,i))},this.reportAdBreakEnded=function(){s.ee&&(s.p,s.ee.Te())},this.setPlayer=function(t,n){var i,e;void 0!==t&&(n&&(i=n[A.CONVIVA_MODULE],e=n[A.MEDIA_ELEMENT]),"undefined"!==typeof i?lt.ProxyMonitor=i.ProxyMonitor:"undefined"!==typeof ConvivaModule&&(lt.ProxyMonitor=ConvivaModule.ProxyMonitor),"undefined"!==typeof lt.ProxyMonitor)&&(s.p,!t&&s.ae?(lt.ProxyMonitor.release(s.ae),s.ae=null):t?(s.ae&&lt.ProxyMonitor.release(s.ae),s.p,s.ae="undefined"!==typeof e?lt.ProxyMonitor.initConvivaDropIn(t,e,s.A,this,lt):lt.ProxyMonitor.initConvivaDropIn(t,s.A,this,lt)):"undefined"!==typeof e&&(s.ae=lt.ProxyMonitor.initConvivaDropIn(t,e,s.A,this,lt)))},this.setAdAnalytics=function(t){t?s.getAdType()&&(s.getAdType()===A.AdType.SERVER_SIDE?s.te=t.getAdPlayerMonitor():s.getAdType()===A.AdType.CLIENT_SIDE&&s.p):s.te=null},this.configureExistingSession=function(t){t!==A.NO_SESSION_KEY&&s.ee&&(s.p,s.ee.xo(t))},this.getSessionId=function(){return s.ee?(s.p,s.ee.Xt()):A.NO_SESSION_KEY},this.getClientId=function(){return s.ee?(s.p,s.ee.Qt()):null},this.ce=function(){return s.p,this.ee},this.getAdType=function(){return s.ee?s.ee.Re:null},this.Ae=function(){return s.ee?s.ee.he:null},v.prototype=Object.create(O.prototype),v.prototype.constructor=v},U.JsonParse=(k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(t){throw{name:"SyntaxError",message:t,at:n,text:V}},r=function(t){return t&&t!==s&&o("Expected '"+t+"' instead of '"+s+"'"),s=V.charAt(n),n+=1,s},F=function(){var t,n,i,e="";if('"'===s)for(;r();){if('"'===s)return r(),e;if("\\"===s)if(r(),"u"===s){for(n=i=0;n<4&&(t=parseInt(r(),16),isFinite(t));n+=1)i=16*i+t;e+=String.fromCharCode(i)}else{if("string"!==typeof k[s])break;e+=k[s]}else e+=s}o("Bad string")},e=function(){for(;s&&s<=" ";)r()},u=function(){switch(e(),s){case"{":var t,n={};if("{"===s){if(r("{"),e(),"}"===s)return r("}"),n;for(;s;){if(t=F(),e(),r(":"),Object.hasOwnProperty.call(n,t)&&o('Duplicate key "'+t+'"'),n[t]=u(),e(),"}"===s)return r("}"),n;r(","),e()}}return void o("Bad object");case"[":var i=[];if("["===s){if(r("["),e(),"]"===s)return r("]"),i;for(;s;){if(i.push(u()),e(),"]"===s)return r("]"),i;r(","),e()}}return void o("Bad array");case'"':return F();case"-":return ft();default:return(s>="0"&&s<="9"?ft:function(){switch(s){case"t":return r("t"),r("r"),r("u"),r("e"),!0;case"f":return r("f"),r("a"),r("l"),r("s"),r("e"),!1;case"n":return r("n"),r("u"),r("l"),r("l"),null}o("Unexpected '"+s+"'")})()}},function(t,r){return V=t,n=0,s=" ",t=u(),e(),s&&o("Syntax error"),"function"===typeof r?function t(n,i){var e,s,o=n[i];if(o&&"object"===typeof o)for(e in o)Object.hasOwnProperty.call(o,e)&&(void 0!==(s=t(o,e))?o[e]=s:delete o[e]);return r.call(n,i,o)}({"":t},""):t}),T=U.JSON2={},"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!==typeof T.stringify&&(E=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Q={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},T.stringify=function(t,n,i){var e;if(R=_="","number"===typeof i)for(e=0;e<i;e+=1)R+=" ";else"string"===typeof i&&(R=i);if(!(p=n)||"function"===typeof n||"object"===typeof n&&"number"===typeof n.length)return function t(n,i){var e,s,o,r,u,h=_,a=i[n];switch(a&&"object"===typeof a&&"function"===typeof a.toJSON&&(a=a.toJSON(n)),typeof(a="function"===typeof p?p.call(i,n,a):a)){case"string":return ct(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(_+=R,u=[],Object.prototype.toString.apply(a)===Object.prototype.toString.apply([])){for(r=a.length,e=0;e<r;e+=1)u[e]=t(e,a)||"null";o=0===u.length?"[]":_?"[\n"+_+u.join(",\n"+_)+"\n"+h+"]":"["+u.join(",")+"]"}else{if(p&&"object"===typeof p)for(r=p.length,e=0;e<r;e+=1)"string"===typeof p[e]&&(o=t(s=p[e],a))&&u.push(ct(s)+(_?": ":":")+o);else for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o=t(s,a))&&u.push(ct(s)+(_?": ":":")+o);o=0===u.length?"{}":_?"{\n"+_+u.join(",\n"+_)+"\n"+h+"}":"{"+u.join(",")+"}"}return _=h,o}}("",{"":t});throw new Error("JSON2.stringify")}),w=U.qo={Jo:"0123456789abcdef",Xo:function(t){for(var n="",i=7;i>=0;i--)n+=w.Jo.charAt(t>>4*i&15);return n},Qo:function(t){for(var n=1+(t.length+8>>6),i=new Array(16*n),e=0;e<16*n;e++)i[e]=0;for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<24-e%4*8;return i[e>>2]|=128<<24-e%4*8,i[16*n-1]=8*t.length,i},Zo:function(t,n){var i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i},zo:function(t,n){return t<<n|t>>>32-n},$o:function(t,n,i,e){return t<20?n&i|~n&e:!(t<40)&&t<60?n&i|n&e|i&e:n^i^e},tr:function(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514},nr:function(t){for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return w.ir(n)},ir:function(t){if(""===t)return"";for(var n,i=w.Qo(t),e=new Array(80),s=1732584193,o=-271733879,r=-1732584194,u=271733878,h=-1009589776,a=0;a<i.length;a+=16){for(var f=s,c=o,l=r,d=u,v=h,E=0;E<80;E++)e[E]=E<16?i[a+E]:w.zo(e[E-3]^e[E-8]^e[E-14]^e[E-16],1),n=w.Zo(w.Zo(w.zo(s,5),w.$o(E,o,r,u)),w.Zo(w.Zo(h,e[E]),w.tr(E))),h=u,u=r,r=w.zo(o,30),o=s,s=n;s=w.Zo(s,f),o=w.Zo(o,c),r=w.Zo(r,l),u=w.Zo(u,d),h=w.Zo(h,v)}return w.Xo(s)+w.Xo(o)+w.Xo(r)+w.Xo(u)+w.Xo(h)}},(g=U.CwsProtocol=function(){this.er=function(t,n,i,e){return e.seq=t,e.st=n,e.t=i,e},this.sr=function(t,n){var i=g.rr;return this.er(t,n,i,{})}}).version="2.6",g.ur="/0/wsg",g.H="0",g.hr=-1,g.ar=!1,g.cr=2,g.lr=-1,g.dr=-1,g.vr=1e3,g.Er="sdk.js.1",g.gs="CwsStateChangeEvent",g.Ls="CwsErrorEvent",g.rr="CwsSessionEndEvent",g.ks="CwsCustomEvent",g._r="CwsSeekEvent",g.Rr="CwsDataSamplesEvent",g.pr="ok",g.Tr="err",g.Ar="clid",g.Sr="cfg",g.Or="evs",g.Nr="maxhbinfos",g.Ir="slg",g.wr="hbi",g.gr="gw",g.Cr="fp",g.yr="csi_en",g.mr="CwsSessionHb",g.Dr="t",g.Pr="st",g.Mr="sst",g.Lr="lv",g.Ur="seq",g.Vr="cid",g.kr="clid",g.Fr="clv",g.Br="pver",g.Hr="iid",g.jr="sid",g.Gr="vid",g.Kr="an",g.Wr="pn",g.Yr="tags",g.qr="sf",g.Jr="evs",g.Xr="lg",g.Qr="hbinfos",g.Zr="sdk",g.zr="pj",g.ys="ps",g.Ms="br",g.$r="avgbr",g.tu="cl",g.nu="efps",g.iu="afps",g.eu="rfpstot",g.su="rfpscnt",g.ou="rs",g.ru="pht",g.uu="bl",g.hu="url",g.au="caps",g.fu="pm",g.cu="w",g.lu="h",g.du="ct",g.vu="le",g.Eu="dftot",g._u="dfcnt",g.Ru="ss",g.pu="csi_n",g.Tu="csi_t",g.Au="csi_l",g.Su="csi_v",g.Ou="csi_c",g.Nu="sch",g.Iu="br",g.wu="brv",g.gu="dvb",g.Cu="dvma",g.yu="dvm",g.mu="dvt",g.Du="dvv",g.Pu="sw",g.bu="sh",g.Mu="scf",g.Lu="fw",g.Uu="fwv",g.Vu="cc",g.ku="mn",g.Fu="mv",g.Bu="os",g.Hu="osv",g.ju="cat",g.Gu="caps",g.Ku="t",g.Wu="seq",g.Yu="st",g.xu="act",g.qu="skto",g.Us="err",g.Vs="ft",g.Cs="new",g.Ju="old",g.Fs="name",g.Bs="attr",g.Xu="seq",g.Qu="err",g.Zu="rtt",g.zu="ad",g.$u="csi",g.th=function(t){switch(t){case S.PlayerState.STOPPED:return g.nh;case S.PlayerState.PLAYING:return g.Ds;case S.PlayerState.BUFFERING:return g.Ps;case S.PlayerState.PAUSED:return g.bs;case S.PlayerState.NOT_MONITORED:return g.ih;default:return g.eh}},g.nh=1,g.Ds=3,g.Ps=6,g.bs=12,g.ih=98,g.eh=100,g.sh={oh:0,Ot:1,rh:2,uh:4},g.hh={ah:0},Z=U.LibJSONInterface=function(){this.fh=function(t){var n=null;try{n=T.stringify(t)}catch(t){}return n},this.lh=function(t){var n=null;try{n=U.JsonParse(t)}catch(t){return n}return n=m.dh(n)?n:null}},z=U.CwsHeartbeat=function(){this.Eh={},function(){}.apply(this,arguments),this.get=function(){return this.Eh},this._h=function(t,n){this.Eh[t]=n},this.Rh=function(t,n,i){this.Eh[t]||(this.Eh[t]={}),this.Eh[t][n]=i},this.ph=function(t){this._h(g.Dr,t)},this.Th=function(t){this._h(g.Pr,t)},this.Ah=function(t){this._h(g.Mr,t)},this.Sh=function(t){this._h(g.Lr,t)},this.Oh=function(t){this._h(g.Ur,t)},this.Nh=function(t){this._h(g.Vr,t)},this.Ih=function(t){this._h(g.kr,t)},this.wh=function(t){this._h(g.Fr,t)},this.gh=function(t){this._h(g.Br,t)},this.Ch=function(t){this._h(g.Gu,t)},this.yh=function(t){this._h(g.jr,t)},this.mh=function(t){this._h(g.Hr,t)},this.Dh=function(t){this._h(g.Gr,t)},this.Ph=function(t){this._h(g.Kr,t)},this.bh=function(t){this._h(g.Wr,t)},this.Mh=function(t){this._h(g.Yr,t)},this.Lh=function(t){this._h(g.qr,t)},this.Uh=function(t){this._h(g.au,t)},this.Vh=function(t){this._h(g.Jr,t)},this.kh=function(t){this._h(g.Zr,t)},this.Fh=function(t){this._h(g.Xr,t)},this.Bh=function(t){this._h(g.Qr,t)},this.He=function(t){this._h(g.ys,t)},this.Hh=function(t){this._h(g.zr,t)},this.jh=function(t){this._h(g.tu,t)},this.Gh=function(t){this._h(g.Ms,t)},this.Kh=function(t){this._h(g.$r,t)},this.Wh=function(t){this._h(g.ou,t)},this.Yh=function(t){this._h(g.nu,t)},this.xh=function(t){this._h(g.iu,t)},this.qh=function(t){this._h(g.su,t)},this.Jh=function(t){this._h(g.eu,t)},this.Xh=function(t){this.Rh(g.fu,g.Nu,t)},this.Qh=function(t){this.Rh(g.fu,g.Iu,t)},this.Zh=function(t){this.Rh(g.fu,g.wu,t)},this.zh=function(t){this.Rh(g.fu,g.gu,t)},this.$h=function(t){this.Rh(g.fu,g.Cu,t)},this.ta=function(t){this.Rh(g.fu,g.yu,t)},this.na=function(t){this.Rh(g.fu,g.mu,t)},this.ia=function(t){this.Rh(g.fu,g.Du,t)},this.ea=function(t){this.Rh(g.fu,g.Lu,t),this._h(g.Lu,t)},this.sa=function(t){this.Rh(g.fu,g.Uu,t),this._h(g.Uu,t)},this.oa=function(t){this.Rh(g.fu,g.Bu,t.toUpperCase())},this.ra=function(t){this.Rh(g.fu,g.Hu,t)},this.ua=function(t){this.Rh(g.fu,g.ju,t)},this.ha=function(t){this.Rh(g.fu,g.Pu,t)},this.aa=function(t){this.Rh(g.fu,g.bu,t)},this.fa=function(t){this.Rh(g.fu,g.Mu,t)},this.ca=function(t){this._h(g.Eu,t)},this.do=function(t){this._h(g._u,t)},this.la=function(t){this._h(g.ru,t)},this.da=function(t){this._h(g.uu,t)},this.va=function(t){this._h(g.hu,t)},this.Ea=function(t){this._h(g.cu,t)},this._a=function(t){this._h(g.lu,t)},this.Ra=function(t){this._h(g.du,t)},this.pa=function(t){this._h(g.vu,t)},this.Ta=function(){this._h(g.zu,!0)},this.Aa=function(t){this._h(g.Ru,t)},this.setModuleName=function(t){this.Rh(g.Vu,g.ku,t)},this.Sa=function(t){this.Rh(g.Vu,g.Fu,t)},this.Oa=function(t){this._h(g.$u,t)},this.Na=function(t){t&&this._h(g.pu,t)},this.Ia=function(t){t&&this._h(g.Tu,t)},this.wa=function(t){t&&this._h(g.Au,t)},this.ga=function(t){t&&this._h(g.Su,t)},this.Ca=function(t){t&&this._h(g.Ou,t)}},(C=U.CwsSession=function(){var _=this;_.ma=null,_.Ct=null,_.Rs=0,_.Da=0,_.Pa=g.sh.oh,_.ba=g.hh.ah,_.Ma=[],_.La=-1,_.yn=-2,_.Dn=-2,_.Ei=-1,_.Ua=-1,_.Va=null,_.Pn=S.PlayerState.UNKNOWN,_.gn=-1,_.As=-1,_.On=null,_.Fn=-1,_.Bn=-1,_.ge=null,_._n=null,_.An=null,_.Ts=null,_.Ss=null,_.ka={},_.Fa=null,_.Ba=null,_.Ha=null,_.ja=null,_.Ga=null,_.Ka=null,_.Wa=null,_.Ya=null,_.xa=null,_.qa=null,_.Ja=null,_.Xa=null,_.Qa=null,_.Za=null,_.za=null,_.Vn=null,_.kn=null,_.L=null,_.U=null,_.Xs=null,_.$a=null,_.tf=!1,_.nf=!1,_.if=!1,_.ef=!1,_.sf=null,_.rf=1e3,_.uf=0,_.hf=0,_.af={},_.D={},_.ff=!1,_.cf=null,_.lf=null,_.df=null,_.vf=null,_.Ef=null,_._f=null,_.Rf=12e4,_.pf=g.ar,_.Tf=!1,_.Af=null,_.yi=null,function(t,n,i,e,s,o,r,u,h,a,f,c,l){this.Sf=t,this.re=n,this.Ci=i,this.p=e,this.p.setModuleName("CwsSession"),this.I=s,this.ue=o,this.Of=r,this.Nf=u,this.If=h,this.mi=a,this.wf=f,this.Ct=c,this.Ct&&(_.gn=this.Ct.encodedFrameRate,_.On=this.Ct.streamUrl,_.As=this.Ct.duration),this.wf&&(_.Af=_.wf.get(y.B)),_.yi=l}.apply(this,arguments),this.At=function(){this.wf=null,this.mi=null,this.N=null,this.If=null,this.Nf=null,this.Of=null,this.ue=null,this.I=null,this.p=null,this.Ci=null,this.re=null,this.Sf.gf(),this.Sf=null,this.$a=null,this.if=!0},this.Cf=function(t){this._s=t,this.yf=this._s.yf,this.p.yh(this._s.C),this.Rs=this.If.current(),this.Es()||this.mf()?(this.Pa+=C.ya,_.p.info("start(): assetName="+_.Ct.assetName)):_.p.info("start()"+_.Df())},this.Pf=function(){this.ef=!0},this.bf=function(){this.p.debug("initialize()"),(this.Es()||this.mf()||this.Is())&&(_.Mf(),_.Lf(),_.Uf(),this.Es()||this.mf())&&_.Vf()},this.kf=function(){this.p.debug("end(): schedule the last hb before session cleanup"+_.Df()),this.Ff(),this.Bf(),this.Hf(),this.jf()},this.Gf=function(){this.ef||(this.jf(),this.Kf())},this.Qh=function(t){var n=_.Fa;n!==t&&t&&(_.p.debug("Change browserName from "+n+" to "+t),_.Fa=t)},this.Zh=function(t){var n=_.Ba;n!==t&&t&&(_.p.debug("Change browserVersion from "+n+" to "+t),_.Ba=t)},this.zh=function(t){var n=_.Ha;n!==t&&t&&(_.p.debug("Change deviceBrand from "+n+" to "+t),_.Ha=t)},this.$h=function(t){var n=_.ja;n!==t&&t&&(_.p.debug("Change deviceManufacturer from "+n+" to "+t),_.ja=t)},this.ta=function(t){var n=_.Ga;n!==t&&t&&(_.p.debug("Change deviceModel from "+n+" to "+t),_.Ga=t)},this.na=function(t){var n=_.Ka;n!==t&&t&&(_.p.debug("Change deviceType from "+n+" to "+t),_.Ka=t)},this.ia=function(t){var n=_.Wa;n!==t&&t&&(_.p.debug("Change deviceVersion from "+n+" to "+t),_.Wa=t)},this.oa=function(t){var n=_.qa;n!==t&&t&&(_.p.debug("Change operatingSystemName from "+n+" to "+t),_.qa=t)},this.ra=function(t){var n=_.Ja;n!==t&&t&&(_.p.debug("Change operatingSystemVersion from "+n+" to "+t),_.Ja=t)},this.ua=function(t){var n=_.Xa;n!==t&&t&&(_.p.debug("Change deviceCategory from "+n+" to "+t),_.Xa=t)},this.ha=function(t){var n=_.Qa;n!==t&&t&&(_.p.debug("Change screenWidth from "+n+" to "+t),_.Qa=t)},this.aa=function(t){var n=_.Za;n!==t&&t&&(_.p.debug("Change screenHeight from "+n+" to "+t),_.Za=t)},this.fa=function(t){var n=_.Xa;n!==t&&t&&(_.p.debug("Change scaleFactor from "+n+" to "+t),_.za=t)},this.Os=function(){return _.Ya},this.ea=function(t){var n=_.Ya;n!==t&&t&&(_.p.debug("Change frameworkName from "+n+" to "+t),_.Ya=t)},this.Ns=function(){return _.xa},this.sa=function(t){var n=_.xa;n!==t&&t&&(_.p.debug("Change frameworkVersion from "+n+" to "+t),_.xa=t)},this.va=function(t){var n;_.Ct.streamUrl||(n=_.On)!==t&&t&&(_.p.debug("Change stream url from "+n+" to "+t),_.On=t)},this.Wf=function(){_.Bf(),_.Tf||(_.Yf(),_._f=_.ue.create(_.Yf,_.Rf,"CwsSession.startCdnTimer"),_.p.debug("fetching cdn ip timer started"))},this.Bf=function(){_._f&&(_._f(),_.xf(null,null,null,null,null),_._f=null)},this.Yf=function(){_.p.debug("detectCDNServerIp(): For "+_.On),_.pf?_.qf():_.Bf()},this.qf=function(){try{var t;"function"===typeof XMLHttpRequest||"object"===typeof XMLHttpRequest?((t=new XMLHttpRequest).open("HEAD",_.On,!0),t.setRequestHeader("Pragma","akamai-x-cache-on"),t.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(this.getAllResponseHeaders().indexOf("x-cache")>=0||this.getAllResponseHeaders().indexOf("X-Cache")>=0)?_.xf("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):_.xf("null","header","null","null",""+this.status))},t.send()):_.p.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){_.p.info("Exception caught in makeAkamaiHeadRequest")}},this.xf=function(t,n,i,e,s){var o={},r={};_.cf!==t&&(null!==_.cf&&(r[g.pu]=_.cf),_.cf=t,null===_.cf?o[g.pu]="null":o[g.pu]=_.cf),_.lf!==n&&(null!==_.lf&&(r[g.Tu]=_.lf),_.lf=n,null===_.lf?o[g.Tu]="null":o[g.Tu]=_.lf),_.df!==i&&(null!==_.df&&(r[g.Au]=_.df),_.df=i,null===_.df?o[g.Au]="null":o[g.Au]=_.df),_.vf!==e&&(null!==_.vf&&(r[g.Su]=_.vf),_.vf=e,null===_.vf?o[g.Su]="null":o[g.Su]=_.vf),_.Ef!==s&&(null!==_.Ef&&(r[g.Ou]=_.Ef),_.Ef=s,null===_.Ef?o[g.Ou]="null":o[g.Ou]=_.Ef),"{}"!==JSON.stringify(o)&&_.Jf(o,r)},this.Xf=function(t){var n=_.yn;n!==t&&t>0&&(_.p.info("Change bitrate from "+n+" to "+t),_.Qf(n,t),_.yn=t)},this.Zf=function(t){var n=_.Dn;n!==t&&t>0&&(_.p.info("Change Avg bitrate from "+n+" to "+t),_.zf(n,t),_.Dn=t)},this.ca=function(t){var n=_.Ei;n!==t&&t>=0&&(_.p.info("Change dropped frames total from "+n+" to "+t),_.$f(n,t),_.Ei=t)},this.do=function(t){var n=_.Ua,i=t+(-1===_.Ua?0:_.Ua);n!==t&&i>=0&&(_.p.info("Change dropped frames count from "+n+" to "+i),_.tc(n,i),_.Ua=i)},this.Wh=function(t){var n=_.Va;n!==t&&t&&(_.p.info("Change resource from "+n+" to "+t),_.Va=t)},this.Ph=function(t){_._n!==t&&t&&(_.p.info("Change assetName from "+_._n+" to "+t),_._n=t)},this.Sh=function(t){var n=_.Ss;n!==t&&m.qi(t)&&(_.p.info("Change isLive from "+n+" to "+t),_.Ss=t)},this.Dh=function(t){var n=_.An;n!==t&&t&&(_.p.info("Change viewerId from "+n+" to "+t),_.An=t)},this.bh=function(t){var n=_.Ts;n!==t&&t&&(_.p.info("Change playerName from "+n+" to "+t),_.Ts=t)},this.Mh=function(t){var n=_.ka;!m.nc(n,t)&&t&&(_.p.info("Change tags from "+m.ic(n)+" to "+m.ic(t)),_.ka=t)},this.Yh=function(t){_.Ct.encodedFrameRate>0||(_.p.debug("setEncodedFrameRate(): "+t),_.gn=t)},this.jh=function(t){_.Ct.duration>0||(_.p.debug("setContentLength(): "+t),_.As=t)},this.He=function(t){var n;_.nf||t!==S.PlayerState.PLAYING||(_.nf=!0,m.Pt(_.Ct.viewerId)||_.p.error("Missing viewerId. viewerId should be updated before first frame is rendered."),m.Pt(_.Ct.streamType)&&c.StreamType.UNKNOWN!==_.Ct.streamType||_.p.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),m.Pt(_.Ct.applicationName))||_.p.error("Missing applicationName. applicationName should be updated before first frame is rendered."),_.Pn!==t&&(n=_.Pn,_.p.info("setPlayerState(): changing player state from "+n+" to "+t),_.ec(n,t),_.Pn=t)},this.sc=function(t){var n=_.Fn;n!==t&&t>0&&(_.p.debug("Change stream resolution width from "+n+" to "+t),_.oc(n,t),_.Fn=t)},this.rc=function(t){var n=_.Bn;n!==t&&t>0&&(_.p.debug("Change stream resolution height from "+n+" to "+t),_.uc(n,t),_.Bn=t)},this.Ra=function(t){var n=_.L;n!==t&&t&&(_.p.debug("Change network connection type from "+n+" to "+t),_.hc(n,t),_.L=t)},this.pa=function(t){var n=_.U;n!==t&&t&&(_.p.debug("Change network link encryption from "+n+" to "+t),_.ac(n,t),_.U=t)},this.Oa=function(t){_.Tf=!0,_.Bf();var n=_.Xs;n!==t&&m.Pt(t)&&(_.p.debug("Change CDN Server IP from "+n+" to "+t),_.fc(n,t),_.Xs=t)},this.cc=function(t){var n;_.p.debug("togglePauseJoin()"),_.tf===t?_.p.debug("togglePauseJoin(): same value, ignoring"):(t=_.tf,n=!_.tf,_.lc(t,n),_.tf=!_.tf)},this.dc=function(t,n){_.vc(t,n)},this.Ec=function(t,n){var i,e;n[g.Ku]=t,n[g.Yu]=this.ps(),n[g.Wu]=this.Sf._c(),this.ge&&(i=b.Rc(this.ge.getPHT(),0,null,-1),e=b.Rc(this.ge.getBufferLength(),0,null,-1),i>=0&&(n[g.ru]=i),e>0)&&(n[g.uu]=e),this.Sf.Tc(n),this.re._&&this.re._.ws(t,n,this)},this.Ac=function(t){_.ge=t,_.ge?_.Sc():_.Oc()},this.Ff=function(){var t=this.Nf.sr(this.Nc(),this.ps());this.Sf.Tc(t)},this.vc=function(t,n){var i={};i[g.Us]=t,i[g.Vs]=n,this.Ec(g.Ls,i)},this.Qf=function(t,n){var i={},e={};t>0&&(e[g.Ms]=t),i[g.Ms]=n,this.Jf(i,e)},this.zf=function(t,n){var i={},e={};t>0&&(e[g.$r]=t),i[g.$r]=n,this.Jf(i,e)},this.Ic=function(t,n){var i={};i[g.xu]=t,n>=0&&(i[g.qu]=n),this.Ec(g._r,i)},this.oc=function(t,n){var i={},e={};-1!==t&&(e[g.cu]=t),i[g.cu]=n,this.Jf(i,e)},this.uc=function(t,n){var i={},e={};-1!==t&&(e[g.lu]=t),i[g.lu]=n,this.Jf(i,e)},this.hc=function(t,n){var i={},e={};null!==t&&(e[g.du]=t),i[g.du]=n,this.Jf(i,e)},this.ac=function(t,n){var i={},e={};null!==t&&(e[g.vu]=t),i[g.vu]=n,this.Jf(i,e)},this.fc=function(t,n){var i={},e={};m.Pt(t)&&(e[g.$u]=t),i[g.$u]=n,this.Jf(i,e)},this.$f=function(t,n){var i={},e={};t>=0&&(e[g.Eu]=t),i[g.Eu]=n,this.Jf(i,e)},this.tc=function(t,n){var i={},e={};t>=0&&(e[g._u]=t),i[g._u]=n,this.Jf(i,e)},this.lc=function(t,n){var i={},e={};e[g.zr]=t,i[g.zr]=n,this.Jf(i,e)},this.ec=function(t,n){var i={},e={};i[g.ys]=g.th(n),e[g.ys]=g.th(t),this.Jf(i,e)},this.Jf=function(t,n){var i={};i[g.Cs]=t,n&&m.Ht(n)>0&&(i[g.Ju]=n),this.Ec(g.gs,i)},this.wc=function(t,n){var i={};i[g.Fs]=t,m.Ht(n)>0&&(i[g.Bs]=n),this.Ec(g.ks,i)},this.Hf=function(){_.ma&&(_.ma(),_.ma=null)},this.Kf=function(){_.Hf();var t=1e3*_.Ci.heartbeatInterval;_.ma=_.ue.create(_.jf,t,"Session.sendHeartbeat:"+this.yf)},this.Oc=function(){_.sf&&(_.sf(),_.sf=null)},this.Sc=function(){_.Oc(),_.sf=_.ue.create(_.gc,_.rf,"Session.startRfpsTimer")},this.Cc=function(){var t={err:"pending"};t.seq=_.Da-1,t.sentAt=_.ps(),t.rtt=-1,_.Ma.push(t);for(var n=0;n<_.Ma.length;n++)"ok"===(t=_.Ma[n]).err&&(_.Ma.splice(n,1),n--)},this.yc=function(t,n){for(var i=0;i<_.Ma.length;i++){var e=_.Ma[i];e.seq===t&&(e.rtt=_.ps()-e.sentAt,e.err=n)}},this.mc=function(t){for(var n=0;n<_.Ma.length;n++){var i=_.Ma[n];i.seq===t&&(i.rtt=_.ps()-i.sentAt,i.err="ok")}},this.Dc=function(){for(var t,n,i=_.wf.get(y.Pc),e=[],s=-1,o=0;o<_.Ma.length;o++)if("ok"===(n=_.Ma[o]).err){s=n.seq;break}for(var r=0;r<_.Ma.length;r++)((t=(n=_.Ma[r]).seq)<_.Da-i||t<s)&&e.push(r);for(var u=[],h=0;h<_.Ma.length;h++)t=(n=_.Ma[h]).seq,e.indexOf(h)<0&&u.push(_.Ma[h]);_.Ma=u},this.bc=function(){_.Dc();for(var t=[],n=0;n<_.Ma.length;n++){var i=_.Ma[n],e={};e[g.Xu]=i.seq,e[g.Zu]=i.rtt,e[g.Qu]=i.err,t.push(e)}return t},this.Mc=function(){var t,n=-1,i=-1,e=_.Sf.gf();if(_.Is()&&0===e.length)return null;var s=new z,o=(s.ph(g.mr),s.Nh(_.Ci.customerKey),s.Ih(_.wf.get(y.B)),s.yh(_._s.C),s.Oh(_.Da),s.gh(g.version),A.version);if(_.yi&&(o=_.yi),s.wh(o),s.mh(_.re.C),s.Ch(0),_.re.L?s.Ra(_.re.L):_.L&&s.Ra(_.L),_.re.U?s.pa(_.re.U):_.U&&s.pa(_.U),m.Pt(_.Xs)&&s.Oa(_.Xs),s.Xh(g.Er),_.Fa&&s.Qh(_.Fa),_.Ba&&s.Zh(_.Ba),_.Ha&&s.zh(_.Ha),_.ja&&s.$h(_.ja),_.Ga&&s.ta(_.Ga),_.Ka&&s.na(_.Ka),_.Wa&&s.ia(_.Wa),_.qa&&s.oa(_.qa),_.Ja&&s.ra(_.Ja),_.Xa&&s.ua(_.Xa),_.Ya&&s.ea(_.Ya),_.xa&&s.sa(_.xa),_.Qa&&!isNaN(_.Qa)&&s.ha(parseInt(_.Qa,10)),_.Za&&!isNaN(_.Za)&&s.aa(parseInt(_.Za,10)),_.za&&!isNaN(_.za)?s.fa(parseFloat(_.za)):(_.Qa&&!isNaN(_.Qa)||_.Za&&!isNaN(_.Za))&&s.fa(1),_.ge&&(_.Vn=_.ge.Xn(),_.Vn&&s.setModuleName(_.Vn),_.kn=_.ge.Qn(),_.kn&&s.Sa(_.kn),_.ge.Zn()&&(_.Ya=_.ge.Zn(),s.ea(_.Ya)),_.ge.$n())&&(_.xa=_.ge.$n(),s.sa(_.xa)),_.An&&s.Dh(_.An),m.Ht(_.ka)>0&&s.Mh(_.ka),_.Es()||_.mf()){_.mf()&&s.Ta(),_._n&&s.Ph(_._n),s.Lh(_.Pa);o=g.th(_.Pn),o=(s.He(o),s.Hh(_.tf),_.Ts&&s.bh(_.Ts),m.qi(_.Ss)&&s.Sh(_.Ss),_.As>0&&s.jh(_.As),_.yn>0&&s.Gh(_.yn),_.Dn>0&&s.Kh(_.Dn),null!==_.Va&&s.Wh(_.Va),_.gn>0&&s.Yh(_.gn),_.ge&&(n=b.Rc(_.ge.getPHT(),0,null,-1),i=b.Rc(_.ge.getBufferLength(),0,null,-1)),m.It(_.re.V)?t=_.re.V:_.ge&&(t=_.ge.getSignalStrength()),n>=0&&s.la(n),i>0&&s.da(i),_.Lc());if(o>0&&s.xh(o),_.hf>0&&s.Jh(b.Rc(_.hf,0,null,-1)),_.uf>0&&s.qh(b.Rc(_.uf,0,null,-1)),t!==S.DEFAULT_SIGNAL_STRENGTH&&s.Aa(t),_.On&&s.va(_.On),_.Fn>0&&s.Ea(_.Fn),_.Bn>0&&s._a(_.Bn),_.Ei>-1&&s.ca(_.Ei),_.Ua>-1&&(s.do(_.Ua),_.Ua>0)&&(_.tc(_.Ua,0),_.Ua=0),"undefined"!==typeof _.$a)for(var r in _.$a)s._h(r,_.$a[r])}else s.Lh(g.sh.oh);return e.length>0&&s.Vh(e),s.Uh(_.ba),s.kh(!0),_.wf.get(y.Uc)&&s.Fh(_.mi.gf()),_.wf.get(y.Pc)>0&&(n=_.bc()).length>0&&s.Bh(n),0===_.Da&&(s=_.Vc(s)),(s=0!==_.Da?_.kc(s):s).Ah(_.Rs),s.Th(_.ps()),_.pf&&(s.Na(_.cf),s.Ia(_.lf),s.wa(_.df),s.ga(_.vf),s.Ca(_.Ef)),_.Da++,s.get()},this.kc=function(t){var n,i=_.D,e={};for(n in t.Eh.tags)Object.prototype.hasOwnProperty.call(i,n)||(e[n]=t.Eh.tags[n]);t.Eh.tags=e,_.D={};for(var s=0;s<_.af.length;s++)Object.prototype.hasOwnProperty.call(_.re.D,_.af[s])?Object.prototype.hasOwnProperty.call(_.re.M,_.af[s])?_.re.M[_.af[s]]===y.$t.tn?(_.D[y.Fc+""+_.af[s]]=y.$t.tn,_.re.P("End-user chose to opt-out of personal data collection")):_.re.M[_.af[s]]===y.$t.en?(_.D[y.Fc+""+_.af[s]]=y.$t.en,_.re.P("End-user chose to opt-out of personal data collection")):_.re.M[_.af[s]]===y.$t.zt?(_.D[y.Fc+""+_.af[s]]=y.$t.zt,_.re.P("End-user used privacy settings and chose to opt-out of personal data collection")):(_.D[y.Fc+""+_.af[s]]=_.re.D[_.af[s]],_.re.P("Data collection successful")):(_.D[y.Fc+""+_.af[s]]=_.re.D[_.af[s]],_.re.P("Data collection successful")):_.D[y.Fc+""+_.af[s]]=y.$t.Bc;var o,r={};for(o in i){var u=o.split(".");"{}"!==JSON.stringify(_.af)&&-1!==_.af.indexOf(""+u[2])||i[y.Fc+""+u[2]]===y.$t.Hc||(_.re.P("Data collection restricted from Conviva back-end"),_.D[y.Fc+""+u[2]]=y.$t.Hc,r[y.Fc+""+u[2]]=y.$t.Hc)}if("{}"!==JSON.stringify(_.D)){var h,a=m.jc(_.D);for(h in t.Eh.tags)a[h]=t.Eh.tags[h];if(t.Eh.tags=a,!m.nc(i,_.D)){var f={};if("{}"!==JSON.stringify(r)&&(f[g.Yr]=r),"{}"!==JSON.stringify(i)){for(var c in i)_.D[c]&&i[c]!==_.D[c]&&(f[g.Yr]||(f[g.Yr]={}),f[g.Yr][c]=_.D[c]);for(var l in _.D)Object.prototype.hasOwnProperty.call(i,l)&&i[l]===_.D[l]||(f[g.Yr]||(f[g.Yr]={}),f[g.Yr][l]=_.D[l])}"{}"===JSON.stringify(i)&&(f[g.Yr]=_.D);var d,v,E={};E[g.Cs]=f,E[g.Ku]=g.gs,E[g.Yu]=_.ps(),E[g.Wu]=_.Sf._c(),_.ge&&(d=b.Rc(_.ge.getPHT(),0,null,-1),v=b.Rc(_.ge.getBufferLength(),0,null,-1),d>=0&&(E[g.ru]=d),v>0)&&(E[g.uu]=v),t.Eh.evs||(t.Eh.evs=[]),t.Eh.evs.push(E)}}return t},this.Vc=function(t){var n=_.Gc();if("{}"!==JSON.stringify(n)){var i,e=m.jc(n);for(i in t.Eh.tags)e[i]=t.Eh.tags[i];t.Eh.tags=e;var s,o={},n=(o[g.Yr]=n,{});n[g.Cs]=o,n[g.Ku]=g.gs,n[g.Yu]=_.ps(),n[g.Wu]=_.Sf._c(),_.ge&&(o=b.Rc(_.ge.getPHT(),0,null,-1),s=b.Rc(_.ge.getBufferLength(),0,null,-1),o>=0&&(n[g.ru]=o),s>0)&&(n[g.uu]=s),t.Eh.evs||(t.Eh.evs=[]),t.Eh.evs.push(n)}return t},this.Gc=function(){var t={};if("undefined"!==typeof navigator&&navigator){if(t["c3.fp.cookie"]="undefined"!==typeof navigator.cookieEnabled&&navigator.cookieEnabled?""+navigator.cookieEnabled:"",t["c3.fp.memory"]="undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?""+navigator.deviceMemory:"",t["c3.fp.hwConc"]="undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",t["c3.fp.java"]=""+("function"!==typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),t["c3.fp.lang"]="undefined"!==typeof navigator.language&&navigator.language?""+navigator.language:"",t["c3.fp.langs"]="undefined"!==typeof navigator.languages&&navigator.languages&&navigator.languages.length>0?""+navigator.languages.toString():"",t["c3.fp.maxTp"]="undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",t["c3.fp.plugins"]="","undefined"!==typeof navigator.plugins&&navigator.plugins&&navigator.plugins.length>0)for(var n=0;n<navigator.plugins.length;n++)t["c3.fp.plugins"]+=navigator.plugins[n].name+",";if(t["c3.fp.mime"]="","undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var i=0;i<navigator.mimeTypes.length;i++)t["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";t["c3.fp.sysLang"]="undefined"!==typeof navigator.systemLanguage&&navigator.systemLanguage?""+navigator.systemLanguage:"",t["c3.fp.platform"]="undefined"!==typeof navigator.platform&&navigator.platform?""+navigator.platform:"",t["c3.fp.product"]="undefined"!==typeof navigator.product&&navigator.product?""+navigator.product:"",t["c3.fp.productSub"]="undefined"!==typeof navigator.productSub&&navigator.productSub?""+navigator.productSub:"",t["c3.fp.vendor"]="undefined"!==typeof navigator.vendor&&navigator.vendor?""+navigator.vendor:"",t["c3.fp.vendorSub"]="undefined"!==typeof navigator.vendorSub&&navigator.vendorSub?""+navigator.vendorSub:"";var e=_.Kc();""!==e&&(t["c3.fp.canvFp"]=e)}return"undefined"!==typeof window&&window&&("undefined"!==typeof window.screen&&window.screen&&(t["c3.fp.availHeight"]="undefined"!==typeof window.screen.availHeight&&window.screen.availHeight?""+window.screen.availHeight:"",t["c3.fp.availWidth"]="undefined"!==typeof window.screen.availWidth&&window.screen.availWidth?""+window.screen.availWidth:"",t["c3.fp.height"]="undefined"!==typeof window.screen.height&&window.screen.height?""+window.screen.height:"",t["c3.fp.width"]="undefined"!==typeof window.screen.width&&window.screen.width?""+window.screen.width:"",t["c3.fp.colorDepth"]="undefined"!==typeof window.screen.colorDepth&&window.screen.colorDepth?""+window.screen.colorDepth:"",t["c3.fp.deviceXDPI"]="undefined"!==typeof window.screen.deviceXDPI&&window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",t["c3.fp.deviceYDPI"]="undefined"!==typeof window.screen.deviceYDPI&&window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),t["c3.fp.dpi"]="undefined"!==typeof window.devicePixelRatio&&window.devicePixelRatio?""+window.devicePixelRatio:"",t["c3.fp.secure"]="boolean"===typeof window.isSecureContext?""+window.isSecureContext:""),t},this.Kc=function(){try{if("undefined"!==typeof document&&document){var t,n,i=document.createElement("CANVAS");if("undefined"!==typeof i&&i&&"function"===typeof i.getContext)return t=i.getContext("2d"),n="conviva",t.textBaseline="top",t.font="14px Arial",t.textBaseline="alphabetic",t.fillStyle="#f40",t.fillRect("undefined"!==typeof navigator.plugins&&navigator.plugins?navigator.plugins.length:0,"undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes?navigator.mimeTypes.length:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0,"undefined"!==typeof navigator.vendor&&navigator.vendor?navigator.vendor.length:0),t.fillStyle="#069",t.fillText(n,"undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>=0?navigator.maxTouchPoints:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,"undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?navigator.deviceMemory:0,"undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),w.ir(i.toDataURL())}return""}catch(t){return""}},this.jf=function(){var t;_.if||(t=_.Mc())&&_.Wc(t)},this.gc=function(){var t;_.Pn===S.PlayerState.PLAYING&&_.ge&&(t=_.ge.getRenderedFrameRate())>0&&(_.hf+=t,_.uf++)},this.Lc=function(){return _.hf>0&&_.uf>0||(this.gc(),_.hf>0&&_.uf>0)?m.Yc.Cast(+_.hf/_.uf):S.DEFAULT_RENDERED_FRAME_RATE},this.Wc=function(t){_.Cc();var i=_.Da-1;_.p.info("postHeartbeat(): Send HB["+i+"]"+_.Df());_.Of.xc(t,function(t,n){_.qc(t,n,i)})},this.qc=function(i,e,s){_.if||_.I.F("onHeartbeatResponse",function(){var t,n;i?e?(_.p.debug("onHeartbeatResponse(): received valid response for HB["+s+"]"),_.mc(s),(t=e[g.Ar])&&t!==(n=_.wf.get(y.B))&&(_.p.debug("onHeartbeatResponse(): setting the client id to "+t+" (from gateway)"),_.wf.set(y.B,t),_.wf.Jc(),n===g.H)&&t!==g.H&&_.re.k(),(n=e[g.Tr])&&n!==g.pr&&_.p.error("onHeartbeatResponse(): error from gateway: "+n),"object"===typeof(t=e[g.Sr])&&((n=t[g.Nr])>=0&&_.wf.get(y.Pc)!==n&&(_.p.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+n+" (from gateway)"),_.wf.set(y.Pc,n)),n=t[g.Ir],(n=!!m.qi(n)&&n)!==_.wf.get(y.Uc)&&(_.p.debug("onHeartbeatResponse(): turning "+(n?"on":"off")+" sending of logs"),_.wf.set(y.Uc,n)),n=t[g.wr],m.It(n)&&(n=m.Yc.Cast(n))!==_.Ci.heartbeatInterval&&(_.p.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+n),_.Ci.heartbeatInterval=n,_.ma)&&_.Kf(),(n=t[g.gr])&&n!==_.Ci.gatewayUrl&&(_.p.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),_.Ci.gatewayUrl=n),_.Xc()||(_.af={},(n=t[g.Cr])&&(_.ff||(_.ff=!0),_.p.debug("onHeartbeatResponse(): received fp from gateway: "+n),_.af=n.split(",")),_.pf=t[g.yr],m.qi(_.pf)&&(_.pf?(_.p.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),_._f||_.Wf()):_.Bf())))):_.p.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(m.Pt(n=e)?m.Qc(n,"HTTP timeout")?_.p.warning("onHeartbeatResponse(): "+n):_.p.error("onHeartbeatResponse(): failed to send heartbeat: "+n):(n=$.Zc,_.p.error("onHeartbeatResponse(): "+n)),_.yc(s,n))})},this.ps=function(){return m.Yc.Cast(_.If.current()-_.Rs)},this.Nc=function(){return this.Sf._c()},this.Df=function(){return this.Is()?" (global session)":""},this.Is=function(){return this.yf===C.Nt.oh},this.Xc=function(){return this.yf===C.Nt.oh&&"T"===this.ka["c3.IPV4IPV6GlobalSession"]},this.Es=function(){return this.yf===C.Nt.Ot},this.mf=function(){return this.yf===C.Nt.Dt},this.Mt=function(t){_.zc(t),_.Mf()},this.zc=function(t){var n={},i={};if(m.Pt(t.assetName)&&(_.Ct.assetName!==t.assetName?(_.Ct.assetName&&(n[g.Kr]=_.Ct.assetName),i[g.Kr]=t.assetName,_.Ct.assetName=t.assetName):_.p.warning("mergeContentMetadata(): assetName was not changed.")),m.Pt(t.applicationName)&&(_.Ct.applicationName!==t.applicationName?(_.Ct.applicationName&&(n[g.Wr]=_.Ct.applicationName),i[g.Wr]=t.applicationName,_.Ct.applicationName=t.applicationName):_.p.warning("mergeContentMetadata(): applicationName was not changed.")),m.Pt(t.streamUrl)&&(_.Ct.streamUrl!==t.streamUrl?(_.Ct.streamUrl&&(n[g.hu]=_.Ct.streamUrl),i[g.hu]=t.streamUrl,_.Ct.streamUrl=t.streamUrl,_.On=_.Ct.streamUrl):_.p.warning("mergeContentMetadata(): streamUrl was not changed.")),m.Pt(t.viewerId)&&(_.Ct.viewerId!==t.viewerId?(_.Ct.viewerId&&(n[g.Gr]=_.Ct.viewerId),i[g.Gr]=t.viewerId,_.Ct.viewerId=t.viewerId):_.p.warning("mergeContentMetadata(): viewerId was not changed.")),m.Pt(t.defaultResource)&&(_.Ct.defaultResource!==t.defaultResource?(_.Ct.defaultResource&&(n[g.ou]=_.Ct.defaultResource),i[g.ou]=t.defaultResource,_.Ct.defaultResource=t.defaultResource):_.p.warning("mergeContentMetadata(): defaultResource was not changed.")),m.It(t.duration)&&t.duration>0&&(_.Ct.duration!==t.duration?(_.As>0&&(n[g.tu]=_.As),i[g.tu]=t.duration,_.Ct.duration=t.duration,_.As=_.Ct.duration):_.p.warning("mergeContentMetadata(): duration was not changed.")),m.It(t.encodedFrameRate)&&t.encodedFrameRate>0&&(_.Ct.encodedFrameRate!==t.encodedFrameRate?(_.Ct.encodedFrameRate>-1&&(n[g.nu]=_.Ct.encodedFrameRate),i[g.nu]=t.encodedFrameRate,_.Ct.encodedFrameRate=t.encodedFrameRate,_.gn=_.Ct.encodedFrameRate):_.p.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!==c.StreamType.UNKNOWN&&(_.Ct.streamType!==t.streamType?(_.Ct.streamType!==c.StreamType.UNKNOWN&&(_.Ct.streamType===c.StreamType.LIVE?n[g.Lr]=!0:n[g.Lr]=!1),t.streamType===c.StreamType.LIVE?i[g.Lr]=!0:i[g.Lr]=!1,_.Ct.streamType=t.streamType):_.p.warning("mergeContentMetadata(): streamType was not changed.")),m.Ht(t.custom)>0){var e,s={},o={};for(e in t.custom)_.Ct.custom[e]!==t.custom[e]?(s[e]=t.custom[e],_.Ct.custom[e]&&(o[e]=_.Ct.custom[e]),_.Ct.custom[e]=t.custom[e]):_.p.info("mergeContentMetadata(): custom."+e+" was not changed.");m.Ht(s)>0?(m.Ht(o)>0&&(n[g.Yr]=o),i[g.Yr]=s):_.p.warning("mergeContentMetadata(): custom was not changed.")}m.Ht(i)>0&&this.Jf(i,n)},this.Mf=function(){var t;_.p.debug("setStatesFromContentMetadata()"),_.Ct.defaultResource&&this.Wh(_.Ct.defaultResource),_.Ct.streamUrl&&this.va(_.Ct.streamUrl),_.Ct.duration>0&&this.jh(_.Ct.duration),_.Ct.encodedFrameRate>0&&this.Yh(_.Ct.encodedFrameRate),_.Ct.streamType!==c.StreamType.UNKNOWN&&(t=_.Ct.streamType===c.StreamType.LIVE,this.Sh(t)),_.Ct.assetName&&this.Ph(_.Ct.assetName),_.Ct.viewerId&&this.Dh(_.Ct.viewerId),(_.Ct.applicationName||_.Ct.playerName)&&this.bh(_.Ct.applicationName||_.Ct.playerName),m.Ht(_.Ct.custom)>0&&this.Mh(_.Ct.custom)},this.Lf=function(){var t={};if(this.Is()||(_.Ct.assetName?t[g.Kr]=_.Ct.assetName:_.p.warning("enqueueEventForContentMetadata(): assetName was not set."),_.Ct.applicationName?t[g.Wr]=_.Ct.applicationName:_.p.warning("enqueueEventForContentMetadata(): applicationName was not set."),_.Ct.streamUrl?t[g.hu]=_.Ct.streamUrl:_.p.warning("enqueueEventForContentMetadata(): streamUrl was not set."),_.Ct.viewerId?t[g.Gr]=_.Ct.viewerId:_.p.warning("enqueueEventForContentMetadata(): viewerId was not set."),_.Ct.defaultResource?t[g.ou]=_.Ct.defaultResource:_.p.warning("enqueueEventForContentMetadata(): defaultResource was not set."),_.Ct.duration>-1?t[g.tu]=_.Ct.duration:_.p.warning("enqueueEventForContentMetadata(): duration was not set."),_.Ct.encodedFrameRate>-1?t[g.nu]=_.Ct.encodedFrameRate:_.p.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),_.Ct.streamType!==c.StreamType.UNKNOWN?_.Ct.streamType===c.StreamType.LIVE?t[g.Lr]=!0:t[g.Lr]=!1:_.p.warning("enqueueEventForContentMetadata(): streamType was not set.")),m.Ht(_.Ct.custom)>0)for(var n in t[g.Yr]={},_.Ct.custom)t[g.Yr][n]=_.Ct.custom[n];else this.Is()||_.p.warning("enqueueEventForContentMetadata(): custom tags were not set.");m.Ht(t)>0&&this.Jf(t,null)},this.Vf=function(){_.Ct&&m.Pt(_.Ct.assetName)||_.p.warning("Missing assetName during session creation"),_.Ct&&m.Pt(_.Ct.defaultResource)||_.p.warning("Missing resource during session creation"),_.Ct&&m.Pt(_.Ct.streamUrl)||_.p.warning("Missing streamUrl during session creation"),(!_.Ct||_.Ct.encodedFrameRate<=0)&&_.p.warning("Missing encodedFrameRate during session creation"),_.Ct&&m.Pt(_.Ct.viewerId)||_.p.warning("Missing viewerId during session creation"),_.Ct&&_.Ct.streamType&&c.StreamType.UNKNOWN!==_.Ct.streamType||_.p.warning("Missing streamType during session creation"),_.Ct&&m.Pt(_.Ct.applicationName)||_.p.warning("Missing applicationName during session creation"),(!_.Ct||_.Ct.duration<=0)&&_.p.warning("Missing duration during session creation")},this.Zt=function(t,n){_.$a||(_.$a={}),_.$a[t]=n},this.Uf=function(){var t={};_.re.L&&(t[g.du]=_.re.L,_.L=_.re.L),_.re.U&&(t[g.vu]=_.re.U,_.U=_.re.U),m.Ht(t)>0&&this.Jf(t,null)}}).ya=g.sh.Ot+g.sh.rh+g.sh.uh,C.Nt={Ot:"Video",oh:"Global",Dt:"Ad"},($=U.Session=function(){var e=this;e.ge=null,e.C=0,e.yf=C.Nt.Ot,e.$c=!1,e.if=!1,e.tl=!1,e.nl=null,e.he=null,e.il=null,e.el=!1,e.sl=S.PlayerState.NOT_MONITORED,e.ol=!1,e.rl=!1,e.ul=!1,e.hl=!1,e.al=!1,function(t,n,i,e,s,o,r){this.C=t,this.yf=n,this.wf=i,this.fl=e,this.gt=s,this.I=o,this.p=r}.apply(e,arguments),this.Cf=function(t,n){e.gt.Cf(this),t&&e.Vt(t),e.wf.ll()?e.dl(n):e.wf.vl(function(){e.dl(n)})},this.cleanup=function(){e.$c=!0,e.gt.Pf(),e.wf.ll()?e.El():e.wf.vl(function(){e.El()})},this._l=function(){(e.Es()||e.mf())&&e.ge&&e.Rl(),e.I=null,e.re=null,e.wf=null,e.fl=null,e.gt.At(),e.gt=null,e.if=!0},this.El=function(){e.gt.kf(),e._l()},this.dl=function(t){e.gt.bf(),e.pl(),t?(e.bt(t.Ko(),t.Wo()),e.gt.He(S.PlayerState.STOPPED),e.gt.kf(),e._l()):e.gt.Gf()},this.pl=function(){var t=e.fl.get(),n=t[L.BROWSER_NAME],n=(n&&e.gt.Qh(n),t[L.BROWSER_VERSION]),n=(n&&e.gt.Zh(n),t[L.DEVICE_BRAND]),n=(n&&e.gt.zh(n),t[L.DEVICE_MANUFACTURER]),n=(n&&e.gt.$h(n),t[L.DEVICE_MODEL]),n=(n&&e.gt.ta(n),t[L.DEVICE_TYPE]),n=(n&&e.gt.na(n),t[L.DEVICE_VERSION]),n=(n&&e.gt.ia(n),t[L.FRAMEWORK_NAME]),n=(n&&e.gt.ea(n),t[L.FRAMEWORK_VERSION]),n=(n&&e.gt.sa(n),t[L.OPERATING_SYSTEM_NAME]),n=(n&&e.gt.oa(n),t[L.OPERATING_SYSTEM_VERSION]),n=(n&&e.gt.ra(n),t[L.DEVICE_CATEGORY]),n=(n&&e.gt.ua(n),t[L.SCREEN_WIDTH]),n=(n&&e.gt.ha(n),t[L.SCREEN_HEIGHT]),n=(n&&e.gt.aa(n),t[L.SCALE_FACTOR]);n&&e.gt.fa(n)},this.ri=function(t){e.gt.Pn===t||(e.gt.Pn===S.PlayerState.NOT_MONITORED&&t!==S.PlayerState.NOT_MONITORED&&(e.sl=t),e.el)||e.gt.He(t)},this.ui=function(t){e.ol||e.gt.Xf(t)},this.hi=function(t){e.ol||e.gt.Zf(t)},this._i=function(t){e.rl||e.gt.ca(t)},this.Ri=function(t){e.rl||e.gt.do(t)},this.ai=function(t,n){m.It(n)||(n=-1),e.gt.Ic(t,n)},this.Wn=function(t){t>0&&(e.hl||e.gt.Yh(t))},this.qn=function(t){t>0&&(e.hl||e.gt.jh(t))},this.Jn=function(t){e.gt.va(t)},this.fi=function(t){e.gt.sc(t)},this.ci=function(t){e.gt.rc(t)},this.nt=function(t){e.gt.Ra(t)},this.et=function(t){e.gt.pa(t)},this.zn=function(t){e.gt.Os()||e.gt.ea(t)},this.ti=function(t){e.gt.Ns()||e.gt.sa(t)},this.di=function(t){e.gt.Oa(t)},this.li=function(t,n){e.bt(t,n)},this.Gn=function(){e.Rl()},this.Wt=function(t,n,i){e.tl||(e.tl=!0,e.nl=t,e.he=n,e.il=i,e.gt.cc(!0),e.nl===a.AdStream.CONTENT||e.he===a.AdPlayer.SEPARATE?(e.gt.Pn!==S.PlayerState.NOT_MONITORED&&(e.sl=e.gt.Pn),e.gt.He(S.PlayerState.NOT_MONITORED),e.el=!0):e.nl===a.AdStream.SEPARATE&&e.he===a.AdPlayer.CONTENT&&(e.gt.Pn!==S.PlayerState.NOT_MONITORED&&(e.sl=e.gt.Pn),e.gt.He(S.PlayerState.NOT_MONITORED),e.el=!0,e.ol=!0,e.rl=!0,e.hl=!0,e.ul=!0))},this.Yt=function(){e.tl&&(e.gt.cc(!1),e.nl===a.AdStream.CONTENT||e.he===a.AdPlayer.SEPARATE?e.Tl||(e.el=!1,e.gt.He(e.sl)):e.nl===a.AdStream.SEPARATE&&e.he===a.AdPlayer.CONTENT&&(e.ol=!1,e.rl=!1,e.hl=!1,e.ul=!1,e.al=!1,e.Tl||(e.el=!1,e.gt.He(e.sl))),e.tl=!1,e.nl=e.he=e.il=null)},this.Lt=function(){e.ge&&e.ge&&(e.I.F("Session.detachPlayer",function(){e.ge.Kn()}),e.ge=null,e.gt.Ac(null),e.gt.He(S.PlayerState.NOT_MONITORED))},this.Rl=function(){e.ge&&(e.I.F("Session.releasePlayerStateManager",function(){e.ge.Kn()}),e.ge=null,e.gt.Ac(null),e.gt.He(S.PlayerState.NOT_MONITORED))},this.Ut=function(){e.gt.cc(!0),e.gt.Pn!==S.PlayerState.NOT_MONITORED&&(e.sl=e.gt.Pn),e.gt.He(S.PlayerState.NOT_MONITORED),e.el=!0},this.Vt=function(t){e.ge||t instanceof S&&e.I.F("Session.attachPlayer()",function(){t.setMonitoringNotifier(e,e.C)&&(t.ni(),e.ge=t,e.gt.Ac(e.ge))})},this.kt=function(){e.gt.cc(!1),e.ol=!1,e.rl=!1,e.hl=!1,e.ul=!1,e.al=!1,e.Tl||(e.el=!1,e.sl!==S.PlayerState.NOT_MONITORED&&e.gt.He(e.sl))},this.qt=function(){return e.ge},this.Ft=function(){e.Tl||(e.Tl=!0,e.el=!0)},this.Bt=function(){e.Tl&&(e.Tl=!1,e.tl||(e.el=!1,e.sl!==S.PlayerState.NOT_MONITORED&&e.gt.He(e.sl)))},this.bt=function(t,n){!m.Pt(t)||n!==a.ErrorSeverity.FATAL&&n!==a.ErrorSeverity.WARNING||e.al||(n=n===a.ErrorSeverity.FATAL,e.gt.dc(t,n))},this.Mt=function(t){e.I.F("Session.updateContentMetadata",function(){e.gt.Mt(t)})},this.Kt=function(t,n){e.gt.wc(t,n)},this.Is=function(){return e.yf===C.Nt.oh},this.Es=function(){return e.yf===C.Nt.Ot},this.mf=function(){return e.yf===C.Nt.Dt},this.Df=function(){return e.Is()?" (global session)":""},this.Xt=function(){return this.C},this.Qt=function(){var t=null;return t=e.wf.ll()?e.wf.get(y.B):t},this.Zt=function(t,n){e.gt.Zt(t,n)}}).Zc="received no response (or a bad response) to heartbeat POST request",tt=U.SessionFactory=function(){var o=this;o.mi=null,o.Al=0,o.Sl=null,function(t,n,i,e){o.re=t,o.Ci=n,o.wf=i,o.A=e,o.Al=0,o.Sl={}}.apply(o,arguments),this.At=function(){for(var t in o.mi=null,o.Sl)o.Sl[t].cleanup();o.Sl=null,o.Al=0},this.Ol=function(){var t=o.Al;return o.Al++,t},this.St=function(t,n,i,e,s){return t||(t=new c),o.Nl(t,n,i,e,s)},this.Y=function(t){return o.Nl(t,C.Nt.oh,void 0,A.version)},this.Il=function(){return P.wl()},this.Nl=function(t,n,i,e,s){n=o.A.Gi(o.re,o.Ci,o.wf,o.Il(),n,t.ct(),e),t=o.Ol();return"undefined"!==typeof s&&"undefined"!==typeof s.error?n.Cf(i,s.error):(o.gl(t,n),n.Cf(i)),t},this.Gt=function(t){t=o.Sl[t];return t},this.wt=function(t){t=this.Gt(t);return t=!t||t.Es()||t.mf()?t:null},this.gl=function(t,n){o.Sl[t]=n},this.Cl=function(t){delete o.Sl[t]},this.xt=function(t){var n=o.Gt(t);o.Cl(t),n.cleanup()},this.tt=function(){return o.Sl}},nt=U.yl=function(t){this.ue=t,this.ml=function(i,t,n){var e=!1;this.ue.createOnce(function(){e||i(!(e=!0),n+" ("+t+" ms)")},t,"CallbackWithTimeout.wrap");return function(t,n){e||(e=!0,i(t,n))}}},(y=U.Config=function(t,n,i){var e=this;this.Pl=n,this.bl=i,this.Ml={clientId:g.H,iid:g.hr,sendLogs:!1,maxHbInfos:g.cr},this.g=m.jc(this.Ml),this.Ll=!1,this.Ul=!1,this.Vl=[],this.ll=function(){return this.Ll},this.Et=function(){this.Pl.Et(y.Dl,function(t,n){t&&e.kl(n),e.Ll=!0,e.Fl()})},this.kl=function(t){var n,t=this.bl.lh(t);t?t&&(n=t[y.Bl],t=t[y._t],n&&n!==g.H&&""!==n&&"null"!==n&&(this.g[y.B]=n),t!==g.hr)&&""!==t&&"null"!==t&&(this.g[y._t]=t):this.Ul=!0},this.Hl=function(){var t={};return t[y.Bl]=this.g.clientId,this.bl.fh(t)},this.Jc=function(){this.Pl.Jc(y.Dl,this.Hl(),function(t,n){})},this.vl=function(t){this.ll()?t():this.Vl.push(t)},this.get=function(t){return this.Ll?this.g[t]:null},this.set=function(t,n){this.Ll&&(this.g[t]=n)},this.Fl=function(){for(var t;"undefined"!==typeof(t=this.Vl.shift());)t()},this.getClientId=function(){return this.g.clientId},this.getIid=function(){return this.g.iid}}).Dl="sdkConfig",y.Bl="clId",y._t="iid",y.B="clientId",y.Uc="sendLogs",y.Pc="maxHbInfos",y.Fc="c3.fp.",y.$t={Bc:"0",jl:"1",tn:"2",zt:"3",Hc:"4",en:"5",nn:"6"},it=U.EventQueue=function(){this.Gl=[],this.Kl=0,this.Tc=function(t){this.Gl.push(t)},this._c=function(){var t=this.Kl;return this.Kl++,t},this.gf=function(){var t=this.Gl;return this.Gl=[],t}},et=U.ExceptionCatcher=function(t,n,i){this.Wl=n,this.N=i,this.F=function(n,t,i){try{t()}catch(t){if(i)i(t);else{if(this.N.allowUncaughtExceptions)throw t;this.Yl(n,t)}}},this.Yl=function(t,n){t="Uncaught exception: "+t+": "+n.toString();if(this.Wl)try{this.Wl.xc(t)}catch(t){}}},st=U.GatewayControl=function(t,n,i,e,s){var o=this;this.Ci=t,this.xl=i,this.bl=e,this.ql=s,this.xc=function(t,e){var n=(this.ql?this.ql.indexOf("ipv4")>-1?this.Ci.j:this.Ci.q:this.Ci.gatewayUrl)+g.ur;this.xl.Jl("POST",n,this.bl.fh(t),"application/json",function(t,n){var i;t?(i=o.bl.lh(n),e(t,i)):e(t,n)})}},m=U.Lang={Xl:function(t){return m.Pt(t)&&t&&"undefined"!==t&&"null"!==t},jt:function(t){var n,i,e={};for(n in t)m.Xl(n)&&(i=t[n],m.Xl(i))&&(e[n]=i);return e},Yn:function(t,n,i){if(!t)throw new Error("Expected "+i+" implementation is null.");for(var e in n)if("function"!==typeof t[e])throw new Error("Expected method "+e+" in "+i+" implementation.")},Ht:function(t){var n,i=0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&i++;return i},yt:function(t){return""+t},Ql:function(t){return Math.floor(t)},cn:function(t){return Math.abs(m.Ql(t))},Zl:function(t){return Boolean(t)},Pt:function(t){return"string"===typeof t&&""!==t},Qc:function(t,n){return"string"===typeof t&&"string"===typeof n&&"function"===typeof t.indexOf&&0===t.indexOf(n)},qi:function(t){return"boolean"===typeof t},zl:function(t){return escape(t)},dh:function(t){return"object"===typeof t},ic:function(t){var n,i="";for(n in t)i+=n+"="+t[n];return"Object{"+i+"}"},$l:function(t){var n,i=m.jc(t);for(n in i)i[n]||delete i[n];return i},jc:function(t){var n,i={};for(n in t)i[n]=t[n];return i},nc:function(t,n){if(typeof t!==typeof n)return!1;if(t instanceof Object&&n instanceof Object){if(m.Ht(t)!==m.Ht(n))return!1;for(var i in t)if(!(t[i]===n[i]))return!1;return!0}return t===n},No:function(){for(var t={},n=0;n<arguments.length;n++)for(var i in arguments[n])arguments[n][i]&&(t[i]=arguments[n][i]);return t},It:function(t){return"number"===typeof t&&Math.round(t)===t},td:function(t){return"[object Array]"===Object.prototype.toString.call(t)},nd:function(t,n){if(t!==n){if(!t||!n)return!1;if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(m.td(t[i])&&m.td(n[i])){if(!m.nd(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1}return!0},ed:function(){return"undefined"!==typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()},rn:function(t,n,i){if(m.ed())Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:i});else{if("undefined"===typeof t.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");t.__defineGetter__(n,i)}},un:function(t,n,i){if(m.ed())Object.defineProperty(t,n,{configurable:!0,set:i});else{if("undefined"===typeof t.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");t.__defineSetter__(n,i)}}},(N={two32:4294967296}).sd=N.two32-1,N.od=0,m.rd=N,m.rd.Cast=function(t){t=parseInt(t,10);return t>N.sd?t=t%N.two32:t<N.od&&(t=N.two32-(t=-t%N.two32)),t},m.rd.ud=function(t){t=parseInt(t,10);return t<=N.sd&&t>=N.od},I={sd:2147483647,od:-2147483648},m.Yc=I,m.Yc.Cast=function(t){t=parseInt(t,10);return t>I.sd?t=t%I.sd:t<I.od&&(t=I.sd-(t=-t%I.sd)),t},m.Yc.ud=function(t){t=parseInt(t,10);return t<=I.sd&&t>=I.od},m.Go=function(){return window&&window.location&&window.location.search?window.location.search:""},m.hd=function(){return document&&document.referrer?document.referrer:""},ot=U.LogBuffer=function(){this.ad=[],this.Zo=function(t){this.ad.length>=32&&this.ad.shift(),this.ad.push(t)},this.gf=function(){var t=this.ad;return this.ad=[],t}},(D=U.Ping=function(t,n,i,e){this.ld=!1,this.dd=null,this.p=t,this.p.setModuleName("Ping"),this.xl=n,this.Ci=i,this.yi=e,this.xc=function(t){this.ld||(this.ld=!0,t=this.vd()+"&d="+m.zl(t.toString()),this.p.error("send(): "+t),this.xl.Jl("GET",t,null,null,null),this.ld=!1)},this.vd=function(){if(!this.dd){var t=D.Ed+"?comp="+D.fd+"&clv="+(this.yi||a.version);if(this.Ci&&(t+="&cid="+this.Ci.customerKey),t+="&sch="+g.Er,!this.Ci)return t;this.dd=t}return this.dd}}).fd="sdkjs",D.Ed="https://pings.conviva.com/ping.ping",P=U._d={Rd:4294967295,pd:2147483647,Td:-2147483648,wl:function(){return Math.floor(Math.random()*P.Rd)+P.Td},Rt:function(){return Math.floor(Math.random()*P.Rd)}},b=U.Ad={Rc:function(t,n,i,e){return isNaN(t)||"number"!==typeof t||t===e?e:(e=m.Ql(t),b.Sd(e,n,i))},Sd:function(t,n,i){return m.It(i)&&t>i?t=i:m.It(n)&&t<n&&(t=n),t},wn:function(t){return t=-1!==t&&-2!==t?b.Rc(t,0,null,-1):t}},M=U.StreamerError=function(){var i=this;i.errorCode=null,i.severity=a.ErrorSeverity.FATAL,function(t,n){i.errorCode=t,i.severity=n}.apply(i,arguments),this.Ko=function(){return i.errorCode},this.Wo=function(){return i.severity}},rt=U.HttpClient=function(t,n,i,e){this.Si=n,this.Od=i,this.N=e,this.Jl=function(t,n,i,e,s){var o=1e3*this.N.httpTimeout,r=null;s&&(r=this.Od.ml(s,o,"HTTP timeout")),this.Si.makeRequest(t,n,i,e,o,r)}},(ut=U.Logger=function(t,n,i,e,s){this.Ii=t,this.Ti=n,this.O=i,this.mi=e,this.gi=s,this.debug=function(t){this.log(t,h.LogLevel.DEBUG)},this.info=function(t){this.log(t,h.LogLevel.INFO)},this.warning=function(t){this.log(t,h.LogLevel.WARNING)},this.error=function(t){this.log(t,h.LogLevel.ERROR)},this.log=function(t,n){t=this.Id(t,n);this.mi.Zo(t),this.O.logLevel<=n&&this.Ii.consoleLog(t,n)},this.wd=function(t){return"["+this.Vn+"] "+t},this.gd=function(t){return"["+this.gi+"] "+t},this.Cd=function(t){return"[Conviva] "+t},this.yd=function(t){return"["+(this.Ti.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+t},this.md=function(t,n){return"["+ut.Nd(n)+"] "+t},this.Dd=function(t){return t=this.Pd?"sid="+this.Pd+" "+t:t},this.yh=function(t){this.Pd=t},this.setModuleName=function(t){this.Vn=t},this.Id=function(t,n){return this.Cd(this.yd(this.md(this.gd(this.wd(this.Dd(t))),n)))}}).Nd=function(t){var n;switch(t){case h.LogLevel.ERROR:n="ERROR";break;case h.LogLevel.WARNING:n="WARNING";break;case h.LogLevel.INFO:n="INFO";break;case h.LogLevel.DEBUG:n="DEBUG"}return n},U.Storage=function(t,n,i,e){this.Oi=n,this.Od=i,this.N=e,this.Et=function(t,n){n=this.Od.ml(n,1e3*this.N.storageTimeout,"storage load timeout");this.Oi.loadData(U.Storage.bd,t,n)},this.Jc=function(t,n,i){i=this.Od.ml(i,1e3*this.N.storageTimeout,"storage save timeout");this.Oi.saveData(U.Storage.bd,t,n,i)}},U.Storage.bd="Conviva",(L=U.SystemMetadata=function(t,n,i){this.Ni=n,this.I=i,this.Md=null,this.get=function(){return this.Md||this.retrieve(),this.Md},this.retrieve=function(){var t,n={},e=(n[L.BROWSER_NAME]=this.Ni.getBrowserName,n[L.BROWSER_VERSION]=this.Ni.getBrowserVersion,n[L.DEVICE_BRAND]=this.Ni.getDeviceBrand,n[L.DEVICE_MANUFACTURER]=this.Ni.getDeviceManufacturer,n[L.DEVICE_MODEL]=this.Ni.getDeviceModel,n[L.DEVICE_TYPE]=this.Ni.getDeviceType,n[L.DEVICE_VERSION]=this.Ni.getDeviceVersion,n[L.FRAMEWORK_NAME]=this.Ni.getFrameworkName,n[L.FRAMEWORK_VERSION]=this.Ni.getFrameworkVersion,n[L.OPERATING_SYSTEM_NAME]=this.Ni.getOperatingSystemName,n[L.OPERATING_SYSTEM_VERSION]=this.Ni.getOperatingSystemVersion,n[L.DEVICE_CATEGORY]=this.Ni.getDeviceCategory,n[L.SCREEN_WIDTH]=this.Ni.getScreenWidth,n[L.SCREEN_HEIGHT]=this.Ni.getScreenHeight,n[L.SCALE_FACTOR]=this.Ni.getScaleFactor,this);for(t in n)!function(n,i){e.I.F("Session.getSystemMetadataSchema(): "+n,function(){var t=i[n];i[n]=t.call(e.Ni)})}(t,n),m.Pt(n[t])||delete n[t];var i=!1;if("undefined"!==typeof n[L.DEVICE_TYPE]){for(var s in a.DeviceType)if(n[L.DEVICE_TYPE]===a.DeviceType[s]){i=!0;break}i||delete n[L.DEVICE_TYPE]}if(i=!1,"undefined"!==typeof n[L.DEVICE_CATEGORY]){for(var o in a.DeviceCategory)if(n[L.DEVICE_CATEGORY]===a.DeviceCategory[o]){i=!0;break}i||delete n[L.DEVICE_CATEGORY]}this.Md=m.$l(n)}}).BROWSER_NAME="browserName",L.BROWSER_VERSION="browserVersion",L.DEVICE_BRAND="deviceBrand",L.DEVICE_MANUFACTURER="deviceManufacturer",L.DEVICE_MODEL="deviceModel",L.DEVICE_TYPE="deviceType",L.DEVICE_VERSION="deviceVersion",L.FRAMEWORK_NAME="frameworkName",L.FRAMEWORK_VERSION="frameworkVersion",L.OPERATING_SYSTEM_NAME="operatingSystemName",L.OPERATING_SYSTEM_VERSION="operatingSystemVersion",L.DEVICE_CATEGORY="deviceCategory",L.SCREEN_WIDTH="screenWidth",L.SCREEN_HEIGHT="screenHeight",L.SCALE_FACTOR="scaleFactor",ht=U.Time=function(t,n){this.Ti=t,this.p=n,this.current=function(){var t=this.Ti.getEpochTimeMs();return m.It(t),t}},at=U.Timer=function(t,n,i){var s=this;this.Ai=n,this.I=i,this.create=function(t,n,i){return this.createTimer(function(){s.I.F(i,function(){t()})},n,i)},this.createOnce=function(t,n,i){var e={cancel:null};return e.cancel=this.createTimer(function(){s.I.F(i,function(){e&&"function"===typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),t()})},n,i),e.cancel},this.createTimer=function(t,n,i){return this.Ai.createTimer(t,n,i)}}}(),lt});