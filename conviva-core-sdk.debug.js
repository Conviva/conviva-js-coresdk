/*! (C) 2022 Conviva, Inc. All rights reserved. Confidential and proprietary. */

!function(t,n){"function"===typeof define&&define.amd?define(n):("object"===typeof exports||"object"===typeof module&&module.exports)&&(module.exports=n()),"undefined"!==typeof t&&t&&(t.Conviva||t.ConvivaLoading||(t.ConvivaLoading=!0,t.Conviva=n(),delete t.ConvivaLoading))}(this,function(){var ut={};return function(){"use strict";var at={};!function(){var A=ut.Constants={};A.version="4.5.6",A.CUSTOMER_KEY="customerKey",A.GATEWAY_URL="gatewayUrl",A.LOG_LEVEL="logLevel",A.ASSET_NAME="Conviva.assetName",A.PLAYER_NAME="Conviva.applicationName",A.APPLICATION_VERSION="c3.app.version",A.IS_LIVE="Conviva.streamType",A.ENCODED_FRAMERATE="Conviva.encodedFrameRate",A.DEFAULT_RESOURCE="Conviva.defaultResource",A.STREAM_URL="Conviva.streamUrl",A.VIEWER_ID="Conviva.viewerId",A.DURATION="Conviva.duration",A.UTM_TRACKING_URL="c3.cm.utmTrackingUrl",A.POD_INDEX="podIndex",A.POD_POSITION="podPosition",A.POD_DURATION="podDuration",A.AD_TYPE="adType",A.MODULE_NAME="Conviva.moduleName",A.MODULE_VERSION="Conviva.moduleVersion",A.FRAMEWORK_NAME="Conviva.frameworkName",A.FRAMEWORK_VERSION="Conviva.frameworkVersion",A.i="Constants not yet configured",A.e="Invalid : Did you report playback ended?",A.s="Invalid : Did you report ad playback ended?",A.o="Player cannot be null",A.a="PlaybackAnlytics already built",A.u="PlaybackAnlytics not yet built",A.Playback={BITRATE:"BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT"},A.Network={SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},A.ErrorSeverity={FATAL:1,WARNING:0},A.NO_SESSION_KEY=-2,A.AdPosition={PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},A.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},A.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},A.AdType={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},A.AdSlates={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},A.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},A.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},A.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},A.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},A.Events={USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},A.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},A.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},A.CallbackFunctions={CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer",GENERATE_HASH:"generateHash",BASE64_ENCODE:"base64Encode"},A.DeviceMetadata={BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},A.AD_PRELOAD_FEATURE="adPreloading",A.AD_TAG_URL="adTagUrl",A.IMASDK_CONTENT_PLAYER="imaMainContentPlayer",A.CONVIVA_AD_MODULE="convivaAdModule",A.CONVIVA_MODULE="convivaModule",A.MEDIA_ELEMENT="mediaElement";var h=ut.Client=function(){var u=this;this.c=!1,this.version=h.version,this.l=null,this.d=null,this.v=null,this.p=-1,this.g=null,this.y=null,this.A=null,this.S=null,this.R=-1,this.m=!1,this.C={},this.T=function(){u.l&&arguments.length>0&&u.l.info(" Client:: uniqueIdentifierCallback(): "+arguments[0])},this.I={},this.w=null,this.N=null,this.O=null,this._=function(){this.A.P("Client.makeIPV4IPV6GlobalSessions",function(){var t;!u.S||null!==(t=u.S.get(q.D))&&t!==B.M&&u.d&&((t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.g.L.indexOf(c.V)>-1?c.V:c.U,u.F=u.d.B(t,null),(t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.g.H.indexOf(c.G)>-1?c.G:c.K,u.j=u.d.B(t,null))})},this.W=function(i){u.A.P("Client.updateConnectionType",function(){if(u.w=i,u.d){var t,n=u.d.q();for(t in n)n[t].Y(i)}})},this.J=function(i){u.A.P("Client.updateLinkEncryption",function(){if(u.N=i,u.d){var t,n=u.d.q();for(t in n)n[t].X(i)}})},this.Q=function(t){u.A.P("Client.updateSignalStrength",function(){u.O=t})},function(t,n,i,e){if(!(t instanceof c))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof g))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!==c.z+c.Z&&t.gatewayUrl!==c.$+c.Z||(this.c=!0),e&&(this.version=e),this.g=t.tt(),this.v=n,this.v.nt("SDK",this.g,this.version),this.A=this.v.it(this.version),this.A.P("Client.init",function(){if(u.S=u.v.et(),u.S.ot(),u.R=u.S.get(q.rt),-1===u.R&&null!==u.R&&(u.R=$.ut()),u.l=u.v.buildLogger(),u.l.setModuleName("Client"),u.c&&u.l.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),u.l.info("init(): url="+u.g.gatewayUrl+" customerKey="+u.g.customerKey),u.d=u.v.ht(u,u.g,u.S),i)for(var t in i)switch(t){case A.Network.CONNECTION_TYPE:u.W(i[t]);break;case A.Network.LINK_ENCRYPTION:u.J(i[t]);break;case A.Network.SIGNAL_STRENGTH:u.Q(i[t])}u._(),u.l.info("init(): done.")},function(t){throw new Error("Client constructor failed: "+t.message)})}.apply(this,arguments),this.release=function(){this.m||this.A.P("Client.release",function(){u.l&&(u.l.info("release()"),u.l=null),u.d.ct(),u.d=null,u.p=-1,u.R=-1,u.A=null,u.g=null,u.y=null,u.v=null,u.m=!0})},this.createSession=function(t,n,i){var e=h.NO_SESSION_KEY;return this.m||(!t||t instanceof f?this.A.P("Client.createSession",function(){e=u.d.ft(t,K.dt.lt,n,(i?A:u).version)}):u.l.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),e},this.createAdSession=function(i,e,s,o,r){var a=h.NO_SESSION_KEY;return this.m||(!e||e instanceof f?this.A.P("Client.createAdSession",function(){var t,n;e||(e=new f),!Q.vt(i)||i===h.NO_SESSION_KEY||(t=u.d.pt(i))&&(n=e.custom[A.APPLICATION_VERSION],e.applicationName&&e.viewerId&&"undefined"!==typeof n&&n||t.Et&&t.Et.gt&&(!e.viewerId&&t.Et.gt.viewerId&&(e.viewerId=t.Et.gt.viewerId),!e.applicationName&&t.Et.gt.applicationName&&(e.applicationName=t.Et.gt.applicationName),"undefined"!==typeof n&&n||"undefined"!==typeof(n=t.Et.gt.custom[A.APPLICATION_VERSION])&&n&&(e.custom[A.APPLICATION_VERSION]=n)),e.custom["c3.csid"]=Q.yt(t.R)),a=u.d.ft(e,K.dt.At,s,(o?A:u).version,r)}):u.l.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),a},this.reportError=function(n,i,e){this.m||(Q.St(i)?e===h.ErrorSeverity.FATAL||e===h.ErrorSeverity.WARNING?this.A.P("Client.reportError",function(){var t=u.d.pt(n);t&&t.Rt(i,e)}):this.l.error("reportError(): invalid error severity: "+e):this.l.error("reportError(): invalid error message string: "+i))},this.updateContentMetadata=function(i,e){this.m||(e instanceof f?this.A.P("Client.updateContentMetadata",function(){var t,n=u.d.pt(i);n&&(t=e.tt(),n.mt(t))}):u.l.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter"))},this.detachPlayer=function(n){this.m||this.A.P("Client.detachPlayer",function(){var t=u.d.pt(n);t&&t.Ct()})},this.Tt=function(n){this.m||this.A.P("Client.offFocus",function(){var t=u.d.pt(n);t&&t.Tt()})},this.attachPlayer=function(n,i){this.m||(i instanceof a?this.A.P("Client.attachPlayer",function(){var t=u.d.pt(n);t&&t.It(i)}):u.l.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter"))},this.wt=function(n){this.m||this.A.P("Client.onFocus",function(){var t=u.d.pt(n);t&&t.wt()})},this.contentPreload=function(n){this.m||this.A.P("Client.contentPreload",function(){var t=u.d.pt(n);t&&t.Nt()})},this.contentStart=function(n){this.m||this.A.P("Client.contentStart",function(){var t=u.d.pt(n);t&&t.Ot()})},this.sendCustomEvent=function(i,e,s){this.m||(Q.St(e)?(Q._t(s)<=0&&u.l.warning("eventAttributes(): should have proper data."),this.A.P("Client.sendCustomEvent",function(){i===h.NO_SESSION_KEY&&(u.p<0&&(n=new f,u.p=u.d.B(n,null)),i=u.p);var t=Q.Pt(s),n=u.d.Dt(i);n&&n.bt(e,t)})):u.l.error("sendCustomEvent(): eventName parameter must be a valid string."))},this.adStart=function(n,i,e,s){this.m||(i===h.AdStream.CONTENT||i===h.AdStream.SEPARATE?e===h.AdPlayer.CONTENT||e===h.AdPlayer.SEPARATE?(s!==h.AdPosition.PREROLL&&s!==h.AdPosition.MIDROLL&&s!==h.AdPosition.POSTROLL&&this.l.info("adStart(): ignored, invalid value for adPosition parameter: "+s),this.A.P("Client.adStart",function(){var t=u.d.pt(n);t&&t.Mt(i,e,s)})):this.l.error("adStart(): ignored, invalid value for adPlayer parameter: "+e):this.l.error("adStart(): ignored, invalid value for adStream parameter: "+i))},this.adEnd=function(n){this.m||this.A.P("Client.adEnd",function(){var t=u.d.pt(n);t&&t.Lt()})},this.cleanupSession=function(t){this.m||(t!==h.NO_SESSION_KEY?this.A.P("Client.cleanupSession",function(){u.d.pt(t)&&u.d.Vt(t)}):this.l.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"))},this.getAttachedPlayer=function(n){var i=null;return this.m||(n===h.NO_SESSION_KEY?this.l.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this.A.P("Client.getAttachedPlayer",function(){var t=u.d.pt(n);t&&(i=t.kt())})),i},this.isPlayerAttached=function(t){return!this.m&&null!==this.getAttachedPlayer(t)},this.getPlayerStateManager=function(t){if(this.m)throw new Error("This instance of Conviva.Client has been released.");return new a(this.v,(t?A:u).version)},this.releasePlayerStateManager=function(t){if(this.m)throw new Error("This instance of Conviva.Client has been released.");this.A.P("Client.releasePlayerStateManager",function(){t instanceof a&&t.release()})},this.Ut=function(){return this.g},this.getId=function(){return this.R},this.getSessionId=function(n){if(this.m)return A.NO_SESSION_KEY;var i=null;return this.A.P("Client.getSessionId",function(){var t=u.d.pt(n);t&&(i=t.Ft())}),i},this.getClientId=function(n){if(this.m)return null;var i=null;return this.A.P("Client.getClientId",function(){var t=u.d.pt(n);t&&(i=t.Bt())}),i},this.Ht=function(n,i,e){this.m||this.A.P("Client.updateCustomMetric",function(){var t=u.d.pt(n);t&&t.Ht(i,e)})},this.setUniqueIdentifier=function(t,n){if(this.m)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)this.C[i]=t[i];n&&(this.T=n)},this.setUserPreferenceForDataCollection=function(t,n){if(this.m)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)"false"===t[i]?this.I[i]=n?q.Kt.Gt:q.Kt.jt:this.I[i]=q.Kt.xt},this.setUserPreferenceForDataDeletion=function(t){if(this.m)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var n in t)"true"===t[n]?this.I[n]=q.Kt.Wt:this.I[n]=q.Kt.xt}};h.version="4.5.6L",h.NO_SESSION_KEY=A.NO_SESSION_KEY,h.AdPosition={PREROLL:A.AdPosition.PREROLL,MIDROLL:A.AdPosition.MIDROLL,POSTROLL:A.AdPosition.POSTROLL},h.AdStream={CONTENT:A.AdPlayer.CONTENT,SEPARATE:A.AdPlayer.SEPARATE},h.AdPlayer={CONTENT:A.AdPlayer.CONTENT,SEPARATE:A.AdPlayer.SEPARATE},h.ErrorSeverity={FATAL:A.ErrorSeverity.FATAL,WARNING:A.ErrorSeverity.WARNING},h.DeviceType={DESKTOP:A.DeviceType.DESKTOP,CONSOLE:A.DeviceType.CONSOLE,SETTOP:A.DeviceType.SETTOP,MOBILE:A.DeviceType.MOBILE,TABLET:A.DeviceType.TABLET,SMARTTV:A.DeviceType.SMARTTV},h.AdTechnology={CLIENT_SIDE:A.AdType.CLIENT_SIDE,SERVER_SIDE:A.AdType.SERVER_SIDE},h.AdType={BLACKOUT_SLATE:A.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:A.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:A.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:A.AdSlates.OTHER_SLATE,VPAID:A.AdSlates.VPAID,REGULAR:A.AdSlates.REGULAR},h.AdServingType={INLINE:A.AdServingType.INLINE,WRAPPER:A.AdServingType.WRAPPER},h.DeviceCategory={ANDROID_DEVICE:A.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:A.DeviceCategory.APPLE_DEVICE,CHROMECAST:A.DeviceCategory.CHROMECAST,DESKTOP_APP:A.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:A.DeviceCategory.DEVICE_SIMULATOR,LG_TV:A.DeviceCategory.LG_TV,NINTENDO:A.DeviceCategory.NINTENDO,PLAYSTATION:A.DeviceCategory.PLAYSTATION,ROKU:A.DeviceCategory.ROKU,SAMSUNG_TV:A.DeviceCategory.SAMSUNG_TV,SMART_TV:A.DeviceCategory.SMART_TV,SET_TOP_BOX:A.DeviceCategory.SET_TOP_BOX,TIVO:A.DeviceCategory.TIVO,WEB:A.DeviceCategory.WEB,WINDOWS_DEVICE:A.DeviceCategory.WINDOWS_DEVICE,XBOX:A.DeviceCategory.XBOX,KAIOS_DEVICE:A.DeviceCategory.KAIOS_DEVICE};var c=ut.ClientSettings=function(){var i=this;this.qt=null,Q.Yt(this,"customerKey",function(){return this.qt}),Q.Jt(this,"customerKey",function(t){Q.St(t)&&(this.qt=t)}),this.Xt=c.Qt,Q.Yt(this,"heartbeatInterval",function(){return this.Xt}),Q.Jt(this,"heartbeatInterval",function(t){var n;"number"!==typeof t||(n=Q.zt(t))===t&&(this.Xt=n)}),this.Zt=null,this.L=null,this.H=null,Q.Yt(this,"gatewayUrl",function(){return this.Zt}),Q.Jt(this,"gatewayUrl",function(t){var n;Q.St(t)&&("https"!==(n=t.split("://"))[0]&&"http"!==n[0]||-1!==t.indexOf(".com",t.length-".com".length)&&(this.Zt=t))}),function(t){if(!Q.St(t))throw new Error("customerKey must be valid");this.customerKey=t}.apply(this,arguments),this.equals=function(t){return this.customerKey===t.customerKey&&this.gatewayUrl===t.gatewayUrl&&this.heartbeatInterval===t.heartbeatInterval},this.tt=function(){var t=new c(this.customerKey);return t.gatewayUrl=function(t){if(Q.St(t)){var n=t.split("://");if(-1===n[1].indexOf("cws.conviva.com")&&("https"===n[0]||"http"===n[0]))return i.L="https://"+i.customerKey+"."+c.U,i.H="https://"+i.customerKey+"."+c.K,t}return i.L="https://"+i.customerKey+"."+c.V,i.H="https://"+i.customerKey+"."+c.G,"https://"+i.customerKey+"."+c.Z}(this.gatewayUrl),t.heartbeatInterval=this.heartbeatInterval,t.L=this.L,t.H=this.H,t}};c.$t="https://conviva.testonly.conviva.com",c.tn="https://cws.conviva.com",c.Z="cws.conviva.com",c.V="ipv4.cws.conviva.com",c.G="ipv6.cws.conviva.com",c.nn="conviva.testonly.conviva.com",c.U="ipv4.testonly.conviva.com",c.K="ipv6.testonly.conviva.com",c.z="https://",c.$="http://",c.in=5,c.Qt=20;var f=ut.ContentMetadata=function(){this.en=null,Q.Yt(this,"assetName",function(){return this.en}),Q.Jt(this,"assetName",function(t){if("string"!==typeof t)return;this.en=t}),this.sn={},Q.Yt(this,"custom",function(){return this.sn}),Q.Jt(this,"custom",function(t){if("object"!==typeof t)return;this.sn=Q.Pt(t)}),this.on=null,Q.Yt(this,"defaultResource",function(){return this.on}),Q.Jt(this,"defaultResource",function(t){if("string"!==typeof t)return;this.on=t}),this.rn=null,Q.Yt(this,"viewerId",function(){return this.rn}),Q.Jt(this,"viewerId",function(t){if("string"!==typeof t)return;this.rn=t}),this.an=null,Q.Yt(this,"applicationName",function(){return this.an}),Q.Jt(this,"applicationName",function(t){if("string"!==typeof t)return;this.an=t}),this.un=null,Q.Yt(this,"streamUrl",function(){return this.un}),Q.Jt(this,"streamUrl",function(t){if("string"!==typeof t)return;this.un=t}),this.hn=f.StreamType.UNKNOWN,Q.Yt(this,"streamType",function(){return this.hn}),Q.Jt(this,"streamType",function(t){t!==f.StreamType.UNKNOWN&&t!==f.StreamType.VOD&&t!==f.StreamType.LIVE||(this.hn=t)}),this.cn=-1,Q.Yt(this,"duration",function(){return this.cn}),Q.Jt(this,"duration",function(t){this.cn=tt.fn(t)}),this.ln=-1,Q.Yt(this,"encodedFrameRate",function(){return this.ln}),Q.Jt(this,"encodedFrameRate",function(t){this.ln=tt.fn(t)}),function(){}.apply(this,arguments),this.tt=function(){var t,n=new f;for(t in n.assetName=this.assetName,n.applicationName=this.applicationName,n.streamUrl=this.streamUrl,n.viewerId=this.viewerId,n.defaultResource=this.defaultResource,n.streamType=this.streamType,n.duration=this.duration,n.encodedFrameRate=this.encodedFrameRate,this.custom)n.custom[t]=this.custom[t];return n}};f.StreamType={UNKNOWN:A.StreamType.UNKNOWN,LIVE:A.StreamType.LIVE,VOD:A.StreamType.VOD},ut.ErrorType={ERROR_UNKNOWN:A.ErrorType.ERROR_UNKNOWN,ERROR_IO:A.ErrorType.ERROR_IO,ERROR_TIMEOUT:A.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:A.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:A.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:A.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:A.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:A.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:A.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:A.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:A.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:A.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:A.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},ut.Events={AD_REQUESTED:A.Events.AD_REQUESTED,AD_RESPONSE:A.Events.AD_RESPONSE,AD_SLOT_STARTED:A.Events.AD_SLOT_STARTED,AD_ATTEMPTED:A.Events.AD_ATTEMPTED,AD_SLOT_ENDED:A.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:A.Events.AD_IMPRESSION_START,AD_START:A.Events.AD_START,AD_FIRST_QUARTILE:A.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:A.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:A.Events.AD_THIRD_QUARTILE,AD_COMPLETE:A.Events.AD_COMPLETE,AD_END:A.Events.AD_END,AD_IMPRESSION_END:A.Events.AD_IMPRESSION_END,AD_SKIPPED:A.Events.AD_SKIPPED,AD_ERROR:A.Events.AD_ERROR,AD_PROGRESS:A.Events.AD_PROGRESS,AD_CLOSE:A.Events.AD_CLOSE,CONTENT_PAUSED:A.Events.CONTENT_PAUSED,CONTENT_RESUMED:A.Events.CONTENT_RESUMED,POD_START:A.Events.POD_START,POD_END:A.Events.POD_END};var a=ut.PlayerStateManager=function(){var e=this;e.dn=null,e.vn=-2,e.pn=a.PlayerState.UNKNOWN,e.En={},e.gn=-2,e.ln=-2,e.cn=-2,e.yn=null,e.An=null,e.un=null,e.Sn=null,e.Rn=null,e.mn=-1,e.Cn=-1,e.w=null,e.N=null,e.Tn=null,e.In=[],e.m=!1,this.release=function(){e.m||e.A.P("PlayerStateManager.release",function(){e.dn&&e.dn.wn(),e.Nn(),e.v=null,e.l=null,e.A=null,e.m=!0})},this.setPlayheadTime=function(){},this.setBufferLength=function(){},this.setRenderedFrameRate=function(){},this.getEncodedFrameRate=function(){return e.ln},this.setEncodedFrameRate=function(n){e.m||e.A.P("PlayerStateManager.setEncodedFrameRate",function(){var t=tt.fn(n);t>=-1&&(e.ln=t,e.dn&&e.dn.On(e.ln))})},this.getDuration=function(){return e.cn},this.setClientMeasureInterface=function(t){Q._n(t,new ut.ClientMeasureInterface,"ClientMeasureInterface"),this.Pn=t},this.getPHT=function(){return this.Pn&&"function"===typeof this.Pn.getPHT?this.Pn.getPHT():a.DEFAULT_PHT},this.getBufferLength=function(){return this.Pn&&"function"===typeof this.Pn.getBufferLength?this.Pn.getBufferLength():a.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.Pn&&"function"===typeof this.Pn.getSignalStrength?this.Pn.getSignalStrength():a.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.Pn&&"function"===typeof this.Pn.getRenderedFrameRate?this.Pn.getRenderedFrameRate():a.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(n){e.m||e.A.P("PlayerStateManager.setDuration",function(){var t=tt.fn(n);t>=-1&&(e.cn=t,e.dn&&e.dn.Dn(e.cn))})},this.getStreamUrl=function(){return e.un},this.setStreamUrl=function(t){e.m||e.A.P("PlayerStateManager.setStreamUrl",function(){t&&(e.un=t,e.dn&&e.dn.bn(e.un))})},this.Mn=function(){return e.Sn},this.Ln=function(){return e.Rn},this.setModuleNameAndVersion=function(t,n){e.Sn=t,e.Rn=n},this.Vn=function(){return e.An},this.setPlayerType=function(t){e.m||e.A.P("PlayerStateManager.setPlayerType",function(){e.An=t,e.dn&&e.dn.kn(e.An)})},this.Un=function(){return e.yn},this.setPlayerVersion=function(t){e.m||e.A.P("PlayerStateManager.setPlayerVersion",function(){e.yn=t,e.dn&&e.dn.Fn(e.yn)})},this.setMonitoringNotifier=function(t){return!e.m&&(!e.dn&&(e.dn=t,e.l&&arguments.length>=2&&e.l.Bn(arguments[1]),!0))},this.Nn=function(){e.m||(e.dn=null,e.l&&e.l.Bn(null))},this.Hn=function(){e.setPlayerState(e.getPlayerState()),e.setBitrateKbps(e.Gn()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.Vn()),e.setPlayerVersion(e.Un());for(var t=0;t<e.In.length;t++){var n=e.In[t];e.Kn(n)}e.In=[]},this.getPlayerState=function(){return e.pn},this.setPlayerState=function(t){e.m||e.A.P("PlayerStateManager.setPlayerState",function(){a.jn(t)?(e.pn=t,e.dn&&e.dn.xn(e.pn)):e.l.error("PlayerStateManager.SetPlayerState(): invalid state: "+t)})},this.Gn=function(){return e.vn},this.setBitrateKbps=function(n){e.m||e.A.P("PlayerStateManager.setBitrateKbps",function(){var t=tt.fn(n);t>=-1&&(e.vn=t,e.dn&&e.dn.Wn(e.vn))})},this.setPlayerSeekStart=function(t){e.m||e.A.P("PlayerStateManager.setPlayerSeekStart()",function(){e.dn&&e.dn.qn(a.SEEK_ACTIONS_TYPE.SEEK_START,t)})},this.setPlayerSeekEnd=function(){e.m||e.A.P("PlayerStateManager.setPlayerSeekEnd()",function(){e.dn&&e.dn.qn(a.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e.m||e.A.P("PlayerStateManager.setUserSeekButtonUp()",function(){e.dn&&e.dn.qn(a.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e.m||e.A.P("PlayerStateManager.setUserSeekButtonDown()",function(){e.dn&&e.dn.qn(a.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(n){e.m||e.A.P("PlayerStateManager.setVideoResolutionWidth()",function(){var t=tt.fn(n);t>0&&(e.mn=t),e.dn&&e.dn.Yn(e.mn)})},this.setVideoResolutionHeight=function(n){e.m||e.A.P("PlayerStateManager.setVideoResolutionHeight()",function(){var t=tt.fn(n);t>0&&(e.Cn=t),e.dn&&e.dn.Jn(e.Cn)})},this.setConnectionType=function(t){e.m||e.A.P("PlayerStateManager.setConnectionType()",function(){e.w=t,e.dn&&e.dn.Y(e.w)})},this.setLinkEncryption=function(t){e.m||e.A.P("PlayerStateManager.setLinkEncryption()",function(){e.N=t,e.dn&&e.dn.X(e.N)})},this.setSignalStrength=function(){},this.Kn=function(t){var n,i;e.Tn=t,e.dn?(n=t.errorCode,i=t.severity,e.dn.Xn(n,i)):e.In.push(t)},this.sendError=function(n,i){e.m||e.A.P("PlayerStateManager.sendError",function(){var t=new nt(n,i);e.Kn(t)})},this.reset=function(){e.m||e.A.P("PlayerStateManager.reset",function(){e.vn=-2,e.pn=a.PlayerState.UNKNOWN,e.En={},e.gn=-1,e.ln=-1,e.cn=-1,e.yn=null,e.An=null,e.un=null,e.Tn=null,e.In=[]})},this.setCDNServerIP=function(t){e.m||e.A.P("PlayerStateManager.setCDNServerIP",function(){e.dn&&e.dn.Qn(t)})},this.zn=function(){return e.Zn},this.setDroppedFramesTotal=function(t){e.m||e.A.P("PlayerStateManager.setDroppedFramesTotal",function(){e.dn&&e.dn.$n(t)})},this.setDroppedFramesCount=function(t){e.m||e.A.P("PlayerStateManager.setDroppedFramesCount",function(){e.dn&&e.dn.ti(t)})},this.ni=function(){return e.Tn},function(t,n){e.v=t,e.l=e.v.buildLogger(),e.l.setModuleName("PlayerStateManager"),e.A=e.v.it(n)}.apply(e,arguments)};a.PlayerState={STOPPED:A.PlayerState.STOPPED,PLAYING:A.PlayerState.PLAYING,BUFFERING:A.PlayerState.BUFFERING,PAUSED:A.PlayerState.PAUSED,UNKNOWN:A.PlayerState.UNKNOWN,NOT_MONITORED:A.PlayerState.NOT_MONITORED},a.jn=function(t){return t===a.PlayerState.STOPPED||t===a.PlayerState.PLAYING||t===a.PlayerState.BUFFERING||t===a.PlayerState.PAUSED||t===a.PlayerState.UNKNOWN||t===a.PlayerState.NOT_MONITORED},a.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},a.DEFAULT_SIGNAL_STRENGTH=1e3,a.DEFAULT_RENDERED_FRAME_RATE=-1,a.DEFAULT_BUFFER_LENGTH=-1,a.DEFAULT_PHT=-1,ut.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}};var r=ut.HttpInterface=function(){this.makeRequest=function(){},this.release=function(){}},u=ut.LoggingInterface=function(){this.consoleLog=function(){},this.release=function(){}},l=ut.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},d=ut.StorageInterface=function(){this.saveData=function(){},this.loadData=function(){},this.release=function(){}},v=ut.SystemInterface=function(){(function(t,n,i,e,s,o){Q._n(t,new p,"TimeInterface"),Q._n(n,new E,"TimerInterface"),Q._n(i,new r,"HttpInterface"),Q._n(e,new d,"StorageInterface"),Q._n(s,new l,"MetadataInterface"),Q._n(o,new u,"LoggingInterface"),this.ii=t,this.ei=n,this.si=i,this.oi=e,this.ri=s,this.ai=o}).apply(this,arguments),this.release=function(){this.ii&&(this.ii.release(),this.ii=null),this.ei&&(this.ei.release(),this.ei=null),this.si&&(this.si.release(),this.si=null),this.oi&&(this.oi.release(),this.oi=null),this.ri&&(this.ri.release(),this.ri=null),this.ai&&(this.ai.release(),this.ai=null)}},p=ut.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},E=ut.TimerInterface=function(){this.createTimer=function(){},this.release=function(){}},g=ut.SystemFactory=function(){var t=this;(function(t,n){if(!(t instanceof v))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.ui=t,this.ii=this.ui.ii,this.ei=this.ui.ei,this.si=this.ui.si,this.oi=this.ui.oi,this.ri=this.ui.ri,this.ai=this.ui.ai,this.g=n instanceof y?n.tt():new y}).apply(this,arguments),this.nt=function(t,n,i){this.hi=t,this.ci=n,this.fi=i},this.release=function(){this.ui.release(),this.ui=null,this.hi=null,this.g=null,this.li=null};var n=function(){return new et(t.ai,t.ii,t.Ut(),t.li,t.hi)};this.buildLogger=function(){return n()},this.ht=function(t,n,i){return new x(t,n,i,this)},this.di=function(t){return new Z(this.buildLogger(),this.vi(),this.ci,t)},this.pi=function(){return new W(this.buildTimer(t.fi))},this.Ei=function(){var t=new rt(this.buildLogger(),this.ei,new J(this.buildLogger(),null,this.Ut()));return new W(t)},this.vi=function(){return new it(this.buildLogger(),this.si,this.Ei(),this.Ut())},this.it=function(t){return new J(this.buildLogger(),this.di(t),this.Ut())},this.buildTime=function(){return new ot(this.ii,this.buildLogger())},this.buildTimer=function(t){return new rt(this.buildLogger(),this.ei,this.it(t))},this.gi=function(){return new at.Storage(this.buildLogger(),this.oi,this.pi(),this.Ut())},this.et=function(){return new q(this.buildLogger(),this.gi(),this.yi())},this.Ai=function(t){return new st(this.buildLogger(),this.ri,this.it(t))},this.Si=function(){return new B},this.Ri=function(t,n){return new X(t,this.buildLogger(),this.vi(),this.yi(),n)},this.mi=function(t,n,i,e,s){var o=this.Ri(n,e.custom["c3.domain"]);return new K(this.Ci(),t,n,this.buildLogger(),this.it(s),this.buildTimer(s),o,this.Si(),this.buildTime(),this.Ti(),i,e,s)},this.Ii=function(t,n,i,e,s,o,r){o=this.mi(t,n.tt(),i,o,r);return new j(e,s,i,this.Ai(r),o,this.it(r),this.buildLogger())},this.Ci=function(){return new Y},this.yi=function(){return new H},this.Ti=function(){return this.li},this.Ut=function(){return this.g},this.li=new z},y=ut.SystemSettings=function(){this.wi=y.Ni,Q.Yt(this,"logLevel",function(){return this.wi}),Q.Jt(this,"logLevel",function(t){var n;"number"!==typeof t||(n=Q.zt(t))===t&&n>=y.LogLevel.DEBUG&&n<=y.LogLevel.ERROR&&(this.wi=n)}),this.Oi=y._i,Q.Yt(this,"allowUncaughtExceptions",function(){return this.Oi}),Q.Jt(this,"allowUncaughtExceptions",function(t){Q.Pi(t)&&(this.Oi=t)}),this.Di=y.bi,Q.Yt(this,"storageTimeout",function(){return this.Di}),Q.Jt(this,"storageTimeout",function(t){var n;"number"!==typeof t||(n=Q.zt(t))===t&&(this.Di=n)}),this.Mi=y.Li,Q.Yt(this,"httpTimeout",function(){return this.Mi}),Q.Jt(this,"httpTimeout",function(t){var n;"number"!==typeof t||(n=Q.zt(t))===t&&(this.Mi=n)}),function(){}.apply(this,arguments),this.equals=function(t){return this.logLevel===t.logLevel&&this.allowUncaughtExceptions===t.allowUncaughtExceptions&&this.storageTimeout===t.storageTimeout&&this.httpTimeout===t.httpTimeout},this.tt=function(){var t=new y;return t.logLevel=this.logLevel,t.allowUncaughtExceptions=this.allowUncaughtExceptions,t.storageTimeout=this.storageTimeout,t.httpTimeout=this.httpTimeout,t}};y.LogLevel={DEBUG:A.LogLevel.DEBUG,INFO:A.LogLevel.INFO,WARNING:A.LogLevel.WARNING,ERROR:A.LogLevel.ERROR,NONE:A.LogLevel.NONE},y.Vi=y.LogLevel.DEBUG,y.Ni=y.LogLevel.NONE,y.ki=!0,y._i=!1,y.bi=10,y.Li=10;var i=at.AdAnalytics=function(){var e=this;function n(t){e.Ui?(Q._t(t)>0&&e.setAdInfo(t),e.Ui.Fi()||(e.Ui.Bi(e.Hi),e.Ui.Gi(!0))):e.l&&e.l.error("AdAnalytics.onAdInitiated() : contentPlayer - "+A.e)}e.Ki=null,e.l=null,e.v=null,e.ji=null,e.Hi=null,e.Ui=null,e.xi=null,e.Wi=null,e.qi=null,function(t,n,i){e.Ki=t,e.qi=i,e.v=n,i&&(e.Hi=i.Yi()),e.ji=n.buildTimer(A.version),e.l=n.buildLogger(),e.l.setModuleName("AdAnalytics"),e.Ui=new o(e.Ki,e.ji),R.call(this)}.apply(this,arguments),this.setAdInfo=function(t){Q._t(t)<=0?e.l&&e.l.error("AdAnalytics.setAdInfo() : AD Info is not set"):(e.l&&e.l.debug("AdAnalytics.setAdInfo()"),e.Ui&&e.Ui.Ji(t))},this.setAdPlayerInfo=function(t){Q._t(t)<=0?e.l&&e.l.error("AdAnalytics.setAdPlayerInfo() : Ad Player Info is not set"):(e.l&&e.l.debug("AdAnalytics.setAdPlayerInfo()"),e.Ui&&e.Ui.Ji(t))},this.reportAdMetric=function(){0!==arguments.length?1===arguments.length?e.Xi(arguments[0]):2===arguments.length?e.Xi(arguments[0],arguments[1]):3===arguments.length?e.Xi(arguments[0],arguments[1],arguments[2]):4===arguments.length&&e.Xi(arguments[0],arguments[1],arguments[2],arguments[3]):e.l&&e.l.error("AdAnalytics.reportAdMetric() : Need to report metric mandatory")},this.setCallback=function(t){e.Ui&&e.Ui.Qi(t)},this.reportAdFailed=function(t,n){e.Ui?(Q._t(n)>0&&e.setAdInfo(n),e.Ui.Fi()?(e.l&&e.l.debug("AdAnalytics.reportAdFailed() : "+t),e.reportAdError(t,h.ErrorSeverity.FATAL),e.reportAdEnded()):(e.Ui.Bi(e.Hi),e.l&&e.l.debug("AdAnalytics.reportAdFailed() : "+t),t=new nt(t,h.ErrorSeverity.FATAL),e.Ui.Gi(!0,t))):e.l&&e.l.error("AdAnalytics.reportAdFailed() : "+A.e)},this.reportAdLoaded=function(t){e.l&&e.l.debug("AdAnalytics.reportAdLoaded()"),n(t)},this.reportAdStarted=function(t){e.l&&e.l.debug("AdAnalytics.reportAdStarted()"),n(t)},this.reportAdEnded=function(){e.Ui?(e.l&&e.l.debug("AdAnalytics.reportAdEnded()"),e.Ui.Fi()&&(e.Ui.Bi(null),e.Ui.Gi(!1))):e.l&&e.l.error("AdAnalytics.reportAdEnded() : "+A.s)},this.reportAdError=function(t,n){e.Ui?(e.l&&e.l.debug("AdAnalytics.reportAdError() : "+t),n=new nt(t,n),e.Ui.Kn(n)):e.l&&e.l.error("AdAnalytics.reportAdError() : "+A.e)},this.reportAdPlayerEvent=function(t,n){if(Q.St(t))if(e.l&&e.l.debug("AdAnalytics.reportAdPlayerEvent()"),e.Ui)switch(t){case A.Events.USER_WAIT_STARTED:case A.Events.BUMPER_VIDEO_STARTED:e.Ui.Ct();break;case A.Events.USER_WAIT_ENDED:case A.Events.BUMPER_VIDEO_ENDED:e.Ui.It();break;default:e.Ui.zi(t,n)}else e.l&&e.l.error("AdAnalytics.reportAdPlayerEvent() : "+A.e);else e.l&&e.l.error("AdAnalytics.reportAdPlayerEvent(): eventType parameter must be a valid string.")},this.reportAdSkipped=function(){e.Ui?(e.l&&e.l.debug("AdAnalytics.reportAdSkipped()"),e.reportAdPlayerEvent(A.Events.AD_SKIPPED),e.reportAdEnded()):e.l&&e.l.error("AdAnalytics.reportAdSkipped() : "+A.e)},this.release=function(){e.l&&e.l.debug("AdAnalytics.release()"),e.Ui&&(e.Ui.Fi()&&(e.Ui.Bi(null),e.Ui.Gi(!1)),e.Ui.Qi(null),e.Ui.Zi(),e.Ui=null),"undefined"!==typeof ut.AdProxyMonitor&&e.Wi&&(ut.AdProxyMonitor.release(e.Wi),e.Wi=null)},this.setAdListener=function(t,n){t?("undefined"!==typeof n&&"undefined"!==typeof n.convivaModule?ut.AdProxyMonitor=n.convivaModule.AdProxyMonitor:"undefined"!==typeof ConvivaModule&&(ut.AdProxyMonitor=ConvivaModule.AdProxyMonitor),"undefined"!==typeof ut.AdProxyMonitor?!t&&e.Wi?(ut.AdProxyMonitor.release(e.Wi),e.Wi=null):t&&e.Wi?(ut.AdProxyMonitor.release(e.Wi),e.l&&e.l.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.Wi=ut.AdProxyMonitor.initConvivaDropIn(t,n,this,ut,e.v)):t&&!e.Wi&&(e.l&&e.l.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.Wi=ut.AdProxyMonitor.initConvivaDropIn(t,n,this,ut,e.v)):e.l.error("AdAnalytics.setAdListener() : Include the missing Ads SDK Module")):e.l.error("AdAnalytics.setAdListener() : Need to configure the adListener instance")},this.reportAdBreakStarted=function(t,n,i){e.Hi?(e.l&&e.l.debug("AdAnalytics.reportAdBreakStarted()"),e.$i=t,e.xi=n,e.Hi.te(t,n,i)):e.l.error("AdAnalytics.reportAdBreakStarted() : "+A.e)},this.reportAdBreakEnded=function(){e.Hi?(e.l&&e.l.debug("AdAnalytics.reportAdBreakEnded()"),e.$i=null,e.xi=null,e.Hi.ne()):e.l.error("AdAnalytics.reportAdBreakEnded() : "+A.e)},this.getSessionId=function(){return e.Hi?(e.l&&e.l.debug("VideoAnalytics.getSessionId()"),e.Ui.Ft()):(e.l.error("VideoAnalytics.getSessionId() : "+A.e),A.NO_SESSION_KEY)},this.getClientId=function(){return e.Hi?(e.l&&e.l.debug("VideoAnalytics.getClientId()"),e.Ui.Bt()):(e.l.error("VideoAnalytics.getClientId() : "+A.e),null)},this.getPlayerMonitor=function(){return e.Hi},this.getAdPlayerMonitor=function(){return e.Ui},this.getVideoAnalytics=function(){return e.qi},this.getAdType=function(){return e.Hi?e.Hi.$i:null},this.ie=function(){return e.Hi?e.Hi.xi:null},i.prototype=Object.create(R.prototype),i.prototype.constructor=i},o=at.AdPlayerMonitorImpl=function(){var s=this;s.ee=null,s.se=null,function(t,n){m.call(this,t,n)}.apply(this,arguments),this.Bi=function(t){this.oe()!==t&&(this.re(),s.se=t||null)},this.oe=function(){return s.se},this.ae=function(t){var n,i=this.oe(),e={};e.error=t,s.ee&&(s.ue=s.ee.getPlayerStateManager(!0),s.he(),s.ue.setClientMeasureInterface(this),n=null,i&&(n=i.ce()),s.fe=s.ee.createAdSession(n,s.gt,s.ue,!0,e),"undefined"!==typeof t&&(s.le(),s.Zi()))},o.prototype=Object.create(m.prototype),o.prototype.constructor=o},S=ut.Analytics={init:function(t,n,i){if(this.Ki)this.l.error("Client is already configured");else{if(arguments.length<=0)throw new Error("customerKey must be valid");var e=null,s=null,o=null;if("string"===typeof t&&(e=t,!Q.St(e)))throw new Error("customerKey must be valid");arguments.length>=2&&"object"===typeof n&&(s=n),arguments.length>=3&&"object"===typeof i&&(o=i);var r=new c(e),a=new y;Q._t(o)>0&&(o[A.GATEWAY_URL]&&(r.gatewayUrl=o[A.GATEWAY_URL]),o[A.LOG_LEVEL]>=0&&(a.logLevel=o[A.LOG_LEVEL]));t=new ut.Impl.Html5Logging,n=new ut.Impl.Html5Storage,i=new ut.Impl.Html5Http,e=new ut.Impl.Html5Timer,o=new ut.Impl.Html5Time;this.ri||(this.ri=new ut.Impl.Html5Metadata),s&&(s[A.CallbackFunctions.CONSOLE_LOG]&&(t.consoleLog=s[A.CallbackFunctions.CONSOLE_LOG]),s[A.CallbackFunctions.MAKE_REQUEST]&&(i.makeRequest=s[A.CallbackFunctions.MAKE_REQUEST]),s[A.CallbackFunctions.SAVE_DATA]&&(n.saveData=s[A.CallbackFunctions.SAVE_DATA]),s[A.CallbackFunctions.LOAD_DATA]&&(n.loadData=s[A.CallbackFunctions.LOAD_DATA]),s[A.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(o.getEpochTimeMs=s[A.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),s[A.CallbackFunctions.CREATE_TIMER]&&(e.createTimer=s[A.CallbackFunctions.CREATE_TIMER])),this.ui=new v(o,e,i,n,this.ri,t),this.v=new g(this.ui,a),this.v.nt("Analytics",r),this.Ki=new h(r,this.v,this.de,S.version),this.l=this.v.buildLogger(),this.l.setModuleName("Analytics")}},release:function(){var t=0;if(this.ve){for(t=0;t<this.ve.length;t++){var n=this.ve[t];n&&(n.release(),n.l=null,n.ji=null,this.ve.splice(t,1),t--)}this.ve=null}if(this.pe){for(t=0;t<this.pe.length;t++){var i=this.pe[t];i&&(i.release(),i.l=null,i.ji=null,this.pe.splice(t,1),t--)}this.pe=null}this.v&&(this.v.release(),this.v=null),this.Ki&&(this.Ki.release(),this.Ki=null),this.Ki=null,this.l=null,this.ui=null,this.ri=null,this.de=null},setUniqueIdentifier:function(t,n){if(!this.Ki)throw new Error(A.i);this.Ki.setUniqueIdentifier(t,n)},setUserPreferenceForDataCollection:function(t,n){if(!this.Ki)throw new Error(A.i);this.Ki.setUserPreferenceForDataCollection(t,n)},setUserPreferenceForDataDeletion:function(t){if(!this.Ki)throw new Error(A.i);this.Ki.setUserPreferenceForDataDeletion(t)},reportAppEvent:function(t,n){if(!this.Ki)throw new Error(A.i);this.Ki.sendCustomEvent(h.NO_SESSION_KEY,t,n)},reportAppBackgrounded:function(){if(!this.Ki)throw new Error(A.i);this.Ki.sendCustomEvent(h.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(!this.Ki)throw new Error(A.i);this.Ki.sendCustomEvent(h.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(t){if(!(t instanceof h))throw new Error(A.i);this.Ki=t,this.v=this.Ki.v,this.l=this.v.buildLogger(),this.l.setModuleName("Analytics")},buildVideoAnalytics:function(){if(!this.Ki)throw new Error(A.i);var t=new w(this.Ki,this.v);return this.pe||(this.pe=[]),this.pe.push(t),t},buildAdAnalytics:function(t){if(!this.Ki)throw new Error(A.i);t=new i(this.Ki,this.v,t||null);return this.ve||(this.ve=[]),this.ve.push(t),t},setDeviceMetadata:function(t){var n,i,e;arguments.length<=0||0===Q._t(t)?this.l.error("Device Metadata must be valid"):(this.ri||(this.ri=new ut.Impl.Html5Metadata),t[A.DeviceMetadata.BRAND]&&(this.ri.getDeviceBrand=function(){return t[A.DeviceMetadata.BRAND]}),t[A.DeviceMetadata.MANUFACTURER]&&(this.ri.getDeviceManufacturer=function(){return t[A.DeviceMetadata.MANUFACTURER]}),t[A.DeviceMetadata.MODEL]&&(this.ri.getDeviceModel=function(){return t[A.DeviceMetadata.MODEL]}),t[A.DeviceMetadata.TYPE]&&(this.ri.getDeviceType=function(){return t[A.DeviceMetadata.TYPE]}),t[A.DeviceMetadata.VERSION]&&(this.ri.getDeviceVersion=function(){return t[A.DeviceMetadata.VERSION]}),t[A.DeviceMetadata.OS_NAME]&&(this.ri.getOperatingSystemName=function(){return t[A.DeviceMetadata.OS_NAME]}),t[A.DeviceMetadata.OS_VERSION]&&(this.ri.getOperatingSystemVersion=function(){return t[A.DeviceMetadata.OS_VERSION]}),t[A.DeviceMetadata.CATEGORY]&&(this.ri.getDeviceCategory=function(){return t[A.DeviceMetadata.CATEGORY]}),n=t[A.DeviceMetadata.SCREEN_RESOLUTION_WIDTH],Q.vt(n)&&(this.ri.getScreenWidth=function(){return n.toString()}),i=t[A.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT],Q.vt(i)&&(this.ri.getScreenHeight=function(){return i.toString()}),e=t[A.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR],Q.vt(e)&&(this.ri.getScaleFactor=function(){return e.toString()}))},reportDeviceMetric:function(t,n){switch(this.de||(this.de={}),t){case A.Network.CONNECTION_TYPE:if(!Q.St(n))return void this.l.error("reportDeviceMetric() : Connection Type is not a valid string");this.de[t]=n,this.Ki&&this.Ki.W(this.de[A.Network.CONNECTION_TYPE]);break;case A.Network.LINK_ENCRYPTION:if(!Q.St(n))return void this.l.error("reportDeviceMetric() : Link Encryption is not a valid string");this.de[t]=n,this.Ki&&this.Ki.J(this.de[A.Network.LINK_ENCRYPTION]);break;case A.Network.SIGNAL_STRENGTH:var i=parseInt(n,10);if(!Q.vt(i))return void this.l.error("reportDeviceMetric() : Signal Strength is not a number");if(a.DEFAULT_SIGNAL_STRENGTH===i)return void this.l.error("reportDeviceMetric() : DEFAULT_SIGNAL_STRENGTH shouldn't be reported");this.de[t]=i,this.Ki&&this.Ki.Q(i);break;default:this.l.error("reportDeviceMetric() : unknown device metric = "+t)}}};S.version="4.5.6";var R=at.AnalyticsImpl=function(){var h=this;function c(){var t=!!h.Ui,n=h.getAdType(),i=h.ie();return n===A.AdType.SERVER_SIDE&&i===A.AdPlayer.CONTENT?R.ge.Ee:n!==A.AdType.SERVER_SIDE||i!==A.AdPlayer.SEPARATE?n===A.AdType.CLIENT_SIDE&&i===A.AdPlayer.CONTENT?R.ge.ye:(n===A.AdType.CLIENT_SIDE&&A.AdPlayer.SEPARATE,t?R.ge.ye:R.ge.Ae):void 0}function f(t,n,i){t=parseInt(t,10),n=parseInt(n,10);isNaN(t)&&isNaN(n)?h.l.error("reportPlaybackResolution() : width and height are not numbers"):(isNaN(t)&&h.l.warning("reportPlaybackResolution() : width is not a number"),isNaN(n)&&h.l.warning("reportPlaybackResolution() : height is not a number"),!h.Ui||i!==R.ge.ye&&i!==R.ge.Ee||h.Ui.Se(t,n),!h.Hi||i!==R.ge.Ae&&i!==R.ge.Ee||h.Hi.Se(t,n))}function l(t,n){a.jn(t)?(!h.Ui||n!==R.ge.ye&&n!==R.ge.Ee||h.Ui.Re(t),(h.Hi&&n===R.ge.Ae||n===R.ge.Ee)&&h.Hi.Re(t)):h.l.error("reportPlayerState() : Player State is not valid")}function d(t,n){t=parseInt(t,10);isNaN(t)?h.l.error("reportPlayerPlayHeadTime() : playheadtime is not a number"):(!h.Ui||n!==R.ge.ye&&n!==R.ge.Ee||h.Ui.me(t),!h.Hi||n!==R.ge.Ae&&n!==R.ge.Ee||h.Hi.me(t))}function v(t,n){t=parseInt(t,10);isNaN(t)?h.l.error("reportPlayerBufferLength() : buffer length is not a number"):(!h.Ui||n!==R.ge.ye&&n!==R.ge.Ee||h.Ui.Ce(t),!h.Hi||n!==R.ge.Ae&&n!==R.ge.Ee||h.Hi.Ce(t))}function p(t,n){t=parseInt(t,10);!h.Ui||n!==R.ge.ye&&n!==R.ge.Ee||h.Ui.Te(!0,t),!h.Hi||n!==R.ge.Ae&&n!==R.ge.Ee||h.Hi.Te(!0,t)}function E(t){!h.Ui||t!==R.ge.ye&&t!==R.ge.Ee||h.Ui.Te(!1,-1),!h.Hi||t!==R.ge.Ae&&t!==R.ge.Ee||h.Hi.Te(!1,-1)}function g(t,n){t=parseInt(t,10);isNaN(t)?h.l.error("reportPlayerBitrate() : bitrate is not a number"):(!h.Ui||n!==R.ge.ye&&n!==R.ge.Ee||h.Ui.Ie(t),!h.Hi||n!==R.ge.Ae&&n!==R.ge.Ee||h.Hi.Ie(t))}function y(t,n){t=parseInt(t,10);isNaN(t)?h.l.error("reportPlayerRenderedFrameRate() : rendered framerate is not a number"):(!h.Ui||n!==R.ge.ye&&n!==R.ge.Ee||h.Ui.we(t),!h.Hi||n!==R.ge.Ae&&n!==R.ge.Ee||h.Hi.we(t))}(function(){}).apply(this,arguments),this.Xi=function(t,n,i,e){switch(h.l&&t!==A.Playback.PLAY_HEAD_TIME&&t!==A.Playback.BUFFER_LENGTH&&h.l.debug("reportMetric() "+t+" "+(void 0!==n&&"CONVIVA"!==n?n:"")+" "+(void 0!==i&&"CONVIVA"!==i&&i!==R.ge.ye?i:"")+" "+(void 0!==e&&"CONVIVA"!==e&&e!==R.ge.ye?e:"")),t){case A.Playback.BITRATE:"CONVIVA"===i?h.l.info("Bitrate change requested from the Conviva Library:"):h.l.info("Bitrate change requested from the application:"),e===R.ge.ye?g(n,R.ge.ye):g(n,c());break;case A.Playback.PLAY_HEAD_TIME:e===R.ge.ye?d(n,R.ge.ye):d(n,c());break;case A.Playback.RESOLUTION:e===R.ge.ye?f(n,i,R.ge.ye):f(n,i,c());break;case A.Playback.BUFFER_LENGTH:e===R.ge.ye?v(n,R.ge.ye):v(n,c());break;case A.Playback.PLAYER_STATE:e===R.ge.ye?l(n,R.ge.ye):l(n,c());break;case A.Playback.RENDERED_FRAMERATE:e===R.ge.ye?y(n,R.ge.ye):y(n,c());break;case A.Playback.SEEK_STARTED:arguments.length>=2&&"CONVIVA"!==n?p(n,c()):i===R.ge.ye?p(-1,R.ge.ye):p(-1,c());break;case A.Playback.SEEK_ENDED:i===R.ge.ye?E(R.ge.ye):E(c());break;case A.Playback.CDN_IP:"CONVIVA"===i?h.l.info("CDN Server IP change requested from the Conviva Library:"):h.l.info("CDN Server IP change requested from the application:"),a=n,u=c(),Q.St(a)?(!h.Ui||u!==R.ge.ye&&u!==R.ge.Ee||h.Ui.Ne(a),!h.Hi||u!==R.ge.Ae&&u!==R.ge.Ee||h.Hi.Ne(a)):h.l.error("reportCDNServerIp() : CDNServerIP is not a valid string");break;case A.Playback.DROPPED_FRAMES_TOTAL:"CONVIVA"===i?h.l.info("Dropped frames total change requested from the Conviva Library:"):h.l.info("Dropped frames total change requested from the application:"),r=n,a=c(),r=parseInt(r,10),isNaN(r)?h.l.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!h.Ui||a!==R.ge.ye&&a!==R.ge.Ee||h.Ui.Oe(r),!h.Hi||a!==R.ge.Ae&&a!==R.ge.Ee||h.Hi.Oe(r));break;case A.Playback.DROPPED_FRAMES_COUNT:"CONVIVA"===i?h.l.info("Dropped frames count change requested from the Conviva Library:"):h.l.info("Dropped frames count change requested from the application:"),s=n,o=c(),s=parseInt(s,10),isNaN(s)?h.l.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!h.Ui||o!==R.ge.ye&&o!==R.ge.Ee||h.Ui._e(s),!h.Hi||o!==R.ge.Ae&&o!==R.ge.Ee||h.Hi._e(s));break;default:r=t,o=n,s=c(),!(Q.St(r)&&o?(!h.Ui||s!==R.ge.ye&&s!==R.ge.Ee||h.Ui.Ht(r,o),void(!h.Hi||s!==R.ge.Ae&&s!==R.ge.Ee||h.Hi.Ht(r,o))):h.l.error("reportMetric() : Metric key/value should be a proper value"))}var s,o,r,a,u}};at.AnalyticsImpl.ge={ye:1,Ae:2,Ee:3};var e=at.PlayerMonitor=function(){var e=this;this.Pe=null,this.De=null,this.gt=null,this.be=null,this.pn=a.PlayerState.UNKNOWN,this.Me=-1,this.Le=-1,this.In=[],this.Ve=null,this.ke=null,this.Ue=-2,this.gn=-1,this.O=a.DEFAULT_SIGNAL_STRENGTH,this.Fe=null,this.Zn=null,this.N=null,this.w=null,this.ji=null,this.Be=null,this.He=null,this.Ge=null,this.Ke=null,this.$i=null,this.xi=null,function(t){e.ji=t}.apply(this,arguments),this.je=function(){return e.pn},this.Re=function(t){e.pn!==t&&(e.re(),e.pn=t,e.xe())},this.We=function(){return e.qe},this.Ye=function(){return e.Je},this.Te=function(t,n){e.re(),e.qe=t,e.Je=n,e.Xe()},this.Qe=function(){return e.Me},this.me=function(t){e.Me=t},this.ze=function(){return e.Le},this.Ce=function(t){e.Le=t},this.Ze=function(){return e.Ue},this.Ie=function(t){e.Ue!==t&&(e.Ue=t,e.xe())},this.$e=function(){return e.gn},this.we=function(t){e.gn=t},this.ts=function(){return e.Fe},this.Ne=function(t){e.Fe=t,e.xe()},this.zn=function(){return e.Zn},this.Oe=function(t){e.Zn=t,e.xe()},this._e=function(t){e.ns(t)},this.es=function(){return e.O},this.ss=function(){return e.os},this.rs=function(){return e.as},this.Se=function(t,n){t<0&&(t=0),n<0&&(n=0),e.os===t&&e.as===n||(e.os=t,e.as=n,e.xe())},this.us=function(){return e.De},this.hs=function(){e.us()&&(e.gt=new f,e.be={},e.He={},e.cs())},this.fs=function(t){(e.De||t)&&(this.re(),e.De&&(e.De=null,e.hs()),t&&(e.De=Q.ls(e.De,t),e.hs()))},this.Ji=function(t){if(t)if(e.gt){var n,i=!1;for(n in t)if(e.gt[n]!==t[n]){i=!0;break}i&&(e.re(),e.De=Q.ls(t),e.cs())}else e.fs(t)},this.Qi=function(t){t?e.Ge!==t&&(e.Ge=t,e.ds()):(e.Ge=null,e.le())},this.re=function(){e.vs||e.Ge&&(e.vs=!0,e.Ge(),e.vs=!1)},this.Fi=function(){return e.Pe},this.Gi=function(t,n){e.Pe!==t&&(e.re(),e.Pe&&(e.ps(),e.le(),e.Zi()),e.Pe=t,e.Pe&&e.ae(n))},this.Es=function(){return e.Ve},this.gs=function(){return e.ke||null},this.ys=function(){return e.In},this.As=function(){e.In=[]},this.Kn=function(t){this.re(),e.In.push(t),e.Xn()},this.zi=function(t,n){e.re(),e.Ve=t,e.ke=n,e.Ss()},this.Rs=function(){e.re()},this.ds=function(){e.le(),e.Be=e.ji.create(e.Rs,1e3,"PlayerMonitor.update")},this.le=function(){e.Be&&(e.Be(),e.Be=null)},this.te=function(t,n,i){e.Ke=i,e.$i=t,e.ms(),e.xi=n,e.$i&&A.AdType.CLIENT_SIDE===e.$i&&(e.pn=A.PlayerState.UNKNOWN,e.Cs(e.$i,n,i?i[A.POD_POSITION]:null))},this.ne=function(){e.$i&&A.AdType.CLIENT_SIDE===e.$i&&(e.Ts(),e.pn=A.PlayerState.UNKNOWN),e.Is(),e.$i=null,e.xi=null},this.ws=function(){return e.Ke},this.Ns=function(){return e.$i},this.getContentMetadata=function(){return this.gt},this.Zi=function(){this.Pe=null,this.De=null,this.gt=null,this.be=null,this.pn=a.PlayerState.UNKNOWN,this.Me=-1,this.Le=-1,this.In=[],this.Ve=null,this.ke=null,this.Ue=-2,this.gn=-1,this.O=a.DEFAULT_SIGNAL_STRENGTH,this.Fe=null,this.Zn=null,this.N=null,this.w=null,this.ji=null,this.Be=null,this.He=null,this.Ge=null,this.Ke=null,this.$i=null,this.xi=null,e.ue=null,e.fe=h.NO_SESSION_KEY}},m=at.PlayerMonitorImpl=function(){var r=this;r.ee=null,r.ue=null,r.fe=h.NO_SESSION_KEY,function(t,n){e.call(this,n),r.ee=t}.apply(this,arguments),this.getPHT=function(){return r.Qe()},this.getBufferLength=function(){return r.ze()},this.getRenderedFrameRate=function(){return r.$e()},this.getSignalStrength=function(){return r.es()},this.Xe=function(){r.ue&&r.Os!==h.NO_SESSION_KEY&&(r.We()?r.ue.setPlayerSeekStart(r.Ye()):r.ue.setPlayerSeekEnd())},this.xe=function(){r.ue&&(r.ue.setPlayerState(r.je()),r.Ze()>0&&r.ue.setBitrateKbps(r.Ze()),r.ss()>0&&r.ue.setVideoResolutionWidth(r.ss()),r.rs()>0&&r.ue.setVideoResolutionHeight(r.rs()),r.ts()&&r.ue.setCDNServerIP(r.ts()),Q.vt(r.zn())&&r.ue.setDroppedFramesTotal(r.zn()))},this.mt=function(){r.fe!==h.NO_SESSION_KEY&&r.ee&&r.ee.updateContentMetadata(r.fe,r.gt)},this.he=function(){if(r.ue){var t,n,i;r.He&&Q._t(r.He)>0&&(r.He[A.MODULE_NAME]&&r.He[A.MODULE_VERSION]&&(t=r.He[A.MODULE_NAME],n=r.He[A.MODULE_VERSION],Q.St(t)&&Q.St(n)&&r.ue.setModuleNameAndVersion(t,n)),r.He[A.FRAMEWORK_NAME]&&(i=r.He[A.FRAMEWORK_NAME],Q.St(i)&&r.ue.setPlayerType(i)),r.He[A.FRAMEWORK_VERSION]&&(i=r.He[A.FRAMEWORK_VERSION],Q.St(i)&&r.ue.setPlayerVersion(i)));var e=r.ys();r.As();for(var s=0;s<e.length;s++){var o=e[s];r.ue.Kn(o)}}},this.Ts=function(){r.ue&&r.fe!==h.NO_SESSION_KEY&&(r.xe(),this._s())},this.It=function(){r.ue&&r.fe!==h.NO_SESSION_KEY&&(r.xe(),r.ee.wt(r.fe))},this._s=function(){r.ee&&r.fe!==A.NO_SESSION_KEY&&r.ee.adEnd(r.fe)},this.Cs=function(t,n,i){var e;r.ue&&r.fe!==A.NO_SESSION_KEY&&(e=null,A.AdType.CLIENT_SIDE===t?e=h.AdStream.SEPARATE:A.AdType.SERVER_SIDE===t&&(e=h.AdStream.CONTENT),r.Ps(e,n,i))},this.Ct=function(){r.ue&&r.fe!==A.NO_SESSION_KEY&&r.ee.Tt(r.fe)},this.Ps=function(t,n,i){r.ee&&r.fe!==A.NO_SESSION_KEY&&r.ee.adStart(r.fe,t,n,i)},this.ae=function(){if(r.ee){r.ue=r.ee.getPlayerStateManager(!0),r.he(),r.ue.setClientMeasureInterface(this);try{var t;r.gt&&r.gt.custom&&!r.gt.custom[A.UTM_TRACKING_URL]&&(Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var e,s=[],o=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)r in n&&(e=n[r],t.call(o,e,r,n)&&s.push(e));return s}),""!==(t=Q.Ds().split("?").join("").split("&").filter(function(t){return 2===t.split("=").length&&t.split("=")[0].toLowerCase().indexOf("utm_")>=0}).join("&"))&&(r.gt.custom[A.UTM_TRACKING_URL]=t))}catch(t){r.l.error("PlayerMonitorImpl _createSession : "+t)}r.fe=r.ee.createSession(r.gt,r.ue,!0)}},this.ps=function(){r.ee&&(r.ue&&(r.ue.setPlayerState(A.PlayerState.STOPPED),r.ue=null),r.fe!==A.NO_SESSION_KEY&&(r.ee.cleanupSession(r.fe),r.fe=A.NO_SESSION_KEY))},this.Xn=function(){if(r.ee&&r.fe!==h.NO_SESSION_KEY){var t=r.ys();r.As();for(var n=0;n<t.length;n++){var i=t[n];r.ee.reportError(r.fe,i.bs(),i.Ms())}}},this.Ss=function(){r.fe!==h.NO_SESSION_KEY&&r.ee&&r.ee.sendCustomEvent(r.fe,r.Es(),r.gs())},this.cs=function(){var t,n=r.us(),i=!1,e=!1;for(t in n){var s=n[t];if(Q.St(t)&&null!==s&&void 0!==s)switch(t){case A.STREAM_URL:e=!0,r.gt.streamUrl=s;break;case A.ASSET_NAME:e=!0,r.gt.assetName=s;break;case A.DEFAULT_RESOURCE:e=!0,r.gt.defaultResource=s;break;case A.VIEWER_ID:e=!0,r.gt.viewerId=s;break;case A.PLAYER_NAME:e=!0,r.gt.applicationName=s;break;case A.DURATION:e=!0,r.gt.duration=s;break;case A.IS_LIVE:e=!0,r.gt.streamType=s;break;case A.ENCODED_FRAMERATE:e=!0,r.gt.encodedFrameRate=s;break;case A.MODULE_NAME:case A.MODULE_VERSION:case A.FRAMEWORK_NAME:case A.FRAMEWORK_VERSION:i=!0,r.He[t]=s;break;case A.APPLICATION_VERSION:default:e=!0,r.gt.custom[t]=s}}i&&this.he(),e&&this.mt()},this.ms=function(){this.Ls(A.Events.POD_START)},this.Is=function(){this.Ls(A.Events.POD_END)},this.Ls=function(t){var n,i,e,s;r.ee&&r.fe!==A.NO_SESSION_KEY&&(i={},(n=this.ws())&&((e=n[A.POD_POSITION])&&(i[A.POD_POSITION]=e),(e=n[A.POD_INDEX])&&(i[A.POD_INDEX]=e+""),t!==A.Events.POD_START||(s=n[A.POD_DURATION])&&(i[A.POD_DURATION]=s+"")),(s=this.Ns())&&(i[A.AD_TYPE]=s),r.ee.sendCustomEvent(r.fe,t,i))},this.ns=function(t){r.ue.setDroppedFramesCount(t)},this.Vs=function(t){this.fe===A.NO_SESSION_KEY&&t!==A.NO_SESSION_KEY&&(this.fe=t)},this.ce=function(){return this.fe},this.Ft=function(){return r.ee.getSessionId(this.fe)},this.Bt=function(){return r.ee.getClientId(this.fe)},this.Ht=function(t,n){r.ee.Ht(this.fe,t,n)},m.prototype=Object.create(e.prototype),m.prototype.constructor=m};ut.Impl=ut.Impl||{},ut.Impl.Html5Http=function(){(function(){}).apply(this,arguments),this.makeRequest=function(){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(t,n,i,e,s,o){var r=new XMLHttpRequest;return r.open(t,n,!0),e&&r.overrideMimeType&&(r.overrideMimeType=e),e&&r.setRequestHeader&&r.setRequestHeader("Content-Type",e),s>0&&(r.timeout=s,r.ontimeout=function(){r.ontimeout=r.onreadystatechange=null,o&&o(!1,"timeout after "+s+" ms")}),r.onreadystatechange=function(){4===r.readyState&&(r.ontimeout=r.onreadystatechange=null,200===r.status?o&&o(!0,r.responseText):o&&o(!1,"http status "+r.status))},r.send(i),null},this.release=function(){}},ut.Impl=ut.Impl||{},ut.Impl.Html5Logging=function(){(function(){}).apply(this,arguments),this.consoleLog=function(t,n){"undefined"!==typeof console&&(console.log&&n===y.LogLevel.DEBUG||n===y.LogLevel.INFO?console.log(t):console.warn&&n===y.LogLevel.WARNING?console.warn(t):console.error&&n===y.LogLevel.ERROR&&console.error(t))},this.release=function(){}},ut.Impl=ut.Impl||{},ut.Impl.Html5Metadata=function(){(function(){}).apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!==typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},ut.Impl=ut.Impl||{},ut.Impl.Html5Storage=function(){(function(){}).apply(this,arguments),this.saveData=function(t,n,i,e){var s=t+"."+n;try{localStorage.setItem(s,i),e(!0,null)}catch(t){e(!1,t.toString())}},this.loadData=function(t,n,i){var e=t+"."+n;try{i(!0,localStorage.getItem(e))}catch(t){i(!1,t.toString())}},this.release=function(){}},ut.Impl=ut.Impl||{},ut.Impl.Html5Time=function(){(function(){}).apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},ut.Impl=ut.Impl||{},ut.Impl.Html5Timer=function(){(function(){}).apply(this,arguments),this.createTimer=function(t,n){var i=setInterval(t,n);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}};var n,s,C,T,I,w=at.VideoAnalytics=function(){var s=this;s.Ki=null,s.l=null,s.v=null,s.ji=null,s.Hi=null,s.Wi=null,this.release=function(){s.l&&s.l.debug("VideoAnalytics.release()"),s.Hi&&s.Hi.Fi()&&s.Hi.Gi(!1),"undefined"!==typeof ut.ProxyMonitor&&s.Wi&&(ut.ProxyMonitor.release(s.Wi),s.Wi=null),s.Hi&&(s.Hi.Qi(null),s.Hi.Zi(),s.Hi=null),s.ji=null},function(t,n){s.Ki=t,s.v=n,s.ji=n.buildTimer(A.version),s.l=n.buildLogger(),s.l.setModuleName("VideoAnalytics"),s.Hi=new m(s.Ki,s.ji),R.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(t){s.l&&s.l.debug("VideoAnalytics.reportPlaybackRequested()"),s.Hi?(Q._t(t)>0&&s.setContentInfo(t),s.Hi.Fi()||s.Hi.Gi(!0)):s.l.error("VideoAnalytics.reportPlaybackRequested() : "+A.u)},this.reportPlaybackEnded=function(){s.l&&s.l.debug("VideoAnalytics.reportPlaybackEnded()"),s.Hi?s.Hi.Fi()&&(s.Hi.Gi(!1),"undefined"!==typeof ut.ProxyMonitor&&s.Wi&&(ut.ProxyMonitor.release(s.Wi),s.Wi=null),s.Hi.Qi(null)):s.l.error("VideoAnalytics.reportPlaybackEnded() : "+A.u)},this.reportPlaybackFailed=function(t,n){s.Hi?(Q._t(n)>0&&s.setContentInfo(n),s.Hi.Fi()||s.Hi.Gi(!0),s.l&&s.l.debug("VideoAnalytics.reportPlaybackFailed()"),s.reportPlaybackError(t,h.ErrorSeverity.FATAL),s.reportPlaybackEnded()):s.l.error("VideoAnalytics.reportPlaybackFailed() : "+A.e)},this.setContentInfo=function(t){Q._t(t)<=0?s.l.error("VideoAnalytics.setContentInfo() : Content Info is not set"):s.Hi?(s.l&&s.l.debug("VideoAnalytics.setContentInfo()"),s.Hi.Ji(t)):s.l.error("VideoAnalytics.setContentInfo() : "+A.e)},this.setPlayerInfo=function(t){Q._t(t)<=0?s.l.error("VideoAnalytics.setPlayerInfo() : Player Info is not set"):s.Hi?(s.l&&s.l.debug("VideoAnalytics.setPlayerInfo()"),s.Hi.Ji(t)):s.l.error("VideoAnalytics.setPlayerInfo() : "+A.e)},this.reportPlaybackMetric=function(){0!==arguments.length?1===arguments.length?s.Xi(arguments[0]):2===arguments.length?s.Xi(arguments[0],arguments[1]):3===arguments.length?s.Xi(arguments[0],arguments[1],arguments[2]):4===arguments.length&&s.Xi(arguments[0],arguments[1],arguments[2],arguments[3]):s.l.error("VideoAnalytics.reportPlaybackMetric() : Need to report metric mandatory")},this.reportPlaybackError=function(t,n){s.Hi?Q.St(t)?(s.l&&s.l.debug("VideoAnalytics.reportPlaybackError()"),n=new nt(t,n),s.Hi.Kn(n)):s.l.error("VideoAnalytics.reportPlaybackError() : errorMessage need to be valid string"):s.l.error("VideoAnalytics.reportPlaybackError() : "+A.e)},this.reportPlaybackEvent=function(t,n){if(Q.St(t))if(s.Hi){if(s.l&&s.l.debug("VideoAnalytics.reportPlaybackEvent()"),s.Hi)switch(t){case A.Events.USER_WAIT_STARTED:case A.Events.BUMPER_VIDEO_STARTED:s.Hi.Ct();break;case A.Events.USER_WAIT_ENDED:case A.Events.BUMPER_VIDEO_ENDED:s.Hi.It();break;default:s.Hi.zi(t,n)}}else s.l.error("VideoAnalytics.reportPlaybackEvent() : "+A.e);else s.l.error("VideoAnalytics.reportPlaybackEvent(): eventType parameter must be a valid string.")},this.setCallback=function(t){s.l&&s.l.debug("setCallback()"),s.Hi&&s.Hi.Qi(t)},this.reportAdBreakStarted=function(t,n,i){s.Hi?(s.l&&s.l.debug("VideoAnalytics.reportAdBreakStarted()"),s.Hi.te(t,n,i)):s.l.error("VideoAnalytics.reportAdBreakStarted() : "+A.e)},this.reportAdBreakEnded=function(){s.Hi?(s.l&&s.l.debug("VideoAnalytics.reportAdBreakEnded()"),s.Hi.ne()):s.l.error("VideoAnalytics.reportAdBreakEnded() : "+A.e)},this.setPlayer=function(t,n){var i,e;void 0!==t?(n&&(i=n[A.CONVIVA_MODULE],e=n[A.MEDIA_ELEMENT]),"undefined"!==typeof i?ut.ProxyMonitor=i.ProxyMonitor:"undefined"!==typeof ConvivaModule&&(ut.ProxyMonitor=ConvivaModule.ProxyMonitor),"undefined"!==typeof ut.ProxyMonitor?(s.l&&s.l.debug("VideoAnalytics.setPlayer()"),!t&&s.Wi?(ut.ProxyMonitor.release(s.Wi),s.Wi=null):t?(s.Wi&&ut.ProxyMonitor.release(s.Wi),s.l&&s.l.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),s.Wi="undefined"!==typeof e?ut.ProxyMonitor.initConvivaDropIn(t,e,s.v,this,ut):ut.ProxyMonitor.initConvivaDropIn(t,s.v,this,ut)):t||"undefined"===typeof e||(s.Wi=ut.ProxyMonitor.initConvivaDropIn(t,e,s.v,this,ut))):s.l.error("VideoAnalytics.setPlayer() : Include the missing Player Module")):s.l.error("VideoAnalytics.setPlayer() : Need to configure the Player")},this.setAdAnalytics=function(t){t?s.getAdType()&&(s.getAdType()===A.AdType.SERVER_SIDE?s.Ui=t.getAdPlayerMonitor():s.getAdType()===A.AdType.CLIENT_SIDE&&s.l&&s.l.error("VideoAnalytics.setAdAnalytics() : API is not meant for Client Side Ads")):s.Ui=null},this.configureExistingSession=function(t){t!==A.NO_SESSION_KEY?s.Hi?(s.l&&s.l.debug("VideoAnalytics.configureExistingSession()"),s.Hi.Vs(t)):s.l.error("VideoAnalytics.configureExistingSession() : "+A.e):s.l.error("VideoAnalytics.configureExistingSession() : Invalid Session Key")},this.getSessionId=function(){return s.Hi?(s.l&&s.l.debug("VideoAnalytics.getSessionId()"),s.Hi.Ft()):(s.l.error("VideoAnalytics.getSessionId() : "+A.e),A.NO_SESSION_KEY)},this.getClientId=function(){return s.Hi?(s.l&&s.l.debug("VideoAnalytics.getClientId()"),s.Hi.Bt()):(s.l.error("VideoAnalytics.getClientId() : "+A.e),null)},this.Yi=function(){return s.l&&s.l.debug("VideoAnalytics.getPlayerMonitor()"),this.Hi},this.getAdType=function(){return s.Hi?s.Hi.$i:null},this.ie=function(){return s.Hi?s.Hi.xi:null},w.prototype=Object.create(R.prototype),w.prototype.constructor=w};function N(t){throw{name:"SyntaxError",message:t,at:n,text:C}}function O(t){return t&&t!==s&&N("Expected '"+t+"' instead of '"+s+"'"),s=C.charAt(n),n+=1,s}function t(){var t,n="";for("-"===s&&O(n="-");s>="0"&&s<="9";)n+=s,O();if("."===s)for(n+=".";O()&&s>="0"&&s<="9";)n+=s;if("e"===s||"E"===s)for(n+=s,O(),"-"!==s&&"+"!==s||(n+=s,O());s>="0"&&s<="9";)n+=s,O();if(t=+n,!isNaN(t))return t;N("Bad number")}function _(){var t,n,i,e="";if('"'===s)for(;O();){if('"'===s)return O(),e;if("\\"===s)if(O(),"u"===s){for(n=i=0;n<4&&(t=parseInt(O(),16),isFinite(t));n+=1)i=16*i+t;e+=String.fromCharCode(i)}else{if("string"!==typeof T[s])break;e+=T[s]}else e+=s}N("Bad string")}function P(){for(;s&&s<=" ";)O()}at.JsonParse=(T={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},I=function(){switch(P(),s){case"{":return function(){var t,n={};if("{"===s){if(O("{"),P(),"}"===s)return O("}"),n;for(;s;){if(t=_(),P(),O(":"),Object.hasOwnProperty.call(n,t)&&N('Duplicate key "'+t+'"'),n[t]=I(),P(),"}"===s)return O("}"),n;O(","),P()}}N("Bad object")}();case"[":return function(){var t=[];if("["===s){if(O("["),P(),"]"===s)return O("]"),t;for(;s;){if(t.push(I()),P(),"]"===s)return O("]"),t;O(","),P()}}N("Bad array")}();case'"':return _();case"-":return t();default:return(s>="0"&&s<="9"?t:function(){switch(s){case"t":return O("t"),O("r"),O("u"),O("e"),!0;case"f":return O("f"),O("a"),O("l"),O("s"),O("e"),!1;case"n":return O("n"),O("u"),O("l"),O("l"),null}N("Unexpected '"+s+"'")})()}},function(t,r){return C=t,n=0,s=" ",t=I(),P(),s&&N("Syntax error"),"function"===typeof r?function t(n,i){var e,s,o=n[i];if(o&&"object"===typeof o)for(e in o)Object.hasOwnProperty.call(o,e)&&(void 0!==(s=t(o,e))?o[e]=s:delete o[e]);return r.call(n,i,o)}({"":t},""):t});var D,b,M,L,V,k=at.JSON2={};function U(t){return t<10?"0"+t:t}function F(t){return D.lastIndex=0,D.test(t)?'"'+t.replace(D,function(t){var n=L[t];return"string"===typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+U(this.getUTCMonth()+1)+"-"+U(this.getUTCDate())+"T"+U(this.getUTCHours())+":"+U(this.getUTCMinutes())+":"+U(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!==typeof k.stringify&&(D=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,L={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k.stringify=function(t,n,i){var e;if(M=b="","number"===typeof i)for(e=0;e<i;e+=1)M+=" ";else"string"===typeof i&&(M=i);if((V=n)&&"function"!==typeof n&&("object"!==typeof n||"number"!==typeof n.length))throw new Error("JSON2.stringify");return function t(n,i){var e,s,o,r,a,u=b,h=i[n];switch(h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(n)),"function"===typeof V&&(h=V.call(i,n,h)),typeof h){case"string":return F(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(b+=M,a=[],Object.prototype.toString.apply(h)===Object.prototype.toString.apply([])){for(r=h.length,e=0;e<r;e+=1)a[e]=t(e,h)||"null";return o=0===a.length?"[]":b?"[\n"+b+a.join(",\n"+b)+"\n"+u+"]":"["+a.join(",")+"]",b=u,o}if(V&&"object"===typeof V)for(r=V.length,e=0;e<r;e+=1)"string"===typeof V[e]&&(o=t(s=V[e],h))&&a.push(F(s)+(b?": ":":")+o);else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(o=t(s,h))&&a.push(F(s)+(b?": ":":")+o);return o=0===a.length?"{}":b?"{\n"+b+a.join(",\n"+b)+"\n"+u+"}":"{"+a.join(",")+"}",b=u,o}}("",{"":t})});var B=at.CwsProtocol=function(){this.ks=function(t,n,i,e){return e.seq=t,e.st=n,e.t=i,e},this.Us=function(t,n){var i=B.Fs;return this.ks(t,n,i,{})}};B.version="2.6",B.Bs="/0/wsg",B.M="0",B.Hs=-1,B.Gs=!1,B.Ks=2,B.js=-1,B.xs=-1,B.Ws=1e3,B.qs="sdk.js.1",B.Ys="CwsStateChangeEvent",B.Js="CwsErrorEvent",B.Fs="CwsSessionEndEvent",B.Xs="CwsCustomEvent",B.Qs="CwsSeekEvent",B.zs="CwsDataSamplesEvent",B.Zs="ok",B.$s="err",B.no="clid",B.io="cfg",B.eo="evs",B.so="maxhbinfos",B.oo="slg",B.ro="hbi",B.ao="gw",B.uo="fp",B.ho="csi_en",B.co="CwsSessionHb",B.fo="t",B.lo="st",B.do="sst",B.vo="lv",B.po="seq",B.Eo="cid",B.go="clid",B.yo="clv",B.Ao="pver",B.So="iid",B.Ro="sid",B.mo="vid",B.Co="an",B.To="pn",B.Io="tags",B.wo="sf",B.No="evs",B.Oo="lg",B._o="hbinfos",B.Po="sdk",B.Do="pj",B.bo="ps",B.Mo="br",B.Lo="cl",B.Vo="efps",B.ko="afps",B.Uo="rfpstot",B.Fo="rfpscnt",B.Bo="rs",B.Ho="pht",B.Go="bl",B.Ko="url",B.jo="caps",B.xo="pm",B.Wo="w",B.qo="h",B.Yo="ct",B.Jo="le",B.Xo="dftot",B.Qo="dfcnt",B.zo="ss",B.Zo="csi_n",B.$o="csi_t",B.tr="csi_l",B.nr="csi_v",B.ir="csi_c",B.er="sch",B.sr="br",B.or="brv",B.rr="dvb",B.ar="dvma",B.ur="dvm",B.hr="dvt",B.cr="dvv",B.fr="sw",B.lr="sh",B.dr="scf",B.vr="fw",B.pr="fwv",B.Er="cc",B.gr="mn",B.yr="mv",B.Ar="os",B.Sr="osv",B.Rr="cat",B.mr="caps",B.Cr="t",B.Tr="seq",B.Ir="st",B.wr="act",B.Nr="skto",B.Or="err",B._r="ft",B.Pr="new",B.Dr="old",B.br="name",B.Mr="attr",B.Lr="seq",B.Vr="err",B.kr="rtt",B.Ur="ad",B.Fr="csi",B.Br=function(t){switch(t){case a.PlayerState.STOPPED:return B.Hr;case a.PlayerState.PLAYING:return B.Gr;case a.PlayerState.BUFFERING:return B.Kr;case a.PlayerState.PAUSED:return B.jr;case a.PlayerState.NOT_MONITORED:return B.xr;default:return B.Wr}},B.Hr=1,B.Gr=3,B.Kr=6,B.jr=12,B.xr=98,B.Wr=100,B.qr={Yr:0,lt:1,Jr:2,Xr:4},B.Qr={zr:0};var H=at.LibJSONInterface=function(){this.Zr=function(t){var n=null;try{n=k.stringify(t)}catch(t){return n}return n},this.$r=function(t){var n=null;try{n=at.JsonParse(t)}catch(t){return n}return Q.ta(n)||(n=null),n}},G=at.CwsHeartbeat=function(){this.na={},function(){}.apply(this,arguments),this.get=function(){return this.na},this.ia=function(t,n){this.na[t]=n},this.ea=function(t,n,i){this.na[t]||(this.na[t]={}),this.na[t][n]=i},this.sa=function(t){this.ia(B.fo,t)},this.oa=function(t){this.ia(B.lo,t)},this.ra=function(t){this.ia(B.do,t)},this.aa=function(t){this.ia(B.vo,t)},this.ua=function(t){this.ia(B.po,t)},this.ha=function(t){this.ia(B.Eo,t)},this.ca=function(t){this.ia(B.go,t)},this.fa=function(t){this.ia(B.yo,t)},this.la=function(t){this.ia(B.Ao,t)},this.da=function(t){this.ia(B.mr,t)},this.Bn=function(t){this.ia(B.Ro,t)},this.va=function(t){this.ia(B.So,t)},this.pa=function(t){this.ia(B.mo,t)},this.Ea=function(t){this.ia(B.Co,t)},this.ga=function(t){this.ia(B.To,t)},this.ya=function(t){this.ia(B.Io,t)},this.Aa=function(t){this.ia(B.wo,t)},this.Sa=function(t){this.ia(B.jo,t)},this.Ra=function(t){this.ia(B.No,t)},this.ma=function(t){this.ia(B.Po,t)},this.Ca=function(t){this.ia(B.Oo,t)},this.Ta=function(t){this.ia(B._o,t)},this.Re=function(t){this.ia(B.bo,t)},this.Ia=function(t){this.ia(B.Do,t)},this.wa=function(t){this.ia(B.Lo,t)},this.Na=function(t){this.ia(B.Mo,t)},this.Oa=function(t){this.ia(B.Bo,t)},this._a=function(t){this.ia(B.Vo,t)},this.Pa=function(t){this.ia(B.ko,t)},this.Da=function(t){this.ia(B.Fo,t)},this.ba=function(t){this.ia(B.Uo,t)},this.Ma=function(t){this.ea(B.xo,B.er,t)},this.La=function(t){this.ea(B.xo,B.sr,t)},this.Va=function(t){this.ea(B.xo,B.or,t)},this.ka=function(t){this.ea(B.xo,B.rr,t)},this.Ua=function(t){this.ea(B.xo,B.ar,t)},this.Fa=function(t){this.ea(B.xo,B.ur,t)},this.Ba=function(t){this.ea(B.xo,B.hr,t)},this.Ha=function(t){this.ea(B.xo,B.cr,t)},this.Ga=function(t){this.ea(B.xo,B.vr,t),this.ia(B.vr,t)},this.Ka=function(t){this.ea(B.xo,B.pr,t),this.ia(B.pr,t)},this.ja=function(t){this.ea(B.xo,B.Ar,t.toUpperCase())},this.xa=function(t){this.ea(B.xo,B.Sr,t)},this.Wa=function(t){this.ea(B.xo,B.Rr,t)},this.qa=function(t){this.ea(B.xo,B.fr,t)},this.Ya=function(t){this.ea(B.xo,B.lr,t)},this.Ja=function(t){this.ea(B.xo,B.dr,t)},this.Xa=function(t){this.ia(B.Xo,t)},this.ns=function(t){this.ia(B.Qo,t)},this.Qa=function(t){this.ia(B.Ho,t)},this.za=function(t){this.ia(B.Go,t)},this.Za=function(t){this.ia(B.Ko,t)},this.$a=function(t){this.ia(B.Wo,t)},this.tu=function(t){this.ia(B.qo,t)},this.nu=function(t){this.ia(B.Yo,t)},this.iu=function(t){this.ia(B.Jo,t)},this.eu=function(){this.ia(B.Ur,!0)},this.su=function(t){this.ia(B.zo,t)},this.setModuleName=function(t){this.ea(B.Er,B.gr,t)},this.ou=function(t){this.ea(B.Er,B.yr,t)},this.ru=function(t){this.ia(B.Fr,t)},this.au=function(t){t&&this.ia(B.Zo,t)},this.uu=function(t){t&&this.ia(B.$o,t)},this.hu=function(t){t&&this.ia(B.tr,t)},this.cu=function(t){t&&this.ia(B.nr,t)},this.fu=function(t){t&&this.ia(B.ir,t)}},K=at.CwsSession=function(){var E=this;E.lu=null,E.gt=null,E.du=0,E.vu=0,E.pu=B.qr.Yr,E.Eu=B.Qr.zr,E.gu=[],E.yu=-1,E.vn=-2,E.Zn=-1,E.Au=-1,E.Su=null,E.pn=a.PlayerState.UNKNOWN,E.ln=-1,E.Ru=-1,E.un=null,E.mn=-1,E.Cn=-1,E.ue=null,E.en=null,E.rn=null,E.mu=null,E.Cu=null,E.Tu={},E.Iu=null,E.wu=null,E.Nu=null,E.Ou=null,E._u=null,E.Pu=null,E.Du=null,E.bu=null,E.Mu=null,E.Lu=null,E.Vu=null,E.ku=null,E.Uu=null,E.Fu=null,E.Bu=null,E.Sn=null,E.Rn=null,E.w=null,E.N=null,E.Fe=null,E.Hu=null,E.Gu=!1,E.Ku=!1,E.ju=!1,E.xu=!1,E.Wu=null,E.qu=1e3,E.Yu=0,E.Ju=0,E.Xu={},E.C={},E.Qu=!1,E.zu=null,E.Zu=null,E.$u=null,E.th=null,E.nh=null,E.ih=null,E.eh=12e4,E.sh=B.Gs,E.oh=!1,E.rh=null,E.fi=null,function(t,n,i,e,s,o,r,a,u,h,c,f,l){this.ah=t,this.Ki=n,this.ci=i,this.l=e,this.l.setModuleName("CwsSession"),this.A=s,this.ji=o,this.uh=r,this.hh=a,this.ch=u,this.li=h,this.fh=c,this.gt=f,this.gt&&(E.ln=this.gt.encodedFrameRate,E.un=this.gt.streamUrl,E.Ru=this.gt.duration),this.fh&&(E.rh=E.fh.get(q.D)),E.fi=l}.apply(this,arguments),this.ct=function(){this.fh=null,this.li=null,this.y=null,this.ch=null,this.hh=null,this.uh=null,this.ji=null,this.A=null,this.l=null,this.ci=null,this.Ki=null,this.ah.lh(),this.ah=null,this.Hu=null,this.ju=!0},this.dh=function(t){this.vh=t,this.ph=this.vh.ph,this.l.Bn(this.vh.R),this.du=this.ch.current(),this.Eh()||this.gh()?(this.pu+=K.yh,E.l.info("start(): assetName="+E.gt.assetName)):E.l.info("start()"+E.Ah())},this.Sh=function(){this.xu=!0},this.Rh=function(){this.l.debug("initialize()"),(this.Eh()||this.gh()||this.mh())&&(E.Ch(),E.Th(),E.Ih(),(this.Eh()||this.gh())&&E.wh())},this.Nh=function(){this.l.debug("end(): schedule the last hb before session cleanup"+E.Ah()),this.Oh(),this._h(),this.Ph(),this.Dh()},this.bh=function(){this.xu||(this.Dh(),this.Mh())},this.La=function(t){var n=E.Iu;n!==t&&t&&(E.l.debug("Change browserName from "+n+" to "+t),E.Iu=t)},this.Va=function(t){var n=E.wu;n!==t&&t&&(E.l.debug("Change browserVersion from "+n+" to "+t),E.wu=t)},this.ka=function(t){var n=E.Nu;n!==t&&t&&(E.l.debug("Change deviceBrand from "+n+" to "+t),E.Nu=t)},this.Ua=function(t){var n=E.Ou;n!==t&&t&&(E.l.debug("Change deviceManufacturer from "+n+" to "+t),E.Ou=t)},this.Fa=function(t){var n=E._u;n!==t&&t&&(E.l.debug("Change deviceModel from "+n+" to "+t),E._u=t)},this.Ba=function(t){var n=E.Pu;n!==t&&t&&(E.l.debug("Change deviceType from "+n+" to "+t),E.Pu=t)},this.Ha=function(t){var n=E.Du;n!==t&&t&&(E.l.debug("Change deviceVersion from "+n+" to "+t),E.Du=t)},this.ja=function(t){var n=E.Lu;n!==t&&t&&(E.l.debug("Change operatingSystemName from "+n+" to "+t),E.Lu=t)},this.xa=function(t){var n=E.Vu;n!==t&&t&&(E.l.debug("Change operatingSystemVersion from "+n+" to "+t),E.Vu=t)},this.Wa=function(t){var n=E.ku;n!==t&&t&&(E.l.debug("Change deviceCategory from "+n+" to "+t),E.ku=t)},this.qa=function(t){var n=E.Uu;n!==t&&t&&(E.l.debug("Change screenWidth from "+n+" to "+t),E.Uu=t)},this.Ya=function(t){var n=E.Fu;n!==t&&t&&(E.l.debug("Change screenHeight from "+n+" to "+t),E.Fu=t)},this.Ja=function(t){var n=E.ku;n!==t&&t&&(E.l.debug("Change scaleFactor from "+n+" to "+t),E.Bu=t)},this.Lh=function(){return E.bu},this.Ga=function(t){var n=E.bu;n!==t&&t&&(E.l.debug("Change frameworkName from "+n+" to "+t),E.bu=t)},this.Vh=function(){return E.Mu},this.Ka=function(t){var n=E.Mu;n!==t&&t&&(E.l.debug("Change frameworkVersion from "+n+" to "+t),E.Mu=t)},this.Za=function(t){var n;E.gt.streamUrl||(n=E.un)!==t&&t&&(E.l.debug("Change stream url from "+n+" to "+t),E.un=t)},this.kh=function(){E._h(),E.oh||(E.Uh(),E.ih=E.ji.create(E.Uh,E.eh,"CwsSession.startCdnTimer"),E.l.debug("fetching cdn ip timer started"))},this._h=function(){E.ih&&(E.ih(),E.Fh(null,null,null,null,null),E.ih=null)},this.Uh=function(){E.l.debug("detectCDNServerIp(): For "+E.un),E.sh?E.Bh():E._h()},this.Bh=function(){try{var t;"function"===typeof XMLHttpRequest||"object"===typeof XMLHttpRequest?((t=new XMLHttpRequest).open("HEAD",E.un,!0),t.setRequestHeader("Pragma","akamai-x-cache-on"),t.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(this.getAllResponseHeaders().indexOf("x-cache")>=0||this.getAllResponseHeaders().indexOf("X-Cache")>=0)?E.Fh("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):E.Fh("null","header","null","null",""+this.status))},t.send()):E.l.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){E.l.info("Exception caught in makeAkamaiHeadRequest")}},this.Fh=function(t,n,i,e,s){var o={},r={};E.zu!==t&&(null!==E.zu&&(r[B.Zo]=E.zu),E.zu=t,null===E.zu?o[B.Zo]="null":o[B.Zo]=E.zu),E.Zu!==n&&(null!==E.Zu&&(r[B.$o]=E.Zu),E.Zu=n,null===E.Zu?o[B.$o]="null":o[B.$o]=E.Zu),E.$u!==i&&(null!==E.$u&&(r[B.tr]=E.$u),E.$u=i,null===E.$u?o[B.tr]="null":o[B.tr]=E.$u),E.th!==e&&(null!==E.th&&(r[B.nr]=E.th),E.th=e,null===E.th?o[B.nr]="null":o[B.nr]=E.th),E.nh!==s&&(null!==E.nh&&(r[B.ir]=E.nh),E.nh=s,null===E.nh?o[B.ir]="null":o[B.ir]=E.nh),"{}"!==JSON.stringify(o)&&E.Hh(o,r)},this.Gh=function(t){var n=E.vn;n!==t&&t>0&&(E.l.info("Change bitrate from "+n+" to "+t),E.Kh(n,t),E.vn=t)},this.Xa=function(t){var n=E.Zn;n!==t&&t>=0&&(E.l.info("Change dropped frames total from "+n+" to "+t),E.jh(n,t),E.Zn=t)},this.ns=function(t){var n=E.Au,i=t+(-1===E.Au?0:E.Au);n!==t&&i>=0&&(E.l.info("Change dropped frames count from "+n+" to "+i),E.xh(n,i),E.Au=i)},this.Oa=function(t){var n=E.Su;n!==t&&t&&(E.l.info("Change resource from "+n+" to "+t),E.Su=t)},this.Ea=function(t){E.en!==t&&t&&(E.l.info("Change assetName from "+E.en+" to "+t),E.en=t)},this.aa=function(t){var n=E.Cu;n!==t&&Q.Pi(t)&&(E.l.info("Change isLive from "+n+" to "+t),E.Cu=t)},this.pa=function(t){var n=E.rn;n!==t&&t&&(E.l.info("Change viewerId from "+n+" to "+t),E.rn=t)},this.ga=function(t){var n=E.mu;n!==t&&t&&(E.l.info("Change playerName from "+n+" to "+t),E.mu=t)},this.ya=function(t){var n=E.Tu;!Q.Wh(n,t)&&t&&(E.l.info("Change tags from "+Q.qh(n)+" to "+Q.qh(t)),E.Tu=t)},this._a=function(t){E.gt.encodedFrameRate>0||(E.l.debug("setEncodedFrameRate(): "+t),E.ln=t)},this.wa=function(t){E.gt.duration>0||(E.l.debug("setContentLength(): "+t),E.Ru=t)},this.Re=function(t){var n;E.Ku||t!==a.PlayerState.PLAYING||(E.Ku=!0,Q.St(E.gt.viewerId)||E.l.error("Missing viewerId. viewerId should be updated before first frame is rendered."),Q.St(E.gt.streamType)&&f.StreamType.UNKNOWN!==E.gt.streamType||E.l.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),Q.St(E.gt.applicationName)||E.l.error("Missing applicationName. applicationName should be updated before first frame is rendered.")),E.pn!==t&&(n=E.pn,E.l.info("setPlayerState(): changing player state from "+n+" to "+t),E.Yh(n,t),E.pn=t)},this.Jh=function(t){var n=E.mn;n!==t&&t>0&&(E.l.debug("Change stream resolution width from "+n+" to "+t),E.Xh(n,t),E.mn=t)},this.Qh=function(t){var n=E.Cn;n!==t&&t>0&&(E.l.debug("Change stream resolution height from "+n+" to "+t),E.zh(n,t),E.Cn=t)},this.nu=function(t){var n=E.w;n!==t&&t&&(E.l.debug("Change network connection type from "+n+" to "+t),E.Zh(n,t),E.w=t)},this.iu=function(t){var n=E.N;n!==t&&t&&(E.l.debug("Change network link encryption from "+n+" to "+t),E.$h(n,t),E.N=t)},this.ru=function(t){E.oh=!0,E._h();var n=E.Fe;n!==t&&Q.St(t)&&(E.l.debug("Change CDN Server IP from "+n+" to "+t),E.tc(n,t),E.Fe=t)},this.nc=function(t){var n;E.l.debug("togglePauseJoin()"),E.Gu!==t?(n=E.Gu,t=!E.Gu,E.ic(n,t),E.Gu=!E.Gu):E.l.debug("togglePauseJoin(): same value, ignoring")},this.ec=function(t,n){E.sc(t,n)},this.oc=function(t,n){var i;n[B.Cr]=t,n[B.Ir]=this.rc(),n[B.Tr]=this.ah.ac(),this.ue&&(i=tt.uc(this.ue.getPHT(),0,null,-1),t=tt.uc(this.ue.getBufferLength(),0,null,-1),i>=0&&(n[B.Ho]=i),t>0&&(n[B.Go]=t)),this.ah.hc(n)},this.cc=function(t){E.ue=t,E.ue?E.fc():E.lc()},this.Oh=function(){var t=this.hh.Us(this.dc(),this.rc());this.ah.hc(t)},this.sc=function(t,n){var i={};i[B.Or]=t,i[B._r]=n,this.oc(B.Js,i)},this.Kh=function(t,n){var i={},e={};t>0&&(e[B.Mo]=t),i[B.Mo]=n,this.Hh(i,e)},this.vc=function(t,n){var i={};i[B.wr]=t,n>=0&&(i[B.Nr]=n),this.oc(B.Qs,i)},this.Xh=function(t,n){var i={},e={};-1!==t&&(e[B.Wo]=t),i[B.Wo]=n,this.Hh(i,e)},this.zh=function(t,n){var i={},e={};-1!==t&&(e[B.qo]=t),i[B.qo]=n,this.Hh(i,e)},this.Zh=function(t,n){var i={},e={};null!==t&&(e[B.Yo]=t),i[B.Yo]=n,this.Hh(i,e)},this.$h=function(t,n){var i={},e={};null!==t&&(e[B.Jo]=t),i[B.Jo]=n,this.Hh(i,e)},this.tc=function(t,n){var i={},e={};Q.St(t)&&(e[B.Fr]=t),i[B.Fr]=n,this.Hh(i,e)},this.jh=function(t,n){var i={},e={};t>=0&&(e[B.Xo]=t),i[B.Xo]=n,this.Hh(i,e)},this.xh=function(t,n){var i={},e={};t>=0&&(e[B.Qo]=t),i[B.Qo]=n,this.Hh(i,e)},this.ic=function(t,n){var i={},e={};e[B.Do]=t,i[B.Do]=n,this.Hh(i,e)},this.Yh=function(t,n){var i={},e={};i[B.bo]=B.Br(n),e[B.bo]=B.Br(t),this.Hh(i,e)},this.Hh=function(t,n){var i={};i[B.Pr]=t,n&&Q._t(n)>0&&(i[B.Dr]=n),this.oc(B.Ys,i)},this.pc=function(t,n){var i={};i[B.br]=t,Q._t(n)>0&&(i[B.Mr]=n),this.oc(B.Xs,i)},this.Ph=function(){E.lu&&(E.lu(),E.lu=null)},this.Mh=function(){E.Ph();var t=1e3*E.ci.heartbeatInterval;E.lu=E.ji.create(E.Dh,t,"Session.sendHeartbeat:"+this.ph)},this.lc=function(){E.Wu&&(E.Wu(),E.Wu=null)},this.fc=function(){E.lc(),E.Wu=E.ji.create(E.Ec,E.qu,"Session.startRfpsTimer")},this.gc=function(){var t={err:"pending"};t.seq=E.vu-1,t.sentAt=E.rc(),t.rtt=-1,E.gu.push(t);for(var n=0;n<E.gu.length;n++)"ok"===(t=E.gu[n]).err&&(E.gu.splice(n,1),n--)},this.yc=function(t,n){for(var i=0;i<E.gu.length;i++){var e=E.gu[i];e.seq===t&&(e.rtt=E.rc()-e.sentAt,e.err=n)}},this.Ac=function(t){for(var n=0;n<E.gu.length;n++){var i=E.gu[n];i.seq===t&&(i.rtt=E.rc()-i.sentAt,i.err="ok")}},this.Sc=function(){for(var t,n,i=E.fh.get(q.Rc),e=[],s=-1,o=0;o<E.gu.length;o++)if("ok"===(n=E.gu[o]).err){s=n.seq;break}for(var r=0;r<E.gu.length;r++)((t=(n=E.gu[r]).seq)<E.vu-i||t<s)&&e.push(r);for(var a=[],u=0;u<E.gu.length;u++)t=(n=E.gu[u]).seq,e.indexOf(u)<0&&a.push(E.gu[u]);E.gu=a},this.mc=function(){E.Sc();for(var t=[],n=0;n<E.gu.length;n++){var i=E.gu[n],e={};e[B.Lr]=i.seq,e[B.kr]=i.rtt,e[B.Vr]=i.err,t.push(e)}return t},this.Cc=function(){var t,n=-1,i=-1,e=E.ah.lh();if(E.mh()&&0===e.length)return null;var s=new G;s.sa(B.co),s.ha(E.ci.customerKey),s.ca(E.fh.get(q.D)),s.Bn(E.vh.R),s.ua(E.vu),s.la(B.version);var o=A.version;if(E.fi&&(o=E.fi),s.fa(o),s.va(E.Ki.R),s.da(0),E.Ki.w?s.nu(E.Ki.w):E.w&&s.nu(E.w),E.Ki.N?s.iu(E.Ki.N):E.N&&s.iu(E.N),Q.St(E.Fe)&&s.ru(E.Fe),s.Ma(B.qs),E.Iu&&s.La(E.Iu),E.wu&&s.Va(E.wu),E.Nu&&s.ka(E.Nu),E.Ou&&s.Ua(E.Ou),E._u&&s.Fa(E._u),E.Pu&&s.Ba(E.Pu),E.Du&&s.Ha(E.Du),E.Lu&&s.ja(E.Lu),E.Vu&&s.xa(E.Vu),E.ku&&s.Wa(E.ku),E.bu&&s.Ga(E.bu),E.Mu&&s.Ka(E.Mu),E.Uu&&!isNaN(E.Uu)&&s.qa(parseInt(E.Uu,10)),E.Fu&&!isNaN(E.Fu)&&s.Ya(parseInt(E.Fu,10)),E.Bu&&!isNaN(E.Bu)?s.Ja(parseFloat(E.Bu)):(E.Uu&&!isNaN(E.Uu)||E.Fu&&!isNaN(E.Fu))&&s.Ja(1),E.ue&&(E.Sn=E.ue.Mn(),E.Sn&&s.setModuleName(E.Sn),E.Rn=E.ue.Ln(),E.Rn&&s.ou(E.Rn),E.ue.Vn()&&(E.bu=E.ue.Vn(),s.Ga(E.bu)),E.ue.Un()&&(E.Mu=E.ue.Un(),s.Ka(E.Mu))),E.rn&&s.pa(E.rn),Q._t(E.Tu)>0&&s.ya(E.Tu),E.Eh()||E.gh()){E.gh()&&s.eu(),E.en&&s.Ea(E.en),s.Aa(E.pu);o=B.Br(E.pn);s.Re(o),s.Ia(E.Gu),E.mu&&s.ga(E.mu),Q.Pi(E.Cu)&&s.aa(E.Cu),E.Ru>0&&s.wa(E.Ru),E.vn>0&&s.Na(E.vn),null!==E.Su&&s.Oa(E.Su),E.ln>0&&s._a(E.ln),E.ue&&(n=tt.uc(E.ue.getPHT(),0,null,-1),i=tt.uc(E.ue.getBufferLength(),0,null,-1)),Q.vt(E.Ki.O)?t=E.Ki.O:E.ue&&(t=E.ue.getSignalStrength()),n>=0&&s.Qa(n),i>0&&s.za(i);i=E.Tc();if(i>0&&s.Pa(i),E.Ju>0&&s.ba(tt.uc(E.Ju,0,null,-1)),E.Yu>0&&s.Da(tt.uc(E.Yu,0,null,-1)),t!==a.DEFAULT_SIGNAL_STRENGTH&&s.su(t),E.un&&s.Za(E.un),E.mn>0&&s.$a(E.mn),E.Cn>0&&s.tu(E.Cn),E.Zn>-1&&s.Xa(E.Zn),E.Au>-1&&(s.ns(E.Au),E.Au>0&&(E.xh(E.Au,0),E.Au=0)),"undefined"!==typeof E.Hu)for(var r in E.Hu)s.ia(r,E.Hu[r])}else s.Aa(B.qr.Yr);return e.length>0&&s.Ra(e),s.Sa(E.Eu),s.ma(!0),E.fh.get(q.Ic)&&s.Ca(E.li.lh()),E.fh.get(q.Rc)>0&&((e=E.mc()).length>0&&s.Ta(e)),0===E.vu&&(s=E.wc(s)),0!==E.vu&&(s=E.Nc(s)),s.ra(E.du),s.oa(E.rc()),E.sh&&(s.au(E.zu),s.uu(E.Zu),s.hu(E.$u),s.cu(E.th),s.fu(E.nh)),E.vu++,s.get()},this.Nc=function(t){var n,i=E.C,e={};for(n in t.na.tags)Object.prototype.hasOwnProperty.call(i,n)||(e[n]=t.na.tags[n]);t.na.tags=e,E.C={};for(var s=0;s<E.Xu.length;s++)Object.prototype.hasOwnProperty.call(E.Ki.C,E.Xu[s])?Object.prototype.hasOwnProperty.call(E.Ki.I,E.Xu[s])?E.Ki.I[E.Xu[s]]===q.Kt.jt?(E.C[q.Oc+""+E.Xu[s]]=q.Kt.jt,E.Ki.T("End-user chose to opt-out of personal data collection")):E.Ki.I[E.Xu[s]]===q.Kt.Wt?(E.C[q.Oc+""+E.Xu[s]]=q.Kt.Wt,E.Ki.T("End-user chose to opt-out of personal data collection")):E.Ki.I[E.Xu[s]]===q.Kt.Gt?(E.C[q.Oc+""+E.Xu[s]]=q.Kt.Gt,E.Ki.T("End-user used privacy settings and chose to opt-out of personal data collection")):(E.C[q.Oc+""+E.Xu[s]]=E.Ki.C[E.Xu[s]],E.Ki.T("Data collection successful")):(E.C[q.Oc+""+E.Xu[s]]=E.Ki.C[E.Xu[s]],E.Ki.T("Data collection successful")):E.C[q.Oc+""+E.Xu[s]]=q.Kt._c;var o,r={};for(o in i){var a=o.split(".");"{}"!==JSON.stringify(E.Xu)&&-1!==E.Xu.indexOf(""+a[2])||i[q.Oc+""+a[2]]===q.Kt.Pc||(E.Ki.T("Data collection restricted from Conviva back-end"),E.C[q.Oc+""+a[2]]=q.Kt.Pc,r[q.Oc+""+a[2]]=q.Kt.Pc)}if("{}"!==JSON.stringify(E.C)){var u,h=Q.Dc(E.C);for(u in t.na.tags)h[u]=t.na.tags[u];if(t.na.tags=h,!Q.Wh(i,E.C)){var c={};if("{}"!==JSON.stringify(r)&&(c[B.Io]=r),"{}"!==JSON.stringify(i)){for(var f in i)E.C[f]&&i[f]!==E.C[f]&&(c[B.Io]||(c[B.Io]={}),c[B.Io][f]=E.C[f]);for(var l in E.C)Object.prototype.hasOwnProperty.call(i,l)&&i[l]===E.C[l]||(c[B.Io]||(c[B.Io]={}),c[B.Io][l]=E.C[l])}"{}"===JSON.stringify(i)&&(c[B.Io]=E.C);var d,v,p={};p[B.Pr]=c,p[B.Cr]=B.Ys,p[B.Ir]=E.rc(),p[B.Tr]=E.ah.ac(),E.ue&&(d=tt.uc(E.ue.getPHT(),0,null,-1),v=tt.uc(E.ue.getBufferLength(),0,null,-1),d>=0&&(p[B.Ho]=d),v>0&&(p[B.Go]=v)),t.na.evs||(t.na.evs=[]),t.na.evs.push(p)}}return t},this.wc=function(t){var n=E.bc();if("{}"===JSON.stringify(n))return t;var i,e=Q.Dc(n);for(i in t.na.tags)e[i]=t.na.tags[i];t.na.tags=e;var s={};s[B.Io]=n;var o={};return o[B.Pr]=s,o[B.Cr]=B.Ys,o[B.Ir]=E.rc(),o[B.Tr]=E.ah.ac(),E.ue&&(n=tt.uc(E.ue.getPHT(),0,null,-1),s=tt.uc(E.ue.getBufferLength(),0,null,-1),n>=0&&(o[B.Ho]=n),s>0&&(o[B.Go]=s)),t.na.evs||(t.na.evs=[]),t.na.evs.push(o),t},this.bc=function(){var t={};if("undefined"!==typeof navigator&&navigator){if(t["c3.fp.cookie"]="undefined"!==typeof navigator.cookieEnabled&&navigator.cookieEnabled?""+navigator.cookieEnabled:"",t["c3.fp.memory"]="undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?""+navigator.deviceMemory:"",t["c3.fp.hwConc"]="undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",t["c3.fp.java"]=""+("function"!==typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),t["c3.fp.lang"]="undefined"!==typeof navigator.language&&navigator.language?""+navigator.language:"",t["c3.fp.langs"]="undefined"!==typeof navigator.languages&&navigator.languages&&navigator.languages.length>0?""+navigator.languages.toString():"",t["c3.fp.maxTp"]="undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",t["c3.fp.plugins"]="","undefined"!==typeof navigator.plugins&&navigator.plugins&&navigator.plugins.length>0)for(var n=0;n<navigator.plugins.length;n++)t["c3.fp.plugins"]+=navigator.plugins[n].name+",";if(t["c3.fp.mime"]="","undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var i=0;i<navigator.mimeTypes.length;i++)t["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";t["c3.fp.sysLang"]="undefined"!==typeof navigator.systemLanguage&&navigator.systemLanguage?""+navigator.systemLanguage:"",t["c3.fp.platform"]="undefined"!==typeof navigator.platform&&navigator.platform?""+navigator.platform:"",t["c3.fp.product"]="undefined"!==typeof navigator.product&&navigator.product?""+navigator.product:"",t["c3.fp.productSub"]="undefined"!==typeof navigator.productSub&&navigator.productSub?""+navigator.productSub:"",t["c3.fp.vendor"]="undefined"!==typeof navigator.vendor&&navigator.vendor?""+navigator.vendor:"",t["c3.fp.vendorSub"]="undefined"!==typeof navigator.vendorSub&&navigator.vendorSub?""+navigator.vendorSub:"";var e=E.Mc();""!==e&&(t["c3.fp.canvFp"]=e)}return"undefined"!==typeof window&&window&&("undefined"!==typeof window.screen&&window.screen&&(t["c3.fp.availHeight"]="undefined"!==typeof window.screen.availHeight&&window.screen.availHeight?""+window.screen.availHeight:"",t["c3.fp.availWidth"]="undefined"!==typeof window.screen.availWidth&&window.screen.availWidth?""+window.screen.availWidth:"",t["c3.fp.height"]="undefined"!==typeof window.screen.height&&window.screen.height?""+window.screen.height:"",t["c3.fp.width"]="undefined"!==typeof window.screen.width&&window.screen.width?""+window.screen.width:"",t["c3.fp.colorDepth"]="undefined"!==typeof window.screen.colorDepth&&window.screen.colorDepth?""+window.screen.colorDepth:"",t["c3.fp.deviceXDPI"]="undefined"!==typeof window.screen.deviceXDPI&&window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",t["c3.fp.deviceYDPI"]="undefined"!==typeof window.screen.deviceYDPI&&window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),t["c3.fp.dpi"]="undefined"!==typeof window.devicePixelRatio&&window.devicePixelRatio?""+window.devicePixelRatio:"",t["c3.fp.secure"]="boolean"===typeof window.isSecureContext?""+window.isSecureContext:""),t},this.Mc=function(){try{if("undefined"!==typeof document&&document){var t=document.createElement("CANVAS");if("undefined"!==typeof t&&t&&"function"===typeof t.getContext){var n=t.getContext("2d"),i="conviva";return n.textBaseline="top",n.font="14px Arial",n.textBaseline="alphabetic",n.fillStyle="#f40",n.fillRect("undefined"!==typeof navigator.plugins&&navigator.plugins?navigator.plugins.length:0,"undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes?navigator.mimeTypes.length:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0,"undefined"!==typeof navigator.vendor&&navigator.vendor?navigator.vendor.length:0),n.fillStyle="#069",n.fillText(i,"undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>=0?navigator.maxTouchPoints:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(i,"undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?navigator.deviceMemory:0,"undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),Q.Lc(t.toDataURL())}}return""}catch(t){return""}},this.Dh=function(){var t;E.ju||(t=E.Cc())&&E.Vc(t)},this.Ec=function(){var t;E.pn!==a.PlayerState.PLAYING||!E.ue||(t=E.ue.getRenderedFrameRate())>0&&(E.Ju+=t,E.Yu++)},this.Tc=function(){return E.Ju>0&&E.Yu>0?Q.kc.Cast(+E.Ju/E.Yu):(this.Ec(),E.Ju>0&&E.Yu>0?Q.kc.Cast(+E.Ju/E.Yu):a.DEFAULT_RENDERED_FRAME_RATE)},this.Vc=function(t){E.gc();var i=E.vu-1;E.l.info("postHeartbeat(): Send HB["+i+"]"+E.Ah());E.uh.Uc(t,function(t,n){E.Fc(t,n,i)})},this.Fc=function(e,s,o){E.ju||E.A.P("onHeartbeatResponse",function(){var t,n,i;e?s?(E.l.debug("onHeartbeatResponse(): received valid response for HB["+o+"]"),E.Ac(o),!(i=s[B.no])||i!==(t=E.fh.get(q.D))&&(E.l.debug("onHeartbeatResponse(): setting the client id to "+i+" (from gateway)"),E.fh.set(q.D,i),E.fh.Bc(),t===B.M&&i!==B.M&&E.Ki._()),(t=s[B.$s])&&t!==B.Zs&&E.l.error("onHeartbeatResponse(): error from gateway: "+t),"object"===typeof(i=s[B.io])&&((t=i[B.so])>=0&&E.fh.get(q.Rc)!==t&&(E.l.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+t+" (from gateway)"),E.fh.set(q.Rc,t)),t=i[B.oo],(t=!!Q.Pi(t)&&t)!==E.fh.get(q.Ic)&&(E.l.debug("onHeartbeatResponse(): turning "+(t?"on":"off")+" sending of logs"),E.fh.set(q.Ic,t)),t=i[B.ro],!Q.vt(t)||(n=Q.kc.Cast(t))!==E.ci.heartbeatInterval&&(E.l.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+n),E.ci.heartbeatInterval=n,E.lu&&E.Mh()),(n=i[B.ao])&&n!==E.ci.gatewayUrl&&(E.l.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),E.ci.gatewayUrl=n),E.Hc()||(E.Xu={},(n=i[B.uo])&&(E.Qu||(E.Qu=!0),E.l.debug("onHeartbeatResponse(): received fp from gateway: "+n),E.Xu=n.split(",")),E.sh=i[B.ho],Q.Pi(E.sh)&&(E.sh?(E.l.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),E.ih||E.kh()):(E.l.debug("onHeartbeatResponse(): disabling the CDN Server IP collection (from gateway)"),E._h()))))):E.l.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(i=s,Q.St(i)?Q.Gc(i,"HTTP timeout")?E.l.warning("onHeartbeatResponse(): "+i):E.l.error("onHeartbeatResponse(): failed to send heartbeat: "+i):(i=j.Kc,E.l.error("onHeartbeatResponse(): "+i)),E.yc(o,i))})},this.rc=function(){return Q.kc.Cast(E.ch.current()-E.du)},this.dc=function(){return this.ah.ac()},this.Ah=function(){return this.mh()?" (global session)":""},this.mh=function(){return this.ph===K.dt.Yr},this.Hc=function(){return this.ph===K.dt.Yr&&"T"===this.Tu["c3.IPV4IPV6GlobalSession"]},this.Eh=function(){return this.ph===K.dt.lt},this.gh=function(){return this.ph===K.dt.At},this.mt=function(t){E.jc(t),E.Ch()},this.jc=function(t){var n={},i={};if(Q.St(t.assetName)&&(E.gt.assetName!==t.assetName?(E.gt.assetName&&(n[B.Co]=E.gt.assetName),i[B.Co]=t.assetName,E.gt.assetName=t.assetName):E.l.warning("mergeContentMetadata(): assetName was not changed.")),Q.St(t.applicationName)&&(E.gt.applicationName!==t.applicationName?(E.gt.applicationName&&(n[B.To]=E.gt.applicationName),i[B.To]=t.applicationName,E.gt.applicationName=t.applicationName):E.l.warning("mergeContentMetadata(): applicationName was not changed.")),Q.St(t.streamUrl)&&(E.gt.streamUrl!==t.streamUrl?(E.gt.streamUrl&&(n[B.Ko]=E.gt.streamUrl),i[B.Ko]=t.streamUrl,E.gt.streamUrl=t.streamUrl,E.un=E.gt.streamUrl):E.l.warning("mergeContentMetadata(): streamUrl was not changed.")),Q.St(t.viewerId)&&(E.gt.viewerId!==t.viewerId?(E.gt.viewerId&&(n[B.mo]=E.gt.viewerId),i[B.mo]=t.viewerId,E.gt.viewerId=t.viewerId):E.l.warning("mergeContentMetadata(): viewerId was not changed.")),Q.St(t.defaultResource)&&(E.gt.defaultResource!==t.defaultResource?(E.gt.defaultResource&&(n[B.Bo]=E.gt.defaultResource),i[B.Bo]=t.defaultResource,E.gt.defaultResource=t.defaultResource):E.l.warning("mergeContentMetadata(): defaultResource was not changed.")),Q.vt(t.duration)&&t.duration>0&&(E.gt.duration!==t.duration?(E.Ru>0&&(n[B.Lo]=E.Ru),i[B.Lo]=t.duration,E.gt.duration=t.duration,E.Ru=E.gt.duration):E.l.warning("mergeContentMetadata(): duration was not changed.")),Q.vt(t.encodedFrameRate)&&t.encodedFrameRate>0&&(E.gt.encodedFrameRate!==t.encodedFrameRate?(E.gt.encodedFrameRate>-1&&(n[B.Vo]=E.gt.encodedFrameRate),i[B.Vo]=t.encodedFrameRate,E.gt.encodedFrameRate=t.encodedFrameRate,E.ln=E.gt.encodedFrameRate):E.l.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!==f.StreamType.UNKNOWN&&(E.gt.streamType!==t.streamType?(E.gt.streamType!==f.StreamType.UNKNOWN&&(E.gt.streamType===f.StreamType.LIVE?n[B.vo]=!0:n[B.vo]=!1),t.streamType===f.StreamType.LIVE?i[B.vo]=!0:i[B.vo]=!1,E.gt.streamType=t.streamType):E.l.warning("mergeContentMetadata(): streamType was not changed.")),Q._t(t.custom)>0){var e,s={},o={};for(e in t.custom)E.gt.custom[e]!==t.custom[e]?(s[e]=t.custom[e],E.gt.custom[e]&&(o[e]=E.gt.custom[e]),E.gt.custom[e]=t.custom[e]):E.l.info("mergeContentMetadata(): custom."+e+" was not changed.");Q._t(s)>0?(Q._t(o)>0&&(n[B.Io]=o),i[B.Io]=s):E.l.warning("mergeContentMetadata(): custom was not changed.")}Q._t(i)>0&&this.Hh(i,n)},this.Ch=function(){var t;E.l.debug("setStatesFromContentMetadata()"),E.gt.defaultResource&&this.Oa(E.gt.defaultResource),E.gt.streamUrl&&this.Za(E.gt.streamUrl),E.gt.duration>0&&this.wa(E.gt.duration),E.gt.encodedFrameRate>0&&this._a(E.gt.encodedFrameRate),E.gt.streamType!==f.StreamType.UNKNOWN&&(t=E.gt.streamType===f.StreamType.LIVE,this.aa(t)),E.gt.assetName&&this.Ea(E.gt.assetName),E.gt.viewerId&&this.pa(E.gt.viewerId),(E.gt.applicationName||E.gt.playerName)&&this.ga(E.gt.applicationName||E.gt.playerName),Q._t(E.gt.custom)>0&&this.ya(E.gt.custom)},this.Th=function(){var t={};if(this.mh()||(E.gt.assetName?t[B.Co]=E.gt.assetName:E.l.warning("enqueueEventForContentMetadata(): assetName was not set."),E.gt.applicationName?t[B.To]=E.gt.applicationName:E.l.warning("enqueueEventForContentMetadata(): applicationName was not set."),E.gt.streamUrl?t[B.Ko]=E.gt.streamUrl:E.l.warning("enqueueEventForContentMetadata(): streamUrl was not set."),E.gt.viewerId?t[B.mo]=E.gt.viewerId:E.l.warning("enqueueEventForContentMetadata(): viewerId was not set."),E.gt.defaultResource?t[B.Bo]=E.gt.defaultResource:E.l.warning("enqueueEventForContentMetadata(): defaultResource was not set."),E.gt.duration>-1?t[B.Lo]=E.gt.duration:E.l.warning("enqueueEventForContentMetadata(): duration was not set."),E.gt.encodedFrameRate>-1?t[B.Vo]=E.gt.encodedFrameRate:E.l.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),E.gt.streamType!==f.StreamType.UNKNOWN?E.gt.streamType===f.StreamType.LIVE?t[B.vo]=!0:t[B.vo]=!1:E.l.warning("enqueueEventForContentMetadata(): streamType was not set.")),Q._t(E.gt.custom)>0)for(var n in t[B.Io]={},E.gt.custom)t[B.Io][n]=E.gt.custom[n];else this.mh()||E.l.warning("enqueueEventForContentMetadata(): custom tags were not set.");Q._t(t)>0&&this.Hh(t,null)},this.wh=function(){E.gt&&Q.St(E.gt.assetName)||E.l.warning("Missing assetName during session creation"),E.gt&&Q.St(E.gt.defaultResource)||E.l.warning("Missing resource during session creation"),E.gt&&Q.St(E.gt.streamUrl)||E.l.warning("Missing streamUrl during session creation"),(!E.gt||E.gt.encodedFrameRate<=0)&&E.l.warning("Missing encodedFrameRate during session creation"),E.gt&&Q.St(E.gt.viewerId)||E.l.warning("Missing viewerId during session creation"),E.gt&&E.gt.streamType&&f.StreamType.UNKNOWN!==E.gt.streamType||E.l.warning("Missing streamType during session creation"),E.gt&&Q.St(E.gt.applicationName)||E.l.warning("Missing applicationName during session creation"),(!E.gt||E.gt.duration<=0)&&E.l.warning("Missing duration during session creation")},this.Ht=function(t,n){E.Hu||(E.Hu={}),E.Hu[t]=n},this.Ih=function(){var t={};E.Ki.w&&(t[B.Yo]=E.Ki.w,E.w=E.Ki.w),E.Ki.N&&(t[B.Jo]=E.Ki.N,E.N=E.Ki.N),Q._t(t)>0&&this.Hh(t,null)}};K.yh=B.qr.lt+B.qr.Jr+B.qr.Xr,K.dt={lt:"Video",Yr:"Global",At:"Ad"};var j=at.Session=function(){var e=this;e.ue=null,e.R=0,e.ph=K.dt.lt,e.xc=!1,e.ju=!1,e.Wc=!1,e.qc=null,e.xi=null,e.Yc=null,e.Jc=!1,e.Xc=a.PlayerState.NOT_MONITORED,e.Qc=!1,e.zc=!1,e.Zc=!1,e.$c=!1,e.tf=!1,function(t,n,i,e,s,o,r){this.R=t,this.ph=n,this.fh=i,this.nf=e,this.Et=s,this.A=o,this.l=r,this.l.setModuleName("Session"),this.l.Bn(Q.yt(this.R))}.apply(e,arguments),this.dh=function(t,n){e.Et.dh(this),t&&e.It(t),e.fh.if()?e.ef(n):e.fh.sf(function(){e.ef(n)})},this.cleanup=function(){e.l.info("cleanup()"+e.Ah()),e.xc=!0,e.Et.Sh(),e.fh.if()?e.rf():e.fh.sf(function(){e.rf()})},this.af=function(){e.l.debug("cleanupAll()"+e.Ah()),(e.Eh()||e.gh())&&e.ue&&e.uf(),e.l.Bn(null),e.l=null,e.A=null,e.Ki=null,e.fh=null,e.nf=null,e.Et.ct(),e.Et=null,e.ju=!0},this.rf=function(){e.Et.Nh(),e.af()},this.ef=function(t){e.Et.Rh(),e.hf(),t?(e.Rt(t.bs(),t.Ms()),e.Et.Re(a.PlayerState.STOPPED),e.Et.Nh(),e.af()):e.Et.bh()},this.hf=function(){e.l.debug("setStatesFromSystemMetadata()");var t=e.nf.get(),n=t[st.BROWSER_NAME];n&&e.Et.La(n);n=t[st.BROWSER_VERSION];n&&e.Et.Va(n);n=t[st.DEVICE_BRAND];n&&e.Et.ka(n);n=t[st.DEVICE_MANUFACTURER];n&&e.Et.Ua(n);n=t[st.DEVICE_MODEL];n&&e.Et.Fa(n);n=t[st.DEVICE_TYPE];n&&e.Et.Ba(n);n=t[st.DEVICE_VERSION];n&&e.Et.Ha(n);n=t[st.FRAMEWORK_NAME];n&&e.Et.Ga(n);n=t[st.FRAMEWORK_VERSION];n&&e.Et.Ka(n);n=t[st.OPERATING_SYSTEM_NAME];n&&e.Et.ja(n);n=t[st.OPERATING_SYSTEM_VERSION];n&&e.Et.xa(n);n=t[st.DEVICE_CATEGORY];n&&e.Et.Wa(n);n=t[st.SCREEN_WIDTH];n&&e.Et.qa(n);n=t[st.SCREEN_HEIGHT];n&&e.Et.Ya(n);t=t[st.SCALE_FACTOR];t&&e.Et.Ja(t)},this.xn=function(t){e.l.debug("onPlayerStateChange(): "+t),e.Et.pn!==t&&(e.Et.pn===a.PlayerState.NOT_MONITORED&&t!==a.PlayerState.NOT_MONITORED&&(e.Xc=t),e.Jc?e.l.debug("onPlayerStateChange(): "+t+" (pooled, "+(e.Wc?"ad playing":"preloading")+")"):e.Et.Re(t))},this.Wn=function(t){e.l.debug("onBitrateChange(): "+t),e.Qc?e.l.info("onBitrateChange(): ignored"):e.Et.Gh(t)},this.$n=function(t){e.l.debug("onDroppedFramesTotalChange(): "+t),e.zc?e.l.info("onDroppedFramesTotalChange(): ignored"):e.Et.Xa(t)},this.ti=function(t){e.l.debug("onDroppedFramesCountChange(): "+t),e.zc?e.l.info("onDroppedFramesCountChange(): ignored"):e.Et.ns(t)},this.qn=function(t,n){Q.vt(n)||(e.l.warning("onSeekEvent(): Ignored non-integer seekToPosition data: "+n),n=-1),e.Et.vc(t,n)},this.On=function(t){e.l.debug("onEncodedFrameRateChange(): "+t),t>0?e.$c?e.l.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+t+" (ads)"):(e.Et._a(t),e.l.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+t)):e.l.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+t)},this.Dn=function(t){e.l.debug("onContentLengthChange(): "+t),t>0?e.$c?e.l.info("setContentLength(): Ignored content length data: "+t+" (ads)"):(e.Et.wa(t),e.l.info("setContentLength(): Received content length data: "+t)):e.l.warning("setContentLength(): Ignored invalid content length data: "+t)},this.bn=function(t){e.l.debug("onStreamUrlChange(): "+t),e.Et.Za(t)},this.Yn=function(t){e.l.debug("onStreamResolutionWidthChange(): "+t),e.Et.Jh(t)},this.Jn=function(t){e.l.debug("onStreamResolutionHeightChange(): "+t),e.Et.Qh(t)},this.Y=function(t){e.l.debug("onConnectionTypeChange(): "+t),e.Et.nu(t)},this.X=function(t){e.l.debug("onLinkEncryptionChange(): "+t),e.Et.iu(t)},this.kn=function(t){e.l.debug("onPlayerTypeChange(): "+t),e.Et.Lh()||e.Et.Ga(t)},this.Fn=function(t){e.l.debug("onPlayerVersionChange(): "+t),e.Et.Vh()||e.Et.Ka(t)},this.Qn=function(t){e.l.debug("onCDNServerIPChange(): "+t),e.Et.ru(t)},this.Xn=function(t,n){e.l.debug("onError(): "+t+" ("+n+")"),e.Rt(t,n)},this.wn=function(){e.l.debug("onRelease()"),e.uf()},this.Mt=function(t,n,i){e.l.debug("adStart(): adStream="+t+" adPlayer="+n+" adPosition="+i),e.Wc?e.l.warning("adStart(): multiple _adStart calls, ignoring"):(e.Wc=!0,e.qc=t,e.xi=n,e.Yc=i,e.Et.nc(!0),e.qc===h.AdStream.CONTENT||e.xi===h.AdPlayer.SEPARATE?(e.Et.pn!==a.PlayerState.NOT_MONITORED&&(e.Xc=e.Et.pn),e.Et.Re(a.PlayerState.NOT_MONITORED),e.Jc=!0):e.qc===h.AdStream.SEPARATE&&e.xi===h.AdPlayer.CONTENT&&(e.Et.pn!==a.PlayerState.NOT_MONITORED&&(e.Xc=e.Et.pn),e.Et.Re(a.PlayerState.NOT_MONITORED),e.Jc=!0,e.Qc=!0,e.zc=!0,e.$c=!0,e.Zc=!0))},this.Lt=function(){e.l.debug("adEnd()"),e.Wc?(e.Et.nc(!1),e.qc===h.AdStream.CONTENT||e.xi===h.AdPlayer.SEPARATE?e.cf||(e.Jc=!1,e.Et.Re(e.Xc)):e.qc===h.AdStream.SEPARATE&&e.xi===h.AdPlayer.CONTENT&&(e.Qc=!1,e.zc=!1,e.$c=!1,e.Zc=!1,e.tf=!1,e.cf||(e.Jc=!1,e.Et.Re(e.Xc))),e.Wc=!1,e.qc=e.xi=e.Yc=null):e.l.warning("adEnd(): called before _adStart, ignoring")},this.Ct=function(){e.l.debug("detachPlayer()"),e.ue?e.ue&&(e.A.P("Session.detachPlayer",function(){e.ue.Nn()}),e.ue=null,e.Et.cc(null),e.Et.Re(a.PlayerState.NOT_MONITORED)):e.l.error("detachPlayer(): called before attachPlayer, ignoring")},this.uf=function(){e.ue&&(e.A.P("Session.releasePlayerStateManager",function(){e.ue.Nn()}),e.ue=null,e.Et.cc(null),e.Et.Re(a.PlayerState.NOT_MONITORED))},this.Tt=function(){e.l.debug("offFocus()"),e.Et.nc(!0),e.Et.pn!==a.PlayerState.NOT_MONITORED&&(e.Xc=e.Et.pn),e.Et.Re(a.PlayerState.NOT_MONITORED),e.Jc=!0},this.It=function(t){e.l.debug("attachPlayer()"),e.ue?e.l.error("attachPlayer(): detach current PlayerStateManager first"):t instanceof a?e.A.P("Session.attachPlayer()",function(){t.setMonitoringNotifier(e,e.R)?(t.Hn(),e.ue=t,e.Et.cc(e.ue)):e.l.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")}):e.l.error("attachPlayer(): Incorrect PlayerStateManager instance")},this.wt=function(){e.l.debug("onFocus()"),e.Et.nc(!1),e.Qc=!1,e.zc=!1,e.$c=!1,e.Zc=!1,e.tf=!1,e.cf||(e.Jc=!1,e.Xc!==a.PlayerState.NOT_MONITORED&&e.Et.Re(e.Xc))},this.kt=function(){return e.l.debug("getPlayerStateManager()"),e.ue},this.Nt=function(){e.l.debug("contentPreload()"),e.cf?e.l.debug("contentPreload(): called twice, ignoring"):(e.cf=!0,e.Jc=!0)},this.Ot=function(){e.l.debug("contentStart()"),e.cf?(e.cf=!1,e.Wc||(e.Jc=!1,e.Xc!==a.PlayerState.NOT_MONITORED&&e.Et.Re(e.Xc))):e.l.warning("contentStart(): called without _contentPreload, ignoring")},this.Rt=function(t,n){var i;e.l.info("reportError(): "+t),Q.St(t)?n===h.ErrorSeverity.FATAL||n===h.ErrorSeverity.WARNING?e.tf?e.l.debug("reportError(): ignored"):(i=n===h.ErrorSeverity.FATAL,e.Et.ec(t,i)):e.l.error("reportError(): invalid error severity: "+n):e.l.error("reportError(): invalid error message string: "+t)},this.mt=function(t){e.A.P("Session.updateContentMetadata",function(){e.Et.mt(t)})},this.bt=function(t,n){e.l.info("sendEvent(): eventName="+t+e.Ah()),e.Et.pc(t,n)},this.mh=function(){return e.ph===K.dt.Yr},this.Eh=function(){return e.ph===K.dt.lt},this.gh=function(){return e.ph===K.dt.At},this.Ah=function(){return e.mh()?" (global session)":""},this.Ft=function(){return this.R},this.Bt=function(){var t=null;return e.fh.if()&&(t=e.fh.get(q.D)),t},this.Ht=function(t,n){e.Et.Ht(t,n)}};j.Kc="received no response (or a bad response) to heartbeat POST request";var x=at.SessionFactory=function(){var o=this;o.l=null,o.li=null,o.ff=0,o.lf=null,function(t,n,i,e){o.Ki=t,o.ci=n,o.fh=i,o.v=e,o.l=o.v.buildLogger(),o.l.setModuleName("SessionFactory"),o.ff=0,o.lf={}}.apply(o,arguments),this.ct=function(){for(var t in o.l=null,o.li=null,o.lf)o.lf[t].cleanup();o.lf=null,o.ff=0},this.df=function(){var t=o.ff;return o.ff++,t},this.ft=function(t,n,i,e,s){return t||(t=new f),o.vf(t,n,i,e,s)},this.B=function(t){return o.vf(t,K.dt.Yr,void 0,A.version)},this.pf=function(){return $.Ef()},this.vf=function(t,n,i,e,s){t=o.v.Ii(o.Ki,o.ci,o.fh,o.pf(),n,t.tt(),e),e=o.df();return"undefined"!==typeof s&&"undefined"!==typeof s.error?t.dh(i,s.error):(o.gf(e,t),t.dh(i)),e},this.Dt=function(t){t=o.lf[t];return t||o.l.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t},this.pt=function(t){t=this.Dt(t);return t&&(t.Eh()||t.gh()||(o.l.error("Client: invalid Video sessionKey. Did you cleanup that session previously?"),t=null)),t},this.gf=function(t,n){o.lf[t]=n},this.yf=function(t){delete o.lf[t]},this.Vt=function(t){var n=o.Dt(t);o.yf(t),n.cleanup()},this.q=function(){return o.lf}},W=at.Af=function(t){this.ji=t,this.Sf=function(i,t,n){var e=!1;this.ji.createOnce(function(){e||i(!(e=!0),n+" ("+t+" ms)")},t,"CallbackWithTimeout.wrap");return function(t,n){e||(e=!0,i(t,n))}}},q=at.Config=function(t,n,i){var e=this;this.l=t,this.l.setModuleName("Config"),this.Rf=n,this.mf=i,this.Cf={clientId:B.M,iid:B.Hs,sendLogs:!1,maxHbInfos:B.Ks},this.S=Q.Dc(this.Cf),this.Tf=!1,this.If=!1,this.wf=[],this.if=function(){return this.Tf},this.ot=function(){this.Rf.ot(q.Nf,function(t,n){t?(e.Of(n),e.l.debug("load): configuration successfully loaded from local storage"+(e.If?" (was empty)":"")+".")):e.l.error("load): error loading configuration from local storage: "+n),e.Tf=!0,e._f()})},this.Of=function(t){var n=this.mf.$r(t);n?n&&(t=n[q.Pf],n=n[q.rt],t&&t!==B.M&&""!==t&&"null"!==t&&(this.S[q.D]=t,this.l.debug("parse(): loaded clientId="+t+" (from local storage)")),n!==B.Hs&&""!==n&&"null"!==n&&(this.S[q.rt]=n,this.l.debug("parse(): loaded iid="+n+" (from local storage)"))):this.If=!0},this.Df=function(){var t={};return t[q.Pf]=this.S.clientId,this.l.debug("marshall(): saving clientId="+this.S.clientId+" (to local storage)"),this.mf.Zr(t)},this.Bc=function(){this.Rf.Bc(q.Nf,this.Df(),function(t,n){t?e.l.debug("save(): configuration successfully saved to local storage."):e.l.error("save(): error saving configuration to local storage: "+n)})},this.sf=function(t){this.if()?t():this.wf.push(t)},this.get=function(t){return this.Tf?this.S[t]:null},this.set=function(t,n){this.Tf&&(this.S[t]=n)},this._f=function(){for(var t;"undefined"!==typeof(t=this.wf.shift());)t()}};q.Nf="sdkConfig",q.Pf="clId",q.rt="iid",q.D="clientId",q.Ic="sendLogs",q.Rc="maxHbInfos",q.Oc="c3.fp.",q.Kt={_c:"0",bf:"1",jt:"2",Gt:"3",Pc:"4",Wt:"5",xt:"6"};var Y=at.EventQueue=function(){this.Mf=[],this.Lf=0,this.hc=function(t){this.Mf.push(t)},this.ac=function(){var t=this.Lf;return this.Lf++,t},this.lh=function(){var t=this.Mf;return this.Mf=[],t}},J=at.ExceptionCatcher=function(t,n,i){this.l=t,this.l.setModuleName("ExceptionCatcher"),this.Vf=n,this.y=i,this.P=function(n,t,i){try{t()}catch(t){if(i)i(t);else{if(this.y.allowUncaughtExceptions)throw t;this.kf(n,t)}}},this.kf=function(t,n){var i="Uncaught exception: "+t+": "+n.toString();if(this.Vf)try{this.Vf.Uc(i)}catch(t){this.l.error("Caught exception while sending ping: "+t.toString())}this.l.error(i)}},X=at.GatewayControl=function(t,n,i,e,s){var o=this;this.ci=t,this.l=n,this.l.setModuleName("GatewayControl"),this.Uf=i,this.mf=e,this.Ff=s,this.Uc=function(t,e){var n=(this.Ff?this.Ff.indexOf("ipv4")>-1?this.ci.L:this.ci.H:this.ci.gatewayUrl)+B.Bs;this.Uf.Bf("POST",n,this.mf.Zr(t),"application/json",function(t,n){var i;t?(i=o.mf.$r(n),e(t,i)):e(t,n)})}},Q=at.Lang={};Q.Hf=function(t){return Q.St(t)&&t&&"undefined"!==t&&"null"!==t},Q.Pt=function(t){var n,i,e={};for(n in t)Q.Hf(n)&&(i=t[n],Q.Hf(i)&&(e[n]=i));return e},Q._n=function(t,n,i){if(!t)throw new Error("Expected "+i+" implementation is null.");for(var e in n)if("function"!==typeof t[e])throw new Error("Expected method "+e+" in "+i+" implementation.")},Q._t=function(t){var n,i=0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&i++;return i},Q.yt=function(t){return""+t},Q.Gf=function(t){return Math.floor(t)},Q.zt=function(t){return Math.abs(Q.Gf(t))},Q.Kf=function(t){return Boolean(t)},Q.St=function(t){return"string"===typeof t&&""!==t},Q.Gc=function(t,n){return"string"===typeof t&&"string"===typeof n&&("function"===typeof t.indexOf&&0===t.indexOf(n))},Q.Pi=function(t){return"boolean"===typeof t},Q.jf=function(t){return escape(t)},Q.ta=function(t){return"object"===typeof t},Q.qh=function(t){var n,i="";for(n in t)i+=n+"="+t[n];return"Object{"+i+"}"},Q.xf=function(t){var n,i=Q.Dc(t);for(n in i)i[n]||delete i[n];return i},Q.Dc=function(t){var n,i={};for(n in t)i[n]=t[n];return i},Q.Wh=function(t,n){if(typeof t!==typeof n)return!1;if(t instanceof Object&&n instanceof Object){if(Q._t(t)!==Q._t(n))return!1;for(var i in t)if(!(t[i]===n[i]))return!1;return!0}return t===n},Q.ls=function(){for(var t={},n=0;n<arguments.length;n++)for(var i in arguments[n])arguments[n][i]&&(t[i]=arguments[n][i]);return t},Q.vt=function(t){return"number"===typeof t&&Math.round(t)===t},Q.Wf=function(t){return"[object Array]"===Object.prototype.toString.call(t)},Q.qf=function(t,n){if(t===n)return!0;if(!t||!n)return!1;if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(Q.Wf(t[i])&&Q.Wf(n[i])){if(!Q.qf(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1;return!0},Q.Yf=function(){return"undefined"!==typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()},Q.Yt=function(t,n,i){if(Q.Yf())Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:i});else{if("undefined"===typeof t.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");t.__defineGetter__(n,i)}},Q.Jt=function(t,n,i){if(Q.Yf())Object.defineProperty(t,n,{configurable:!0,set:i});else{if("undefined"===typeof t.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");t.__defineSetter__(n,i)}},Q.Lc=function t(n){function i(t,n){return t>>>n|t<<32-n}for(var e,s,o,r=Math.pow,a=r(2,32),u="length",h="",c=[],f=8*n[u],l=t.h=t.h||[],d=t.k=t.k||[],v=d[u],p={},E=2;v<64;E++)if(!p[E]){for(e=0;e<313;e+=E)p[e]=E;l[v]=r(E,.5)*a|0,d[v++]=r(E,1/3)*a|0}for(n+="\0";n[u]%64-56;)n+="\0";for(e=0;e<n[u];e++){if((s=n.charCodeAt(e))>>8)return null;c[e>>2]|=s<<(3-e)%4*8}for(c[c[u]]=f/a|0,c[c[u]]=f,s=0;s<c[u];){var g=c.slice(s,s+=16),y=l;for(l=l.slice(0,8),e=0;e<64;e++){o=g[e-15],R=g[e-2];var A=l[0],S=l[4],R=l[7]+(i(S,6)^i(S,11)^i(S,25))+(S&l[5]^~S&l[6])+d[e]+(g[e]=e<16?g[e]:g[e-16]+(i(o,7)^i(o,18)^o>>>3)+g[e-7]+(i(R,17)^i(R,19)^R>>>10)|0);(l=[R+((i(A,2)^i(A,13)^i(A,22))+(A&l[1]^A&l[2]^l[1]&l[2]))|0].concat(l))[4]=l[4]+R|0}for(e=0;e<8;e++)l[e]=l[e]+y[e]|0}for(e=0;e<8;e++)for(s=3;s+1;s--){var m=l[e]>>8*s&255;h+=(m<16?0:"")+m.toString(16)}return h},function(){var n={two32:4294967296};n.Jf=n.two32-1,n.Xf=0,Q.Qf=n,Q.Qf.Cast=function(t){t=parseInt(t,10);return t>n.Jf?t=t%n.two32:t<n.Xf&&(t=-t%n.two32,t=n.two32-t),t},Q.Qf.zf=function(t){t=parseInt(t,10);return t<=n.Jf&&t>=n.Xf};var i={Jf:2147483647,Xf:-2147483648};Q.kc=i,Q.kc.Cast=function(t){t=parseInt(t,10);return t>i.Jf?t=t%i.Jf:t<i.Xf&&(t=-t%i.Jf,t=i.Jf-t),t},Q.kc.zf=function(t){t=parseInt(t,10);return t<=i.Jf&&t>=i.Xf},Q.Ds=function(){return window&&window.location&&window.location.search?window.location.search:""},Q.Zf=function(){return document&&document.referrer?document.referrer:""}}();var z=at.LogBuffer=function(){this.$f=[],this.tl=function(t){this.$f.length>=32&&this.$f.shift(),this.$f.push(t)},this.lh=function(){var t=this.$f;return this.$f=[],t}},Z=at.Ping=function(t,n,i,e){this.nl=!1,this.il=null,this.l=t,this.l.setModuleName("Ping"),this.Uf=n,this.ci=i,this.fi=e,this.Uc=function(t){this.nl||(this.nl=!0,t=this.el()+"&d="+Q.jf(t.toString()),this.l.error("send(): "+t),this.Uf.Bf("GET",t,null,null,null),this.nl=!1)},this.el=function(){if(!this.il){var t=Z.sl+"?comp="+Z.ol+"&clv="+(this.fi||h.version);if(this.ci&&(t+="&cid="+this.ci.customerKey),t+="&sch="+B.qs,!this.ci)return t;this.il=t}return this.il}};Z.ol="sdkjs",Z.sl="https://pings.conviva.com/ping.ping";var $=at.rl={};$.al=4294967295,$.ul=2147483647,$.hl=-2147483648,$.Ef=function(){return Math.floor(Math.random()*$.al)+$.hl},$.ut=function(){return Math.floor(Math.random()*$.al)};var tt=at.cl={};tt.uc=function(t,n,i,e){if(isNaN(t))return e;if("number"!==typeof t)return e;if(t===e)return e;t=Q.Gf(t);return tt.fl(t,n,i)},tt.fl=function(t,n,i){return Q.vt(i)&&t>i?t=i:Q.vt(n)&&t<n&&(t=n),t},tt.fn=function(t){return-1===t||-2===t?t:t=tt.uc(t,0,null,-1)};var nt=at.StreamerError=function(){var i=this;i.errorCode=null,i.severity=h.ErrorSeverity.FATAL,function(t,n){i.errorCode=t,i.severity=n}.apply(i,arguments),this.bs=function(){return i.errorCode},this.Ms=function(){return i.severity}},it=at.HttpClient=function(t,n,i,e){this.l=t,this.l.setModuleName("HttpClient"),this.si=n,this.ll=i,this.y=e,this.Bf=function(t,n,i,e,s){var o=1e3*this.y.httpTimeout,r=null;s&&(r=this.ll.Sf(s,o,"HTTP timeout")),this.l.debug("request(): calling HttpInterface.makeRequest"),this.si.makeRequest(t,n,i,e,o,r)}},et=at.Logger=function(t,n,i,e,s){this.ai=t,this.ii=n,this.g=i,this.li=e,this.hi=s,this.debug=function(t){this.log(t,y.LogLevel.DEBUG)},this.info=function(t){this.log(t,y.LogLevel.INFO)},this.warning=function(t){this.log(t,y.LogLevel.WARNING)},this.error=function(t){this.log(t,y.LogLevel.ERROR)},this.log=function(t,n){t=this.dl(t,n);this.li.tl(t),this.g.logLevel<=n&&this.ai.consoleLog(t,n)},this.vl=function(t){return"["+this.Sn+"] "+t},this.pl=function(t){return"["+this.hi+"] "+t},this.El=function(t){return"[Conviva] "+t},this.gl=function(t){return"["+(this.ii.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+t},this.yl=function(t,n){return"["+et.Al(n)+"] "+t},this.Sl=function(t){return this.Rl&&(t="sid="+this.Rl+" "+t),t},this.Bn=function(t){this.Rl=t},this.setModuleName=function(t){this.Sn=t},this.dl=function(t,n){return this.El(this.gl(this.yl(this.pl(this.vl(this.Sl(t))),n)))}};et.Al=function(t){var n;switch(t){case y.LogLevel.ERROR:n="ERROR";break;case y.LogLevel.WARNING:n="WARNING";break;case y.LogLevel.INFO:n="INFO";break;case y.LogLevel.DEBUG:n="DEBUG"}return n},at.Storage=function(t,n,i,e){this.l=t,this.l.setModuleName("Storage"),this.oi=n,this.ll=i,this.y=e,this.ot=function(t,n){n=this.ll.Sf(n,1e3*this.y.storageTimeout,"storage load timeout");this.l.debug("load): calling StorageInterface.loadData"),this.oi.loadData(at.Storage.ml,t,n)},this.Bc=function(t,n,i){i=this.ll.Sf(i,1e3*this.y.storageTimeout,"storage save timeout");this.l.debug("save(): calling StorageInterface.saveData"),this.oi.saveData(at.Storage.ml,t,n,i)}},at.Storage.ml="Conviva";var st=at.SystemMetadata=function(t,n,i){this.l=t,this.l.setModuleName("SystemMetadata"),this.ri=n,this.A=i,this.Cl=null,this.get=function(){return this.Cl||this.retrieve(),this.Cl},this.retrieve=function(){var t={};t[st.BROWSER_NAME]=this.ri.getBrowserName,t[st.BROWSER_VERSION]=this.ri.getBrowserVersion,t[st.DEVICE_BRAND]=this.ri.getDeviceBrand,t[st.DEVICE_MANUFACTURER]=this.ri.getDeviceManufacturer,t[st.DEVICE_MODEL]=this.ri.getDeviceModel,t[st.DEVICE_TYPE]=this.ri.getDeviceType,t[st.DEVICE_VERSION]=this.ri.getDeviceVersion,t[st.FRAMEWORK_NAME]=this.ri.getFrameworkName,t[st.FRAMEWORK_VERSION]=this.ri.getFrameworkVersion,t[st.OPERATING_SYSTEM_NAME]=this.ri.getOperatingSystemName,t[st.OPERATING_SYSTEM_VERSION]=this.ri.getOperatingSystemVersion,t[st.DEVICE_CATEGORY]=this.ri.getDeviceCategory,t[st.SCREEN_WIDTH]=this.ri.getScreenWidth,t[st.SCREEN_HEIGHT]=this.ri.getScreenHeight,t[st.SCALE_FACTOR]=this.ri.getScaleFactor;var n,e=this;for(n in this.l.debug("retrieve(): calling MetadataInterface methods"),t)!function(n,i){e.A.P("Session.getSystemMetadataSchema(): "+n,function(){var t=i[n];i[n]=t.call(e.ri)})}(n,t),Q.St(t[n])||delete t[n];var i=!1;if("undefined"!==typeof t[st.DEVICE_TYPE]){for(var s in h.DeviceType)if(t[st.DEVICE_TYPE]===h.DeviceType[s]){i=!0;break}i||delete t[st.DEVICE_TYPE]}if(i=!1,"undefined"!==typeof t[st.DEVICE_CATEGORY]){for(var o in h.DeviceCategory)if(t[st.DEVICE_CATEGORY]===h.DeviceCategory[o]){i=!0;break}i||delete t[st.DEVICE_CATEGORY]}this.Cl=Q.xf(t)}};st.BROWSER_NAME="browserName",st.BROWSER_VERSION="browserVersion",st.DEVICE_BRAND="deviceBrand",st.DEVICE_MANUFACTURER="deviceManufacturer",st.DEVICE_MODEL="deviceModel",st.DEVICE_TYPE="deviceType",st.DEVICE_VERSION="deviceVersion",st.FRAMEWORK_NAME="frameworkName",st.FRAMEWORK_VERSION="frameworkVersion",st.OPERATING_SYSTEM_NAME="operatingSystemName",st.OPERATING_SYSTEM_VERSION="operatingSystemVersion",st.DEVICE_CATEGORY="deviceCategory",st.SCREEN_WIDTH="screenWidth",st.SCREEN_HEIGHT="screenHeight",st.SCALE_FACTOR="scaleFactor";var ot=at.Time=function(t,n){this.ii=t,this.l=n,this.l.setModuleName("Time"),this.current=function(){var t=this.ii.getEpochTimeMs();return Q.vt(t)||this.l.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+t+")"),t}},rt=at.Timer=function(t,n,i){var s=this;this.l=t,this.l.setModuleName("Timer"),this.ei=n,this.A=i,this.create=function(t,n,i){return this.createTimer(function(){s.A.P(i,function(){t()})},n,i)},this.createOnce=function(t,n,i){var e={cancel:null};return e.cancel=this.createTimer(function(){s.A.P(i,function(){e&&"function"===typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),t()})},n,i),e.cancel},this.createTimer=function(t,n,i){return this.l.debug("createTimer(): calling TimerInterface.create"),this.ei.createTimer(t,n,i)}}}()}(),ut});