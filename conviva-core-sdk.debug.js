/*! (C) 2023 Conviva, Inc. All rights reserved. Confidential and proprietary. */
!function(t,n){"function"===typeof define&&define.amd?define(n):("object"===typeof exports||"object"===typeof module&&module.exports)&&(module.exports=n()),"undefined"===typeof t||!t||t.Conviva||t.ConvivaLoading||(t.ConvivaLoading=!0,t.Conviva=n(),delete t.ConvivaLoading)}(this,function(){var lt={};return function(){"use strict";var n,s,U,k,o,r,F,e,a,_,h,c,f,S,B,H,K,G,j,W,x,q,u,i,l,Y,R,J,X,d,v,E,p,A,Q,g,y,T,I,C,m,z,Z,N,$,tt,nt,O,it,et,st,w,ot,D,P,b,M,rt,at,L,ut,ht,V={};function ct(){var t,n="";for("-"===s&&r(n="-");s>="0"&&s<="9";)n+=s,r();if("."===s)for(n+=".";r()&&s>="0"&&s<="9";)n+=s;if("e"===s||"E"===s)for(n+=s,r(),"-"!==s&&"+"!==s||(n+=s,r());s>="0"&&s<="9";)n+=s,r();if(t=+n,!isNaN(t))return t;o("Bad number")}function t(t){return t<10?"0"+t:t}function ft(t){return E.lastIndex=0,E.test(t)?'"'+t.replace(E,function(t){var n=Q[t];return"string"===typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}_=lt.Constants={version:"4.6.1",CUSTOMER_KEY:"customerKey",GATEWAY_URL:"gatewayUrl",LOG_LEVEL:"logLevel",ASSET_NAME:"Conviva.assetName",PLAYER_NAME:"Conviva.applicationName",APPLICATION_VERSION:"c3.app.version",IS_LIVE:"Conviva.streamType",ENCODED_FRAMERATE:"Conviva.encodedFrameRate",DEFAULT_RESOURCE:"Conviva.defaultResource",STREAM_URL:"Conviva.streamUrl",VIEWER_ID:"Conviva.viewerId",DURATION:"Conviva.duration",UTM_TRACKING_URL:"c3.cm.utmTrackingUrl",POD_INDEX:"podIndex",POD_POSITION:"podPosition",POD_DURATION:"podDuration",AD_TYPE:"adType",MODULE_NAME:"Conviva.moduleName",MODULE_VERSION:"Conviva.moduleVersion",FRAMEWORK_NAME:"Conviva.frameworkName",FRAMEWORK_VERSION:"Conviva.frameworkVersion",i:"Constants not yet configured",o:"Invalid : Did you report playback ended?",u:"Invalid : Did you report ad playback ended?",h:"Player cannot be null",l:"PlaybackAnlytics already built",v:"PlaybackAnlytics not yet built",Playback:{BITRATE:"BITRATE",AVG_BITRATE:"AVG_BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT"},Network:{SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},ErrorSeverity:{FATAL:1,WARNING:0},NO_SESSION_KEY:-2,AdPosition:{PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},AdPlayer:{CONTENT:"CONTENT",SEPARATE:"SEPARATE"},DeviceType:{DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},AdType:{CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},AdSlates:{BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},AdServingType:{INLINE:"Inline",WRAPPER:"Wrapper"},DeviceCategory:{ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},LogLevel:{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},PlayerState:{STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},Events:{USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},ErrorType:{ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},StreamType:{UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},CallbackFunctions:{CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer",GENERATE_HASH:"generateHash",BASE64_ENCODE:"base64Encode"},DeviceMetadata:{BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},AD_PRELOAD_FEATURE:"adPreloading",AD_TAG_URL:"adTagUrl",IMASDK_CONTENT_PLAYER:"imaMainContentPlayer",CONVIVA_AD_MODULE:"convivaAdModule",CONVIVA_MODULE:"convivaModule",MEDIA_ELEMENT:"mediaElement",APP_TRACKER_EVENT:{TYPE:"convivaVideoEvent",INIT:"c3.sdk.init",VIDEO_ATTEMPT:"c3.video.attempt",VIDEO_END:"c3.video.end",VIDEO_PLAY:"c3.video.play",VIDEO_PAUSE:"c3.video.pause",VIDEO_BUFFERING:"c3.video.buffering",VIDEO_ERROR:"c3.video.error",SDK_CUSTOM_EVENT:"c3.sdk.custom_event",VIDEO_CUSTOM_EVENT:"c3.video.custom_event",AD_BREAK_START:"c3.ad.ad_break_start",AD_BREAK_END:"c3.ad.ad_break_end",VIDEO_METADATA_CHANGE:"c3.video.set_content_info",VIDEO_BITRATE_SWITCH:"c3.video.bitrate_switch"}},(h=lt.Client=function(){var u=this;this.p=null,this.A=!1,this.version=h.version,this.g=null,this._=null,this.S=null,this.R=-1,this.T=null,this.I=null,this.C=null,this.m=null,this.N=-1,this.O=!1,this.D={},this.P=function(){u.g&&arguments.length>0&&u.g.info(" Client:: uniqueIdentifierCallback(): "+arguments[0])},this.M={},this.L=null,this.V=null,this.U=null,this.k=function(){this.C.F("Client.makeIPV4IPV6GlobalSessions",function(){var t;u.m&&null!==(t=u.m.get(O.B))&&t!==m.H&&u._&&((t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.T.K.indexOf(c.G)>-1?c.G:c.j,u.W=u._.q(t,null),(t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.T.Y.indexOf(c.J)>-1?c.J:c.X,u.Z=u._.q(t,null))})},this.$=function(i){u.C.F("Client.updateConnectionType",function(){if(u.L=i,u._){var t,n=u._.tt();for(t in n)n[t].nt(i)}})},this.it=function(i){u.C.F("Client.updateLinkEncryption",function(){if(u.V=i,u._){var t,n=u._.tt();for(t in n)n[t].et(i)}})},this.ot=function(t){u.C.F("Client.updateSignalStrength",function(){u.U=t})},function(t,n,i,e){if(!(t instanceof c))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof q))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!==c.rt+c.ut&&t.gatewayUrl!==c.ht+c.ut||(this.A=!0),e&&(this.version=e),this.T=t.ct(),this.S=n,this.S.lt("SDK",this.T,this.version),this.C=this.S.dt(this.version),this.C.F("Client.init",function(){if(u.m=u.S.vt(),u.m.Et(),u.N=u.m.get(O.At),-1!==u.N&&void 0!==u.N&&null!==u.N||(u.N=P.gt()),u.g=u.S.buildLogger(),u.g.setModuleName("Client"),u.A&&u.g.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),u.g.info("init(): url="+u.T.gatewayUrl+" customerKey="+u.T.customerKey),u._=u.S.yt(u,u.T,u.m),i)for(var t in i)switch(t){case _.Network.CONNECTION_TYPE:u.$(i[t]);break;case _.Network.LINK_ENCRYPTION:u.it(i[t]);break;case _.Network.SIGNAL_STRENGTH:u.ot(i[t])}u.k(),u.g.info("init(): done.")},function(t){throw new Error("Client constructor failed: "+t.message)})}.apply(this,arguments),this.release=function(){this.O||this.C.F("Client.release",function(){u.g&&(u.g.info("release()"),u.g=null),u._._t(),u._=null,u.R=-1,u.N=-1,u.C=null,u.T=null,u.I=null,u.S=null,u.O=!0})},this.createSession=function(t,n,i){var e=h.NO_SESSION_KEY;return this.O||(!t||t instanceof f?this.C.F("Client.createSession",function(){e=u._.St(t,N.Tt.Rt,n,(i?_:u).version)}):u.g.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),e},this.createAdSession=function(i,e,s,o,r){var a=h.NO_SESSION_KEY;return this.O||(!e||e instanceof f?this.C.F("Client.createAdSession",function(){var t,n;e||(e=new f),w.It(i)&&i!==h.NO_SESSION_KEY&&(t=u._.Ct(i))&&(n=e.custom[_.APPLICATION_VERSION],t.Nt&&t.Nt.Ot&&(!e.viewerId&&t.Nt.Ot.viewerId&&(e.viewerId=t.Nt.Ot.viewerId),!e.applicationName&&t.Nt.Ot.applicationName&&(e.applicationName=t.Nt.Ot.applicationName),e.streamType===_.StreamType.UNKNOWN&&t.Nt.Ot.streamType!==_.StreamType.UNKNOWN&&(e.streamType=t.Nt.Ot.streamType),"undefined"!==typeof n&&n||"undefined"!==typeof(n=t.Nt.Ot.custom[_.APPLICATION_VERSION])&&n&&(e.custom[_.APPLICATION_VERSION]=n)),e.custom["c3.csid"]=w.wt(t.N)),a=u._.St(e,N.Tt.Dt,s,(o?_:u).version,r)}):u.g.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),a},this.reportError=function(n,i,e){this.O||(w.Pt(i)?e!==h.ErrorSeverity.FATAL&&e!==h.ErrorSeverity.WARNING?this.g.error("reportError(): invalid error severity: "+e):this.C.F("Client.reportError",function(){var t=u._.Ct(n);t&&t.bt(i,e)}):this.g.error("reportError(): invalid error message string: "+i))},this.updateContentMetadata=function(i,e){this.O||(e instanceof f?this.C.F("Client.updateContentMetadata",function(){var t,n=u._.Ct(i);n&&(t=e.ct(),n.Mt(t))}):u.g.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter"))},this.detachPlayer=function(n){this.O||this.C.F("Client.detachPlayer",function(){var t=u._.Ct(n);t&&t.Lt()})},this.Vt=function(n){this.O||this.C.F("Client.offFocus",function(){var t=u._.Ct(n);t&&t.Vt()})},this.attachPlayer=function(n,i){this.O||(i instanceof S?this.C.F("Client.attachPlayer",function(){var t=u._.Ct(n);t&&t.Ut(i)}):u.g.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter"))},this.kt=function(n){this.O||this.C.F("Client.onFocus",function(){var t=u._.Ct(n);t&&t.kt()})},this.contentPreload=function(n){this.O||this.C.F("Client.contentPreload",function(){var t=u._.Ct(n);t&&t.Ft()})},this.contentStart=function(n){this.O||this.C.F("Client.contentStart",function(){var t=u._.Ct(n);t&&t.Bt()})},this.sendCustomEvent=function(i,e,s){this.O||(w.Pt(e)?(w.Ht(s)<=0&&u.g.warning("eventAttributes(): should have proper data."),this.C.F("Client.sendCustomEvent",function(){i===h.NO_SESSION_KEY&&(u.R<0&&(t=new f,u.R=u._.q(t,null)),i=u.R);var t=w.Kt(s),n=u._.Gt(i);n&&n.jt(e,t)})):u.g.error("sendCustomEvent(): eventName parameter must be a valid string."))},this.adStart=function(n,i,e,s){this.O||(i!==h.AdStream.CONTENT&&i!==h.AdStream.SEPARATE?this.g.error("adStart(): ignored, invalid value for adStream parameter: "+i):e!==h.AdPlayer.CONTENT&&e!==h.AdPlayer.SEPARATE?this.g.error("adStart(): ignored, invalid value for adPlayer parameter: "+e):(s!==h.AdPosition.PREROLL&&s!==h.AdPosition.MIDROLL&&s!==h.AdPosition.POSTROLL&&this.g.info("adStart(): ignored, invalid value for adPosition parameter: "+s),this.C.F("Client.adStart",function(){var t=u._.Ct(n);t&&t.Wt(i,e,s)})))},this.adEnd=function(n){this.O||this.C.F("Client.adEnd",function(){var t=u._.Ct(n);t&&t.xt()})},this.cleanupSession=function(t){this.O||(t===h.NO_SESSION_KEY?this.g.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):this.C.F("Client.cleanupSession",function(){u._.Ct(t)&&u._.qt(t)}))},this.getAttachedPlayer=function(n){var i=null;return this.O||(n===h.NO_SESSION_KEY?this.g.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this.C.F("Client.getAttachedPlayer",function(){var t=u._.Ct(n);t&&(i=t.Yt())})),i},this.isPlayerAttached=function(t){return!this.O&&null!==this.getAttachedPlayer(t)},this.getPlayerStateManager=function(t){if(this.O)throw new Error("This instance of Conviva.Client has been released.");return new S(this.S,(t?_:u).version)},this.releasePlayerStateManager=function(t){if(this.O)throw new Error("This instance of Conviva.Client has been released.");this.C.F("Client.releasePlayerStateManager",function(){t instanceof S&&t.release()})},this.Jt=function(){return this.T},this.getId=function(){return this.N},this.getSessionId=function(n){var i;return this.O?_.NO_SESSION_KEY:(i=null,this.C.F("Client.getSessionId",function(){var t=u._.Ct(n);t&&(i=t.Xt())}),i)},this.getClientId=function(n){var i;return this.O?null:(i=null,this.C.F("Client.getClientId",function(){var t=u._.Ct(n);t&&(i=t.Qt())}),i)},this.zt=function(n,i,e){this.O||this.C.F("Client.updateCustomMetric",function(){var t=u._.Ct(n);t&&t.zt(i,e)})},this.setUniqueIdentifier=function(t,n){if(this.O)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)this.D[i]=t[i];n&&(this.P=n)},this.setUserPreferenceForDataCollection=function(t,n){if(this.O)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)"false"===t[i]?this.M[i]=n?O.$t.Zt:O.$t.tn:this.M[i]=O.$t.nn},this.setUserPreferenceForDataDeletion=function(t){if(this.O)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var n in t)"true"===t[n]?this.M[n]=O.$t.en:this.M[n]=O.$t.nn},this.getConfig=function(){if(this.O)throw new Error("This instance of Conviva.Client has been released.");return this.m}}).version="4.6.1L",h.NO_SESSION_KEY=_.NO_SESSION_KEY,h.AdPosition={PREROLL:_.AdPosition.PREROLL,MIDROLL:_.AdPosition.MIDROLL,POSTROLL:_.AdPosition.POSTROLL},h.AdStream={CONTENT:_.AdPlayer.CONTENT,SEPARATE:_.AdPlayer.SEPARATE},h.AdPlayer={CONTENT:_.AdPlayer.CONTENT,SEPARATE:_.AdPlayer.SEPARATE},h.ErrorSeverity={FATAL:_.ErrorSeverity.FATAL,WARNING:_.ErrorSeverity.WARNING},h.DeviceType={DESKTOP:_.DeviceType.DESKTOP,CONSOLE:_.DeviceType.CONSOLE,SETTOP:_.DeviceType.SETTOP,MOBILE:_.DeviceType.MOBILE,TABLET:_.DeviceType.TABLET,SMARTTV:_.DeviceType.SMARTTV},h.AdTechnology={CLIENT_SIDE:_.AdType.CLIENT_SIDE,SERVER_SIDE:_.AdType.SERVER_SIDE},h.AdType={BLACKOUT_SLATE:_.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:_.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:_.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:_.AdSlates.OTHER_SLATE,VPAID:_.AdSlates.VPAID,REGULAR:_.AdSlates.REGULAR},h.AdServingType={INLINE:_.AdServingType.INLINE,WRAPPER:_.AdServingType.WRAPPER},h.DeviceCategory={ANDROID_DEVICE:_.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:_.DeviceCategory.APPLE_DEVICE,CHROMECAST:_.DeviceCategory.CHROMECAST,DESKTOP_APP:_.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:_.DeviceCategory.DEVICE_SIMULATOR,LG_TV:_.DeviceCategory.LG_TV,NINTENDO:_.DeviceCategory.NINTENDO,PLAYSTATION:_.DeviceCategory.PLAYSTATION,ROKU:_.DeviceCategory.ROKU,SAMSUNG_TV:_.DeviceCategory.SAMSUNG_TV,SMART_TV:_.DeviceCategory.SMART_TV,SET_TOP_BOX:_.DeviceCategory.SET_TOP_BOX,TIVO:_.DeviceCategory.TIVO,WEB:_.DeviceCategory.WEB,WINDOWS_DEVICE:_.DeviceCategory.WINDOWS_DEVICE,XBOX:_.DeviceCategory.XBOX,KAIOS_DEVICE:_.DeviceCategory.KAIOS_DEVICE},(c=lt.ClientSettings=function(){var e=this;this.on=null,w.rn(this,"customerKey",function(){return this.on}),w.un(this,"customerKey",function(t){w.Pt(t)&&(this.on=t)}),this.hn=c.cn,w.rn(this,"heartbeatInterval",function(){return this.hn}),w.un(this,"heartbeatInterval",function(t){var n;"number"===typeof t&&(n=w.fn(t))===t&&(this.hn=n)}),this.ln=null,this.K=null,this.Y=null,w.rn(this,"gatewayUrl",function(){return this.ln}),w.un(this,"gatewayUrl",function(t){var n;!w.Pt(t)||"https"!==(n=t.split("://"))[0]&&"http"!==n[0]||-1===t.indexOf(".com",t.length-".com".length)||(this.ln=t)}),function(t){if(!w.Pt(t))throw new Error("customerKey must be valid");this.customerKey=t}.apply(this,arguments),this.equals=function(t){return this.customerKey===t.customerKey&&this.gatewayUrl===t.gatewayUrl&&this.heartbeatInterval===t.heartbeatInterval},this.ct=function(){var t=new c(this.customerKey);return t.gatewayUrl=function(t){if(w.Pt(t)){var n,i=t.split("://");if("https"===i[0]||"http"===i[0])return i[1]!==c.ut&&-1!==i[1].indexOf(c.ut)?(n=i[1].split(c.ut),e.K="https://"+n[0]+c.G,e.Y="https://"+n[0]+c.J):i[1]!==c.dn&&-1!==i[1].indexOf("testonly.conviva.com")?(n=i[1].split("testonly.conviva.com"),e.K="https://"+n[0]+c.j,e.Y="https://"+n[0]+c.X):i[1]===c.dn?(e.K="https://"+e.customerKey+"."+c.j,e.Y="https://"+e.customerKey+"."+c.X):(e.K="https://"+e.customerKey+"."+c.G,e.Y="https://"+e.customerKey+"."+c.J,t="https://"+e.customerKey+"."+c.ut),t}return e.K="https://"+e.customerKey+"."+c.G,e.Y="https://"+e.customerKey+"."+c.J,"https://"+e.customerKey+"."+c.ut}(this.gatewayUrl),t.heartbeatInterval=this.heartbeatInterval,t.K=this.K,t.Y=this.Y,t}}).sn="https://conviva.testonly.conviva.com",c.vn="https://cws.conviva.com",c.ut="cws.conviva.com",c.G="ipv4.cws.conviva.com",c.J="ipv6.cws.conviva.com",c.dn="conviva.testonly.conviva.com",c.j="ipv4.testonly.conviva.com",c.X="ipv6.testonly.conviva.com",c.rt="https://",c.ht="http://",c.En=5,c.cn=20,(f=lt.ContentMetadata=function(){this.An=null,w.rn(this,"assetName",function(){return this.An}),w.un(this,"assetName",function(t){"string"===typeof t&&(this.An=t)}),this.gn={},w.rn(this,"custom",function(){return this.gn}),w.un(this,"custom",function(t){"object"===typeof t&&(this.gn=w.Kt(t))}),this.yn=null,w.rn(this,"defaultResource",function(){return this.yn}),w.un(this,"defaultResource",function(t){"string"===typeof t&&(this.yn=t)}),this._n=null,w.rn(this,"viewerId",function(){return this._n}),w.un(this,"viewerId",function(t){"string"===typeof t&&(this._n=t)}),this.Sn=null,w.rn(this,"applicationName",function(){return this.Sn}),w.un(this,"applicationName",function(t){"string"===typeof t&&(this.Sn=t)}),this.Rn=null,w.rn(this,"streamUrl",function(){return this.Rn}),w.un(this,"streamUrl",function(t){"string"===typeof t&&(this.Rn=t)}),this.Tn=f.StreamType.UNKNOWN,w.rn(this,"streamType",function(){return this.Tn}),w.un(this,"streamType",function(t){t!==f.StreamType.UNKNOWN&&t!==f.StreamType.VOD&&t!==f.StreamType.LIVE||(this.Tn=t)}),this.In=-1,w.rn(this,"duration",function(){return this.In}),w.un(this,"duration",function(t){this.In=b.Cn(t)}),this.Nn=-1,w.rn(this,"encodedFrameRate",function(){return this.Nn}),w.un(this,"encodedFrameRate",function(t){this.Nn=b.Cn(t)}),function(){}.apply(this,arguments),this.ct=function(){var t,n=new f;for(t in n.assetName=this.assetName,n.applicationName=this.applicationName,n.streamUrl=this.streamUrl,n.viewerId=this.viewerId,n.defaultResource=this.defaultResource,n.streamType=this.streamType,n.duration=this.duration,n.encodedFrameRate=this.encodedFrameRate,this.custom)n.custom[t]=this.custom[t];return n}}).StreamType={UNKNOWN:_.StreamType.UNKNOWN,LIVE:_.StreamType.LIVE,VOD:_.StreamType.VOD},lt.ErrorType={ERROR_UNKNOWN:_.ErrorType.ERROR_UNKNOWN,ERROR_IO:_.ErrorType.ERROR_IO,ERROR_TIMEOUT:_.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:_.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:_.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:_.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:_.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:_.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:_.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:_.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:_.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:_.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:_.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},lt.Events={AD_REQUESTED:_.Events.AD_REQUESTED,AD_RESPONSE:_.Events.AD_RESPONSE,AD_SLOT_STARTED:_.Events.AD_SLOT_STARTED,AD_ATTEMPTED:_.Events.AD_ATTEMPTED,AD_SLOT_ENDED:_.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:_.Events.AD_IMPRESSION_START,AD_START:_.Events.AD_START,AD_FIRST_QUARTILE:_.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:_.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:_.Events.AD_THIRD_QUARTILE,AD_COMPLETE:_.Events.AD_COMPLETE,AD_END:_.Events.AD_END,AD_IMPRESSION_END:_.Events.AD_IMPRESSION_END,AD_SKIPPED:_.Events.AD_SKIPPED,AD_ERROR:_.Events.AD_ERROR,AD_PROGRESS:_.Events.AD_PROGRESS,AD_CLOSE:_.Events.AD_CLOSE,CONTENT_PAUSED:_.Events.CONTENT_PAUSED,CONTENT_RESUMED:_.Events.CONTENT_RESUMED,POD_START:_.Events.POD_START,POD_END:_.Events.POD_END},(S=lt.PlayerStateManager=function(){var e=this;e.On=null,e.wn=-2,e.Dn=-2,e.Pn=S.PlayerState.UNKNOWN,e.bn={},e.Mn=-2,e.Nn=-2,e.In=-2,e.Ln=null,e.Vn=null,e.Rn=null,e.Un=null,e.kn=null,e.Fn=-1,e.Bn=-1,e.L=null,e.V=null,e.Hn=null,e.Kn=[],e.O=!1,this.release=function(){e.O||e.C.F("PlayerStateManager.release",function(){e.On&&e.On.Gn(),e.jn(),e.S=null,e.g=null,e.C=null,e.O=!0})},this.setPlayheadTime=function(){},this.setBufferLength=function(){},this.setRenderedFrameRate=function(){},this.getEncodedFrameRate=function(){return e.Nn},this.setEncodedFrameRate=function(n){e.O||e.C.F("PlayerStateManager.setEncodedFrameRate",function(){var t=b.Cn(n);t>=-1&&(e.Nn=t,e.On)&&e.On.Wn(e.Nn)})},this.getDuration=function(){return e.In},this.setClientMeasureInterface=function(t){w.xn(t,new lt.ClientMeasureInterface,"ClientMeasureInterface"),this.qn=t},this.getPHT=function(){return this.qn&&"function"===typeof this.qn.getPHT?this.qn.getPHT():S.DEFAULT_PHT},this.getBufferLength=function(){return this.qn&&"function"===typeof this.qn.getBufferLength?this.qn.getBufferLength():S.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.qn&&"function"===typeof this.qn.getSignalStrength?this.qn.getSignalStrength():S.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.qn&&"function"===typeof this.qn.getRenderedFrameRate?this.qn.getRenderedFrameRate():S.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(n){e.O||e.C.F("PlayerStateManager.setDuration",function(){var t=b.Cn(n);t>=-1&&(e.In=t,e.On)&&e.On.Yn(e.In)})},this.getStreamUrl=function(){return e.Rn},this.setStreamUrl=function(t){e.O||e.C.F("PlayerStateManager.setStreamUrl",function(){t&&(e.Rn=t,e.On)&&e.On.Jn(e.Rn)})},this.Xn=function(){return e.Un},this.Qn=function(){return e.kn},this.setModuleNameAndVersion=function(t,n){e.Un=t,e.kn=n},this.zn=function(){return e.Vn},this.setPlayerType=function(t){e.O||e.C.F("PlayerStateManager.setPlayerType",function(){e.Vn=t,e.On&&e.On.Zn(e.Vn)})},this.$n=function(){return e.Ln},this.setPlayerVersion=function(t){e.O||e.C.F("PlayerStateManager.setPlayerVersion",function(){e.Ln=t,e.On&&e.On.ti(e.Ln)})},this.setMonitoringNotifier=function(t){return!e.O&&!e.On&&(e.On=t,e.g&&arguments.length>=2&&e.g.ni(arguments[1]),!0)},this.jn=function(){e.O||(e.On=null,e.g&&e.g.ni(null))},this.ii=function(){e.setPlayerState(e.getPlayerState()),e.setBitrateKbps(e.ei()),e.setAvgBitrateKbps(e.si()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.zn()),e.setPlayerVersion(e.$n());for(var t=0;t<e.Kn.length;t++){var n=e.Kn[t];e.oi(n)}e.Kn=[]},this.getPlayerState=function(){return e.Pn},this.setPlayerState=function(t){e.O||e.C.F("PlayerStateManager.setPlayerState",function(){S.ri(t)?(e.Pn=t,e.On&&e.On.ai(e.Pn)):e.g.error("PlayerStateManager.SetPlayerState(): invalid state: "+t)})},this.ei=function(){return e.wn},this.setBitrateKbps=function(n){e.O||e.C.F("PlayerStateManager.setBitrateKbps",function(){var t=b.Cn(n);t>=-1&&(e.wn=t,e.On)&&e.On.ui(e.wn)})},this.si=function(){return e.Dn},this.setAvgBitrateKbps=function(n){e.O||e.C.F("PlayerStateManager.setAvgBitrateKbps",function(){var t=b.Cn(n);t>=-1&&(e.Dn=t,e.On)&&e.On.hi(e.Dn)})},this.setPlayerSeekStart=function(t){e.O||e.C.F("PlayerStateManager.setPlayerSeekStart()",function(){e.On&&e.On.ci(S.SEEK_ACTIONS_TYPE.SEEK_START,t)})},this.setPlayerSeekEnd=function(){e.O||e.C.F("PlayerStateManager.setPlayerSeekEnd()",function(){e.On&&e.On.ci(S.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e.O||e.C.F("PlayerStateManager.setUserSeekButtonUp()",function(){e.On&&e.On.ci(S.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e.O||e.C.F("PlayerStateManager.setUserSeekButtonDown()",function(){e.On&&e.On.ci(S.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(n){e.O||e.C.F("PlayerStateManager.setVideoResolutionWidth()",function(){var t=b.Cn(n);t>0&&(e.Fn=t),e.On&&e.On.fi(e.Fn)})},this.setVideoResolutionHeight=function(n){e.O||e.C.F("PlayerStateManager.setVideoResolutionHeight()",function(){var t=b.Cn(n);t>0&&(e.Bn=t),e.On&&e.On.li(e.Bn)})},this.setConnectionType=function(t){e.O||e.C.F("PlayerStateManager.setConnectionType()",function(){e.L=t,e.On&&e.On.nt(e.L)})},this.setLinkEncryption=function(t){e.O||e.C.F("PlayerStateManager.setLinkEncryption()",function(){e.V=t,e.On&&e.On.et(e.V)})},this.setSignalStrength=function(){},this.oi=function(t){var n,i;e.Hn=t,e.On?(n=t.errorCode,i=t.severity,e.On.di(n,i)):e.Kn.push(t)},this.sendError=function(n,i){e.O||e.C.F("PlayerStateManager.sendError",function(){var t=new M(n,i);e.oi(t)})},this.reset=function(){e.O||e.C.F("PlayerStateManager.reset",function(){e.wn=-2,e.Dn=-2,e.Pn=S.PlayerState.UNKNOWN,e.bn={},e.Mn=-1,e.Nn=-1,e.In=-1,e.Ln=null,e.Vn=null,e.Rn=null,e.Hn=null,e.Kn=[]})},this.setCDNServerIP=function(t){e.O||e.C.F("PlayerStateManager.setCDNServerIP",function(){e.On&&e.On.vi(t)})},this.Ei=function(){return e.pi},this.setDroppedFramesTotal=function(t){e.O||e.C.F("PlayerStateManager.setDroppedFramesTotal",function(){e.On&&e.On.Ai(t)})},this.setDroppedFramesCount=function(t){e.O||e.C.F("PlayerStateManager.setDroppedFramesCount",function(){e.On&&e.On.gi(t)})},this.yi=function(){return e.Hn},function(t,n){e.S=t,e.g=e.S.buildLogger(),e.g.setModuleName("PlayerStateManager"),e.C=e.S.dt(n)}.apply(e,arguments)}).PlayerState={STOPPED:_.PlayerState.STOPPED,PLAYING:_.PlayerState.PLAYING,BUFFERING:_.PlayerState.BUFFERING,PAUSED:_.PlayerState.PAUSED,UNKNOWN:_.PlayerState.UNKNOWN,NOT_MONITORED:_.PlayerState.NOT_MONITORED},S.ri=function(t){return t===S.PlayerState.STOPPED||t===S.PlayerState.PLAYING||t===S.PlayerState.BUFFERING||t===S.PlayerState.PAUSED||t===S.PlayerState.UNKNOWN||t===S.PlayerState.NOT_MONITORED},S.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},S.DEFAULT_SIGNAL_STRENGTH=1e3,S.DEFAULT_RENDERED_FRAME_RATE=-1,S.DEFAULT_BUFFER_LENGTH=-1,S.DEFAULT_PHT=-1,lt.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}},B=lt.HttpInterface=function(){this.makeRequest=function(){},this.release=function(){}},H=lt.LoggingInterface=function(){this.consoleLog=function(){},this.release=function(){}},K=lt.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},G=lt.StorageInterface=function(){this.saveData=function(){},this.loadData=function(){},this.release=function(){}},j=lt.SystemInterface=function(){!function(t,n,i,e,s,o){w.xn(t,new W,"TimeInterface"),w.xn(n,new x,"TimerInterface"),w.xn(i,new B,"HttpInterface"),w.xn(e,new G,"StorageInterface"),w.xn(s,new K,"MetadataInterface"),w.xn(o,new H,"LoggingInterface"),this._i=t,this.Si=n,this.Ri=i,this.Ti=e,this.Ii=s,this.Ci=o}.apply(this,arguments),this.release=function(){this._i&&(this._i.release(),this._i=null),this.Si&&(this.Si.release(),this.Si=null),this.Ri&&(this.Ri.release(),this.Ri=null),this.Ti&&(this.Ti.release(),this.Ti=null),this.Ii&&(this.Ii.release(),this.Ii=null),this.Ci&&(this.Ci.release(),this.Ci=null)}},W=lt.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},x=lt.TimerInterface=function(){this.createTimer=function(){},this.release=function(){}},q=lt.SystemFactory=function(){var t=this;!function(t,n){if(!(t instanceof j))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.mi=t,this._i=this.mi._i,this.Si=this.mi.Si,this.Ri=this.mi.Ri,this.Ti=this.mi.Ti,this.Ii=this.mi.Ii,this.Ci=this.mi.Ci,n instanceof u?this.T=n.ct():this.T=new u}.apply(this,arguments),this.lt=function(t,n,i){this.Ni=t,this.Oi=n,this.wi=i},this.release=function(){this.mi.release(),this.mi=null,this.Ni=null,this.T=null,this.Di=null};var n=function(){return new at(t.Ci,t._i,t.Jt(),t.Di,t.Ni)};this.buildLogger=function(){return n()},this.yt=function(t,n,i){return new tt(t,n,i,this)},this.Pi=function(t){return new D(this.buildLogger(),this.bi(),this.Oi,t)},this.Mi=function(){return new nt(this.buildTimer(t.wi))},this.Li=function(){var t=new ht(this.buildLogger(),this.Si,new et(this.buildLogger(),null,this.Jt()));return new nt(t)},this.bi=function(){return new rt(this.buildLogger(),this.Ri,this.Li(),this.Jt())},this.dt=function(t){return new et(this.buildLogger(),this.Pi(t),this.Jt())},this.buildTime=function(){return new ut(this._i,this.buildLogger())},this.buildTimer=function(t){return new ht(this.buildLogger(),this.Si,this.dt(t))},this.Vi=function(){return new V.Storage(this.buildLogger(),this.Ti,this.Mi(),this.Jt())},this.vt=function(){return new O(this.buildLogger(),this.Vi(),this.Ui())},this.ki=function(t){return new L(this.buildLogger(),this.Ii,this.dt(t))},this.Fi=function(){return new m},this.Bi=function(t,n){return new st(t,this.buildLogger(),this.bi(),this.Ui(),n)},this.Hi=function(t,n,i,e,s){var o=this.Bi(n,e.custom["c3.domain"]);return new N(this.Ki(),t,n,this.buildLogger(),this.dt(s),this.buildTimer(s),o,this.Fi(),this.buildTime(),this.Gi(),i,e,s)},this.ji=function(t,n,i,e,s,o,r){t=this.Hi(t,n.ct(),i,o,r);return new $(e,s,i,this.ki(r),t,this.dt(r),this.buildLogger())},this.Ki=function(){return new it},this.Ui=function(){return new z},this.Gi=function(){return this.Di},this.Jt=function(){return this.T},this.Di=new ot},(u=lt.SystemSettings=function(){this.Wi=u.xi,w.rn(this,"logLevel",function(){return this.Wi}),w.un(this,"logLevel",function(t){var n;"number"===typeof t&&(n=w.fn(t))===t&&n>=u.LogLevel.DEBUG&&n<=u.LogLevel.ERROR&&(this.Wi=n)}),this.qi=u.Yi,w.rn(this,"allowUncaughtExceptions",function(){return this.qi}),w.un(this,"allowUncaughtExceptions",function(t){w.Ji(t)&&(this.qi=t)}),this.Xi=u.Qi,w.rn(this,"storageTimeout",function(){return this.Xi}),w.un(this,"storageTimeout",function(t){var n;"number"===typeof t&&(n=w.fn(t))===t&&(this.Xi=n)}),this.zi=u.Zi,w.rn(this,"httpTimeout",function(){return this.zi}),w.un(this,"httpTimeout",function(t){var n;"number"===typeof t&&(n=w.fn(t))===t&&(this.zi=n)}),function(){}.apply(this,arguments),this.equals=function(t){return this.logLevel===t.logLevel&&this.allowUncaughtExceptions===t.allowUncaughtExceptions&&this.storageTimeout===t.storageTimeout&&this.httpTimeout===t.httpTimeout},this.ct=function(){var t=new u;return t.logLevel=this.logLevel,t.allowUncaughtExceptions=this.allowUncaughtExceptions,t.storageTimeout=this.storageTimeout,t.httpTimeout=this.httpTimeout,t}}).LogLevel={DEBUG:_.LogLevel.DEBUG,INFO:_.LogLevel.INFO,WARNING:_.LogLevel.WARNING,ERROR:_.LogLevel.ERROR,NONE:_.LogLevel.NONE},u.$i=u.LogLevel.DEBUG,u.xi=u.LogLevel.NONE,u.te=!0,u.Yi=!1,u.Qi=10,u.Zi=10,i=V.AdAnalytics=function(){var e=this;function n(t){e.ne?(w.Ht(t)>0&&e.setAdInfo(t),e.ne.ie()||(e.ne.ee(e.se),e.ne.oe(!0),e.getAdType()===_.AdType.SERVER_SIDE&&e.reportAdMetric(_.Playback.BITRATE,e.se.re()))):e.g&&e.g.error("AdAnalytics.onAdInitiated() : contentPlayer - "+_.o)}e.ae=null,e.g=null,e.S=null,e.ue=null,e.se=null,e.ne=null,e.he=null,e.ce=null,e.fe=null,function(t,n,i){e.ae=t,e.fe=i,e.S=n,i&&(e.se=i.le()),e.ue=n.buildTimer(_.version),e.g=n.buildLogger(),e.g.setModuleName("AdAnalytics"),e.ne=new l(e.ae,e.ue),R.call(this)}.apply(this,arguments),this.setAdInfo=function(t){w.Ht(t)<=0?e.g&&e.g.error("AdAnalytics.setAdInfo() : AD Info is not set"):(e.g&&e.g.debug("AdAnalytics.setAdInfo()"),e.ne&&e.ne.de(t))},this.setAdPlayerInfo=function(t){w.Ht(t)<=0?e.g&&e.g.error("AdAnalytics.setAdPlayerInfo() : Ad Player Info is not set"):(e.g&&e.g.debug("AdAnalytics.setAdPlayerInfo()"),e.ne&&e.ne.de(t))},this.reportAdMetric=function(){0===arguments.length?e.g&&e.g.error("AdAnalytics.reportAdMetric() : Need to report metric mandatory"):1===arguments.length?e.ve(arguments[0]):2===arguments.length?e.ve(arguments[0],arguments[1]):3===arguments.length?e.ve(arguments[0],arguments[1],arguments[2]):4===arguments.length&&e.ve(arguments[0],arguments[1],arguments[2],arguments[3])},this.setCallback=function(t){e.ne&&e.ne.Ee(t)},this.reportAdFailed=function(t,n){e.ne?(w.Ht(n)>0&&e.setAdInfo(n),e.ne.ie()?(e.g&&e.g.debug("AdAnalytics.reportAdFailed() : "+t),e.reportAdError(t,h.ErrorSeverity.FATAL),e.reportAdEnded()):(e.ne.ee(e.se),e.g&&e.g.debug("AdAnalytics.reportAdFailed() : "+t),n=new M(t,h.ErrorSeverity.FATAL),e.ne.oe(!0,n))):e.g&&e.g.error("AdAnalytics.reportAdFailed() : "+_.o)},this.reportAdLoaded=function(t){e.g&&e.g.debug("AdAnalytics.reportAdLoaded()"),n(t)},this.reportAdStarted=function(t){e.g&&e.g.debug("AdAnalytics.reportAdStarted()"),n(t)},this.reportAdEnded=function(){e.ne?(e.g&&e.g.debug("AdAnalytics.reportAdEnded()"),e.ne.ie()&&(e.ne.ee(null),e.ne.oe(!1))):e.g&&e.g.error("AdAnalytics.reportAdEnded() : "+_.u)},this.reportAdError=function(t,n){e.ne?(e.g&&e.g.debug("AdAnalytics.reportAdError() : "+t),t=new M(t,n),e.ne.oi(t)):e.g&&e.g.error("AdAnalytics.reportAdError() : "+_.o)},this.reportAdPlayerEvent=function(t,n){if(w.Pt(t))if(e.g&&e.g.debug("AdAnalytics.reportAdPlayerEvent()"),e.ne)switch(t){case _.Events.USER_WAIT_STARTED:case _.Events.BUMPER_VIDEO_STARTED:e.ne.Lt();break;case _.Events.USER_WAIT_ENDED:case _.Events.BUMPER_VIDEO_ENDED:e.ne.Ut();break;default:e.ne.pe(t,n)}else e.g&&e.g.error("AdAnalytics.reportAdPlayerEvent() : "+_.o);else e.g&&e.g.error("AdAnalytics.reportAdPlayerEvent(): eventType parameter must be a valid string.")},this.reportAdSkipped=function(){e.ne?(e.g&&e.g.debug("AdAnalytics.reportAdSkipped()"),e.reportAdPlayerEvent(_.Events.AD_SKIPPED),e.reportAdEnded()):e.g&&e.g.error("AdAnalytics.reportAdSkipped() : "+_.o)},this.release=function(){e.g&&e.g.debug("AdAnalytics.release()"),e.ne&&(e.ne.ie()&&(e.ne.ee(null),e.ne.oe(!1)),e.ne.Ee(null),e.ne.Ae(),e.ne=null),"undefined"!==typeof lt.AdProxyMonitor&&e.ce&&(lt.AdProxyMonitor.release(e.ce),e.ce=null)},this.setAdListener=function(t,n){t?("undefined"!==typeof n&&"undefined"!==typeof n.convivaModule?lt.AdProxyMonitor=n.convivaModule.AdProxyMonitor:"undefined"!==typeof ConvivaModule&&(lt.AdProxyMonitor=ConvivaModule.AdProxyMonitor),"undefined"===typeof lt.AdProxyMonitor?e.g.error("AdAnalytics.setAdListener() : Include the missing Ads SDK Module"):!t&&e.ce?(lt.AdProxyMonitor.release(e.ce),e.ce=null):t&&e.ce?(lt.AdProxyMonitor.release(e.ce),e.g&&e.g.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.ce=lt.AdProxyMonitor.initConvivaDropIn(t,n,this,lt,e.S)):t&&!e.ce&&(e.g&&e.g.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.ce=lt.AdProxyMonitor.initConvivaDropIn(t,n,this,lt,e.S))):e.g.error("AdAnalytics.setAdListener() : Need to configure the adListener instance")},this.reportAdBreakStarted=function(t,n,i){e.se?(e.g&&e.g.debug("AdAnalytics.reportAdBreakStarted()"),e.ge=t,e.he=n,e.se.ye(t,n,i)):e.g.error("AdAnalytics.reportAdBreakStarted() : "+_.o)},this.reportAdBreakEnded=function(){e.se?(e.g&&e.g.debug("AdAnalytics.reportAdBreakEnded()"),e.ge=null,e.he=null,e.se._e()):e.g.error("AdAnalytics.reportAdBreakEnded() : "+_.o)},this.getSessionId=function(){return e.se?(e.g&&e.g.debug("VideoAnalytics.getSessionId()"),e.ne.Xt()):(e.g.error("VideoAnalytics.getSessionId() : "+_.o),_.NO_SESSION_KEY)},this.getClientId=function(){return e.se?(e.g&&e.g.debug("VideoAnalytics.getClientId()"),e.ne.Qt()):(e.g.error("VideoAnalytics.getClientId() : "+_.o),null)},this.getPlayerMonitor=function(){return e.se},this.getAdPlayerMonitor=function(){return e.ne},this.getVideoAnalytics=function(){return e.fe},this.getAdType=function(){return e.se?e.se.ge:null},this.Se=function(){return e.se?e.se.he:null},i.prototype=Object.create(R.prototype),i.prototype.constructor=i},l=V.AdPlayerMonitorImpl=function(){var s=this;s.Re=null,s.Te=null,function(t,n){d.call(this,t,n)}.apply(this,arguments),this.ee=function(t){this.Ie()!==t&&(this.Ce(),s.Te=t||null)},this.Ie=function(){return s.Te},this.me=function(t){var n,i=this.Ie(),e={};e.error=t,s.Re&&(s.Ne=s.Re.getPlayerStateManager(!0),s.Oe(),s.Ne.setClientMeasureInterface(this),n=null,i&&(n=i.we()),s.De=s.Re.createAdSession(n,s.Ot,s.Ne,!0,e),"undefined"!==typeof t)&&(s.Pe(),s.Ae())},l.prototype=Object.create(d.prototype),l.prototype.constructor=l},Y=lt.Analytics={init:function(){if(this.ae)this.g.error("Client is already configured");else{if(arguments.length<=0)throw new Error("customerKey must be valid");var t=null,n=null,i=null;if("string"===typeof arguments[0]&&!w.Pt(t=arguments[0]))throw new Error("customerKey must be valid");arguments.length>=2&&"object"===typeof arguments[1]&&(n=arguments[1]),arguments.length>=3&&"object"===typeof arguments[2]&&(i=arguments[2]);var t=new c(t),e=new u,i=(w.Ht(i)>0&&(i[_.GATEWAY_URL]&&(t.gatewayUrl=i[_.GATEWAY_URL]),i[_.LOG_LEVEL]>=0)&&(e.logLevel=i[_.LOG_LEVEL]),new lt.Impl.Html5Logging),s=new lt.Impl.Html5Storage,o=new lt.Impl.Html5Http,r=new lt.Impl.Html5Timer,a=new lt.Impl.Html5Time;this.Ii||(this.Ii=new lt.Impl.Html5Metadata),n&&(n[_.CallbackFunctions.CONSOLE_LOG]&&(i.consoleLog=n[_.CallbackFunctions.CONSOLE_LOG]),n[_.CallbackFunctions.MAKE_REQUEST]&&(o.makeRequest=n[_.CallbackFunctions.MAKE_REQUEST]),n[_.CallbackFunctions.SAVE_DATA]&&(s.saveData=n[_.CallbackFunctions.SAVE_DATA]),n[_.CallbackFunctions.LOAD_DATA]&&(s.loadData=n[_.CallbackFunctions.LOAD_DATA]),n[_.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(a.getEpochTimeMs=n[_.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),n[_.CallbackFunctions.CREATE_TIMER])&&(r.createTimer=n[_.CallbackFunctions.CREATE_TIMER]),this.mi=new j(a,r,o,s,this.Ii,i),this.S=new q(this.mi,e),this.S.lt("Analytics",t),this.ae=new h(t,this.S,this.be,Y.version),this.g=this.S.buildLogger(),this.g.setModuleName("Analytics"),this.ae.p=new J(this.ae,this),this.ae.p.Me()}},release:function(){var t=0;if(this.Le){for(t=0;t<this.Le.length;t++){var n=this.Le[t];n&&(n.release(),n.g=null,n.ue=null,this.Le.splice(t,1),t--)}this.Le=null}if(this.Ve){for(t=0;t<this.Ve.length;t++){var i=this.Ve[t];i&&(i.release(),i.g=null,i.ue=null,this.Ve.splice(t,1),t--)}this.Ve=null}this.S&&(this.S.release(),this.S=null),this.ae&&(this.ae.release(),this.ae=null),this.ae=null,this.g=null,this.mi=null,this.Ii=null,this.be=null},setUniqueIdentifier:function(t,n){if(!this.ae)throw new Error(_.i);this.ae.setUniqueIdentifier(t,n)},setUserPreferenceForDataCollection:function(t,n){if(!this.ae)throw new Error(_.i);this.ae.setUserPreferenceForDataCollection(t,n)},setUserPreferenceForDataDeletion:function(t){if(!this.ae)throw new Error(_.i);this.ae.setUserPreferenceForDataDeletion(t)},reportAppEvent:function(t,n){if(!this.ae)throw new Error(_.i);this.ae.sendCustomEvent(h.NO_SESSION_KEY,t,n)},reportAppBackgrounded:function(){if(!this.ae)throw new Error(_.i);this.ae.sendCustomEvent(h.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(!this.ae)throw new Error(_.i);this.ae.sendCustomEvent(h.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(t){if(!(t instanceof h))throw new Error(_.i);this.ae=t,this.S=this.ae.S,this.g=this.S.buildLogger(),this.g.setModuleName("Analytics")},buildVideoAnalytics:function(){var t;if(this.ae)return t=new v(this.ae,this.S),this.Ve||(this.Ve=[]),this.Ve.push(t),t;throw new Error(_.i)},buildAdAnalytics:function(t){if(this.ae)return t=new i(this.ae,this.S,t||null),this.Le||(this.Le=[]),this.Le.push(t),t;throw new Error(_.i)},setDeviceMetadata:function(t){var n,i,e;arguments.length<=0||0===w.Ht(t)?this.g.error("Device Metadata must be valid"):(this.Ii||(this.Ii=new lt.Impl.Html5Metadata),t[_.DeviceMetadata.BRAND]&&(this.Ii.getDeviceBrand=function(){return t[_.DeviceMetadata.BRAND]}),t[_.DeviceMetadata.MANUFACTURER]&&(this.Ii.getDeviceManufacturer=function(){return t[_.DeviceMetadata.MANUFACTURER]}),t[_.DeviceMetadata.MODEL]&&(this.Ii.getDeviceModel=function(){return t[_.DeviceMetadata.MODEL]}),t[_.DeviceMetadata.TYPE]&&(this.Ii.getDeviceType=function(){return t[_.DeviceMetadata.TYPE]}),t[_.DeviceMetadata.VERSION]&&(this.Ii.getDeviceVersion=function(){return t[_.DeviceMetadata.VERSION]}),t[_.DeviceMetadata.OS_NAME]&&(this.Ii.getOperatingSystemName=function(){return t[_.DeviceMetadata.OS_NAME]}),t[_.DeviceMetadata.OS_VERSION]&&(this.Ii.getOperatingSystemVersion=function(){return t[_.DeviceMetadata.OS_VERSION]}),t[_.DeviceMetadata.CATEGORY]&&(this.Ii.getDeviceCategory=function(){return t[_.DeviceMetadata.CATEGORY]}),n=t[_.DeviceMetadata.SCREEN_RESOLUTION_WIDTH],w.It(n)&&(this.Ii.getScreenWidth=function(){return n.toString()}),i=t[_.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT],w.It(i)&&(this.Ii.getScreenHeight=function(){return i.toString()}),e=t[_.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR],w.It(e)&&(this.Ii.getScaleFactor=function(){return e.toString()}))},reportDeviceMetric:function(t,n){switch(this.be||(this.be={}),t){case _.Network.CONNECTION_TYPE:w.Pt(n)?(this.be[t]=n,this.ae&&this.ae.$(this.be[_.Network.CONNECTION_TYPE])):this.g.error("reportDeviceMetric() : Connection Type is not a valid string");break;case _.Network.LINK_ENCRYPTION:w.Pt(n)?(this.be[t]=n,this.ae&&this.ae.it(this.be[_.Network.LINK_ENCRYPTION])):this.g.error("reportDeviceMetric() : Link Encryption is not a valid string");break;case _.Network.SIGNAL_STRENGTH:var i=parseInt(n,10);w.It(i)?S.DEFAULT_SIGNAL_STRENGTH===i?this.g.error("reportDeviceMetric() : DEFAULT_SIGNAL_STRENGTH shouldn't be reported"):(this.be[t]=i,this.ae&&this.ae.ot(i)):this.g.error("reportDeviceMetric() : Signal Strength is not a number");break;default:this.g.error("reportDeviceMetric() : unknown device metric = "+t)}},version:"4.6.1"},R=V.AnalyticsImpl=function(){var h=this;function c(){var t=!!h.ne,n=h.getAdType(),i=h.Se();return n===_.AdType.SERVER_SIDE&&i===_.AdPlayer.CONTENT?R.ke.Ue:n!==_.AdType.SERVER_SIDE||i!==_.AdPlayer.SEPARATE?n===_.AdType.CLIENT_SIDE&&i===_.AdPlayer.CONTENT||(n===_.AdType.CLIENT_SIDE&&_.AdPlayer.SEPARATE,t)?R.ke.Fe:R.ke.Be:void 0}function f(t,n,i){t=parseInt(t,10),n=parseInt(n,10);isNaN(t)&&isNaN(n)?h.g.error("reportPlaybackResolution() : width and height are not numbers"):(isNaN(t)&&h.g.warning("reportPlaybackResolution() : width is not a number"),isNaN(n)&&h.g.warning("reportPlaybackResolution() : height is not a number"),!h.ne||i!==R.ke.Fe&&i!==R.ke.Ue||h.ne.He(t,n),!h.se||i!==R.ke.Be&&i!==R.ke.Ue||h.se.He(t,n))}function l(t,n){S.ri(t)?(!h.ne||n!==R.ke.Fe&&n!==R.ke.Ue||h.ne.Ke(t),(h.se&&n===R.ke.Be||n===R.ke.Ue)&&h.se.Ke(t)):h.g.error("reportPlayerState() : Player State is not valid")}function d(t,n){t=parseInt(t,10);isNaN(t)?h.g.error("reportPlayerPlayHeadTime() : playheadtime is not a number"):(!h.ne||n!==R.ke.Fe&&n!==R.ke.Ue||h.ne.Ge(t),!h.se||n!==R.ke.Be&&n!==R.ke.Ue||h.se.Ge(t))}function v(t,n){t=parseInt(t,10);isNaN(t)?h.g.error("reportPlayerBufferLength() : buffer length is not a number"):(!h.ne||n!==R.ke.Fe&&n!==R.ke.Ue||h.ne.je(t),!h.se||n!==R.ke.Be&&n!==R.ke.Ue||h.se.je(t))}function E(t,n){t=parseInt(t,10);!h.ne||n!==R.ke.Fe&&n!==R.ke.Ue||h.ne.We(!0,t),!h.se||n!==R.ke.Be&&n!==R.ke.Ue||h.se.We(!0,t)}function p(t){!h.ne||t!==R.ke.Fe&&t!==R.ke.Ue||h.ne.We(!1,-1),!h.se||t!==R.ke.Be&&t!==R.ke.Ue||h.se.We(!1,-1)}function A(t,n){t=parseInt(t,10);isNaN(t)?h.g.error("reportPlayerBitrate() : bitrate is not a number"):(!h.ne||n!==R.ke.Fe&&n!==R.ke.Ue||h.ne.xe(t),!h.se||n!==R.ke.Be&&n!==R.ke.Ue||h.se.xe(t))}function g(t,n){t=parseInt(t,10);isNaN(t)?h.g.error("reportPlayerAvgBitrate() : avgBitrate is not a number"):(!h.ne||n!==R.ke.Fe&&n!==R.ke.Ue||h.ne.qe(t),!h.se||n!==R.ke.Be&&n!==R.ke.Ue||h.se.qe(t))}function y(t,n){t=parseInt(t,10);isNaN(t)?h.g.error("reportPlayerRenderedFrameRate() : rendered framerate is not a number"):(!h.ne||n!==R.ke.Fe&&n!==R.ke.Ue||h.ne.Ye(t),!h.se||n!==R.ke.Be&&n!==R.ke.Ue||h.se.Ye(t))}!function(){}.apply(this,arguments),this.ve=function(t,n,i,e){switch(h.g&&t!==_.Playback.PLAY_HEAD_TIME&&t!==_.Playback.BUFFER_LENGTH&&h.g.debug("reportMetric() "+t+" "+(void 0!==n&&"CONVIVA"!==n?n:"")+" "+(void 0!==i&&"CONVIVA"!==i&&i!==R.ke.Fe?i:"")+" "+(void 0!==e&&"CONVIVA"!==e&&e!==R.ke.Fe?e:"")),t){case _.Playback.BITRATE:"CONVIVA"===i?h.g.info("Bitrate change requested from the Conviva Library:"):h.g.info("Bitrate change requested from the application:"),e===R.ke.Fe?A(n,R.ke.Fe):A(n,c());break;case _.Playback.AVG_BITRATE:"CONVIVA"===i?h.g.info("Average Bitrate change requested from the Conviva Library:"):h.g.info("Average Bitrate change requested from the application:"),e===R.ke.Fe?g(n,R.ke.Fe):g(n,c());break;case _.Playback.PLAY_HEAD_TIME:e===R.ke.Fe?d(n,R.ke.Fe):d(n,c());break;case _.Playback.RESOLUTION:e===R.ke.Fe?f(n,i,R.ke.Fe):f(n,i,c());break;case _.Playback.BUFFER_LENGTH:e===R.ke.Fe?v(n,R.ke.Fe):v(n,c());break;case _.Playback.PLAYER_STATE:e===R.ke.Fe?l(n,R.ke.Fe):l(n,c());break;case _.Playback.RENDERED_FRAMERATE:e===R.ke.Fe?y(n,R.ke.Fe):y(n,c());break;case _.Playback.SEEK_STARTED:arguments.length>=2&&"CONVIVA"!==n?E(n,c()):i===R.ke.Fe?E(-1,R.ke.Fe):E(-1,c());break;case _.Playback.SEEK_ENDED:i===R.ke.Fe?p(R.ke.Fe):p(c());break;case _.Playback.CDN_IP:"CONVIVA"===i?h.g.info("CDN Server IP change requested from the Conviva Library:"):h.g.info("CDN Server IP change requested from the application:"),a=n,u=c(),w.Pt(a)?(!h.ne||u!==R.ke.Fe&&u!==R.ke.Ue||h.ne.Je(a),!h.se||u!==R.ke.Be&&u!==R.ke.Ue||h.se.Je(a)):h.g.error("reportCDNServerIp() : CDNServerIP is not a valid string");break;case _.Playback.DROPPED_FRAMES_TOTAL:"CONVIVA"===i?h.g.info("Dropped frames total change requested from the Conviva Library:"):h.g.info("Dropped frames total change requested from the application:");u=n,a=c();u=parseInt(u,10),isNaN(u)?h.g.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!h.ne||a!==R.ke.Fe&&a!==R.ke.Ue||h.ne.Xe(u),!h.se||a!==R.ke.Be&&a!==R.ke.Ue||h.se.Xe(u));break;case _.Playback.DROPPED_FRAMES_COUNT:"CONVIVA"===i?h.g.info("Dropped frames count change requested from the Conviva Library:"):h.g.info("Dropped frames count change requested from the application:");var s=n,o=c();s=parseInt(s,10),isNaN(s)?h.g.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!h.ne||o!==R.ke.Fe&&o!==R.ke.Ue||h.ne.Qe(s),!h.se||o!==R.ke.Be&&o!==R.ke.Ue||h.se.Qe(s));break;default:o=t,s=n,r=c(),w.Pt(o)&&s?(!h.ne||r!==R.ke.Fe&&r!==R.ke.Ue||h.ne.zt(o,s),!h.se||r!==R.ke.Be&&r!==R.ke.Ue||h.se.zt(o,s)):h.g.error("reportMetric() : Metric key/value should be a proper value")}var r,a,u}},V.AnalyticsImpl.ke={Fe:1,Be:2,Ue:3},J=V.AppAnalyticsHandler=function(){var o=this;o.ae=null,o.ze=null,o.Ze=null,o.$e=null,o.Nt=null,function(t,n){o.ae=t,o.ze=n,o.Ze=document.createEvent("HTMLEvents"),o.Ze.initEvent(_.APP_TRACKER_EVENT.TYPE,!0,!0)}.apply(this,arguments),this.Me=function(){o.ts(_.APP_TRACKER_EVENT.INIT)},this.ns=function(){o.ts(_.APP_TRACKER_EVENT.VIDEO_ATTEMPT)},this.es=function(){o.ts(_.APP_TRACKER_EVENT.VIDEO_END),o.Nt=null},this.ss=function(t){o.ts(_.APP_TRACKER_EVENT.VIDEO_PLAY,t)},this.os=function(t){o.ts(_.APP_TRACKER_EVENT.VIDEO_PAUSE,t)},this.rs=function(t){o.ts(_.APP_TRACKER_EVENT.VIDEO_ERROR,t)},this.us=function(t){o.ts(_.APP_TRACKER_EVENT.VIDEO_BUFFERING,t)},this.hs=function(t){o.ts(_.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH,t)},this.cs=function(t){o.ts(_.APP_TRACKER_EVENT.VIDEO_METADATA_CHANGE,t)},this.fs=function(t){t={cen:t.name,ced:t.data};o.ts(_.APP_TRACKER_EVENT.VIDEO_CUSTOM_EVENT,t)},this.ls=function(t){t={cen:t.name,ced:t.data};o.ts(_.APP_TRACKER_EVENT.SDK_CUSTOM_EVENT,t)},this.ds=function(t){o.ts(_.APP_TRACKER_EVENT.AD_BREAK_START,{cen:"PodStart",ced:t})},this.vs=function(){o.ts(_.APP_TRACKER_EVENT.AD_BREAK_END,{cen:"PodEnd"})},this.ts=function(t,n){try{if(o.Es(),o.Ze.name=o.$e.name=t,o.Ze.iid=o.$e.iid=o.ae.getConfig().getIid(),o.Ze.clid=o.$e.clid=o.ae.getConfig().getClientId(),o.Nt){var i=o.Nt;if(i.ps()?(o.Ze.sid=o.$e.sid=i.As.Xt(),o.Ze.sst=o.$e.sst=i.gs,o.Ze.url=o.$e.url=i.Rn,o.Ze.st=o.$e.st=i.ys(),o.Ze.an=o.$e.an=i.An,o.Ze.pn=o.$e.pn=i._s,o.Ze.tags=o.$e.tags=JSON.stringify(i.Ot.gn),o.Ze.vid=o.$e.vid=i._n,i.Ss>=0&&(o.Ze.cl=o.$e.cl=i.Ss),o.Ze.lv=o.$e.lv=i.Rs,o.Ze.fw=o.$e.fw=i.Ts(),o.Ze.fwv=o.$e.fwv=i.Is(),o.Ze.mn=o.$e.mn=i.Un,o.Ze.mv=o.$e.mv=i.kn,i.wn>=0&&(o.Ze.br=o.$e.br=i.wn)):i.Cs()&&(o.Ze.sid=o.$e.sid=i.As.Xt(),o.Ze.sst=o.$e.sst=i.gs,o.Ze.st=o.$e.st=i.ys(),o.Ze.mn=o.$e.mn=i.Un,o.Ze.mv=o.$e.mv=i.kn),n)for(var e=Object.keys(n),s=0;s<e.length;s++)"object"===typeof n[e[s]]?o.Ze[e[s]]=o.$e[e[s]]=JSON.stringify(n[e[s]]):o.Ze[e[s]]=o.$e[e[s]]=n[e[s]]}document.dispatchEvent(o.Ze)}catch(t){throw new Error(t)}},this.Es=function(){if(null!==o.$e)for(var t=Object.keys(o.$e),n=0;n<t.length;n++)delete o.Ze[t[n]];o.$e={}},this.Ns=function(t,n,i){try{((o.Nt=i).ps()||i.Cs())&&(t===m.Os?n[m.ws][m.Ds]?n[m.ws][m.Ds]===m.Ps?o.ss(n):n[m.ws][m.Ds]===m.bs?o.us(n):n[m.ws][m.Ds]===m.Ms&&o.os(n):n[m.ws][m.Ls]?o.hs(n):o.cs(n):t===m.Vs?o.rs({err:n[m.Us],ft:n[m.ks]}):t===m.Fs&&(n[m.Bs]===_.Events.POD_START?o.ds(n[m.Hs]):n[m.Bs]===_.Events.POD_END?o.vs(n[m.Hs]):o.Nt.ps()?o.fs({name:n[m.Bs],data:n[m.Hs]}):o.ls({name:n[m.Bs],data:n[m.Hs]})))}catch(t){throw new Error(t)}}},X=V.PlayerMonitor=function(){var e=this;this.Ks=null,this.Gs=null,this.Ot=null,this.js=null,this.Pn=S.PlayerState.UNKNOWN,this.Ws=-1,this.xs=-1,this.Kn=[],this.qs=null,this.Ys=null,this.Js=-2,this.Xs=-2,this.Mn=-1,this.U=S.DEFAULT_SIGNAL_STRENGTH,this.Qs=null,this.pi=null,this.V=null,this.L=null,this.ue=null,this.zs=null,this.Zs=null,this.$s=null,this.no=null,this.ge=null,this.he=null,function(t){e.ue=t}.apply(this,arguments),this.io=function(){return e.Pn},this.Ke=function(t){e.Pn!==t&&(e.Ce(),e.Pn=t,e.eo())},this.so=function(){return e.oo},this.ro=function(){return e.ao},this.We=function(t,n){e.Ce(),e.oo=t,e.ao=n,e.uo()},this.ho=function(){return e.Ws},this.Ge=function(t){e.Ws=t},this.co=function(){return e.xs},this.je=function(t){e.xs=t},this.re=function(){return e.Js},this.xe=function(t){e.Js!==t&&(e.Js=t,e.eo())},this.fo=function(){return e.Xs},this.qe=function(t){e.Xs!==t&&(e.Xs=t,e.eo())},this.lo=function(){return e.Mn},this.Ye=function(t){e.Mn=t},this.do=function(){return e.Qs},this.Je=function(t){e.Qs=t,e.eo()},this.Ei=function(){return e.pi},this.Xe=function(t){e.pi=t,e.eo()},this.Qe=function(t){e.vo(t)},this.Eo=function(){return e.U},this.po=function(){return e.Ao},this.yo=function(){return e._o},this.He=function(t,n){n<0&&(n=0),e.Ao===(t=t<0?0:t)&&e._o===n||(e.Ao=t,e._o=n,e.eo())},this.So=function(){return e.Gs},this.Ro=function(){e.So()&&(e.Ot=new f,e.js={},e.Zs={},e.To())},this.Io=function(t){(e.Gs||t)&&(this.Ce(),e.Gs&&(e.Gs=null,e.Ro()),t)&&(e.Gs=w.Co(e.Gs,t),e.Ro())},this.de=function(t){if(t)if(e.Ot){var n,i=!1;for(n in t)if(e.Ot[n]!==t[n]){i=!0;break}i&&(e.Ce(),e.Gs=w.Co(t),e.To())}else e.Io(t)},this.Ee=function(t){t?e.$s!==t&&(e.$s=t,e.mo()):(e.$s=null,e.Pe())},this.Ce=function(){e.No||e.$s&&(e.No=!0,e.$s(),e.No=!1)},this.ie=function(){return e.Ks},this.oe=function(t,n){e.Ks!==t&&(e.Ce(),e.Ks&&(e.Oo(),e.Pe(),e.Ae()),e.Ks=t,e.Ks)&&e.me(n)},this.wo=function(){return e.qs},this.Do=function(){return e.Ys||null},this.Po=function(){return e.Kn},this.bo=function(){e.Kn=[]},this.oi=function(t){this.Ce(),e.Kn.push(t),e.di()},this.pe=function(t,n){e.Ce(),e.qs=t,e.Ys=n,e.Mo()},this.Lo=function(){e.Ce()},this.mo=function(){e.Pe(),e.zs=e.ue.create(e.Lo,1e3,"PlayerMonitor.update")},this.Pe=function(){e.zs&&(e.zs(),e.zs=null)},this.ye=function(t,n,i){e.no=i,e.ge=t,e.Vo(),e.he=n,e.ge&&_.AdType.CLIENT_SIDE===e.ge&&(e.Pn=_.PlayerState.UNKNOWN,e.Uo(e.ge,n,i?i[_.POD_POSITION]:null))},this._e=function(){e.ge&&_.AdType.CLIENT_SIDE===e.ge&&(e.ko(),e.Pn=_.PlayerState.UNKNOWN),e.Fo(),e.ge=null,e.he=null},this.Bo=function(){return e.no},this.Ho=function(){return e.ge},this.getContentMetadata=function(){return this.Ot},this.Ae=function(){this.Ks=null,this.Gs=null,this.Ot=null,this.js=null,this.Pn=S.PlayerState.UNKNOWN,this.Ws=-1,this.xs=-1,this.Kn=[],this.qs=null,this.Ys=null,this.Js=-2,this.Xs=-2,this.Mn=-1,this.U=S.DEFAULT_SIGNAL_STRENGTH,this.Qs=null,this.pi=null,this.V=null,this.L=null,this.ue=null,this.zs=null,this.Zs=null,this.$s=null,this.no=null,this.ge=null,this.he=null,e.Ne=null,e.De=h.NO_SESSION_KEY}},d=V.PlayerMonitorImpl=function(){var o=this;o.Re=null,o.Ne=null,o.De=h.NO_SESSION_KEY,function(t,n){X.call(this,n),o.Re=t}.apply(this,arguments),this.getPHT=function(){return o.ho()},this.getBufferLength=function(){return o.co()},this.getRenderedFrameRate=function(){return o.lo()},this.getSignalStrength=function(){return o.Eo()},this.uo=function(){o.Ne&&o._ContentSessionKey!==h.NO_SESSION_KEY&&(o.so()?o.Ne.setPlayerSeekStart(o.ro()):o.Ne.setPlayerSeekEnd())},this.eo=function(){o.Ne&&(o.Ne.setPlayerState(o.io()),o.re()>0&&o.Ne.setBitrateKbps(o.re()),o.fo()>0&&o.Ne.setAvgBitrateKbps(o.fo()),o.po()>0&&o.Ne.setVideoResolutionWidth(o.po()),o.yo()>0&&o.Ne.setVideoResolutionHeight(o.yo()),o.do()&&o.Ne.setCDNServerIP(o.do()),w.It(o.Ei()))&&o.Ne.setDroppedFramesTotal(o.Ei())},this.Mt=function(){o.De!==h.NO_SESSION_KEY&&o.Re&&o.Re.updateContentMetadata(o.De,o.Ot)},this.Oe=function(){if(o.Ne){o.Zs&&w.Ht(o.Zs)>0&&(o.Zs[_.MODULE_NAME]&&o.Zs[_.MODULE_VERSION]&&(t=o.Zs[_.MODULE_NAME],n=o.Zs[_.MODULE_VERSION],w.Pt(t))&&w.Pt(n)&&o.Ne.setModuleNameAndVersion(t,n),o.Zs[_.FRAMEWORK_NAME]&&(t=o.Zs[_.FRAMEWORK_NAME],w.Pt(t))&&o.Ne.setPlayerType(t),o.Zs[_.FRAMEWORK_VERSION])&&(n=o.Zs[_.FRAMEWORK_VERSION],w.Pt(n))&&o.Ne.setPlayerVersion(n);var t,n,i=o.Po();o.bo();for(var e=0;e<i.length;e++){var s=i[e];o.Ne.oi(s)}}},this.ko=function(){o.Ne&&o.De!==h.NO_SESSION_KEY&&(o.eo(),this.Ko())},this.Ut=function(){o.Ne&&o.De!==h.NO_SESSION_KEY&&(o.eo(),o.Re.kt(o.De))},this.Ko=function(){o.Re&&o.De!==_.NO_SESSION_KEY&&o.Re.adEnd(o.De)},this.Uo=function(t,n,i){var e;o.Ne&&o.De!==_.NO_SESSION_KEY&&(e=null,_.AdType.CLIENT_SIDE===t?e=h.AdStream.SEPARATE:_.AdType.SERVER_SIDE===t&&(e=h.AdStream.CONTENT),o.Go(e,n,i))},this.Lt=function(){o.Ne&&o.De!==_.NO_SESSION_KEY&&o.Re.Vt(o.De)},this.Go=function(t,n,i){o.Re&&o.De!==_.NO_SESSION_KEY&&o.Re.adStart(o.De,t,n,i)},this.me=function(){if(o.Re){o.Ne=o.Re.getPlayerStateManager(!0),o.Oe(),o.Ne.setClientMeasureInterface(this);try{var t;o.Ot&&o.Ot.custom&&!o.Ot.custom[_.UTM_TRACKING_URL]&&(Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var e,s=[],o=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)r in n&&(e=n[r],t.call(o,e,r,n))&&s.push(e);return s}),""!==(t=w.jo().split("?").join("").split("&").filter(function(t){return 2===t.split("=").length&&t.split("=")[0].toLowerCase().indexOf("utm_")>=0}).join("&")))&&(o.Ot.custom[_.UTM_TRACKING_URL]=t)}catch(t){o.g.error("PlayerMonitorImpl _createSession : "+t)}o.De=o.Re.createSession(o.Ot,o.Ne,!0)}},this.Oo=function(){o.Re&&(o.Ne&&(o.Ne.setPlayerState(_.PlayerState.STOPPED),o.Ne=null),o.De!==_.NO_SESSION_KEY)&&(o.Re.cleanupSession(o.De),o.De=_.NO_SESSION_KEY)},this.di=function(){if(o.Re&&o.De!==h.NO_SESSION_KEY){var t=o.Po();o.bo();for(var n=0;n<t.length;n++){var i=t[n];o.Re.reportError(o.De,i.Wo(),i.xo())}}},this.Mo=function(){o.De!==h.NO_SESSION_KEY&&o.Re&&o.Re.sendCustomEvent(o.De,o.wo(),o.Do())},this.To=function(){var t,n=o.So(),i=!1,e=!1;for(t in n){var s=n[t];if(w.Pt(t)&&null!==s&&void 0!==s)switch(t){case _.STREAM_URL:e=!0,o.Ot.streamUrl=s;break;case _.ASSET_NAME:e=!0,o.Ot.assetName=s;break;case _.DEFAULT_RESOURCE:e=!0,o.Ot.defaultResource=s;break;case _.VIEWER_ID:e=!0,o.Ot.viewerId=s;break;case _.PLAYER_NAME:e=!0,o.Ot.applicationName=s;break;case _.DURATION:e=!0,o.Ot.duration=s;break;case _.IS_LIVE:e=!0,o.Ot.streamType=s;break;case _.ENCODED_FRAMERATE:e=!0,o.Ot.encodedFrameRate=s;break;case _.MODULE_NAME:case _.MODULE_VERSION:case _.FRAMEWORK_NAME:case _.FRAMEWORK_VERSION:i=!0,o.Zs[t]=s;break;default:_.APPLICATION_VERSION;e=!0,o.Ot.custom[t]=s}}i&&this.Oe(),e&&this.Mt()},this.Vo=function(){this.qo(_.Events.POD_START)},this.Fo=function(){this.qo(_.Events.POD_END)},this.qo=function(t){var n,i,e;o.Re&&o.De!==_.NO_SESSION_KEY&&(n={},(e=this.Bo())&&((i=e[_.POD_POSITION])&&(n[_.POD_POSITION]=i),(i=e[_.POD_INDEX])&&(n[_.POD_INDEX]=i+""),t===_.Events.POD_START)&&(i=e[_.POD_DURATION])&&(n[_.POD_DURATION]=i+""),(e=this.Ho())&&(n[_.AD_TYPE]=e),o.Re.sendCustomEvent(o.De,t,n))},this.vo=function(t){o.Ne.setDroppedFramesCount(t)},this.Yo=function(t){this.De===_.NO_SESSION_KEY&&t!==_.NO_SESSION_KEY&&(this.De=t)},this.we=function(){return this.De},this.Xt=function(){return o.Re.getSessionId(this.De)},this.Qt=function(){return o.Re.getClientId(this.De)},this.zt=function(t,n){o.Re.zt(this.De,t,n)},d.prototype=Object.create(X.prototype),d.prototype.constructor=d},lt.Impl=lt.Impl||{},lt.Impl.Html5Http=function(){!function(){}.apply(this,arguments),this.makeRequest=function(){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(t,n,i,e,s,o){var r=new XMLHttpRequest;return r.open(t,n,!0),e&&r.overrideMimeType&&(r.overrideMimeType=e),e&&r.setRequestHeader&&r.setRequestHeader("Content-Type",e),s>0&&(r.timeout=s,r.ontimeout=function(){r.ontimeout=r.onreadystatechange=null,o&&o(!1,"timeout after "+s+" ms")}),r.onreadystatechange=function(){4===r.readyState&&(r.ontimeout=r.onreadystatechange=null,200===r.status?o&&o(!0,r.responseText):o&&o(!1,"http status "+r.status))},r.send(i),null},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Logging=function(){!function(){}.apply(this,arguments),this.consoleLog=function(t,n){"undefined"!==typeof console&&(console.log&&n===u.LogLevel.DEBUG||n===u.LogLevel.INFO?console.log(t):console.warn&&n===u.LogLevel.WARNING?console.warn(t):console.error&&n===u.LogLevel.ERROR&&console.error(t))},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Metadata=function(){!function(){}.apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!==typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Storage=function(){!function(){}.apply(this,arguments),this.saveData=function(t,n,i,e){t=t+"."+n;try{localStorage.setItem(t,i),e(!0,null)}catch(t){e(!1,t.toString())}},this.loadData=function(t,n,i){t=t+"."+n;try{i(!0,localStorage.getItem(t))}catch(t){i(!1,t.toString())}},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Time=function(){!function(){}.apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Timer=function(){!function(){}.apply(this,arguments),this.createTimer=function(t,n){var i=setInterval(t,n);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}},v=V.VideoAnalytics=function(){var s=this;s.ae=null,s.g=null,s.S=null,s.ue=null,s.se=null,s.ce=null,this.release=function(){s.g&&s.g.debug("VideoAnalytics.release()"),s.se&&s.se.ie()&&s.se.oe(!1),"undefined"!==typeof lt.ProxyMonitor&&s.ce&&(lt.ProxyMonitor.release(s.ce),s.ce=null),s.se&&(s.se.Ee(null),s.se.Ae(),s.se=null),s.ue=null},function(t,n){s.ae=t,s.S=n,s.ue=n.buildTimer(_.version),s.g=n.buildLogger(),s.g.setModuleName("VideoAnalytics"),s.se=new d(s.ae,s.ue),R.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(t){s.g&&s.g.debug("VideoAnalytics.reportPlaybackRequested()"),s.se?(w.Ht(t)>0&&s.setContentInfo(t),s.se.ie()||(s.se.oe(!0),s.ae.p.ns())):s.g.error("VideoAnalytics.reportPlaybackRequested() : "+_.v)},this.reportPlaybackEnded=function(){s.g&&s.g.debug("VideoAnalytics.reportPlaybackEnded()"),s.se?s.se.ie()&&(s.ae.p.es(),s.se.oe(!1),"undefined"!==typeof lt.ProxyMonitor&&s.ce&&(lt.ProxyMonitor.release(s.ce),s.ce=null),s.se.Ee(null)):s.g.error("VideoAnalytics.reportPlaybackEnded() : "+_.v)},this.reportPlaybackFailed=function(t,n){s.se?(w.Ht(n)>0&&s.setContentInfo(n),s.se.ie()||s.se.oe(!0),s.g&&s.g.debug("VideoAnalytics.reportPlaybackFailed()"),s.reportPlaybackError(t,h.ErrorSeverity.FATAL),s.reportPlaybackEnded()):s.g.error("VideoAnalytics.reportPlaybackFailed() : "+_.o)},this.setContentInfo=function(t){w.Ht(t)<=0?s.g.error("VideoAnalytics.setContentInfo() : Content Info is not set"):s.se?(s.g&&s.g.debug("VideoAnalytics.setContentInfo()"),s.se.de(t)):s.g.error("VideoAnalytics.setContentInfo() : "+_.o)},this.setPlayerInfo=function(t){w.Ht(t)<=0?s.g.error("VideoAnalytics.setPlayerInfo() : Player Info is not set"):s.se?(s.g&&s.g.debug("VideoAnalytics.setPlayerInfo()"),s.se.de(t)):s.g.error("VideoAnalytics.setPlayerInfo() : "+_.o)},this.reportPlaybackMetric=function(){0===arguments.length?s.g.error("VideoAnalytics.reportPlaybackMetric() : Need to report metric mandatory"):1===arguments.length?s.ve(arguments[0]):2===arguments.length?s.ve(arguments[0],arguments[1]):3===arguments.length?s.ve(arguments[0],arguments[1],arguments[2]):4===arguments.length&&s.ve(arguments[0],arguments[1],arguments[2],arguments[3])},this.reportPlaybackError=function(t,n){s.se?w.Pt(t)?(s.g&&s.g.debug("VideoAnalytics.reportPlaybackError()"),t=new M(t,n),s.se.oi(t)):s.g.error("VideoAnalytics.reportPlaybackError() : errorMessage need to be valid string"):s.g.error("VideoAnalytics.reportPlaybackError() : "+_.o)},this.reportPlaybackEvent=function(t,n){if(w.Pt(t))if(s.se){if(s.g&&s.g.debug("VideoAnalytics.reportPlaybackEvent()"),s.se)switch(t){case _.Events.USER_WAIT_STARTED:case _.Events.BUMPER_VIDEO_STARTED:s.se.Lt();break;case _.Events.USER_WAIT_ENDED:case _.Events.BUMPER_VIDEO_ENDED:s.se.Ut();break;default:s.se.pe(t,n)}}else s.g.error("VideoAnalytics.reportPlaybackEvent() : "+_.o);else s.g.error("VideoAnalytics.reportPlaybackEvent(): eventType parameter must be a valid string.")},this.setCallback=function(t){s.g&&s.g.debug("setCallback()"),s.se&&s.se.Ee(t)},this.reportAdBreakStarted=function(t,n,i){s.se?(s.g&&s.g.debug("VideoAnalytics.reportAdBreakStarted()"),s.se.ye(t,n,i)):s.g.error("VideoAnalytics.reportAdBreakStarted() : "+_.o)},this.reportAdBreakEnded=function(){s.se?(s.g&&s.g.debug("VideoAnalytics.reportAdBreakEnded()"),s.se._e()):s.g.error("VideoAnalytics.reportAdBreakEnded() : "+_.o)},this.setPlayer=function(t,n){var i,e;void 0===t?s.g.error("VideoAnalytics.setPlayer() : Need to configure the Player"):(n&&(i=n[_.CONVIVA_MODULE],e=n[_.MEDIA_ELEMENT]),"undefined"!==typeof i?lt.ProxyMonitor=i.ProxyMonitor:"undefined"!==typeof ConvivaModule&&(lt.ProxyMonitor=ConvivaModule.ProxyMonitor),"undefined"===typeof lt.ProxyMonitor?s.g.error("VideoAnalytics.setPlayer() : Include the missing Player Module"):(s.g&&s.g.debug("VideoAnalytics.setPlayer()"),!t&&s.ce?(lt.ProxyMonitor.release(s.ce),s.ce=null):t?(s.ce&&lt.ProxyMonitor.release(s.ce),s.g&&s.g.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),s.ce="undefined"!==typeof e?lt.ProxyMonitor.initConvivaDropIn(t,e,s.S,this,lt):lt.ProxyMonitor.initConvivaDropIn(t,s.S,this,lt)):"undefined"!==typeof e&&(s.ce=lt.ProxyMonitor.initConvivaDropIn(t,e,s.S,this,lt))))},this.setAdAnalytics=function(t){t?s.getAdType()&&(s.getAdType()===_.AdType.SERVER_SIDE?s.ne=t.getAdPlayerMonitor():s.getAdType()===_.AdType.CLIENT_SIDE&&s.g&&s.g.error("VideoAnalytics.setAdAnalytics() : API is not meant for Client Side Ads")):s.ne=null},this.configureExistingSession=function(t){t===_.NO_SESSION_KEY?s.g.error("VideoAnalytics.configureExistingSession() : Invalid Session Key"):s.se?(s.g&&s.g.debug("VideoAnalytics.configureExistingSession()"),s.se.Yo(t)):s.g.error("VideoAnalytics.configureExistingSession() : "+_.o)},this.getSessionId=function(){return s.se?(s.g&&s.g.debug("VideoAnalytics.getSessionId()"),s.se.Xt()):(s.g.error("VideoAnalytics.getSessionId() : "+_.o),_.NO_SESSION_KEY)},this.getClientId=function(){return s.se?(s.g&&s.g.debug("VideoAnalytics.getClientId()"),s.se.Qt()):(s.g.error("VideoAnalytics.getClientId() : "+_.o),null)},this.le=function(){return s.g&&s.g.debug("VideoAnalytics.getPlayerMonitor()"),this.se},this.getAdType=function(){return s.se?s.se.ge:null},this.Se=function(){return s.se?s.se.he:null},v.prototype=Object.create(R.prototype),v.prototype.constructor=v},V.JsonParse=(k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(t){throw{name:"SyntaxError",message:t,at:n,text:U}},r=function(t){return t&&t!==s&&o("Expected '"+t+"' instead of '"+s+"'"),s=U.charAt(n),n+=1,s},F=function(){var t,n,i,e="";if('"'===s)for(;r();){if('"'===s)return r(),e;if("\\"===s)if(r(),"u"===s){for(n=i=0;n<4&&(t=parseInt(r(),16),isFinite(t));n+=1)i=16*i+t;e+=String.fromCharCode(i)}else{if("string"!==typeof k[s])break;e+=k[s]}else e+=s}o("Bad string")},e=function(){for(;s&&s<=" ";)r()},a=function(){switch(e(),s){case"{":var t,n={};if("{"===s){if(r("{"),e(),"}"===s)return r("}"),n;for(;s;){if(t=F(),e(),r(":"),Object.hasOwnProperty.call(n,t)&&o('Duplicate key "'+t+'"'),n[t]=a(),e(),"}"===s)return r("}"),n;r(","),e()}}return void o("Bad object");case"[":var i=[];if("["===s){if(r("["),e(),"]"===s)return r("]"),i;for(;s;){if(i.push(a()),e(),"]"===s)return r("]"),i;r(","),e()}}return void o("Bad array");case'"':return F();case"-":return ct();default:return(s>="0"&&s<="9"?ct:function(){switch(s){case"t":return r("t"),r("r"),r("u"),r("e"),!0;case"f":return r("f"),r("a"),r("l"),r("s"),r("e"),!1;case"n":return r("n"),r("u"),r("l"),r("l"),null}o("Unexpected '"+s+"'")})()}},function(t,r){return U=t,n=0,s=" ",t=a(),e(),s&&o("Syntax error"),"function"===typeof r?function t(n,i){var e,s,o=n[i];if(o&&"object"===typeof o)for(e in o)Object.hasOwnProperty.call(o,e)&&(void 0!==(s=t(o,e))?o[e]=s:delete o[e]);return r.call(n,i,o)}({"":t},""):t}),y=V.JSON2={},"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!==typeof y.stringify&&(E=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Q={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},y.stringify=function(t,n,i){var e;if(A=p="","number"===typeof i)for(e=0;e<i;e+=1)A+=" ";else"string"===typeof i&&(A=i);if(!(g=n)||"function"===typeof n||"object"===typeof n&&"number"===typeof n.length)return function t(n,i){var e,s,o,r,a,u=p,h=i[n];switch(h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(n)),typeof(h="function"===typeof g?g.call(i,n,h):h)){case"string":return ft(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(p+=A,a=[],Object.prototype.toString.apply(h)===Object.prototype.toString.apply([])){for(r=h.length,e=0;e<r;e+=1)a[e]=t(e,h)||"null";o=0===a.length?"[]":p?"[\n"+p+a.join(",\n"+p)+"\n"+u+"]":"["+a.join(",")+"]"}else{if(g&&"object"===typeof g)for(r=g.length,e=0;e<r;e+=1)"string"===typeof g[e]&&(o=t(s=g[e],h))&&a.push(ft(s)+(p?": ":":")+o);else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(o=t(s,h))&&a.push(ft(s)+(p?": ":":")+o);o=0===a.length?"{}":p?"{\n"+p+a.join(",\n"+p)+"\n"+u+"}":"{"+a.join(",")+"}"}return p=u,o}}("",{"":t});throw new Error("JSON2.stringify")}),C=V.Jo={Xo:"0123456789abcdef",Qo:function(t){for(var n="",i=7;i>=0;i--)n+=C.Xo.charAt(t>>4*i&15);return n},zo:function(t){for(var n=1+(t.length+8>>6),i=new Array(16*n),e=0;e<16*n;e++)i[e]=0;for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<24-e%4*8;return i[e>>2]|=128<<24-e%4*8,i[16*n-1]=8*t.length,i},Zo:function(t,n){var i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i},$o:function(t,n){return t<<n|t>>>32-n},tr:function(t,n,i,e){return t<20?n&i|~n&e:!(t<40)&&t<60?n&i|n&e|i&e:n^i^e},nr:function(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514},ir:function(t){for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return C.er(n)},er:function(t){if(""===t)return"";for(var n,i=C.zo(t),e=new Array(80),s=1732584193,o=-271733879,r=-1732584194,a=271733878,u=-1009589776,h=0;h<i.length;h+=16){for(var c=s,f=o,l=r,d=a,v=u,E=0;E<80;E++)e[E]=E<16?i[h+E]:C.$o(e[E-3]^e[E-8]^e[E-14]^e[E-16],1),n=C.Zo(C.Zo(C.$o(s,5),C.tr(E,o,r,a)),C.Zo(C.Zo(u,e[E]),C.nr(E))),u=a,a=r,r=C.$o(o,30),o=s,s=n;s=C.Zo(s,c),o=C.Zo(o,f),r=C.Zo(r,l),a=C.Zo(a,d),u=C.Zo(u,v)}return C.Qo(s)+C.Qo(o)+C.Qo(r)+C.Qo(a)+C.Qo(u)}},(m=V.CwsProtocol=function(){this.sr=function(t,n,i,e){return e.seq=t,e.st=n,e.t=i,e},this.rr=function(t,n){var i=m.ar;return this.sr(t,n,i,{})}}).version="2.6",m.ur="/0/wsg",m.H="0",m.hr=-1,m.cr=!1,m.lr=2,m.dr=-1,m.vr=-1,m.Er=1e3,m.pr="sdk.js.1",m.Os="CwsStateChangeEvent",m.Vs="CwsErrorEvent",m.ar="CwsSessionEndEvent",m.Fs="CwsCustomEvent",m.Ar="CwsSeekEvent",m.gr="CwsDataSamplesEvent",m.yr="ok",m._r="err",m.Sr="clid",m.Rr="cfg",m.Tr="evs",m.Ir="maxhbinfos",m.Cr="slg",m.mr="hbi",m.Nr="gw",m.Or="fp",m.wr="csi_en",m.Dr="CwsSessionHb",m.Pr="t",m.Mr="st",m.Lr="sst",m.Vr="lv",m.Ur="seq",m.kr="cid",m.Fr="clid",m.Br="clv",m.Hr="pver",m.Kr="iid",m.Gr="sid",m.jr="vid",m.Wr="an",m.qr="pn",m.Yr="tags",m.Jr="sf",m.Xr="evs",m.Qr="lg",m.zr="hbinfos",m.Zr="sdk",m.$r="pj",m.Ds="ps",m.Ls="br",m.ta="avgbr",m.na="cl",m.ia="efps",m.ea="afps",m.sa="rfpstot",m.oa="rfpscnt",m.ra="rs",m.aa="pht",m.ua="bl",m.ha="url",m.ca="caps",m.fa="pm",m.la="w",m.da="h",m.va="ct",m.Ea="le",m.pa="dftot",m.Aa="dfcnt",m.ga="ss",m.ya="csi_n",m._a="csi_t",m.Sa="csi_l",m.Ra="csi_v",m.Ta="csi_c",m.Ia="sch",m.Ca="br",m.ma="brv",m.Na="dvb",m.Oa="dvma",m.wa="dvm",m.Da="dvt",m.Pa="dvv",m.ba="sw",m.Ma="sh",m.La="scf",m.Va="fw",m.Ua="fwv",m.ka="cc",m.Fa="mn",m.Ba="mv",m.Ha="os",m.Ka="osv",m.Ga="cat",m.ja="caps",m.Wa="t",m.xa="seq",m.qa="st",m.Ya="act",m.Ja="skto",m.Us="err",m.ks="ft",m.ws="new",m.Xa="old",m.Bs="name",m.Hs="attr",m.Qa="seq",m.za="err",m.Za="rtt",m.$a="ad",m.tu="csi",m.nu=function(t){switch(t){case S.PlayerState.STOPPED:return m.iu;case S.PlayerState.PLAYING:return m.Ps;case S.PlayerState.BUFFERING:return m.bs;case S.PlayerState.PAUSED:return m.Ms;case S.PlayerState.NOT_MONITORED:return m.eu;default:return m.su}},m.iu=1,m.Ps=3,m.bs=6,m.Ms=12,m.eu=98,m.su=100,m.ou={ru:0,Rt:1,au:2,uu:4},m.hu={cu:0},z=V.LibJSONInterface=function(){this.fu=function(t){var n=null;try{n=y.stringify(t)}catch(t){}return n},this.lu=function(t){var n=null;try{n=V.JsonParse(t)}catch(t){return n}return n=w.du(n)?n:null}},Z=V.CwsHeartbeat=function(){this.vu={},function(){}.apply(this,arguments),this.get=function(){return this.vu},this.Eu=function(t,n){this.vu[t]=n},this.pu=function(t,n,i){this.vu[t]||(this.vu[t]={}),this.vu[t][n]=i},this.Au=function(t){this.Eu(m.Pr,t)},this.gu=function(t){this.Eu(m.Mr,t)},this.yu=function(t){this.Eu(m.Lr,t)},this._u=function(t){this.Eu(m.Vr,t)},this.Su=function(t){this.Eu(m.Ur,t)},this.Ru=function(t){this.Eu(m.kr,t)},this.Tu=function(t){this.Eu(m.Fr,t)},this.Iu=function(t){this.Eu(m.Br,t)},this.Cu=function(t){this.Eu(m.Hr,t)},this.mu=function(t){this.Eu(m.ja,t)},this.ni=function(t){this.Eu(m.Gr,t)},this.Nu=function(t){this.Eu(m.Kr,t)},this.Ou=function(t){this.Eu(m.jr,t)},this.wu=function(t){this.Eu(m.Wr,t)},this.Du=function(t){this.Eu(m.qr,t)},this.Pu=function(t){this.Eu(m.Yr,t)},this.bu=function(t){this.Eu(m.Jr,t)},this.Mu=function(t){this.Eu(m.ca,t)},this.Lu=function(t){this.Eu(m.Xr,t)},this.Vu=function(t){this.Eu(m.Zr,t)},this.Uu=function(t){this.Eu(m.Qr,t)},this.ku=function(t){this.Eu(m.zr,t)},this.Ke=function(t){this.Eu(m.Ds,t)},this.Fu=function(t){this.Eu(m.$r,t)},this.Bu=function(t){this.Eu(m.na,t)},this.Hu=function(t){this.Eu(m.Ls,t)},this.Ku=function(t){this.Eu(m.ta,t)},this.Gu=function(t){this.Eu(m.ra,t)},this.ju=function(t){this.Eu(m.ia,t)},this.Wu=function(t){this.Eu(m.ea,t)},this.xu=function(t){this.Eu(m.oa,t)},this.qu=function(t){this.Eu(m.sa,t)},this.Yu=function(t){this.pu(m.fa,m.Ia,t)},this.Ju=function(t){this.pu(m.fa,m.Ca,t)},this.Xu=function(t){this.pu(m.fa,m.ma,t)},this.Qu=function(t){this.pu(m.fa,m.Na,t)},this.zu=function(t){this.pu(m.fa,m.Oa,t)},this.Zu=function(t){this.pu(m.fa,m.wa,t)},this.$u=function(t){this.pu(m.fa,m.Da,t)},this.th=function(t){this.pu(m.fa,m.Pa,t)},this.nh=function(t){this.pu(m.fa,m.Va,t),this.Eu(m.Va,t)},this.ih=function(t){this.pu(m.fa,m.Ua,t),this.Eu(m.Ua,t)},this.eh=function(t){this.pu(m.fa,m.Ha,t.toUpperCase())},this.sh=function(t){this.pu(m.fa,m.Ka,t)},this.oh=function(t){this.pu(m.fa,m.Ga,t)},this.rh=function(t){this.pu(m.fa,m.ba,t)},this.ah=function(t){this.pu(m.fa,m.Ma,t)},this.uh=function(t){this.pu(m.fa,m.La,t)},this.hh=function(t){this.Eu(m.pa,t)},this.vo=function(t){this.Eu(m.Aa,t)},this.fh=function(t){this.Eu(m.aa,t)},this.lh=function(t){this.Eu(m.ua,t)},this.dh=function(t){this.Eu(m.ha,t)},this.Eh=function(t){this.Eu(m.la,t)},this.ph=function(t){this.Eu(m.da,t)},this.Ah=function(t){this.Eu(m.va,t)},this.gh=function(t){this.Eu(m.Ea,t)},this.yh=function(){this.Eu(m.$a,!0)},this._h=function(t){this.Eu(m.ga,t)},this.setModuleName=function(t){this.pu(m.ka,m.Fa,t)},this.Sh=function(t){this.pu(m.ka,m.Ba,t)},this.Rh=function(t){this.Eu(m.tu,t)},this.Th=function(t){t&&this.Eu(m.ya,t)},this.Ih=function(t){t&&this.Eu(m._a,t)},this.Ch=function(t){t&&this.Eu(m.Sa,t)},this.mh=function(t){t&&this.Eu(m.Ra,t)},this.Nh=function(t){t&&this.Eu(m.Ta,t)}},(N=V.CwsSession=function(){var p=this;p.wh=null,p.Ot=null,p.gs=0,p.Dh=0,p.Ph=m.ou.ru,p.bh=m.hu.cu,p.Mh=[],p.Lh=-1,p.wn=-2,p.Dn=-2,p.pi=-1,p.Vh=-1,p.Uh=null,p.Pn=S.PlayerState.UNKNOWN,p.Nn=-1,p.Ss=-1,p.Rn=null,p.Fn=-1,p.Bn=-1,p.Ne=null,p.An=null,p._n=null,p._s=null,p.Rs=null,p.kh={},p.Fh=null,p.Bh=null,p.Hh=null,p.Kh=null,p.Gh=null,p.jh=null,p.Wh=null,p.xh=null,p.qh=null,p.Yh=null,p.Jh=null,p.Xh=null,p.Qh=null,p.zh=null,p.Zh=null,p.Un=null,p.kn=null,p.L=null,p.V=null,p.Qs=null,p.$h=null,p.tc=!1,p.nc=!1,p.ic=!1,p.ec=!1,p.sc=null,p.oc=1e3,p.rc=0,p.ac=0,p.uc={},p.D={},p.hc=!1,p.cc=null,p.fc=null,p.lc=null,p.dc=null,p.vc=null,p.Ec=null,p.Ac=12e4,p.gc=m.cr,p.yc=!1,p._c=null,p.wi=null,function(t,n,i,e,s,o,r,a,u,h,c,f,l){this.Sc=t,this.ae=n,this.Oi=i,this.g=e,this.g.setModuleName("CwsSession"),this.C=s,this.ue=o,this.Rc=r,this.Tc=a,this.Ic=u,this.Di=h,this.Cc=c,this.Ot=f,this.Ot&&(p.Nn=this.Ot.encodedFrameRate,p.Rn=this.Ot.streamUrl,p.Ss=this.Ot.duration),this.Cc&&(p._c=p.Cc.get(O.B)),p.wi=l}.apply(this,arguments),this._t=function(){this.Cc=null,this.Di=null,this.I=null,this.Ic=null,this.Tc=null,this.Rc=null,this.ue=null,this.C=null,this.g=null,this.Oi=null,this.ae=null,this.Sc.mc(),this.Sc=null,this.$h=null,this.ic=!0},this.Nc=function(t){this.As=t,this.Oc=this.As.Oc,this.g.ni(this.As.N),this.gs=this.Ic.current(),this.ps()||this.wc()?(this.Ph+=N.Oh,p.g.info("start(): assetName="+p.Ot.assetName)):p.g.info("start()"+p.Dc())},this.Pc=function(){this.ec=!0},this.bc=function(){this.g.debug("initialize()"),(this.ps()||this.wc()||this.Cs())&&(p.Mc(),p.Lc(),p.Vc(),this.ps()||this.wc())&&p.Uc()},this.kc=function(){this.g.debug("end(): schedule the last hb before session cleanup"+p.Dc()),this.Fc(),this.Bc(),this.Hc(),this.Kc()},this.Gc=function(){this.ec||(this.Kc(),this.jc())},this.Ju=function(t){var n=p.Fh;n!==t&&t&&(p.g.debug("Change browserName from "+n+" to "+t),p.Fh=t)},this.Xu=function(t){var n=p.Bh;n!==t&&t&&(p.g.debug("Change browserVersion from "+n+" to "+t),p.Bh=t)},this.Qu=function(t){var n=p.Hh;n!==t&&t&&(p.g.debug("Change deviceBrand from "+n+" to "+t),p.Hh=t)},this.zu=function(t){var n=p.Kh;n!==t&&t&&(p.g.debug("Change deviceManufacturer from "+n+" to "+t),p.Kh=t)},this.Zu=function(t){var n=p.Gh;n!==t&&t&&(p.g.debug("Change deviceModel from "+n+" to "+t),p.Gh=t)},this.$u=function(t){var n=p.jh;n!==t&&t&&(p.g.debug("Change deviceType from "+n+" to "+t),p.jh=t)},this.th=function(t){var n=p.Wh;n!==t&&t&&(p.g.debug("Change deviceVersion from "+n+" to "+t),p.Wh=t)},this.eh=function(t){var n=p.Yh;n!==t&&t&&(p.g.debug("Change operatingSystemName from "+n+" to "+t),p.Yh=t)},this.sh=function(t){var n=p.Jh;n!==t&&t&&(p.g.debug("Change operatingSystemVersion from "+n+" to "+t),p.Jh=t)},this.oh=function(t){var n=p.Xh;n!==t&&t&&(p.g.debug("Change deviceCategory from "+n+" to "+t),p.Xh=t)},this.rh=function(t){var n=p.Qh;n!==t&&t&&(p.g.debug("Change screenWidth from "+n+" to "+t),p.Qh=t)},this.ah=function(t){var n=p.zh;n!==t&&t&&(p.g.debug("Change screenHeight from "+n+" to "+t),p.zh=t)},this.uh=function(t){var n=p.Xh;n!==t&&t&&(p.g.debug("Change scaleFactor from "+n+" to "+t),p.Zh=t)},this.Ts=function(){return p.xh},this.nh=function(t){var n=p.xh;n!==t&&t&&(p.g.debug("Change frameworkName from "+n+" to "+t),p.xh=t)},this.Is=function(){return p.qh},this.ih=function(t){var n=p.qh;n!==t&&t&&(p.g.debug("Change frameworkVersion from "+n+" to "+t),p.qh=t)},this.dh=function(t){var n;p.Ot.streamUrl||(n=p.Rn)!==t&&t&&(p.g.debug("Change stream url from "+n+" to "+t),p.Rn=t)},this.Wc=function(){p.Bc(),p.yc||(p.xc(),p.Ec=p.ue.create(p.xc,p.Ac,"CwsSession.startCdnTimer"),p.g.debug("fetching cdn ip timer started"))},this.Bc=function(){p.Ec&&(p.Ec(),p.qc(null,null,null,null,null),p.Ec=null)},this.xc=function(){p.g.debug("detectCDNServerIp(): For "+p.Rn),p.gc?p.Yc():p.Bc()},this.Yc=function(){try{var t;"function"===typeof XMLHttpRequest||"object"===typeof XMLHttpRequest?((t=new XMLHttpRequest).open("HEAD",p.Rn,!0),t.setRequestHeader("Pragma","akamai-x-cache-on"),t.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(this.getAllResponseHeaders().indexOf("x-cache")>=0||this.getAllResponseHeaders().indexOf("X-Cache")>=0)?p.qc("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):p.qc("null","header","null","null",""+this.status))},t.send()):p.g.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){p.g.info("Exception caught in makeAkamaiHeadRequest")}},this.qc=function(t,n,i,e,s){var o={},r={};p.cc!==t&&(null!==p.cc&&(r[m.ya]=p.cc),p.cc=t,null===p.cc?o[m.ya]="null":o[m.ya]=p.cc),p.fc!==n&&(null!==p.fc&&(r[m._a]=p.fc),p.fc=n,null===p.fc?o[m._a]="null":o[m._a]=p.fc),p.lc!==i&&(null!==p.lc&&(r[m.Sa]=p.lc),p.lc=i,null===p.lc?o[m.Sa]="null":o[m.Sa]=p.lc),p.dc!==e&&(null!==p.dc&&(r[m.Ra]=p.dc),p.dc=e,null===p.dc?o[m.Ra]="null":o[m.Ra]=p.dc),p.vc!==s&&(null!==p.vc&&(r[m.Ta]=p.vc),p.vc=s,null===p.vc?o[m.Ta]="null":o[m.Ta]=p.vc),"{}"!==JSON.stringify(o)&&p.Jc(o,r)},this.Xc=function(t){var n=p.wn;n!==t&&t>0&&(p.g.info("Change bitrate from "+n+" to "+t),p.Qc(n,t),p.wn=t)},this.zc=function(t){var n=p.Dn;n!==t&&t>0&&(p.g.info("Change Avg bitrate from "+n+" to "+t),p.Zc(n,t),p.Dn=t)},this.hh=function(t){var n=p.pi;n!==t&&t>=0&&(p.g.info("Change dropped frames total from "+n+" to "+t),p.$c(n,t),p.pi=t)},this.vo=function(t){var n=p.Vh,i=t+(-1===p.Vh?0:p.Vh);n!==t&&i>=0&&(p.g.info("Change dropped frames count from "+n+" to "+i),p.tf(n,i),p.Vh=i)},this.Gu=function(t){var n=p.Uh;n!==t&&t&&(p.g.info("Change resource from "+n+" to "+t),p.Uh=t)},this.wu=function(t){p.An!==t&&t&&(p.g.info("Change assetName from "+p.An+" to "+t),p.An=t)},this._u=function(t){var n=p.Rs;n!==t&&w.Ji(t)&&(p.g.info("Change isLive from "+n+" to "+t),p.Rs=t)},this.Ou=function(t){var n=p._n;n!==t&&t&&(p.g.info("Change viewerId from "+n+" to "+t),p._n=t)},this.Du=function(t){var n=p._s;n!==t&&t&&(p.g.info("Change playerName from "+n+" to "+t),p._s=t)},this.Pu=function(t){var n=p.kh;!w.nf(n,t)&&t&&(p.g.info("Change tags from "+w.if(n)+" to "+w.if(t)),p.kh=t)},this.ju=function(t){p.Ot.encodedFrameRate>0||(p.g.debug("setEncodedFrameRate(): "+t),p.Nn=t)},this.Bu=function(t){p.Ot.duration>0||(p.g.debug("setContentLength(): "+t),p.Ss=t)},this.Ke=function(t){var n;p.nc||t!==S.PlayerState.PLAYING||(p.nc=!0,w.Pt(p.Ot.viewerId)||p.g.error("Missing viewerId. viewerId should be updated before first frame is rendered."),w.Pt(p.Ot.streamType)&&f.StreamType.UNKNOWN!==p.Ot.streamType||p.g.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),w.Pt(p.Ot.applicationName))||p.g.error("Missing applicationName. applicationName should be updated before first frame is rendered."),p.Pn!==t&&(n=p.Pn,p.g.info("setPlayerState(): changing player state from "+n+" to "+t),p.ef(n,t),p.Pn=t)},this.sf=function(t){var n=p.Fn;n!==t&&t>0&&(p.g.debug("Change stream resolution width from "+n+" to "+t),p.rf(n,t),p.Fn=t)},this.af=function(t){var n=p.Bn;n!==t&&t>0&&(p.g.debug("Change stream resolution height from "+n+" to "+t),p.uf(n,t),p.Bn=t)},this.Ah=function(t){var n=p.L;n!==t&&t&&(p.g.debug("Change network connection type from "+n+" to "+t),p.hf(n,t),p.L=t)},this.gh=function(t){var n=p.V;n!==t&&t&&(p.g.debug("Change network link encryption from "+n+" to "+t),p.cf(n,t),p.V=t)},this.Rh=function(t){p.yc=!0,p.Bc();var n=p.Qs;n!==t&&w.Pt(t)&&(p.g.debug("Change CDN Server IP from "+n+" to "+t),p.ff(n,t),p.Qs=t)},this.lf=function(t){var n;p.g.debug("togglePauseJoin()"),p.tc===t?p.g.debug("togglePauseJoin(): same value, ignoring"):(t=p.tc,n=!p.tc,p.df(t,n),p.tc=!p.tc)},this.vf=function(t,n){p.Ef(t,n)},this.pf=function(t,n){var i,e;n[m.Wa]=t,n[m.qa]=this.ys(),n[m.xa]=this.Sc.Af(),this.Ne&&(i=b.gf(this.Ne.getPHT(),0,null,-1),e=b.gf(this.Ne.getBufferLength(),0,null,-1),i>=0&&(n[m.aa]=i),e>0)&&(n[m.ua]=e),this.Sc.yf(n),this.ae.p&&this.ae.p.Ns(t,n,this)},this._f=function(t){p.Ne=t,p.Ne?p.Sf():p.Rf()},this.Fc=function(){var t=this.Tc.rr(this.Tf(),this.ys());this.Sc.yf(t)},this.Ef=function(t,n){var i={};i[m.Us]=t,i[m.ks]=n,this.pf(m.Vs,i)},this.Qc=function(t,n){var i={},e={};t>0&&(e[m.Ls]=t),i[m.Ls]=n,this.Jc(i,e)},this.Zc=function(t,n){var i={},e={};t>0&&(e[m.ta]=t),i[m.ta]=n,this.Jc(i,e)},this.If=function(t,n){var i={};i[m.Ya]=t,n>=0&&(i[m.Ja]=n),this.pf(m.Ar,i)},this.rf=function(t,n){var i={},e={};-1!==t&&(e[m.la]=t),i[m.la]=n,this.Jc(i,e)},this.uf=function(t,n){var i={},e={};-1!==t&&(e[m.da]=t),i[m.da]=n,this.Jc(i,e)},this.hf=function(t,n){var i={},e={};null!==t&&(e[m.va]=t),i[m.va]=n,this.Jc(i,e)},this.cf=function(t,n){var i={},e={};null!==t&&(e[m.Ea]=t),i[m.Ea]=n,this.Jc(i,e)},this.ff=function(t,n){var i={},e={};w.Pt(t)&&(e[m.tu]=t),i[m.tu]=n,this.Jc(i,e)},this.$c=function(t,n){var i={},e={};t>=0&&(e[m.pa]=t),i[m.pa]=n,this.Jc(i,e)},this.tf=function(t,n){var i={},e={};t>=0&&(e[m.Aa]=t),i[m.Aa]=n,this.Jc(i,e)},this.df=function(t,n){var i={},e={};e[m.$r]=t,i[m.$r]=n,this.Jc(i,e)},this.ef=function(t,n){var i={},e={};i[m.Ds]=m.nu(n),e[m.Ds]=m.nu(t),this.Jc(i,e)},this.Jc=function(t,n){var i={};i[m.ws]=t,n&&w.Ht(n)>0&&(i[m.Xa]=n),this.pf(m.Os,i)},this.Cf=function(t,n){var i={};i[m.Bs]=t,w.Ht(n)>0&&(i[m.Hs]=n),this.pf(m.Fs,i)},this.Hc=function(){p.wh&&(p.wh(),p.wh=null)},this.jc=function(){p.Hc();var t=1e3*p.Oi.heartbeatInterval;p.wh=p.ue.create(p.Kc,t,"Session.sendHeartbeat:"+this.Oc)},this.Rf=function(){p.sc&&(p.sc(),p.sc=null)},this.Sf=function(){p.Rf(),p.sc=p.ue.create(p.mf,p.oc,"Session.startRfpsTimer")},this.Nf=function(){var t={err:"pending"};t.seq=p.Dh-1,t.sentAt=p.ys(),t.rtt=-1,p.Mh.push(t);for(var n=0;n<p.Mh.length;n++)"ok"===(t=p.Mh[n]).err&&(p.Mh.splice(n,1),n--)},this.Of=function(t,n){for(var i=0;i<p.Mh.length;i++){var e=p.Mh[i];e.seq===t&&(e.rtt=p.ys()-e.sentAt,e.err=n)}},this.wf=function(t){for(var n=0;n<p.Mh.length;n++){var i=p.Mh[n];i.seq===t&&(i.rtt=p.ys()-i.sentAt,i.err="ok")}},this.Df=function(){for(var t,n,i=p.Cc.get(O.Pf),e=[],s=-1,o=0;o<p.Mh.length;o++)if("ok"===(n=p.Mh[o]).err){s=n.seq;break}for(var r=0;r<p.Mh.length;r++)((t=(n=p.Mh[r]).seq)<p.Dh-i||t<s)&&e.push(r);for(var a=[],u=0;u<p.Mh.length;u++)t=(n=p.Mh[u]).seq,e.indexOf(u)<0&&a.push(p.Mh[u]);p.Mh=a},this.bf=function(){p.Df();for(var t=[],n=0;n<p.Mh.length;n++){var i=p.Mh[n],e={};e[m.Qa]=i.seq,e[m.Za]=i.rtt,e[m.za]=i.err,t.push(e)}return t},this.Mf=function(){var t,n=-1,i=-1,e=p.Sc.mc();if(p.Cs()&&0===e.length)return null;var s=new Z,o=(s.Au(m.Dr),s.Ru(p.Oi.customerKey),s.Tu(p.Cc.get(O.B)),s.ni(p.As.N),s.Su(p.Dh),s.Cu(m.version),_.version);if(p.wi&&(o=p.wi),s.Iu(o),s.Nu(p.ae.N),s.mu(0),p.ae.L?s.Ah(p.ae.L):p.L&&s.Ah(p.L),p.ae.V?s.gh(p.ae.V):p.V&&s.gh(p.V),w.Pt(p.Qs)&&s.Rh(p.Qs),s.Yu(m.pr),p.Fh&&s.Ju(p.Fh),p.Bh&&s.Xu(p.Bh),p.Hh&&s.Qu(p.Hh),p.Kh&&s.zu(p.Kh),p.Gh&&s.Zu(p.Gh),p.jh&&s.$u(p.jh),p.Wh&&s.th(p.Wh),p.Yh&&s.eh(p.Yh),p.Jh&&s.sh(p.Jh),p.Xh&&s.oh(p.Xh),p.xh&&s.nh(p.xh),p.qh&&s.ih(p.qh),p.Qh&&!isNaN(p.Qh)&&s.rh(parseInt(p.Qh,10)),p.zh&&!isNaN(p.zh)&&s.ah(parseInt(p.zh,10)),p.Zh&&!isNaN(p.Zh)?s.uh(parseFloat(p.Zh)):(p.Qh&&!isNaN(p.Qh)||p.zh&&!isNaN(p.zh))&&s.uh(1),p.Ne&&(p.Un=p.Ne.Xn(),p.Un&&s.setModuleName(p.Un),p.kn=p.Ne.Qn(),p.kn&&s.Sh(p.kn),p.Ne.zn()&&(p.xh=p.Ne.zn(),s.nh(p.xh)),p.Ne.$n())&&(p.qh=p.Ne.$n(),s.ih(p.qh)),p._n&&s.Ou(p._n),w.Ht(p.kh)>0&&s.Pu(p.kh),p.ps()||p.wc()){p.wc()&&s.yh(),p.An&&s.wu(p.An),s.bu(p.Ph);o=m.nu(p.Pn),o=(s.Ke(o),s.Fu(p.tc),p._s&&s.Du(p._s),w.Ji(p.Rs)&&s._u(p.Rs),p.Ss>0&&s.Bu(p.Ss),p.wn>0&&s.Hu(p.wn),p.Dn>0&&s.Ku(p.Dn),null!==p.Uh&&s.Gu(p.Uh),p.Nn>0&&s.ju(p.Nn),p.Ne&&(n=b.gf(p.Ne.getPHT(),0,null,-1),i=b.gf(p.Ne.getBufferLength(),0,null,-1)),w.It(p.ae.U)?t=p.ae.U:p.Ne&&(t=p.Ne.getSignalStrength()),n>=0&&s.fh(n),i>0&&s.lh(i),p.Lf());if(o>0&&s.Wu(o),p.ac>0&&s.qu(b.gf(p.ac,0,null,-1)),p.rc>0&&s.xu(b.gf(p.rc,0,null,-1)),t!==S.DEFAULT_SIGNAL_STRENGTH&&s._h(t),p.Rn&&s.dh(p.Rn),p.Fn>0&&s.Eh(p.Fn),p.Bn>0&&s.ph(p.Bn),p.pi>-1&&s.hh(p.pi),p.Vh>-1&&(s.vo(p.Vh),p.Vh>0)&&(p.tf(p.Vh,0),p.Vh=0),"undefined"!==typeof p.$h)for(var r in p.$h)s.Eu(r,p.$h[r])}else s.bu(m.ou.ru);return e.length>0&&s.Lu(e),s.Mu(p.bh),s.Vu(!0),p.Cc.get(O.Vf)&&s.Uu(p.Di.mc()),p.Cc.get(O.Pf)>0&&(n=p.bf()).length>0&&s.ku(n),0===p.Dh&&(s=p.Uf(s)),(s=0!==p.Dh?p.kf(s):s).yu(p.gs),s.gu(p.ys()),p.gc&&(s.Th(p.cc),s.Ih(p.fc),s.Ch(p.lc),s.mh(p.dc),s.Nh(p.vc)),p.Dh++,s.get()},this.kf=function(t){var n,i=p.D,e={};for(n in t.vu.tags)Object.prototype.hasOwnProperty.call(i,n)||(e[n]=t.vu.tags[n]);t.vu.tags=e,p.D={};for(var s=0;s<p.uc.length;s++)Object.prototype.hasOwnProperty.call(p.ae.D,p.uc[s])?Object.prototype.hasOwnProperty.call(p.ae.M,p.uc[s])?p.ae.M[p.uc[s]]===O.$t.tn?(p.D[O.Ff+""+p.uc[s]]=O.$t.tn,p.ae.P("End-user chose to opt-out of personal data collection")):p.ae.M[p.uc[s]]===O.$t.en?(p.D[O.Ff+""+p.uc[s]]=O.$t.en,p.ae.P("End-user chose to opt-out of personal data collection")):p.ae.M[p.uc[s]]===O.$t.Zt?(p.D[O.Ff+""+p.uc[s]]=O.$t.Zt,p.ae.P("End-user used privacy settings and chose to opt-out of personal data collection")):(p.D[O.Ff+""+p.uc[s]]=p.ae.D[p.uc[s]],p.ae.P("Data collection successful")):(p.D[O.Ff+""+p.uc[s]]=p.ae.D[p.uc[s]],p.ae.P("Data collection successful")):p.D[O.Ff+""+p.uc[s]]=O.$t.Bf;var o,r={};for(o in i){var a=o.split(".");"{}"!==JSON.stringify(p.uc)&&-1!==p.uc.indexOf(""+a[2])||i[O.Ff+""+a[2]]===O.$t.Hf||(p.ae.P("Data collection restricted from Conviva back-end"),p.D[O.Ff+""+a[2]]=O.$t.Hf,r[O.Ff+""+a[2]]=O.$t.Hf)}if("{}"!==JSON.stringify(p.D)){var u,h=w.Kf(p.D);for(u in t.vu.tags)h[u]=t.vu.tags[u];if(t.vu.tags=h,!w.nf(i,p.D)){var c={};if("{}"!==JSON.stringify(r)&&(c[m.Yr]=r),"{}"!==JSON.stringify(i)){for(var f in i)p.D[f]&&i[f]!==p.D[f]&&(c[m.Yr]||(c[m.Yr]={}),c[m.Yr][f]=p.D[f]);for(var l in p.D)Object.prototype.hasOwnProperty.call(i,l)&&i[l]===p.D[l]||(c[m.Yr]||(c[m.Yr]={}),c[m.Yr][l]=p.D[l])}"{}"===JSON.stringify(i)&&(c[m.Yr]=p.D);var d,v,E={};E[m.ws]=c,E[m.Wa]=m.Os,E[m.qa]=p.ys(),E[m.xa]=p.Sc.Af(),p.Ne&&(d=b.gf(p.Ne.getPHT(),0,null,-1),v=b.gf(p.Ne.getBufferLength(),0,null,-1),d>=0&&(E[m.aa]=d),v>0)&&(E[m.ua]=v),t.vu.evs||(t.vu.evs=[]),t.vu.evs.push(E)}}return t},this.Uf=function(t){var n=p.Gf();if("{}"!==JSON.stringify(n)){var i,e=w.Kf(n);for(i in t.vu.tags)e[i]=t.vu.tags[i];t.vu.tags=e;var s,o={},n=(o[m.Yr]=n,{});n[m.ws]=o,n[m.Wa]=m.Os,n[m.qa]=p.ys(),n[m.xa]=p.Sc.Af(),p.Ne&&(o=b.gf(p.Ne.getPHT(),0,null,-1),s=b.gf(p.Ne.getBufferLength(),0,null,-1),o>=0&&(n[m.aa]=o),s>0)&&(n[m.ua]=s),t.vu.evs||(t.vu.evs=[]),t.vu.evs.push(n)}return t},this.Gf=function(){var t={};if("undefined"!==typeof navigator&&navigator){if(t["c3.fp.cookie"]="undefined"!==typeof navigator.cookieEnabled&&navigator.cookieEnabled?""+navigator.cookieEnabled:"",t["c3.fp.memory"]="undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?""+navigator.deviceMemory:"",t["c3.fp.hwConc"]="undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",t["c3.fp.java"]=""+("function"!==typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),t["c3.fp.lang"]="undefined"!==typeof navigator.language&&navigator.language?""+navigator.language:"",t["c3.fp.langs"]="undefined"!==typeof navigator.languages&&navigator.languages&&navigator.languages.length>0?""+navigator.languages.toString():"",t["c3.fp.maxTp"]="undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",t["c3.fp.plugins"]="","undefined"!==typeof navigator.plugins&&navigator.plugins&&navigator.plugins.length>0)for(var n=0;n<navigator.plugins.length;n++)t["c3.fp.plugins"]+=navigator.plugins[n].name+",";if(t["c3.fp.mime"]="","undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var i=0;i<navigator.mimeTypes.length;i++)t["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";t["c3.fp.sysLang"]="undefined"!==typeof navigator.systemLanguage&&navigator.systemLanguage?""+navigator.systemLanguage:"",t["c3.fp.platform"]="undefined"!==typeof navigator.platform&&navigator.platform?""+navigator.platform:"",t["c3.fp.product"]="undefined"!==typeof navigator.product&&navigator.product?""+navigator.product:"",t["c3.fp.productSub"]="undefined"!==typeof navigator.productSub&&navigator.productSub?""+navigator.productSub:"",t["c3.fp.vendor"]="undefined"!==typeof navigator.vendor&&navigator.vendor?""+navigator.vendor:"",t["c3.fp.vendorSub"]="undefined"!==typeof navigator.vendorSub&&navigator.vendorSub?""+navigator.vendorSub:"";var e=p.jf();""!==e&&(t["c3.fp.canvFp"]=e)}return"undefined"!==typeof window&&window&&("undefined"!==typeof window.screen&&window.screen&&(t["c3.fp.availHeight"]="undefined"!==typeof window.screen.availHeight&&window.screen.availHeight?""+window.screen.availHeight:"",t["c3.fp.availWidth"]="undefined"!==typeof window.screen.availWidth&&window.screen.availWidth?""+window.screen.availWidth:"",t["c3.fp.height"]="undefined"!==typeof window.screen.height&&window.screen.height?""+window.screen.height:"",t["c3.fp.width"]="undefined"!==typeof window.screen.width&&window.screen.width?""+window.screen.width:"",t["c3.fp.colorDepth"]="undefined"!==typeof window.screen.colorDepth&&window.screen.colorDepth?""+window.screen.colorDepth:"",t["c3.fp.deviceXDPI"]="undefined"!==typeof window.screen.deviceXDPI&&window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",t["c3.fp.deviceYDPI"]="undefined"!==typeof window.screen.deviceYDPI&&window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),t["c3.fp.dpi"]="undefined"!==typeof window.devicePixelRatio&&window.devicePixelRatio?""+window.devicePixelRatio:"",t["c3.fp.secure"]="boolean"===typeof window.isSecureContext?""+window.isSecureContext:""),t},this.jf=function(){try{if("undefined"!==typeof document&&document){var t,n,i=document.createElement("CANVAS");if("undefined"!==typeof i&&i&&"function"===typeof i.getContext)return t=i.getContext("2d"),n="conviva",t.textBaseline="top",t.font="14px Arial",t.textBaseline="alphabetic",t.fillStyle="#f40",t.fillRect("undefined"!==typeof navigator.plugins&&navigator.plugins?navigator.plugins.length:0,"undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes?navigator.mimeTypes.length:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0,"undefined"!==typeof navigator.vendor&&navigator.vendor?navigator.vendor.length:0),t.fillStyle="#069",t.fillText(n,"undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>=0?navigator.maxTouchPoints:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,"undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?navigator.deviceMemory:0,"undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),C.er(i.toDataURL())}return""}catch(t){return""}},this.Kc=function(){var t;p.ic||(t=p.Mf())&&p.Wf(t)},this.mf=function(){var t;p.Pn===S.PlayerState.PLAYING&&p.Ne&&(t=p.Ne.getRenderedFrameRate())>0&&(p.ac+=t,p.rc++)},this.Lf=function(){return p.ac>0&&p.rc>0||(this.mf(),p.ac>0&&p.rc>0)?w.xf.Cast(+p.ac/p.rc):S.DEFAULT_RENDERED_FRAME_RATE},this.Wf=function(t){p.Nf();var i=p.Dh-1;p.g.info("postHeartbeat(): Send HB["+i+"]"+p.Dc());p.Rc.qf(t,function(t,n){p.Yf(t,n,i)})},this.Yf=function(i,e,s){p.ic||p.C.F("onHeartbeatResponse",function(){var t,n;i?e?(p.g.debug("onHeartbeatResponse(): received valid response for HB["+s+"]"),p.wf(s),(t=e[m.Sr])&&t!==(n=p.Cc.get(O.B))&&(p.g.debug("onHeartbeatResponse(): setting the client id to "+t+" (from gateway)"),p.Cc.set(O.B,t),p.Cc.Jf(),n===m.H)&&t!==m.H&&p.ae.k(),(n=e[m._r])&&n!==m.yr&&p.g.error("onHeartbeatResponse(): error from gateway: "+n),"object"===typeof(t=e[m.Rr])&&((n=t[m.Ir])>=0&&p.Cc.get(O.Pf)!==n&&(p.g.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+n+" (from gateway)"),p.Cc.set(O.Pf,n)),n=t[m.Cr],(n=!!w.Ji(n)&&n)!==p.Cc.get(O.Vf)&&(p.g.debug("onHeartbeatResponse(): turning "+(n?"on":"off")+" sending of logs"),p.Cc.set(O.Vf,n)),n=t[m.mr],w.It(n)&&(n=w.xf.Cast(n))!==p.Oi.heartbeatInterval&&(p.g.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+n),p.Oi.heartbeatInterval=n,p.wh)&&p.jc(),(n=t[m.Nr])&&n!==p.Oi.gatewayUrl&&(p.g.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),p.Oi.gatewayUrl=n),p.Xf()||(p.uc={},(n=t[m.Or])&&(p.hc||(p.hc=!0),p.g.debug("onHeartbeatResponse(): received fp from gateway: "+n),p.uc=n.split(",")),p.gc=t[m.wr],w.Ji(p.gc)&&(p.gc?(p.g.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),p.Ec||p.Wc()):(p.g.debug("onHeartbeatResponse(): disabling the CDN Server IP collection (from gateway)"),p.Bc()))))):p.g.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(w.Pt(n=e)?w.Qf(n,"HTTP timeout")?p.g.warning("onHeartbeatResponse(): "+n):p.g.error("onHeartbeatResponse(): failed to send heartbeat: "+n):(n=$.zf,p.g.error("onHeartbeatResponse(): "+n)),p.Of(s,n))})},this.ys=function(){return w.xf.Cast(p.Ic.current()-p.gs)},this.Tf=function(){return this.Sc.Af()},this.Dc=function(){return this.Cs()?" (global session)":""},this.Cs=function(){return this.Oc===N.Tt.ru},this.Xf=function(){return this.Oc===N.Tt.ru&&"T"===this.kh["c3.IPV4IPV6GlobalSession"]},this.ps=function(){return this.Oc===N.Tt.Rt},this.wc=function(){return this.Oc===N.Tt.Dt},this.Mt=function(t){p.Zf(t),p.Mc()},this.Zf=function(t){var n={},i={};if(w.Pt(t.assetName)&&(p.Ot.assetName!==t.assetName?(p.Ot.assetName&&(n[m.Wr]=p.Ot.assetName),i[m.Wr]=t.assetName,p.Ot.assetName=t.assetName):p.g.warning("mergeContentMetadata(): assetName was not changed.")),w.Pt(t.applicationName)&&(p.Ot.applicationName!==t.applicationName?(p.Ot.applicationName&&(n[m.qr]=p.Ot.applicationName),i[m.qr]=t.applicationName,p.Ot.applicationName=t.applicationName):p.g.warning("mergeContentMetadata(): applicationName was not changed.")),w.Pt(t.streamUrl)&&(p.Ot.streamUrl!==t.streamUrl?(p.Ot.streamUrl&&(n[m.ha]=p.Ot.streamUrl),i[m.ha]=t.streamUrl,p.Ot.streamUrl=t.streamUrl,p.Rn=p.Ot.streamUrl):p.g.warning("mergeContentMetadata(): streamUrl was not changed.")),w.Pt(t.viewerId)&&(p.Ot.viewerId!==t.viewerId?(p.Ot.viewerId&&(n[m.jr]=p.Ot.viewerId),i[m.jr]=t.viewerId,p.Ot.viewerId=t.viewerId):p.g.warning("mergeContentMetadata(): viewerId was not changed.")),w.Pt(t.defaultResource)&&(p.Ot.defaultResource!==t.defaultResource?(p.Ot.defaultResource&&(n[m.ra]=p.Ot.defaultResource),i[m.ra]=t.defaultResource,p.Ot.defaultResource=t.defaultResource):p.g.warning("mergeContentMetadata(): defaultResource was not changed.")),w.It(t.duration)&&t.duration>0&&(p.Ot.duration!==t.duration?(p.Ss>0&&(n[m.na]=p.Ss),i[m.na]=t.duration,p.Ot.duration=t.duration,p.Ss=p.Ot.duration):p.g.warning("mergeContentMetadata(): duration was not changed.")),w.It(t.encodedFrameRate)&&t.encodedFrameRate>0&&(p.Ot.encodedFrameRate!==t.encodedFrameRate?(p.Ot.encodedFrameRate>-1&&(n[m.ia]=p.Ot.encodedFrameRate),i[m.ia]=t.encodedFrameRate,p.Ot.encodedFrameRate=t.encodedFrameRate,p.Nn=p.Ot.encodedFrameRate):p.g.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!==f.StreamType.UNKNOWN&&(p.Ot.streamType!==t.streamType?(p.Ot.streamType!==f.StreamType.UNKNOWN&&(p.Ot.streamType===f.StreamType.LIVE?n[m.Vr]=!0:n[m.Vr]=!1),t.streamType===f.StreamType.LIVE?i[m.Vr]=!0:i[m.Vr]=!1,p.Ot.streamType=t.streamType):p.g.warning("mergeContentMetadata(): streamType was not changed.")),w.Ht(t.custom)>0){var e,s={},o={};for(e in t.custom)p.Ot.custom[e]!==t.custom[e]?(s[e]=t.custom[e],p.Ot.custom[e]&&(o[e]=p.Ot.custom[e]),p.Ot.custom[e]=t.custom[e]):p.g.info("mergeContentMetadata(): custom."+e+" was not changed.");w.Ht(s)>0?(w.Ht(o)>0&&(n[m.Yr]=o),i[m.Yr]=s):p.g.warning("mergeContentMetadata(): custom was not changed.")}w.Ht(i)>0&&this.Jc(i,n)},this.Mc=function(){var t;p.g.debug("setStatesFromContentMetadata()"),p.Ot.defaultResource&&this.Gu(p.Ot.defaultResource),p.Ot.streamUrl&&this.dh(p.Ot.streamUrl),p.Ot.duration>0&&this.Bu(p.Ot.duration),p.Ot.encodedFrameRate>0&&this.ju(p.Ot.encodedFrameRate),p.Ot.streamType!==f.StreamType.UNKNOWN&&(t=p.Ot.streamType===f.StreamType.LIVE,this._u(t)),p.Ot.assetName&&this.wu(p.Ot.assetName),p.Ot.viewerId&&this.Ou(p.Ot.viewerId),(p.Ot.applicationName||p.Ot.playerName)&&this.Du(p.Ot.applicationName||p.Ot.playerName),w.Ht(p.Ot.custom)>0&&this.Pu(p.Ot.custom)},this.Lc=function(){var t={};if(this.Cs()||(p.Ot.assetName?t[m.Wr]=p.Ot.assetName:p.g.warning("enqueueEventForContentMetadata(): assetName was not set."),p.Ot.applicationName?t[m.qr]=p.Ot.applicationName:p.g.warning("enqueueEventForContentMetadata(): applicationName was not set."),p.Ot.streamUrl?t[m.ha]=p.Ot.streamUrl:p.g.warning("enqueueEventForContentMetadata(): streamUrl was not set."),p.Ot.viewerId?t[m.jr]=p.Ot.viewerId:p.g.warning("enqueueEventForContentMetadata(): viewerId was not set."),p.Ot.defaultResource?t[m.ra]=p.Ot.defaultResource:p.g.warning("enqueueEventForContentMetadata(): defaultResource was not set."),p.Ot.duration>-1?t[m.na]=p.Ot.duration:p.g.warning("enqueueEventForContentMetadata(): duration was not set."),p.Ot.encodedFrameRate>-1?t[m.ia]=p.Ot.encodedFrameRate:p.g.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),p.Ot.streamType!==f.StreamType.UNKNOWN?p.Ot.streamType===f.StreamType.LIVE?t[m.Vr]=!0:t[m.Vr]=!1:p.g.warning("enqueueEventForContentMetadata(): streamType was not set.")),w.Ht(p.Ot.custom)>0)for(var n in t[m.Yr]={},p.Ot.custom)t[m.Yr][n]=p.Ot.custom[n];else this.Cs()||p.g.warning("enqueueEventForContentMetadata(): custom tags were not set.");w.Ht(t)>0&&this.Jc(t,null)},this.Uc=function(){p.Ot&&w.Pt(p.Ot.assetName)||p.g.warning("Missing assetName during session creation"),p.Ot&&w.Pt(p.Ot.defaultResource)||p.g.warning("Missing resource during session creation"),p.Ot&&w.Pt(p.Ot.streamUrl)||p.g.warning("Missing streamUrl during session creation"),(!p.Ot||p.Ot.encodedFrameRate<=0)&&p.g.warning("Missing encodedFrameRate during session creation"),p.Ot&&w.Pt(p.Ot.viewerId)||p.g.warning("Missing viewerId during session creation"),p.Ot&&p.Ot.streamType&&f.StreamType.UNKNOWN!==p.Ot.streamType||p.g.warning("Missing streamType during session creation"),p.Ot&&w.Pt(p.Ot.applicationName)||p.g.warning("Missing applicationName during session creation"),(!p.Ot||p.Ot.duration<=0)&&p.g.warning("Missing duration during session creation")},this.zt=function(t,n){p.$h||(p.$h={}),p.$h[t]=n},this.Vc=function(){var t={};p.ae.L&&(t[m.va]=p.ae.L,p.L=p.ae.L),p.ae.V&&(t[m.Ea]=p.ae.V,p.V=p.ae.V),w.Ht(t)>0&&this.Jc(t,null)}}).Oh=m.ou.Rt+m.ou.au+m.ou.uu,N.Tt={Rt:"Video",ru:"Global",Dt:"Ad"},($=V.Session=function(){var e=this;e.Ne=null,e.N=0,e.Oc=N.Tt.Rt,e.$f=!1,e.ic=!1,e.tl=!1,e.nl=null,e.he=null,e.il=null,e.el=!1,e.sl=S.PlayerState.NOT_MONITORED,e.ol=!1,e.rl=!1,e.al=!1,e.ul=!1,e.hl=!1,function(t,n,i,e,s,o,r){this.N=t,this.Oc=n,this.Cc=i,this.fl=e,this.Nt=s,this.C=o,this.g=r,this.g.setModuleName("Session"),this.g.ni(w.wt(this.N))}.apply(e,arguments),this.Nc=function(t,n){e.Nt.Nc(this),t&&e.Ut(t),e.Cc.ll()?e.dl(n):e.Cc.vl(function(){e.dl(n)})},this.cleanup=function(){e.g.info("cleanup()"+e.Dc()),e.$f=!0,e.Nt.Pc(),e.Cc.ll()?e.El():e.Cc.vl(function(){e.El()})},this.pl=function(){e.g.debug("cleanupAll()"+e.Dc()),(e.ps()||e.wc())&&e.Ne&&e.Al(),e.g.ni(null),e.g=null,e.C=null,e.ae=null,e.Cc=null,e.fl=null,e.Nt._t(),e.Nt=null,e.ic=!0},this.El=function(){e.Nt.kc(),e.pl()},this.dl=function(t){e.Nt.bc(),e.gl(),t?(e.bt(t.Wo(),t.xo()),e.Nt.Ke(S.PlayerState.STOPPED),e.Nt.kc(),e.pl()):e.Nt.Gc()},this.gl=function(){e.g.debug("setStatesFromSystemMetadata()");var t=e.fl.get(),n=t[L.BROWSER_NAME],n=(n&&e.Nt.Ju(n),t[L.BROWSER_VERSION]),n=(n&&e.Nt.Xu(n),t[L.DEVICE_BRAND]),n=(n&&e.Nt.Qu(n),t[L.DEVICE_MANUFACTURER]),n=(n&&e.Nt.zu(n),t[L.DEVICE_MODEL]),n=(n&&e.Nt.Zu(n),t[L.DEVICE_TYPE]),n=(n&&e.Nt.$u(n),t[L.DEVICE_VERSION]),n=(n&&e.Nt.th(n),t[L.FRAMEWORK_NAME]),n=(n&&e.Nt.nh(n),t[L.FRAMEWORK_VERSION]),n=(n&&e.Nt.ih(n),t[L.OPERATING_SYSTEM_NAME]),n=(n&&e.Nt.eh(n),t[L.OPERATING_SYSTEM_VERSION]),n=(n&&e.Nt.sh(n),t[L.DEVICE_CATEGORY]),n=(n&&e.Nt.oh(n),t[L.SCREEN_WIDTH]),n=(n&&e.Nt.rh(n),t[L.SCREEN_HEIGHT]),n=(n&&e.Nt.ah(n),t[L.SCALE_FACTOR]);n&&e.Nt.uh(n)},this.ai=function(t){e.g.debug("onPlayerStateChange(): "+t),e.Nt.Pn!==t&&(e.Nt.Pn===S.PlayerState.NOT_MONITORED&&t!==S.PlayerState.NOT_MONITORED&&(e.sl=t),e.el?e.g.debug("onPlayerStateChange(): "+t+" (pooled, "+(e.tl?"ad playing":"preloading")+")"):e.Nt.Ke(t))},this.ui=function(t){e.g.debug("onBitrateChange(): "+t),e.ol?e.g.info("onBitrateChange(): ignored"):e.Nt.Xc(t)},this.hi=function(t){e.g.debug("onAvgBitrateChange(): "+t),e.ol?e.g.info("onAvgBitrateChange(): ignored"):e.Nt.zc(t)},this.Ai=function(t){e.g.debug("onDroppedFramesTotalChange(): "+t),e.rl?e.g.info("onDroppedFramesTotalChange(): ignored"):e.Nt.hh(t)},this.gi=function(t){e.g.debug("onDroppedFramesCountChange(): "+t),e.rl?e.g.info("onDroppedFramesCountChange(): ignored"):e.Nt.vo(t)},this.ci=function(t,n){w.It(n)||(e.g.warning("onSeekEvent(): Ignored non-integer seekToPosition data: "+n),n=-1),e.Nt.If(t,n)},this.Wn=function(t){e.g.debug("onEncodedFrameRateChange(): "+t),t>0?e.ul?e.g.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+t+" (ads)"):(e.Nt.ju(t),e.g.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+t)):e.g.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+t)},this.Yn=function(t){e.g.debug("onContentLengthChange(): "+t),t>0?e.ul?e.g.info("setContentLength(): Ignored content length data: "+t+" (ads)"):(e.Nt.Bu(t),e.g.info("setContentLength(): Received content length data: "+t)):e.g.warning("setContentLength(): Ignored invalid content length data: "+t)},this.Jn=function(t){e.g.debug("onStreamUrlChange(): "+t),e.Nt.dh(t)},this.fi=function(t){e.g.debug("onStreamResolutionWidthChange(): "+t),e.Nt.sf(t)},this.li=function(t){e.g.debug("onStreamResolutionHeightChange(): "+t),e.Nt.af(t)},this.nt=function(t){e.g.debug("onConnectionTypeChange(): "+t),e.Nt.Ah(t)},this.et=function(t){e.g.debug("onLinkEncryptionChange(): "+t),e.Nt.gh(t)},this.Zn=function(t){e.g.debug("onPlayerTypeChange(): "+t),e.Nt.Ts()||e.Nt.nh(t)},this.ti=function(t){e.g.debug("onPlayerVersionChange(): "+t),e.Nt.Is()||e.Nt.ih(t)},this.vi=function(t){e.g.debug("onCDNServerIPChange(): "+t),e.Nt.Rh(t)},this.di=function(t,n){e.g.debug("onError(): "+t+" ("+n+")"),e.bt(t,n)},this.Gn=function(){e.g.debug("onRelease()"),e.Al()},this.Wt=function(t,n,i){e.g.debug("adStart(): adStream="+t+" adPlayer="+n+" adPosition="+i),e.tl?e.g.warning("adStart(): multiple _adStart calls, ignoring"):(e.tl=!0,e.nl=t,e.he=n,e.il=i,e.Nt.lf(!0),e.nl===h.AdStream.CONTENT||e.he===h.AdPlayer.SEPARATE?(e.Nt.Pn!==S.PlayerState.NOT_MONITORED&&(e.sl=e.Nt.Pn),e.Nt.Ke(S.PlayerState.NOT_MONITORED),e.el=!0):e.nl===h.AdStream.SEPARATE&&e.he===h.AdPlayer.CONTENT&&(e.Nt.Pn!==S.PlayerState.NOT_MONITORED&&(e.sl=e.Nt.Pn),e.Nt.Ke(S.PlayerState.NOT_MONITORED),e.el=!0,e.ol=!0,e.rl=!0,e.ul=!0,e.al=!0))},this.xt=function(){e.g.debug("adEnd()"),e.tl?(e.Nt.lf(!1),e.nl===h.AdStream.CONTENT||e.he===h.AdPlayer.SEPARATE?e.yl||(e.el=!1,e.Nt.Ke(e.sl)):e.nl===h.AdStream.SEPARATE&&e.he===h.AdPlayer.CONTENT&&(e.ol=!1,e.rl=!1,e.ul=!1,e.al=!1,e.hl=!1,e.yl||(e.el=!1,e.Nt.Ke(e.sl))),e.tl=!1,e.nl=e.he=e.il=null):e.g.warning("adEnd(): called before _adStart, ignoring")},this.Lt=function(){e.g.debug("detachPlayer()"),e.Ne?e.Ne&&(e.C.F("Session.detachPlayer",function(){e.Ne.jn()}),e.Ne=null,e.Nt._f(null),e.Nt.Ke(S.PlayerState.NOT_MONITORED)):e.g.error("detachPlayer(): called before attachPlayer, ignoring")},this.Al=function(){e.Ne&&(e.C.F("Session.releasePlayerStateManager",function(){e.Ne.jn()}),e.Ne=null,e.Nt._f(null),e.Nt.Ke(S.PlayerState.NOT_MONITORED))},this.Vt=function(){e.g.debug("offFocus()"),e.Nt.lf(!0),e.Nt.Pn!==S.PlayerState.NOT_MONITORED&&(e.sl=e.Nt.Pn),e.Nt.Ke(S.PlayerState.NOT_MONITORED),e.el=!0},this.Ut=function(t){e.g.debug("attachPlayer()"),e.Ne?e.g.error("attachPlayer(): detach current PlayerStateManager first"):t instanceof S?e.C.F("Session.attachPlayer()",function(){t.setMonitoringNotifier(e,e.N)?(t.ii(),e.Ne=t,e.Nt._f(e.Ne)):e.g.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")}):e.g.error("attachPlayer(): Incorrect PlayerStateManager instance")},this.kt=function(){e.g.debug("onFocus()"),e.Nt.lf(!1),e.ol=!1,e.rl=!1,e.ul=!1,e.al=!1,e.hl=!1,e.yl||(e.el=!1,e.sl!==S.PlayerState.NOT_MONITORED&&e.Nt.Ke(e.sl))},this.Yt=function(){return e.g.debug("getPlayerStateManager()"),e.Ne},this.Ft=function(){e.g.debug("contentPreload()"),e.yl?e.g.debug("contentPreload(): called twice, ignoring"):(e.yl=!0,e.el=!0)},this.Bt=function(){e.g.debug("contentStart()"),e.yl?(e.yl=!1,e.tl||(e.el=!1,e.sl!==S.PlayerState.NOT_MONITORED&&e.Nt.Ke(e.sl))):e.g.warning("contentStart(): called without _contentPreload, ignoring")},this.bt=function(t,n){e.g.info("reportError(): "+t),w.Pt(t)?n!==h.ErrorSeverity.FATAL&&n!==h.ErrorSeverity.WARNING?e.g.error("reportError(): invalid error severity: "+n):e.hl?e.g.debug("reportError(): ignored"):(n=n===h.ErrorSeverity.FATAL,e.Nt.vf(t,n)):e.g.error("reportError(): invalid error message string: "+t)},this.Mt=function(t){e.C.F("Session.updateContentMetadata",function(){e.Nt.Mt(t)})},this.jt=function(t,n){e.g.info("sendEvent(): eventName="+t+e.Dc()),e.Nt.Cf(t,n)},this.Cs=function(){return e.Oc===N.Tt.ru},this.ps=function(){return e.Oc===N.Tt.Rt},this.wc=function(){return e.Oc===N.Tt.Dt},this.Dc=function(){return e.Cs()?" (global session)":""},this.Xt=function(){return this.N},this.Qt=function(){var t=null;return t=e.Cc.ll()?e.Cc.get(O.B):t},this.zt=function(t,n){e.Nt.zt(t,n)}}).zf="received no response (or a bad response) to heartbeat POST request",tt=V.SessionFactory=function(){var o=this;o.g=null,o.Di=null,o._l=0,o.Sl=null,function(t,n,i,e){o.ae=t,o.Oi=n,o.Cc=i,o.S=e,o.g=o.S.buildLogger(),o.g.setModuleName("SessionFactory"),o._l=0,o.Sl={}}.apply(o,arguments),this._t=function(){for(var t in o.g=null,o.Di=null,o.Sl)o.Sl[t].cleanup();o.Sl=null,o._l=0},this.Rl=function(){var t=o._l;return o._l++,t},this.St=function(t,n,i,e,s){return t||(t=new f),o.Tl(t,n,i,e,s)},this.q=function(t){return o.Tl(t,N.Tt.ru,void 0,_.version)},this.Il=function(){return P.Cl()},this.Tl=function(t,n,i,e,s){n=o.S.ji(o.ae,o.Oi,o.Cc,o.Il(),n,t.ct(),e),t=o.Rl();return"undefined"!==typeof s&&"undefined"!==typeof s.error?n.Nc(i,s.error):(o.ml(t,n),n.Nc(i)),t},this.Gt=function(t){t=o.Sl[t];return t||o.g.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t},this.Ct=function(t){t=this.Gt(t);return!t||t.ps()||t.wc()||(o.g.error("Client: invalid Video sessionKey. Did you cleanup that session previously?"),t=null),t},this.ml=function(t,n){o.Sl[t]=n},this.Nl=function(t){delete o.Sl[t]},this.qt=function(t){var n=o.Gt(t);o.Nl(t),n.cleanup()},this.tt=function(){return o.Sl}},nt=V.Ol=function(t){this.ue=t,this.wl=function(i,t,n){var e=!1;this.ue.createOnce(function(){e||i(!(e=!0),n+" ("+t+" ms)")},t,"CallbackWithTimeout.wrap");return function(t,n){e||(e=!0,i(t,n))}}},(O=V.Config=function(t,n,i){var e=this;this.g=t,this.g.setModuleName("Config"),this.Pl=n,this.bl=i,this.Ml={clientId:m.H,iid:m.hr,sendLogs:!1,maxHbInfos:m.lr},this.m=w.Kf(this.Ml),this.Ll=!1,this.Vl=!1,this.Ul=[],this.ll=function(){return this.Ll},this.Et=function(){this.Pl.Et(O.Dl,function(t,n){t?(e.kl(n),e.g.debug("load): configuration successfully loaded from local storage"+(e.Vl?" (was empty)":"")+".")):e.g.error("load): error loading configuration from local storage: "+n),e.Ll=!0,e.Fl()})},this.kl=function(t){var n,t=this.bl.lu(t);t?t&&(n=t[O.Bl],t=t[O.At],n&&n!==m.H&&""!==n&&"null"!==n&&(this.m[O.B]=n,this.g.debug("parse(): loaded clientId="+n+" (from local storage)")),t!==m.hr)&&""!==t&&"null"!==t&&(this.m[O.At]=t,this.g.debug("parse(): loaded iid="+t+" (from local storage)")):this.Vl=!0},this.Hl=function(){var t={};return t[O.Bl]=this.m.clientId,this.g.debug("marshall(): saving clientId="+this.m.clientId+" (to local storage)"),this.bl.fu(t)},this.Jf=function(){this.Pl.Jf(O.Dl,this.Hl(),function(t,n){t?e.g.debug("save(): configuration successfully saved to local storage."):e.g.error("save(): error saving configuration to local storage: "+n)})},this.vl=function(t){this.ll()?t():this.Ul.push(t)},this.get=function(t){return this.Ll?this.m[t]:null},this.set=function(t,n){this.Ll&&(this.m[t]=n)},this.Fl=function(){for(var t;"undefined"!==typeof(t=this.Ul.shift());)t()},this.getClientId=function(){return this.m.clientId},this.getIid=function(){return this.m.iid}}).Dl="sdkConfig",O.Bl="clId",O.At="iid",O.B="clientId",O.Vf="sendLogs",O.Pf="maxHbInfos",O.Ff="c3.fp.",O.$t={Bf:"0",Kl:"1",tn:"2",Zt:"3",Hf:"4",en:"5",nn:"6"},it=V.EventQueue=function(){this.Gl=[],this.jl=0,this.yf=function(t){this.Gl.push(t)},this.Af=function(){var t=this.jl;return this.jl++,t},this.mc=function(){var t=this.Gl;return this.Gl=[],t}},et=V.ExceptionCatcher=function(t,n,i){this.g=t,this.g.setModuleName("ExceptionCatcher"),this.Wl=n,this.I=i,this.F=function(n,t,i){try{t()}catch(t){if(i)i(t);else{if(this.I.allowUncaughtExceptions)throw t;this.xl(n,t)}}},this.xl=function(t,n){t="Uncaught exception: "+t+": "+n.toString();if(this.Wl)try{this.Wl.qf(t)}catch(t){this.g.error("Caught exception while sending ping: "+t.toString())}this.g.error(t)}},st=V.GatewayControl=function(t,n,i,e,s){var o=this;this.Oi=t,this.g=n,this.g.setModuleName("GatewayControl"),this.ql=i,this.bl=e,this.Yl=s,this.qf=function(t,e){var n=(this.Yl?this.Yl.indexOf("ipv4")>-1?this.Oi.K:this.Oi.Y:this.Oi.gatewayUrl)+m.ur;this.ql.Jl("POST",n,this.bl.fu(t),"application/json",function(t,n){var i;t?(i=o.bl.lu(n),e(t,i)):e(t,n)})}},w=V.Lang={Xl:function(t){return w.Pt(t)&&t&&"undefined"!==t&&"null"!==t},Kt:function(t){var n,i,e={};for(n in t)w.Xl(n)&&(i=t[n],w.Xl(i))&&(e[n]=i);return e},xn:function(t,n,i){if(!t)throw new Error("Expected "+i+" implementation is null.");for(var e in n)if("function"!==typeof t[e])throw new Error("Expected method "+e+" in "+i+" implementation.")},Ht:function(t){var n,i=0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&i++;return i},wt:function(t){return""+t},Ql:function(t){return Math.floor(t)},fn:function(t){return Math.abs(w.Ql(t))},zl:function(t){return Boolean(t)},Pt:function(t){return"string"===typeof t&&""!==t},Qf:function(t,n){return"string"===typeof t&&"string"===typeof n&&"function"===typeof t.indexOf&&0===t.indexOf(n)},Ji:function(t){return"boolean"===typeof t},Zl:function(t){return escape(t)},du:function(t){return"object"===typeof t},if:function(t){var n,i="";for(n in t)i+=n+"="+t[n];return"Object{"+i+"}"},$l:function(t){var n,i=w.Kf(t);for(n in i)i[n]||delete i[n];return i},Kf:function(t){var n,i={};for(n in t)i[n]=t[n];return i},nf:function(t,n){if(typeof t!==typeof n)return!1;if(t instanceof Object&&n instanceof Object){if(w.Ht(t)!==w.Ht(n))return!1;for(var i in t)if(!(t[i]===n[i]))return!1;return!0}return t===n},Co:function(){for(var t={},n=0;n<arguments.length;n++)for(var i in arguments[n])arguments[n][i]&&(t[i]=arguments[n][i]);return t},It:function(t){return"number"===typeof t&&Math.round(t)===t},td:function(t){return"[object Array]"===Object.prototype.toString.call(t)},nd:function(t,n){if(t!==n){if(!t||!n)return!1;if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(w.td(t[i])&&w.td(n[i])){if(!w.nd(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1}return!0},ed:function(){return"undefined"!==typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()},rn:function(t,n,i){if(w.ed())Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:i});else{if("undefined"===typeof t.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");t.__defineGetter__(n,i)}},un:function(t,n,i){if(w.ed())Object.defineProperty(t,n,{configurable:!0,set:i});else{if("undefined"===typeof t.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");t.__defineSetter__(n,i)}}},(T={two32:4294967296}).sd=T.two32-1,T.od=0,w.rd=T,w.rd.Cast=function(t){t=parseInt(t,10);return t>T.sd?t=t%T.two32:t<T.od&&(t=T.two32-(t=-t%T.two32)),t},w.rd.ad=function(t){t=parseInt(t,10);return t<=T.sd&&t>=T.od},I={sd:2147483647,od:-2147483648},w.xf=I,w.xf.Cast=function(t){t=parseInt(t,10);return t>I.sd?t=t%I.sd:t<I.od&&(t=I.sd-(t=-t%I.sd)),t},w.xf.ad=function(t){t=parseInt(t,10);return t<=I.sd&&t>=I.od},w.jo=function(){return window&&window.location&&window.location.search?window.location.search:""},w.ud=function(){return document&&document.referrer?document.referrer:""},ot=V.LogBuffer=function(){this.hd=[],this.Zo=function(t){this.hd.length>=32&&this.hd.shift(),this.hd.push(t)},this.mc=function(){var t=this.hd;return this.hd=[],t}},(D=V.Ping=function(t,n,i,e){this.ld=!1,this.dd=null,this.g=t,this.g.setModuleName("Ping"),this.ql=n,this.Oi=i,this.wi=e,this.qf=function(t){this.ld||(this.ld=!0,t=this.vd()+"&d="+w.Zl(t.toString()),this.g.error("send(): "+t),this.ql.Jl("GET",t,null,null,null),this.ld=!1)},this.vd=function(){if(!this.dd){var t=D.Ed+"?comp="+D.fd+"&clv="+(this.wi||h.version);if(this.Oi&&(t+="&cid="+this.Oi.customerKey),t+="&sch="+m.pr,!this.Oi)return t;this.dd=t}return this.dd}}).fd="sdkjs",D.Ed="https://pings.conviva.com/ping.ping",P=V.pd={Ad:4294967295,gd:2147483647,yd:-2147483648,Cl:function(){return Math.floor(Math.random()*P.Ad)+P.yd},gt:function(){return Math.floor(Math.random()*P.Ad)}},b=V._d={gf:function(t,n,i,e){return isNaN(t)||"number"!==typeof t||t===e?e:(e=w.Ql(t),b.Sd(e,n,i))},Sd:function(t,n,i){return w.It(i)&&t>i?t=i:w.It(n)&&t<n&&(t=n),t},Cn:function(t){return t=-1!==t&&-2!==t?b.gf(t,0,null,-1):t}},M=V.StreamerError=function(){var i=this;i.errorCode=null,i.severity=h.ErrorSeverity.FATAL,function(t,n){i.errorCode=t,i.severity=n}.apply(i,arguments),this.Wo=function(){return i.errorCode},this.xo=function(){return i.severity}},rt=V.HttpClient=function(t,n,i,e){this.g=t,this.g.setModuleName("HttpClient"),this.Ri=n,this.Rd=i,this.I=e,this.Jl=function(t,n,i,e,s){var o=1e3*this.I.httpTimeout,r=null;s&&(r=this.Rd.wl(s,o,"HTTP timeout")),this.g.debug("request(): calling HttpInterface.makeRequest"),this.Ri.makeRequest(t,n,i,e,o,r)}},(at=V.Logger=function(t,n,i,e,s){this.Ci=t,this._i=n,this.T=i,this.Di=e,this.Ni=s,this.debug=function(t){this.log(t,u.LogLevel.DEBUG)},this.info=function(t){this.log(t,u.LogLevel.INFO)},this.warning=function(t){this.log(t,u.LogLevel.WARNING)},this.error=function(t){this.log(t,u.LogLevel.ERROR)},this.log=function(t,n){t=this.Id(t,n);this.Di.Zo(t),this.T.logLevel<=n&&this.Ci.consoleLog(t,n)},this.Cd=function(t){return"["+this.Un+"] "+t},this.md=function(t){return"["+this.Ni+"] "+t},this.Nd=function(t){return"[Conviva] "+t},this.Od=function(t){return"["+(this._i.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+t},this.wd=function(t,n){return"["+at.Td(n)+"] "+t},this.Dd=function(t){return t=this.Pd?"sid="+this.Pd+" "+t:t},this.ni=function(t){this.Pd=t},this.setModuleName=function(t){this.Un=t},this.Id=function(t,n){return this.Nd(this.Od(this.wd(this.md(this.Cd(this.Dd(t))),n)))}}).Td=function(t){var n;switch(t){case u.LogLevel.ERROR:n="ERROR";break;case u.LogLevel.WARNING:n="WARNING";break;case u.LogLevel.INFO:n="INFO";break;case u.LogLevel.DEBUG:n="DEBUG"}return n},V.Storage=function(t,n,i,e){this.g=t,this.g.setModuleName("Storage"),this.Ti=n,this.Rd=i,this.I=e,this.Et=function(t,n){n=this.Rd.wl(n,1e3*this.I.storageTimeout,"storage load timeout");this.g.debug("load): calling StorageInterface.loadData"),this.Ti.loadData(V.Storage.bd,t,n)},this.Jf=function(t,n,i){i=this.Rd.wl(i,1e3*this.I.storageTimeout,"storage save timeout");this.g.debug("save(): calling StorageInterface.saveData"),this.Ti.saveData(V.Storage.bd,t,n,i)}},V.Storage.bd="Conviva",(L=V.SystemMetadata=function(t,n,i){this.g=t,this.g.setModuleName("SystemMetadata"),this.Ii=n,this.C=i,this.Md=null,this.get=function(){return this.Md||this.retrieve(),this.Md},this.retrieve=function(){var t,n={},e=(n[L.BROWSER_NAME]=this.Ii.getBrowserName,n[L.BROWSER_VERSION]=this.Ii.getBrowserVersion,n[L.DEVICE_BRAND]=this.Ii.getDeviceBrand,n[L.DEVICE_MANUFACTURER]=this.Ii.getDeviceManufacturer,n[L.DEVICE_MODEL]=this.Ii.getDeviceModel,n[L.DEVICE_TYPE]=this.Ii.getDeviceType,n[L.DEVICE_VERSION]=this.Ii.getDeviceVersion,n[L.FRAMEWORK_NAME]=this.Ii.getFrameworkName,n[L.FRAMEWORK_VERSION]=this.Ii.getFrameworkVersion,n[L.OPERATING_SYSTEM_NAME]=this.Ii.getOperatingSystemName,n[L.OPERATING_SYSTEM_VERSION]=this.Ii.getOperatingSystemVersion,n[L.DEVICE_CATEGORY]=this.Ii.getDeviceCategory,n[L.SCREEN_WIDTH]=this.Ii.getScreenWidth,n[L.SCREEN_HEIGHT]=this.Ii.getScreenHeight,n[L.SCALE_FACTOR]=this.Ii.getScaleFactor,this);for(t in this.g.debug("retrieve(): calling MetadataInterface methods"),n)!function(n,i){e.C.F("Session.getSystemMetadataSchema(): "+n,function(){var t=i[n];i[n]=t.call(e.Ii)})}(t,n),w.Pt(n[t])||delete n[t];var i=!1;if("undefined"!==typeof n[L.DEVICE_TYPE]){for(var s in h.DeviceType)if(n[L.DEVICE_TYPE]===h.DeviceType[s]){i=!0;break}i||delete n[L.DEVICE_TYPE]}if(i=!1,"undefined"!==typeof n[L.DEVICE_CATEGORY]){for(var o in h.DeviceCategory)if(n[L.DEVICE_CATEGORY]===h.DeviceCategory[o]){i=!0;break}i||delete n[L.DEVICE_CATEGORY]}this.Md=w.$l(n)}}).BROWSER_NAME="browserName",L.BROWSER_VERSION="browserVersion",L.DEVICE_BRAND="deviceBrand",L.DEVICE_MANUFACTURER="deviceManufacturer",L.DEVICE_MODEL="deviceModel",L.DEVICE_TYPE="deviceType",L.DEVICE_VERSION="deviceVersion",L.FRAMEWORK_NAME="frameworkName",L.FRAMEWORK_VERSION="frameworkVersion",L.OPERATING_SYSTEM_NAME="operatingSystemName",L.OPERATING_SYSTEM_VERSION="operatingSystemVersion",L.DEVICE_CATEGORY="deviceCategory",L.SCREEN_WIDTH="screenWidth",L.SCREEN_HEIGHT="screenHeight",L.SCALE_FACTOR="scaleFactor",ut=V.Time=function(t,n){this._i=t,this.g=n,this.g.setModuleName("Time"),this.current=function(){var t=this._i.getEpochTimeMs();return w.It(t)||this.g.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+t+")"),t}},ht=V.Timer=function(t,n,i){var s=this;this.g=t,this.g.setModuleName("Timer"),this.Si=n,this.C=i,this.create=function(t,n,i){return this.createTimer(function(){s.C.F(i,function(){t()})},n,i)},this.createOnce=function(t,n,i){var e={cancel:null};return e.cancel=this.createTimer(function(){s.C.F(i,function(){e&&"function"===typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),t()})},n,i),e.cancel},this.createTimer=function(t,n,i){return this.g.debug("createTimer(): calling TimerInterface.create"),this.Si.createTimer(t,n,i)}}}(),lt});