/*! (C) 2025 Conviva, Inc. All rights reserved. Confidential and proprietary. */
!function(t,n){"function"===typeof define&&define.amd?define(n):("object"===typeof exports||"object"===typeof module&&module.exports)&&(module.exports=n()),"undefined"===typeof t||!t||t.Conviva||t.ConvivaLoading||(t.ConvivaLoading=!0,t.Conviva=n(),delete t.ConvivaLoading)}(this,function(){var lt={};return function(){"use strict";var n,s,U,k,o,r,F,e,a,I,h,c,f,T,B,H,G,K,j,q,W,x,u,i,l,Y,m,X,J,d,v,E,p,A,Q,g,y,S,_,R,C,z,Z,N,$,tt,nt,O,it,et,st,w,ot,D,P,b,L,rt,at,M,ut,ht,V={};function ct(){var t,n="";for("-"===s&&r(n="-");s>="0"&&s<="9";)n+=s,r();if("."===s)for(n+=".";r()&&s>="0"&&s<="9";)n+=s;if("e"===s||"E"===s)for(n+=s,r(),"-"!==s&&"+"!==s||(n+=s,r());s>="0"&&s<="9";)n+=s,r();if(t=+n,!isNaN(t))return t;o("Bad number")}function t(t){return t<10?"0"+t:t}function ft(t){return E.lastIndex=0,E.test(t)?'"'+t.replace(E,function(t){var n=Q[t];return"string"===typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}I=lt.Constants={version:"4.7.13",CUSTOMER_KEY:"customerKey",GATEWAY_URL:"gatewayUrl",LOG_LEVEL:"logLevel",ASSET_NAME:"Conviva.assetName",PLAYER_NAME:"Conviva.applicationName",APPLICATION_VERSION:"c3.app.version",IS_LIVE:"Conviva.streamType",ENCODED_FRAMERATE:"Conviva.encodedFrameRate",DEFAULT_RESOURCE:"Conviva.defaultResource",STREAM_URL:"Conviva.streamUrl",VIEWER_ID:"Conviva.viewerId",DURATION:"Conviva.duration",UTM_TRACKING_URL:"c3.cm.utmTrackingUrl",POD_INDEX:"podIndex",POD_POSITION:"podPosition",POD_DURATION:"podDuration",AD_TYPE:"adType",MODULE_NAME:"Conviva.moduleName",MODULE_VERSION:"Conviva.moduleVersion",FRAMEWORK_NAME:"Conviva.frameworkName",FRAMEWORK_VERSION:"Conviva.frameworkVersion",i:"Constants not yet configured",o:"Invalid : Did you report playback ended?",u:"Invalid : Did you report ad playback ended?",h:"Player cannot be null",l:"PlaybackAnlytics already built",v:"PlaybackAnlytics not yet built",Playback:{BITRATE:"BITRATE",AVG_BITRATE:"AVG_BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT",AUDIO_LANGUAGE:"AUDIO_LANGUAGE",SUBTITLES_LANGUAGE:"SUBTITLES_LANGUAGE",CLOSED_CAPTIONS_LANGUAGE:"CLOSED_CAPTIONS_LANGUAGE"},Network:{SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},ErrorSeverity:{FATAL:1,WARNING:0},NO_SESSION_KEY:-2,AdPosition:{PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},AdPlayer:{CONTENT:"CONTENT",SEPARATE:"SEPARATE"},DeviceType:{DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV",VEHICLE:"Vehicle",OTHER:"Other"},AdType:{CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},AdSlates:{BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},AdServingType:{INLINE:"Inline",WRAPPER:"Wrapper"},DeviceCategory:{ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS",LINUX:"LNX"},LogLevel:{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},PlayerState:{STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},Events:{USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},ErrorType:{ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},StreamType:{UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},CallbackFunctions:{CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer",GENERATE_HASH:"generateHash",BASE64_ENCODE:"base64Encode"},DeviceMetadata:{BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},AD_PRELOAD_FEATURE:"adPreloading",AD_TAG_URL:"adTagUrl",IMASDK_CONTENT_PLAYER:"imaMainContentPlayer",CONVIVA_AD_MODULE:"convivaAdModule",CONVIVA_MODULE:"convivaModule",MEDIA_ELEMENT:"mediaElement",APP_TRACKER_EVENT:{TYPE:"convivaVideoEvent",INIT:"c3.sdk.init",VIDEO_ATTEMPT:"c3.video.attempt",VIDEO_END:"c3.video.end",VIDEO_PLAY:"c3.video.play",VIDEO_PAUSE:"c3.video.pause",VIDEO_BUFFERING:"c3.video.buffering",VIDEO_ERROR:"c3.video.error",SDK_CUSTOM_EVENT:"c3.sdk.custom_event",VIDEO_CUSTOM_EVENT:"c3.video.custom_event",AD_BREAK_START:"c3.ad.ad_break_start",AD_BREAK_END:"c3.ad.ad_break_end",VIDEO_METADATA_CHANGE:"c3.video.set_content_info",VIDEO_BITRATE_SWITCH:"c3.video.bitrate_switch"}},(h=lt.Client=function(){var u=this;this.p=null,this.A=!1,this.version=h.version,this.g=null,this.S=null,this._=null,this.R=-1,this.C=null,this.I=null,this.T=null,this.m=null,this.N=-1,this.O=!1,this.D={},this.P=function(){u.g&&arguments.length>0&&u.g.info(" Client:: uniqueIdentifierCallback(): "+arguments[0])},this.L={},this.M=null,this.V=null,this.U=null,this.k=function(){this.T.F("Client.makeIPV4IPV6GlobalSessions",function(){var t;u.m&&null!==(t=u.m.get(O.B))&&t!==C.H&&u.S&&((t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.C.G.indexOf(c.K)>-1?c.K:c.j,u.q=u.S.W(t,null),(t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.C.Y.indexOf(c.X)>-1?c.X:c.J,u.Z=u.S.W(t,null))})},this.$=function(i){u.T.F("Client.updateConnectionType",function(){if(u.M=i,u.S){var t,n=u.S.tt();for(t in n)n[t].nt(i)}})},this.it=function(i){u.T.F("Client.updateLinkEncryption",function(){if(u.V=i,u.S){var t,n=u.S.tt();for(t in n)n[t].et(i)}})},this.ot=function(t){u.T.F("Client.updateSignalStrength",function(){u.U=t})},function(t,n,i,e){if(!(t instanceof c))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof x))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!==c.rt+c.ut&&t.gatewayUrl!==c.ht+c.ut||(this.A=!0),e&&(this.version=e),this.C=t.ct(),this._=n,this._.lt("SDK",this.C,this.version),this.T=this._.dt(this.version),this.T.F("Client.init",function(){if(u.m=u._.vt(),u.m.Et(),u.N=u.m.get(O.At),-1!==u.N&&void 0!==u.N&&null!==u.N||(u.N=P.gt()),u.g=u._.buildLogger(),u.g.setModuleName("Client"),u.A&&u.g.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),u.g.info("init(): url="+u.C.gatewayUrl+" customerKey="+u.C.customerKey),u.S=u._.yt(u,u.C,u.m),i)for(var t in i)switch(t){case I.Network.CONNECTION_TYPE:u.$(i[t]);break;case I.Network.LINK_ENCRYPTION:u.it(i[t]);break;case I.Network.SIGNAL_STRENGTH:u.ot(i[t])}u.k(),u.g.info("init(): done.")},function(t){throw new Error("Client constructor failed: "+t.message)})}.apply(this,arguments),this.release=function(){this.O||this.T.F("Client.release",function(){u.g&&(u.g.info("release()"),u.g=null),u.S.St(),u.S=null,u.R=-1,u.N=-1,u.T=null,u.C=null,u.I=null,u._=null,u.O=!0})},this.createSession=function(t,n,i){var e=h.NO_SESSION_KEY;return this.O||(!t||t instanceof f?this.T.F("Client.createSession",function(){e=u.S._t(t,N.Ct.Rt,n,(i?I:u).version)}):u.g.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),e},this.createAdSession=function(i,e,s,o,r){var a=h.NO_SESSION_KEY;return this.O||(!e||e instanceof f?this.T.F("Client.createAdSession",function(){var t,n;e||(e=new f),w.It(i)&&i!==h.NO_SESSION_KEY&&(t=u.S.Tt(i))&&(n=e.custom[I.APPLICATION_VERSION],t.Nt&&t.Nt.Ot&&(!e.viewerId&&t.Nt.Ot.viewerId&&(e.viewerId=t.Nt.Ot.viewerId),!e.applicationName&&t.Nt.Ot.applicationName&&(e.applicationName=t.Nt.Ot.applicationName),e.streamType===I.StreamType.UNKNOWN&&t.Nt.Ot.streamType!==I.StreamType.UNKNOWN&&(e.streamType=t.Nt.Ot.streamType),"undefined"!==typeof n&&n||"undefined"!==typeof(n=t.Nt.Ot.custom[I.APPLICATION_VERSION])&&n&&(e.custom[I.APPLICATION_VERSION]=n)),e.custom["c3.csid"]=w.wt(t.N)),a=u.S._t(e,N.Ct.Dt,s,(o?I:u).version,r)}):u.g.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),a},this.reportError=function(n,i,e){this.O||(w.Pt(i)?e!==h.ErrorSeverity.FATAL&&e!==h.ErrorSeverity.WARNING?this.g.error("reportError(): invalid error severity: "+e):this.T.F("Client.reportError",function(){var t=u.S.Tt(n);t&&t.bt(i,e)}):this.g.error("reportError(): invalid error message string: "+i))},this.updateContentMetadata=function(i,e){this.O||(e instanceof f?this.T.F("Client.updateContentMetadata",function(){var t,n=u.S.Tt(i);n&&(t=e.ct(),n.Lt(t))}):u.g.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter"))},this.detachPlayer=function(n){this.O||this.T.F("Client.detachPlayer",function(){var t=u.S.Tt(n);t&&t.Mt()})},this.Vt=function(n){this.O||this.T.F("Client.offFocus",function(){var t=u.S.Tt(n);t&&t.Vt()})},this.attachPlayer=function(n,i){this.O||(i instanceof T?this.T.F("Client.attachPlayer",function(){var t=u.S.Tt(n);t&&t.Ut(i)}):u.g.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter"))},this.kt=function(n){this.O||this.T.F("Client.onFocus",function(){var t=u.S.Tt(n);t&&t.kt()})},this.contentPreload=function(n){this.O||this.T.F("Client.contentPreload",function(){var t=u.S.Tt(n);t&&t.Ft()})},this.contentStart=function(n){this.O||this.T.F("Client.contentStart",function(){var t=u.S.Tt(n);t&&t.Bt()})},this.sendCustomEvent=function(i,e,s){this.O||(w.Pt(e)?(w.Ht(s)<=0&&u.g.warning("eventAttributes(): should have proper data."),this.T.F("Client.sendCustomEvent",function(){i===h.NO_SESSION_KEY&&(u.R<0&&(t=new f,u.R=u.S.W(t,null)),i=u.R);var t=w.Gt(s),n=u.S.Kt(i);n&&n.jt(e,t)})):u.g.error("sendCustomEvent(): eventName parameter must be a valid string."))},this.adStart=function(n,i,e,s){this.O||(i!==h.AdStream.CONTENT&&i!==h.AdStream.SEPARATE?this.g.error("adStart(): ignored, invalid value for adStream parameter: "+i):e!==h.AdPlayer.CONTENT&&e!==h.AdPlayer.SEPARATE?this.g.error("adStart(): ignored, invalid value for adPlayer parameter: "+e):(s!==h.AdPosition.PREROLL&&s!==h.AdPosition.MIDROLL&&s!==h.AdPosition.POSTROLL&&this.g.info("adStart(): ignored, invalid value for adPosition parameter: "+s),this.T.F("Client.adStart",function(){var t=u.S.Tt(n);t&&t.qt(i,e,s)})))},this.adEnd=function(n){this.O||this.T.F("Client.adEnd",function(){var t=u.S.Tt(n);t&&t.Wt()})},this.cleanupSession=function(t){this.O||(t===h.NO_SESSION_KEY?this.g.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):this.T.F("Client.cleanupSession",function(){u.S.Tt(t)&&u.S.xt(t)}))},this.getAttachedPlayer=function(n){var i=null;return this.O||(n===h.NO_SESSION_KEY?this.g.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this.T.F("Client.getAttachedPlayer",function(){var t=u.S.Tt(n);t&&(i=t.Yt())})),i},this.isPlayerAttached=function(t){return!this.O&&null!==this.getAttachedPlayer(t)},this.getPlayerStateManager=function(t){if(this.O)throw new Error("This instance of Conviva.Client has been released.");return new T(this._,(t?I:u).version)},this.releasePlayerStateManager=function(t){if(this.O)throw new Error("This instance of Conviva.Client has been released.");this.T.F("Client.releasePlayerStateManager",function(){t instanceof T&&t.release()})},this.Xt=function(){return this.C},this.getId=function(){return this.N},this.getSessionId=function(n){var i;return this.O?I.NO_SESSION_KEY:(i=null,this.T.F("Client.getSessionId",function(){var t=u.S.Tt(n);t&&(i=t.Jt())}),i)},this.getClientId=function(n){var i;return this.O?null:(i=null,this.T.F("Client.getClientId",function(){var t=u.S.Tt(n);t&&(i=t.Qt())}),i)},this.zt=function(n,i,e){this.O||this.T.F("Client.updateCustomMetric",function(){var t=u.S.Tt(n);t&&t.zt(i,e)})},this.setUniqueIdentifier=function(t,n){if(this.O)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)this.D[i]=t[i];n&&(this.P=n)},this.setUserPreferenceForDataCollection=function(t,n){if(this.O)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)"false"===t[i]?this.L[i]=n?O.$t.Zt:O.$t.tn:this.L[i]=O.$t.nn},this.setUserPreferenceForDataDeletion=function(t){if(this.O)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var n in t)"true"===t[n]?this.L[n]=O.$t.en:this.L[n]=O.$t.nn},this.getConfig=function(){if(this.O)throw new Error("This instance of Conviva.Client has been released.");return this.m}}).version="4.7.13L",h.NO_SESSION_KEY=I.NO_SESSION_KEY,h.AdPosition={PREROLL:I.AdPosition.PREROLL,MIDROLL:I.AdPosition.MIDROLL,POSTROLL:I.AdPosition.POSTROLL},h.AdStream={CONTENT:I.AdPlayer.CONTENT,SEPARATE:I.AdPlayer.SEPARATE},h.AdPlayer={CONTENT:I.AdPlayer.CONTENT,SEPARATE:I.AdPlayer.SEPARATE},h.ErrorSeverity={FATAL:I.ErrorSeverity.FATAL,WARNING:I.ErrorSeverity.WARNING},h.DeviceType={DESKTOP:I.DeviceType.DESKTOP,CONSOLE:I.DeviceType.CONSOLE,SETTOP:I.DeviceType.SETTOP,MOBILE:I.DeviceType.MOBILE,TABLET:I.DeviceType.TABLET,SMARTTV:I.DeviceType.SMARTTV,VEHICLE:I.DeviceType.VEHICLE,OTHER:I.DeviceType.OTHER},h.AdTechnology={CLIENT_SIDE:I.AdType.CLIENT_SIDE,SERVER_SIDE:I.AdType.SERVER_SIDE},h.AdType={BLACKOUT_SLATE:I.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:I.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:I.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:I.AdSlates.OTHER_SLATE,VPAID:I.AdSlates.VPAID,REGULAR:I.AdSlates.REGULAR},h.AdServingType={INLINE:I.AdServingType.INLINE,WRAPPER:I.AdServingType.WRAPPER},h.DeviceCategory={ANDROID_DEVICE:I.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:I.DeviceCategory.APPLE_DEVICE,CHROMECAST:I.DeviceCategory.CHROMECAST,DESKTOP_APP:I.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:I.DeviceCategory.DEVICE_SIMULATOR,LG_TV:I.DeviceCategory.LG_TV,NINTENDO:I.DeviceCategory.NINTENDO,PLAYSTATION:I.DeviceCategory.PLAYSTATION,ROKU:I.DeviceCategory.ROKU,SAMSUNG_TV:I.DeviceCategory.SAMSUNG_TV,SMART_TV:I.DeviceCategory.SMART_TV,SET_TOP_BOX:I.DeviceCategory.SET_TOP_BOX,TIVO:I.DeviceCategory.TIVO,WEB:I.DeviceCategory.WEB,WINDOWS_DEVICE:I.DeviceCategory.WINDOWS_DEVICE,XBOX:I.DeviceCategory.XBOX,KAIOS_DEVICE:I.DeviceCategory.KAIOS_DEVICE,LINUX:I.DeviceCategory.LINUX},(c=lt.ClientSettings=function(){var e=this;this.on=null,w.rn(this,"customerKey",function(){return this.on}),w.un(this,"customerKey",function(t){w.Pt(t)&&(this.on=t)}),this.hn=c.cn,w.rn(this,"heartbeatInterval",function(){return this.hn}),w.un(this,"heartbeatInterval",function(t){var n;"number"===typeof t&&(n=w.fn(t))===t&&(this.hn=n)}),this.ln=null,this.G=null,this.Y=null,w.rn(this,"gatewayUrl",function(){return this.ln}),w.un(this,"gatewayUrl",function(t){var n;!w.Pt(t)||"https"!==(n=t.split("://"))[0]&&"http"!==n[0]||-1===t.indexOf(".com",t.length-".com".length)||(this.ln=t)}),function(t){if(!w.Pt(t))throw new Error("customerKey must be valid");this.customerKey=t}.apply(this,arguments),this.equals=function(t){return this.customerKey===t.customerKey&&this.gatewayUrl===t.gatewayUrl&&this.heartbeatInterval===t.heartbeatInterval},this.ct=function(){var t=new c(this.customerKey);return t.gatewayUrl=function(t){if(w.Pt(t)){var n,i=t.split("://");if("https"===i[0]||"http"===i[0])return i[1]!==c.ut&&-1!==i[1].indexOf(c.ut)?(n=i[1].split(c.ut),e.G="https://"+n[0]+c.K,e.Y="https://"+n[0]+c.X):(e.G="https://ipv4."+i[1],e.Y="https://ipv6."+i[1]),t}return e.G="https://"+e.customerKey+"."+c.K,e.Y="https://"+e.customerKey+"."+c.X,"https://"+e.customerKey+"."+c.ut}(this.gatewayUrl),t.heartbeatInterval=this.heartbeatInterval,t.G=this.G,t.Y=this.Y,t}}).sn="https://conviva.testonly.conviva.com",c.dn="https://cws.conviva.com",c.ut="cws.conviva.com",c.K="ipv4.cws.conviva.com",c.X="ipv6.cws.conviva.com",c.vn="conviva.testonly.conviva.com",c.j="ipv4.testonly.conviva.com",c.J="ipv6.testonly.conviva.com",c.rt="https://",c.ht="http://",c.En=5,c.cn=20,(f=lt.ContentMetadata=function(){this.An=null,w.rn(this,"assetName",function(){return this.An}),w.un(this,"assetName",function(t){"string"===typeof t&&(this.An=t)}),this.gn={},w.rn(this,"custom",function(){return this.gn}),w.un(this,"custom",function(t){"object"===typeof t&&(this.gn=w.Gt(t))}),this.yn=null,w.rn(this,"defaultResource",function(){return this.yn}),w.un(this,"defaultResource",function(t){"string"===typeof t&&(this.yn=t)}),this.Sn=null,w.rn(this,"viewerId",function(){return this.Sn}),w.un(this,"viewerId",function(t){"string"===typeof t&&(this.Sn=t)}),this._n=null,w.rn(this,"applicationName",function(){return this._n}),w.un(this,"applicationName",function(t){"string"===typeof t&&(this._n=t)}),this.Rn=null,w.rn(this,"streamUrl",function(){return this.Rn}),w.un(this,"streamUrl",function(t){"string"===typeof t&&(this.Rn=t)}),this.Cn=f.StreamType.UNKNOWN,w.rn(this,"streamType",function(){return this.Cn}),w.un(this,"streamType",function(t){t!==f.StreamType.UNKNOWN&&t!==f.StreamType.VOD&&t!==f.StreamType.LIVE||(this.Cn=t)}),this.In=-1,w.rn(this,"duration",function(){return this.In}),w.un(this,"duration",function(t){this.In=b.Tn(t)}),this.Nn=-1,w.rn(this,"encodedFrameRate",function(){return this.Nn}),w.un(this,"encodedFrameRate",function(t){this.Nn=b.Tn(t)}),function(){}.apply(this,arguments),this.ct=function(){var t,n=new f;for(t in n.assetName=this.assetName,n.applicationName=this.applicationName,n.streamUrl=this.streamUrl,n.viewerId=this.viewerId,n.defaultResource=this.defaultResource,n.streamType=this.streamType,n.duration=this.duration,n.encodedFrameRate=this.encodedFrameRate,this.custom)n.custom[t]=this.custom[t];return n}}).StreamType={UNKNOWN:I.StreamType.UNKNOWN,LIVE:I.StreamType.LIVE,VOD:I.StreamType.VOD},lt.ErrorType={ERROR_UNKNOWN:I.ErrorType.ERROR_UNKNOWN,ERROR_IO:I.ErrorType.ERROR_IO,ERROR_TIMEOUT:I.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:I.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:I.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:I.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:I.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:I.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:I.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:I.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:I.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:I.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:I.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},lt.Events={AD_REQUESTED:I.Events.AD_REQUESTED,AD_RESPONSE:I.Events.AD_RESPONSE,AD_SLOT_STARTED:I.Events.AD_SLOT_STARTED,AD_ATTEMPTED:I.Events.AD_ATTEMPTED,AD_SLOT_ENDED:I.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:I.Events.AD_IMPRESSION_START,AD_START:I.Events.AD_START,AD_FIRST_QUARTILE:I.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:I.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:I.Events.AD_THIRD_QUARTILE,AD_COMPLETE:I.Events.AD_COMPLETE,AD_END:I.Events.AD_END,AD_IMPRESSION_END:I.Events.AD_IMPRESSION_END,AD_SKIPPED:I.Events.AD_SKIPPED,AD_ERROR:I.Events.AD_ERROR,AD_PROGRESS:I.Events.AD_PROGRESS,AD_CLOSE:I.Events.AD_CLOSE,CONTENT_PAUSED:I.Events.CONTENT_PAUSED,CONTENT_RESUMED:I.Events.CONTENT_RESUMED,POD_START:I.Events.POD_START,POD_END:I.Events.POD_END},(T=lt.PlayerStateManager=function(){var e=this;e.On=null,e.wn=-2,e.Dn=-2,e.Pn=T.PlayerState.UNKNOWN,e.bn={},e.Ln=-2,e.Nn=-2,e.In=-2,e.Mn=null,e.Vn=null,e.Rn=null,e.Un=null,e.kn=null,e.Fn=-1,e.Bn=-1,e.M=null,e.V=null,e.Hn=null,e.Gn=[],e.O=!1,e.Kn=null,e.jn=null,e.qn=null,this.release=function(){e.O||e.T.F("PlayerStateManager.release",function(){e.On&&e.On.Wn(),e.xn(),e._=null,e.g=null,e.T=null,e.O=!0})},this.setPlayheadTime=function(){},this.setBufferLength=function(){},this.setRenderedFrameRate=function(){},this.getEncodedFrameRate=function(){return e.Nn},this.setEncodedFrameRate=function(n){e.O||e.T.F("PlayerStateManager.setEncodedFrameRate",function(){var t=b.Tn(n);t>=-1&&(e.Nn=t,e.On)&&e.On.Yn(e.Nn)})},this.getDuration=function(){return e.In},this.setClientMeasureInterface=function(t){w.Xn(t,new lt.ClientMeasureInterface,"ClientMeasureInterface"),this.Jn=t},this.getPHT=function(){return this.Jn&&"function"===typeof this.Jn.getPHT?this.Jn.getPHT():T.DEFAULT_PHT},this.getBufferLength=function(){return this.Jn&&"function"===typeof this.Jn.getBufferLength?this.Jn.getBufferLength():T.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.Jn&&"function"===typeof this.Jn.getSignalStrength?this.Jn.getSignalStrength():T.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.Jn&&"function"===typeof this.Jn.getRenderedFrameRate?this.Jn.getRenderedFrameRate():T.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(n){e.O||e.T.F("PlayerStateManager.setDuration",function(){var t=b.Tn(n);t>=-1&&(e.In=t,e.On)&&e.On.Qn(e.In)})},this.getStreamUrl=function(){return e.Rn},this.setStreamUrl=function(t){e.O||e.T.F("PlayerStateManager.setStreamUrl",function(){t&&(e.Rn=t,e.On)&&e.On.zn(e.Rn)})},this.Zn=function(){return e.Un},this.$n=function(){return e.kn},this.setModuleNameAndVersion=function(t,n){e.Un=t,e.kn=n},this.ti=function(){return e.Vn},this.setPlayerType=function(t){e.O||e.T.F("PlayerStateManager.setPlayerType",function(){e.Vn=t,e.On&&e.On.ni(e.Vn)})},this.ii=function(){return e.Mn},this.setPlayerVersion=function(t){e.O||e.T.F("PlayerStateManager.setPlayerVersion",function(){e.Mn=t,e.On&&e.On.ei(e.Mn)})},this.si=function(){return e.Kn},this.setAudioLang=function(t){e.O||e.T.F("PlayerStateManager.setAudioLang",function(){e.Kn=t,e.On&&e.On.oi(e.Kn)})},this.ri=function(){return e.jn},this.setSubtitleLang=function(t){e.O||e.T.F("PlayerStateManager.setSubtitleLang",function(){e.jn=t,e.On&&e.On.ai(e.jn)})},this.ui=function(){return e.qn},this.setCcLang=function(t){e.O||e.T.F("PlayerStateManager.setCCLang",function(){e.qn=t,e.On&&e.On.hi(e.qn)})},this.setMonitoringNotifier=function(t){return!e.O&&!e.On&&(e.On=t,e.g&&arguments.length>=2&&e.g.ci(arguments[1]),!0)},this.xn=function(){e.O||(e.On=null,e.g&&e.g.ci(null))},this.fi=function(){e.setPlayerState(e.getPlayerState()),e.setBitrateKbps(e.li()),e.setAvgBitrateKbps(e.di()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.ti()),e.setPlayerVersion(e.ii()),e.setAudioLang(e.si()),e.setSubtitleLang(e.ri()),e.setCcLang(e.ui());for(var t=0;t<e.Gn.length;t++){var n=e.Gn[t];e.vi(n)}e.Gn=[]},this.getPlayerState=function(){return e.Pn},this.setPlayerState=function(t){e.O||e.T.F("PlayerStateManager.setPlayerState",function(){T.Ei(t)?(e.Pn=t,e.On&&e.On.pi(e.Pn)):e.g.error("PlayerStateManager.SetPlayerState(): invalid state: "+t)})},this.li=function(){return e.wn},this.setBitrateKbps=function(n){e.O||e.T.F("PlayerStateManager.setBitrateKbps",function(){var t=b.Tn(n);t>=-1&&(e.wn=t,e.On)&&e.On.Ai(e.wn)})},this.di=function(){return e.Dn},this.setAvgBitrateKbps=function(n){e.O||e.T.F("PlayerStateManager.setAvgBitrateKbps",function(){var t=b.Tn(n);t>=-1&&(e.Dn=t,e.On)&&e.On.gi(e.Dn)})},this.setPlayerSeekStart=function(t){e.O||e.T.F("PlayerStateManager.setPlayerSeekStart()",function(){e.On&&e.On.yi(T.SEEK_ACTIONS_TYPE.SEEK_START,t)})},this.setPlayerSeekEnd=function(){e.O||e.T.F("PlayerStateManager.setPlayerSeekEnd()",function(){e.On&&e.On.yi(T.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e.O||e.T.F("PlayerStateManager.setUserSeekButtonUp()",function(){e.On&&e.On.yi(T.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e.O||e.T.F("PlayerStateManager.setUserSeekButtonDown()",function(){e.On&&e.On.yi(T.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(n){e.O||e.T.F("PlayerStateManager.setVideoResolutionWidth()",function(){var t=b.Tn(n);t>0&&(e.Fn=t),e.On&&e.On.Si(e.Fn)})},this.setVideoResolutionHeight=function(n){e.O||e.T.F("PlayerStateManager.setVideoResolutionHeight()",function(){var t=b.Tn(n);t>0&&(e.Bn=t),e.On&&e.On._i(e.Bn)})},this.setConnectionType=function(t){e.O||e.T.F("PlayerStateManager.setConnectionType()",function(){e.M=t,e.On&&e.On.nt(e.M)})},this.setLinkEncryption=function(t){e.O||e.T.F("PlayerStateManager.setLinkEncryption()",function(){e.V=t,e.On&&e.On.et(e.V)})},this.setSignalStrength=function(){},this.vi=function(t){var n,i;e.Hn=t,e.On?(n=t.errorCode,i=t.severity,e.On.Ri(n,i)):e.Gn.push(t)},this.sendError=function(n,i){e.O||e.T.F("PlayerStateManager.sendError",function(){var t=new L(n,i);e.vi(t)})},this.reset=function(){e.O||e.T.F("PlayerStateManager.reset",function(){e.wn=-2,e.Dn=-2,e.Pn=T.PlayerState.UNKNOWN,e.bn={},e.Ln=-1,e.Nn=-1,e.In=-1,e.Mn=null,e.Vn=null,e.Rn=null,e.Hn=null,e.Gn=[]})},this.setCDNServerIP=function(t){e.O||e.T.F("PlayerStateManager.setCDNServerIP",function(){e.On&&e.On.Ci(t)})},this.Ii=function(){return e.Ti},this.setDroppedFramesTotal=function(t){e.O||e.T.F("PlayerStateManager.setDroppedFramesTotal",function(){e.On&&e.On.mi(t)})},this.setDroppedFramesCount=function(t){e.O||e.T.F("PlayerStateManager.setDroppedFramesCount",function(){e.On&&e.On.Ni(t)})},this.Oi=function(){return e.Hn},function(t,n){e._=t,e.g=e._.buildLogger(),e.g.setModuleName("PlayerStateManager"),e.T=e._.dt(n)}.apply(e,arguments)}).PlayerState={STOPPED:I.PlayerState.STOPPED,PLAYING:I.PlayerState.PLAYING,BUFFERING:I.PlayerState.BUFFERING,PAUSED:I.PlayerState.PAUSED,UNKNOWN:I.PlayerState.UNKNOWN,NOT_MONITORED:I.PlayerState.NOT_MONITORED},T.Ei=function(t){return t===T.PlayerState.STOPPED||t===T.PlayerState.PLAYING||t===T.PlayerState.BUFFERING||t===T.PlayerState.PAUSED||t===T.PlayerState.UNKNOWN||t===T.PlayerState.NOT_MONITORED},T.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},T.DEFAULT_SIGNAL_STRENGTH=1e3,T.DEFAULT_RENDERED_FRAME_RATE=-1,T.DEFAULT_BUFFER_LENGTH=-1,T.DEFAULT_PHT=-1,lt.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}},B=lt.HttpInterface=function(){this.makeRequest=function(){},this.release=function(){}},H=lt.LoggingInterface=function(){this.consoleLog=function(){},this.release=function(){}},G=lt.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},K=lt.StorageInterface=function(){this.saveData=function(){},this.loadData=function(){},this.release=function(){}},j=lt.SystemInterface=function(){!function(t,n,i,e,s,o){w.Xn(t,new q,"TimeInterface"),w.Xn(n,new W,"TimerInterface"),w.Xn(i,new B,"HttpInterface"),w.Xn(e,new K,"StorageInterface"),w.Xn(s,new G,"MetadataInterface"),w.Xn(o,new H,"LoggingInterface"),this.wi=t,this.Di=n,this.Pi=i,this.bi=e,this.Li=s,this.Mi=o}.apply(this,arguments),this.release=function(){this.wi&&(this.wi.release(),this.wi=null),this.Di&&(this.Di.release(),this.Di=null),this.Pi&&(this.Pi.release(),this.Pi=null),this.bi&&(this.bi.release(),this.bi=null),this.Li&&(this.Li.release(),this.Li=null),this.Mi&&(this.Mi.release(),this.Mi=null)}},q=lt.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},W=lt.TimerInterface=function(){this.createTimer=function(){},this.release=function(){}},x=lt.SystemFactory=function(){var t=this;!function(t,n){if(!(t instanceof j))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.Vi=t,this.wi=this.Vi.wi,this.Di=this.Vi.Di,this.Pi=this.Vi.Pi,this.bi=this.Vi.bi,this.Li=this.Vi.Li,this.Mi=this.Vi.Mi,n instanceof u?this.C=n.ct():this.C=new u}.apply(this,arguments),this.lt=function(t,n,i){this.Ui=t,this.ki=n,this.Fi=i},this.release=function(){this.Vi.release(),this.Vi=null,this.Ui=null,this.C=null,this.Bi=null};var n=function(){return new at(t.Mi,t.wi,t.Xt(),t.Bi,t.Ui)};this.buildLogger=function(){return n()},this.yt=function(t,n,i){return new tt(t,n,i,this)},this.Hi=function(t){return new D(this.buildLogger(),this.Gi(),this.ki,t)},this.Ki=function(){return new nt(this.buildTimer(t.Fi))},this.ji=function(){var t=new ht(this.buildLogger(),this.Di,new et(this.buildLogger(),null,this.Xt()));return new nt(t)},this.Gi=function(){return new rt(this.buildLogger(),this.Pi,this.ji(),this.Xt())},this.dt=function(t){return new et(this.buildLogger(),this.Hi(t),this.Xt())},this.buildTime=function(){return new ut(this.wi,this.buildLogger())},this.buildTimer=function(t){return new ht(this.buildLogger(),this.Di,this.dt(t))},this.qi=function(){return new V.Storage(this.buildLogger(),this.bi,this.Ki(),this.Xt())},this.vt=function(){return new O(this.buildLogger(),this.qi(),this.Wi())},this.xi=function(t){return new M(this.buildLogger(),this.Li,this.dt(t))},this.Yi=function(){return new C},this.Xi=function(t,n){return new st(t,this.buildLogger(),this.Gi(),this.Wi(),n)},this.Ji=function(t,n,i,e,s){var o=this.Xi(n,e.custom["c3.domain"]);return new N(this.Qi(),t,n,this.buildLogger(),this.dt(s),this.buildTimer(s),o,this.Yi(),this.buildTime(),this.zi(),i,e,s)},this.Zi=function(t,n,i,e,s,o,r){t=this.Ji(t,n.ct(),i,o,r);return new $(e,s,i,this.xi(r),t,this.dt(r),this.buildLogger())},this.Qi=function(){return new it},this.Wi=function(){return new z},this.zi=function(){return this.Bi},this.Xt=function(){return this.C},this.Bi=new ot},(u=lt.SystemSettings=function(){this.$i=u.te,w.rn(this,"logLevel",function(){return this.$i}),w.un(this,"logLevel",function(t){var n;"number"===typeof t&&(n=w.fn(t))===t&&n>=u.LogLevel.DEBUG&&n<=u.LogLevel.ERROR&&(this.$i=n)}),this.ne=u.ie,w.rn(this,"allowUncaughtExceptions",function(){return this.ne}),w.un(this,"allowUncaughtExceptions",function(t){w.ee(t)&&(this.ne=t)}),this.se=u.oe,w.rn(this,"storageTimeout",function(){return this.se}),w.un(this,"storageTimeout",function(t){var n;"number"===typeof t&&(n=w.fn(t))===t&&(this.se=n)}),this.re=u.ae,w.rn(this,"httpTimeout",function(){return this.re}),w.un(this,"httpTimeout",function(t){var n;"number"===typeof t&&(n=w.fn(t))===t&&(this.re=n)}),function(){}.apply(this,arguments),this.equals=function(t){return this.logLevel===t.logLevel&&this.allowUncaughtExceptions===t.allowUncaughtExceptions&&this.storageTimeout===t.storageTimeout&&this.httpTimeout===t.httpTimeout},this.ct=function(){var t=new u;return t.logLevel=this.logLevel,t.allowUncaughtExceptions=this.allowUncaughtExceptions,t.storageTimeout=this.storageTimeout,t.httpTimeout=this.httpTimeout,t}}).LogLevel={DEBUG:I.LogLevel.DEBUG,INFO:I.LogLevel.INFO,WARNING:I.LogLevel.WARNING,ERROR:I.LogLevel.ERROR,NONE:I.LogLevel.NONE},u.ue=u.LogLevel.DEBUG,u.te=u.LogLevel.NONE,u.he=!0,u.ie=!1,u.oe=10,u.ae=10,i=V.AdAnalytics=function(){var e=this;function n(t){e.ce?(w.Ht(t)>0&&e.setAdInfo(t),e.ce.fe()||(e.ce.le(e.de),e.ce.ve(!0),e.getAdType()===I.AdType.SERVER_SIDE&&e.reportAdMetric(I.Playback.BITRATE,e.de.Ee()))):e.g&&e.g.error("AdAnalytics.onAdInitiated() : contentPlayer - "+I.o)}e.pe=null,e.g=null,e._=null,e.Ae=null,e.de=null,e.ce=null,e.ge=null,e.ye=null,e.Se=null,function(t,n,i){e.pe=t,e.Se=i,e._=n,i&&(e.de=i._e()),e.Ae=n.buildTimer(I.version),e.g=n.buildLogger(),e.g.setModuleName("AdAnalytics"),e.ce=new l(e.pe,e.Ae),m.call(this)}.apply(this,arguments),this.setAdInfo=function(t){w.Ht(t)<=0?e.g&&e.g.error("AdAnalytics.setAdInfo() : AD Info is not set"):(e.g&&e.g.debug("AdAnalytics.setAdInfo()"),e.ce&&e.ce.Re(t))},this.setAdPlayerInfo=function(t){w.Ht(t)<=0?e.g&&e.g.error("AdAnalytics.setAdPlayerInfo() : Ad Player Info is not set"):(e.g&&e.g.debug("AdAnalytics.setAdPlayerInfo()"),e.ce&&e.ce.Re(t))},this.reportAdMetric=function(){0===arguments.length?e.g&&e.g.error("AdAnalytics.reportAdMetric() : Need to report metric mandatory"):1===arguments.length?e.Ce(arguments[0]):2===arguments.length?e.Ce(arguments[0],arguments[1]):3===arguments.length?e.Ce(arguments[0],arguments[1],arguments[2]):4===arguments.length&&e.Ce(arguments[0],arguments[1],arguments[2],arguments[3])},this.setCallback=function(t){e.ce&&e.ce.Ie(t)},this.reportAdFailed=function(t,n){e.ce?(w.Ht(n)>0&&e.setAdInfo(n),e.ce.fe()?(e.g&&e.g.debug("AdAnalytics.reportAdFailed() : "+t),e.reportAdError(t,h.ErrorSeverity.FATAL),e.reportAdEnded()):(e.ce.le(e.de),e.g&&e.g.debug("AdAnalytics.reportAdFailed() : "+t),n=new L(t,h.ErrorSeverity.FATAL),e.ce.ve(!0,n))):e.g&&e.g.error("AdAnalytics.reportAdFailed() : "+I.o)},this.reportAdLoaded=function(t){e.g&&e.g.debug("AdAnalytics.reportAdLoaded()"),n(t)},this.reportAdStarted=function(t){e.g&&e.g.debug("AdAnalytics.reportAdStarted()"),n(t)},this.reportAdEnded=function(){e.ce?(e.g&&e.g.debug("AdAnalytics.reportAdEnded()"),e.ce.fe()&&(e.ce.le(null),e.ce.ve(!1))):e.g&&e.g.error("AdAnalytics.reportAdEnded() : "+I.u)},this.reportAdError=function(t,n){e.ce?(e.g&&e.g.debug("AdAnalytics.reportAdError() : "+t),t=new L(t,n),e.ce.vi(t)):e.g&&e.g.error("AdAnalytics.reportAdError() : "+I.o)},this.reportAdPlayerEvent=function(t,n){if(w.Pt(t))if(e.g&&e.g.debug("AdAnalytics.reportAdPlayerEvent()"),e.ce)switch(t){case I.Events.USER_WAIT_STARTED:case I.Events.BUMPER_VIDEO_STARTED:e.ce.Mt();break;case I.Events.USER_WAIT_ENDED:case I.Events.BUMPER_VIDEO_ENDED:e.ce.Ut();break;default:e.ce.Te(t,n)}else e.g&&e.g.error("AdAnalytics.reportAdPlayerEvent() : "+I.o);else e.g&&e.g.error("AdAnalytics.reportAdPlayerEvent(): eventType parameter must be a valid string.")},this.reportAdSkipped=function(){e.ce?(e.g&&e.g.debug("AdAnalytics.reportAdSkipped()"),e.reportAdPlayerEvent(I.Events.AD_SKIPPED),e.reportAdEnded()):e.g&&e.g.error("AdAnalytics.reportAdSkipped() : "+I.o)},this.release=function(){e.g&&e.g.debug("AdAnalytics.release()"),e.ce&&(e.ce.fe()&&(e.ce.le(null),e.ce.ve(!1)),e.ce.Ie(null),e.ce.me(),e.ce=null),"undefined"!==typeof lt.AdProxyMonitor&&e.ye&&(lt.AdProxyMonitor.release(e.ye),e.ye=null)},this.setAdListener=function(t,n){t?("undefined"!==typeof n&&"undefined"!==typeof n.convivaModule?lt.AdProxyMonitor=n.convivaModule.AdProxyMonitor:"undefined"!==typeof ConvivaModule&&(lt.AdProxyMonitor=ConvivaModule.AdProxyMonitor),"undefined"===typeof lt.AdProxyMonitor?e.g.error("AdAnalytics.setAdListener() : Include the missing Ads SDK Module"):!t&&e.ye?(lt.AdProxyMonitor.release(e.ye),e.ye=null):t&&e.ye?(lt.AdProxyMonitor.release(e.ye),e.g&&e.g.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.ye=lt.AdProxyMonitor.initConvivaDropIn(t,n,this,lt,e._)):t&&!e.ye&&(e.g&&e.g.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.ye=lt.AdProxyMonitor.initConvivaDropIn(t,n,this,lt,e._))):e.g.error("AdAnalytics.setAdListener() : Need to configure the adListener instance")},this.reportAdBreakStarted=function(t,n,i){e.de?(e.g&&e.g.debug("AdAnalytics.reportAdBreakStarted()"),e.Ne=t,e.ge=n,e.de.Oe(t,n,i)):e.g.error("AdAnalytics.reportAdBreakStarted() : "+I.o)},this.reportAdBreakEnded=function(){e.de?(e.g&&e.g.debug("AdAnalytics.reportAdBreakEnded()"),e.Ne=null,e.ge=null,e.de.we()):e.g.error("AdAnalytics.reportAdBreakEnded() : "+I.o)},this.getSessionId=function(){return e.de?(e.g&&e.g.debug("VideoAnalytics.getSessionId()"),e.ce.Jt()):(e.g.error("VideoAnalytics.getSessionId() : "+I.o),I.NO_SESSION_KEY)},this.getClientId=function(){return e.de?(e.g&&e.g.debug("VideoAnalytics.getClientId()"),e.ce.Qt()):(e.g.error("VideoAnalytics.getClientId() : "+I.o),null)},this.getPlayerMonitor=function(){return e.de},this.getAdPlayerMonitor=function(){return e.ce},this.getVideoAnalytics=function(){return e.Se},this.getAdType=function(){return e.de?e.de.Ne:null},this.De=function(){return e.de?e.de.ge:null},i.prototype=Object.create(m.prototype),i.prototype.constructor=i},l=V.AdPlayerMonitorImpl=function(){var s=this;s.Pe=null,s.be=null,function(t,n){d.call(this,t,n)}.apply(this,arguments),this.le=function(t){this.Le()!==t&&(this.Me(),s.be=t||null)},this.Le=function(){return s.be},this.Ve=function(t){var n,i=this.Le(),e={};e.error=t,s.Pe&&(s.Ue=s.Pe.getPlayerStateManager(!0),s.ke(),s.Ue.setClientMeasureInterface(this),n=null,i&&(n=i.Fe()),s.Be=s.Pe.createAdSession(n,s.Ot,s.Ue,!0,e),"undefined"!==typeof t)&&(s.He(),s.me())},l.prototype=Object.create(d.prototype),l.prototype.constructor=l},Y=lt.Analytics={init:function(){if(this.pe)this.g.error("Client is already configured");else{if(arguments.length<=0)throw new Error("customerKey must be valid");var t=null,n=null,i=null;if("string"===typeof arguments[0]&&!w.Pt(t=arguments[0]))throw new Error("customerKey must be valid");arguments.length>=2&&"object"===typeof arguments[1]&&(n=arguments[1]),arguments.length>=3&&"object"===typeof arguments[2]&&(i=arguments[2]);var t=new c(t),e=new u,i=(w.Ht(i)>0&&(i[I.GATEWAY_URL]&&(t.gatewayUrl=i[I.GATEWAY_URL]),i[I.LOG_LEVEL]>=0)&&(e.logLevel=i[I.LOG_LEVEL]),new lt.Impl.Html5Logging),s=new lt.Impl.Html5Storage,o=new lt.Impl.Html5Http,r=new lt.Impl.Html5Timer,a=new lt.Impl.Html5Time;this.Li||(this.Li=new lt.Impl.Html5Metadata),n&&(n[I.CallbackFunctions.CONSOLE_LOG]&&(i.consoleLog=n[I.CallbackFunctions.CONSOLE_LOG]),n[I.CallbackFunctions.MAKE_REQUEST]&&(o.makeRequest=n[I.CallbackFunctions.MAKE_REQUEST]),n[I.CallbackFunctions.SAVE_DATA]&&(s.saveData=n[I.CallbackFunctions.SAVE_DATA]),n[I.CallbackFunctions.LOAD_DATA]&&(s.loadData=n[I.CallbackFunctions.LOAD_DATA]),n[I.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(a.getEpochTimeMs=n[I.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),n[I.CallbackFunctions.CREATE_TIMER])&&(r.createTimer=n[I.CallbackFunctions.CREATE_TIMER]),this.Vi=new j(a,r,o,s,this.Li,i),this._=new x(this.Vi,e),this._.lt("Analytics",t),this.pe=new h(t,this._,this.Ge,Y.version),this.g=this._.buildLogger(),this.g.setModuleName("Analytics"),this.pe.p=new X(this.pe,this),this.pe.p&&this.pe.p.Ke()}},release:function(){var t=0;if(this.je){for(t=0;t<this.je.length;t++){var n=this.je[t];n&&(n.release(),n.g=null,n.Ae=null,this.je.splice(t,1),t--)}this.je=null}if(this.qe){for(t=0;t<this.qe.length;t++){var i=this.qe[t];i&&(i.release(),i.g=null,i.Ae=null,this.qe.splice(t,1),t--)}this.qe=null}this._&&(this._.release(),this._=null),this.pe&&(this.pe.release(),this.pe=null),this.pe=null,this.g=null,this.Vi=null,this.Li=null,this.Ge=null},setUniqueIdentifier:function(t,n){if(!this.pe)throw new Error(I.i);this.pe.setUniqueIdentifier(t,n)},setUserPreferenceForDataCollection:function(t,n){if(!this.pe)throw new Error(I.i);this.pe.setUserPreferenceForDataCollection(t,n)},setUserPreferenceForDataDeletion:function(t){if(!this.pe)throw new Error(I.i);this.pe.setUserPreferenceForDataDeletion(t)},reportAppEvent:function(t,n){if(!this.pe)throw new Error(I.i);this.pe.sendCustomEvent(h.NO_SESSION_KEY,t,n)},reportAppBackgrounded:function(){if(!this.pe)throw new Error(I.i);this.pe.sendCustomEvent(h.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(!this.pe)throw new Error(I.i);this.pe.sendCustomEvent(h.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(t){if(!(t instanceof h))throw new Error(I.i);this.pe=t,this._=this.pe._,this.g=this._.buildLogger(),this.g.setModuleName("Analytics")},buildVideoAnalytics:function(){var t;if(this.pe)return t=new v(this.pe,this._),this.qe||(this.qe=[]),this.qe.push(t),t;throw new Error(I.i)},buildAdAnalytics:function(t){if(this.pe)return t=new i(this.pe,this._,t||null),this.je||(this.je=[]),this.je.push(t),t;throw new Error(I.i)},setDeviceMetadata:function(t){var n,i,e;arguments.length<=0||0===w.Ht(t)?this.g.error("Device Metadata must be valid"):(this.Li||(this.Li=new lt.Impl.Html5Metadata),t[I.DeviceMetadata.BRAND]&&(this.Li.getDeviceBrand=function(){return t[I.DeviceMetadata.BRAND]}),t[I.DeviceMetadata.MANUFACTURER]&&(this.Li.getDeviceManufacturer=function(){return t[I.DeviceMetadata.MANUFACTURER]}),t[I.DeviceMetadata.MODEL]&&(this.Li.getDeviceModel=function(){return t[I.DeviceMetadata.MODEL]}),t[I.DeviceMetadata.TYPE]&&(this.Li.getDeviceType=function(){return t[I.DeviceMetadata.TYPE]}),t[I.DeviceMetadata.VERSION]&&(this.Li.getDeviceVersion=function(){return t[I.DeviceMetadata.VERSION]}),t[I.DeviceMetadata.OS_NAME]&&(this.Li.getOperatingSystemName=function(){return t[I.DeviceMetadata.OS_NAME]}),t[I.DeviceMetadata.OS_VERSION]&&(this.Li.getOperatingSystemVersion=function(){return t[I.DeviceMetadata.OS_VERSION]}),t[I.DeviceMetadata.CATEGORY]&&(this.Li.getDeviceCategory=function(){return t[I.DeviceMetadata.CATEGORY]}),n=t[I.DeviceMetadata.SCREEN_RESOLUTION_WIDTH],w.It(n)&&(this.Li.getScreenWidth=function(){return n.toString()}),i=t[I.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT],w.It(i)&&(this.Li.getScreenHeight=function(){return i.toString()}),e=t[I.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR],w.It(e)&&(this.Li.getScaleFactor=function(){return e.toString()}))},reportDeviceMetric:function(t,n){switch(this.Ge||(this.Ge={}),t){case I.Network.CONNECTION_TYPE:w.Pt(n)?(this.Ge[t]=n,this.pe&&this.pe.$(this.Ge[I.Network.CONNECTION_TYPE])):this.g.error("reportDeviceMetric() : Connection Type is not a valid string");break;case I.Network.LINK_ENCRYPTION:w.Pt(n)?(this.Ge[t]=n,this.pe&&this.pe.it(this.Ge[I.Network.LINK_ENCRYPTION])):this.g.error("reportDeviceMetric() : Link Encryption is not a valid string");break;case I.Network.SIGNAL_STRENGTH:var i=parseInt(n,10);w.It(i)?T.DEFAULT_SIGNAL_STRENGTH===i?this.g.error("reportDeviceMetric() : DEFAULT_SIGNAL_STRENGTH shouldn't be reported"):(this.Ge[t]=i,this.pe&&this.pe.ot(i)):this.g.error("reportDeviceMetric() : Signal Strength is not a number");break;default:this.g.error("reportDeviceMetric() : unknown device metric = "+t)}},version:"4.7.13"},m=V.AnalyticsImpl=function(){var f=this;function l(){var t=!!f.ce,n=f.getAdType(),i=f.De();return n===I.AdType.SERVER_SIDE&&i===I.AdPlayer.CONTENT?m.xe.We:n!==I.AdType.SERVER_SIDE||i!==I.AdPlayer.SEPARATE?n===I.AdType.CLIENT_SIDE&&i===I.AdPlayer.CONTENT||(n===I.AdType.CLIENT_SIDE&&I.AdPlayer.SEPARATE,t)?m.xe.Ye:m.xe.Xe:void 0}function d(t,n,i){t=parseInt(t,10),n=parseInt(n,10);isNaN(t)&&isNaN(n)?f.g.error("reportPlaybackResolution() : width and height are not numbers"):(isNaN(t)&&f.g.warning("reportPlaybackResolution() : width is not a number"),isNaN(n)&&f.g.warning("reportPlaybackResolution() : height is not a number"),!f.ce||i!==m.xe.Ye&&i!==m.xe.We||f.ce.Je(t,n),!f.de||i!==m.xe.Xe&&i!==m.xe.We||f.de.Je(t,n))}function v(t,n){T.Ei(t)?(!f.ce||n!==m.xe.Ye&&n!==m.xe.We||f.ce.Qe(t),(f.de&&n===m.xe.Xe||n===m.xe.We)&&f.de.Qe(t)):f.g.error("reportPlayerState() : Player State is not valid")}function E(t,n){t=parseInt(t,10);isNaN(t)?f.g.error("reportPlayerPlayHeadTime() : playheadtime is not a number"):(!f.ce||n!==m.xe.Ye&&n!==m.xe.We||f.ce.ze(t),!f.de||n!==m.xe.Xe&&n!==m.xe.We||f.de.ze(t))}function p(t,n){t=parseInt(t,10);isNaN(t)?f.g.error("reportPlayerBufferLength() : buffer length is not a number"):(!f.ce||n!==m.xe.Ye&&n!==m.xe.We||f.ce.Ze(t),!f.de||n!==m.xe.Xe&&n!==m.xe.We||f.de.Ze(t))}function A(t,n){t=parseInt(t,10);!f.ce||n!==m.xe.Ye&&n!==m.xe.We||f.ce.$e(!0,t),!f.de||n!==m.xe.Xe&&n!==m.xe.We||f.de.$e(!0,t)}function g(t){!f.ce||t!==m.xe.Ye&&t!==m.xe.We||f.ce.$e(!1,-1),!f.de||t!==m.xe.Xe&&t!==m.xe.We||f.de.$e(!1,-1)}function y(t,n){t=parseInt(t,10);isNaN(t)?f.g.error("reportPlayerBitrate() : bitrate is not a number"):(!f.ce||n!==m.xe.Ye&&n!==m.xe.We||f.ce.ts(t),!f.de||n!==m.xe.Xe&&n!==m.xe.We||f.de.ts(t))}function S(t,n){t=parseInt(t,10);isNaN(t)?f.g.error("reportPlayerAvgBitrate() : avgBitrate is not a number"):(!f.ce||n!==m.xe.Ye&&n!==m.xe.We||f.ce.ns(t),!f.de||n!==m.xe.Xe&&n!==m.xe.We||f.de.ns(t))}function _(t,n){t=parseInt(t,10);isNaN(t)?f.g.error("reportPlayerRenderedFrameRate() : rendered framerate is not a number"):(!f.ce||n!==m.xe.Ye&&n!==m.xe.We||f.ce.es(t),!f.de||n!==m.xe.Xe&&n!==m.xe.We||f.de.es(t))}function R(t,n){var i;w.Pt(t)?(i=f.de.ui(),w.Pt(i)&&"off"!==i&&"off"!==t&&C("off",n),!f.ce||n!==m.xe.Ye&&n!==m.xe.We||f.ce.ss(t),!f.de||n!==m.xe.Xe&&n!==m.xe.We||f.de.ss(t)):f.g.error("reportSubtitleLang() : subtitleLang is not a valid string")}function C(t,n){var i;w.Pt(t)?(i=f.de.ri(),w.Pt(i)&&"off"!==i&&"off"!==t&&R("off",n),!f.ce||n!==m.xe.Ye&&n!==m.xe.We||f.ce.os(t),!f.de||n!==m.xe.Xe&&n!==m.xe.We||f.de.os(t)):f.g.error("reportCcLang() : ccLang is not a valid string")}!function(){}.apply(this,arguments),this.Ce=function(t,n,i,e){switch(f.g&&t!==I.Playback.PLAY_HEAD_TIME&&t!==I.Playback.BUFFER_LENGTH&&f.g.debug("reportMetric() "+t+" "+(void 0!==n&&"CONVIVA"!==n?n:"")+" "+(void 0!==i&&"CONVIVA"!==i&&i!==m.xe.Ye?i:"")+" "+(void 0!==e&&"CONVIVA"!==e&&e!==m.xe.Ye?e:"")),t){case I.Playback.BITRATE:"CONVIVA"===i?f.g.info("Bitrate change requested from the Conviva Library:"):f.g.info("Bitrate change requested from the application:"),e===m.xe.Ye?y(n,m.xe.Ye):y(n,l());break;case I.Playback.AVG_BITRATE:"CONVIVA"===i?f.g.info("Average Bitrate change requested from the Conviva Library:"):f.g.info("Average Bitrate change requested from the application:"),e===m.xe.Ye?S(n,m.xe.Ye):S(n,l());break;case I.Playback.PLAY_HEAD_TIME:e===m.xe.Ye?E(n,m.xe.Ye):E(n,l());break;case I.Playback.RESOLUTION:e===m.xe.Ye?d(n,i,m.xe.Ye):d(n,i,l());break;case I.Playback.BUFFER_LENGTH:e===m.xe.Ye?p(n,m.xe.Ye):p(n,l());break;case I.Playback.PLAYER_STATE:e===m.xe.Ye?v(n,m.xe.Ye):v(n,l());break;case I.Playback.RENDERED_FRAMERATE:e===m.xe.Ye?_(n,m.xe.Ye):_(n,l());break;case I.Playback.SEEK_STARTED:arguments.length>=2&&"CONVIVA"!==n?A(n,l()):i===m.xe.Ye?A(-1,m.xe.Ye):A(-1,l());break;case I.Playback.SEEK_ENDED:i===m.xe.Ye?g(m.xe.Ye):g(l());break;case I.Playback.CDN_IP:"CONVIVA"===i?f.g.info("CDN Server IP change requested from the Conviva Library:"):f.g.info("CDN Server IP change requested from the application:"),h=n,c=l(),w.Pt(h)?(!f.ce||c!==m.xe.Ye&&c!==m.xe.We||f.ce.rs(h),!f.de||c!==m.xe.Xe&&c!==m.xe.We||f.de.rs(h)):f.g.error("reportCDNServerIp() : CDNServerIP is not a valid string");break;case I.Playback.DROPPED_FRAMES_TOTAL:"CONVIVA"===i?f.g.info("Dropped frames total change requested from the Conviva Library:"):f.g.info("Dropped frames total change requested from the application:");c=n,h=l();c=parseInt(c,10),isNaN(c)?f.g.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!f.ce||h!==m.xe.Ye&&h!==m.xe.We||f.ce.us(c),!f.de||h!==m.xe.Xe&&h!==m.xe.We||f.de.us(c));break;case I.Playback.DROPPED_FRAMES_COUNT:"CONVIVA"===i?f.g.info("Dropped frames count change requested from the Conviva Library:"):f.g.info("Dropped frames count change requested from the application:");var s=n,o=l();s=parseInt(s,10),isNaN(s)?f.g.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!f.ce||o!==m.xe.Ye&&o!==m.xe.We||f.ce.hs(s),!f.de||o!==m.xe.Xe&&o!==m.xe.We||f.de.hs(s));break;case I.Playback.AUDIO_LANGUAGE:"CONVIVA"===i?f.g.info("Audio Language change requested from Conviva Library"):f.g.info("Audio Language change requested from Application"),o=n,s=l(),w.Pt(o)?(!f.ce||s!==m.xe.Ye&&s!==m.xe.We||f.ce.cs(o),!f.de||s!==m.xe.Xe&&s!==m.xe.We||f.de.cs(o)):f.g.error("reportAudioLang() : audioLang is not a valid string");break;case I.Playback.SUBTITLES_LANGUAGE:"CONVIVA"===i?f.g.info("Subtitle Language change requested from Conviva Library"):f.g.info("Subtitle Language change requested from Application"),R(n,l());break;case I.Playback.CLOSED_CAPTIONS_LANGUAGE:"CONVIVA"===i?f.g.info("Caption Language change requested from Conviva Library"):f.g.info("Caption Language change requested from Application"),C(n,l());break;default:r=t,a=n,u=l(),w.Pt(r)&&a?(!f.ce||u!==m.xe.Ye&&u!==m.xe.We||f.ce.zt(r,a),!f.de||u!==m.xe.Xe&&u!==m.xe.We||f.de.zt(r,a)):f.g.error("reportMetric() : Metric key/value should be a proper value")}var r,a,u,h,c}},V.AnalyticsImpl.xe={Ye:1,Xe:2,We:3},X=V.AppAnalyticsHandler=function(){var r=this;r.pe=null,r.fs=null,r.ls=null,r.ds=null,r.Nt=null,function(t,n){r.pe=t,r.fs=n,"undefined"!==typeof document&&document&&(r.ls=document.createEvent("HTMLEvents"),r.ls.initEvent(I.APP_TRACKER_EVENT.TYPE,!0,!0))}.apply(this,arguments),this.Ke=function(){r.vs(I.APP_TRACKER_EVENT.INIT)},this.Es=function(){r.vs(I.APP_TRACKER_EVENT.VIDEO_ATTEMPT)},this.ps=function(){r.vs(I.APP_TRACKER_EVENT.VIDEO_END),r.Nt=null},this.As=function(t){r.vs(I.APP_TRACKER_EVENT.VIDEO_PLAY,t)},this.gs=function(t){r.vs(I.APP_TRACKER_EVENT.VIDEO_PAUSE,t)},this.ys=function(t){r.vs(I.APP_TRACKER_EVENT.VIDEO_ERROR,t)},this.Ss=function(t){r.vs(I.APP_TRACKER_EVENT.VIDEO_BUFFERING,t)},this._s=function(t){r.vs(I.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH,t)},this.Rs=function(t){r.vs(I.APP_TRACKER_EVENT.VIDEO_METADATA_CHANGE,t)},this.Cs=function(t){t={cen:t.name,ced:t.data};r.vs(I.APP_TRACKER_EVENT.VIDEO_CUSTOM_EVENT,t)},this.Is=function(t){t={cen:t.name,ced:t.data};r.vs(I.APP_TRACKER_EVENT.SDK_CUSTOM_EVENT,t)},this.Ts=function(t){r.vs(I.APP_TRACKER_EVENT.AD_BREAK_START,{cen:"PodStart",ced:t})},this.Ns=function(t){r.vs(I.APP_TRACKER_EVENT.AD_BREAK_END,{cen:"PodEnd",ced:t})},this.vs=function(t,n){try{if(r.ls){if(r.Os(),r.ls.name=r.ds.name=t,r.ls.iid=r.ds.iid=r.pe.getConfig().getIid(),r.ls.clid=r.ds.clid=r.pe.getConfig().getClientId(),r.Nt){var i,e=r.Nt;if(e.ws()?(i=n?n[C.Ds]:void 0,r.ls.sid=r.ds.sid=e.Ps.Jt(),r.ls.sst=r.ds.sst=e.bs,r.ls.url=r.ds.url=i&&i.url?i.url:e.Rn,r.ls.st=r.ds.st=e.Ls(),r.ls.an=r.ds.an=i&&i.an?i.an:e.An,r.ls.pn=r.ds.pn=i&&i.pn?i.pn:e.Ms,r.ls.tags=r.ds.tags=JSON.stringify(e.Ot.gn),r.ls.vid=r.ds.vid=i&&i.vid?i.vid:e.Sn,e.Vs>=0&&(r.ls.cl=r.ds.cl=i&&i.cl?i.cl:e.Vs),r.ls.lv=r.ds.lv=i&&i.lv?i.lv:e.Us,r.ls.fw=r.ds.fw=e.ks(),r.ls.fwv=r.ds.fwv=e.Fs(),e.Ue&&(r.ls.mn=r.ds.mn=e.Ue.Zn(),r.ls.mv=r.ds.mv=e.Ue.$n()),(e.wn>=0||i&&i.br>=0)&&t===I.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH&&(r.ls.br=r.ds.br=i&&i.br?i.br:e.wn),(e.Dn>=0||i&&i.avgbr>=0)&&t===I.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH&&(r.ls.avgbr=r.ds.avgbr=i&&i.avgbr?i.avgbr:e.Dn)):e.Bs()&&(r.ls.sid=r.ds.sid=e.Ps.Jt(),r.ls.sst=r.ds.sst=e.bs,r.ls.st=r.ds.st=e.Ls(),r.ls.mn=r.ds.mn=e.Un,r.ls.mv=r.ds.mv=e.kn),n&&(t===I.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH||t===I.APP_TRACKER_EVENT.VIDEO_ERROR||t===I.APP_TRACKER_EVENT.VIDEO_METADATA_CHANGE||t===I.APP_TRACKER_EVENT.VIDEO_CUSTOM_EVENT||t===I.APP_TRACKER_EVENT.SDK_CUSTOM_EVENT||t===I.APP_TRACKER_EVENT.AD_BREAK_START||t===I.APP_TRACKER_EVENT.AD_BREAK_END))for(var s=Object.keys(n),o=0;o<s.length;o++)"object"===typeof n[s[o]]?r.ls[s[o]]=r.ds[s[o]]=JSON.stringify(n[s[o]]):r.ls[s[o]]=r.ds[s[o]]=n[s[o]]}"undefined"!==typeof document&&document&&document.dispatchEvent(r.ls)}}catch(t){}},this.Os=function(){if(null!==r.ds)for(var t=Object.keys(r.ds),n=0;n<t.length;n++)delete r.ls[t[n]];r.ds={}},this.Hs=function(t,n,i){try{(r.Nt=i).ws()?t===C.Gs?n[C.Ds][C.Ks]?n[C.Ds][C.Ks]===C.js?r.As(n):n[C.Ds][C.Ks]===C.qs?r.Ss(n):n[C.Ds][C.Ks]===C.Ws&&r.gs(n):n[C.Ds][C.xs]||n[C.Ds][C.Ys]?r._s(n):r.Rs(n):t===C.Xs?r.ys({err:n[C.Js],ft:n[C.Qs]}):t===C.zs?r.ps():t===I.APP_TRACKER_EVENT.VIDEO_ATTEMPT?r.Es():t===C.Zs&&(n[C.$s]===I.Events.POD_START?r.Ts(n[C.no]):n[C.$s]===I.Events.POD_END?r.Ns(n[C.no]):r.Cs({name:n[C.$s],data:n[C.no]})):i.Bs()&&t===C.Zs&&r.Is({name:n[C.$s],data:n[C.no]})}catch(t){}}},J=V.PlayerMonitor=function(){var e=this;this.io=null,this.eo=null,this.Ot=null,this.so=null,this.Pn=T.PlayerState.UNKNOWN,this.oo=-1,this.ro=-1,this.Gn=[],this.ao=null,this.uo=null,this.ho=-2,this.co=-2,this.Ln=-1,this.U=T.DEFAULT_SIGNAL_STRENGTH,this.fo=null,this.Ti=null,this.V=null,this.M=null,this.Ae=null,this.lo=null,this.do=null,this.vo=null,this.Eo=null,this.Ne=null,this.ge=null,this.Kn=null,this.jn=null,this.qn=null,function(t){e.Ae=t}.apply(this,arguments),this.po=function(){return e.Pn},this.Qe=function(t){e.Pn!==t&&(e.Me(),e.Pn=t,e.Ao())},this.yo=function(){return e.So},this._o=function(){return e.Ro},this.$e=function(t,n){e.Me(),e.So=t,e.Ro=n,e.Co()},this.Io=function(){return e.oo},this.ze=function(t){e.oo=t},this.To=function(){return e.ro},this.Ze=function(t){e.ro=t},this.Ee=function(){return e.ho},this.ts=function(t){e.ho!==t&&(e.ho=t,e.Ao())},this.mo=function(){return e.co},this.ns=function(t){e.co!==t&&(e.co=t,e.Ao())},this.No=function(){return e.Ln},this.es=function(t){e.Ln=t},this.Oo=function(){return e.fo},this.rs=function(t){e.fo=t,e.Ao()},this.Ii=function(){return e.Ti},this.us=function(t){e.Ti=t,e.Ao()},this.hs=function(t){e.wo(t)},this.Do=function(){return e.U},this.si=function(){return e.Kn},this.ri=function(){return e.jn},this.ui=function(){return e.qn},this.cs=function(t){e.Kn!==t&&(e.Kn=t,e.Ao())},this.ss=function(t){e.jn!==t&&(e.jn=t,e.Ao())},this.os=function(t){e.qn!==t&&(e.qn=t,e.Ao())},this.Po=function(){return e.bo},this.Lo=function(){return e.Mo},this.Je=function(t,n){n<0&&(n=0),e.bo===(t=t<0?0:t)&&e.Mo===n||(e.bo=t,e.Mo=n,e.Ao())},this.Vo=function(){return e.eo},this.Uo=function(){e.Vo()&&(e.Ot=new f,e.so={},e.do={},e.ko())},this.Fo=function(t){(e.eo||t)&&(this.Me(),e.eo&&(e.eo=null,e.Uo()),t)&&(e.eo=w.Bo(e.eo,t),e.Uo())},this.Re=function(t){if(t)if(e.Ot){var n,i=!1;for(n in t)if(e.Ot[n]!==t[n]){i=!0;break}i&&(e.Me(),e.eo=w.Bo(t),e.ko())}else e.Fo(t)},this.Ie=function(t){t?e.vo!==t&&(e.vo=t,e.Ho()):(e.vo=null,e.He())},this.Me=function(){e.Go||e.vo&&(e.Go=!0,e.vo(),e.Go=!1)},this.fe=function(){return e.io},this.ve=function(t,n){e.io!==t&&(e.Me(),e.io&&(e.Ko(),e.He(),e.me()),e.io=t,e.io)&&e.Ve(n)},this.jo=function(){return e.ao},this.qo=function(){return e.uo||null},this.Wo=function(){return e.Gn},this.xo=function(){e.Gn=[]},this.vi=function(t){this.Me(),e.Gn.push(t),e.Ri()},this.Te=function(t,n){e.Me(),e.ao=t,e.uo=n,e.Yo()},this.Xo=function(){e.Me()},this.Ho=function(){e.He(),e.lo=e.Ae.create(e.Xo,1e3,"PlayerMonitor.update")},this.He=function(){e.lo&&(e.lo(),e.lo=null)},this.Oe=function(t,n,i){e.Eo=i,e.Ne=t,e.Jo(),e.ge=n,e.Ne&&I.AdType.CLIENT_SIDE===e.Ne&&(e.Pn=I.PlayerState.UNKNOWN,e.Qo(e.Ne,n,i?i[I.POD_POSITION]:null))},this.we=function(){e.Ne&&I.AdType.CLIENT_SIDE===e.Ne&&(e.zo(),e.Pn=I.PlayerState.UNKNOWN),e.Zo(),e.Ne=null,e.ge=null},this.$o=function(){return e.Eo},this.tr=function(){return e.Ne},this.getContentMetadata=function(){return this.Ot},this.me=function(){this.io=null,this.eo=null,this.Ot=null,this.so=null,this.Pn=T.PlayerState.UNKNOWN,this.oo=-1,this.ro=-1,this.Gn=[],this.ao=null,this.uo=null,this.ho=-2,this.co=-2,this.Ln=-1,this.U=T.DEFAULT_SIGNAL_STRENGTH,this.fo=null,this.Ti=null,this.V=null,this.M=null,this.Ae=null,this.lo=null,this.do=null,this.vo=null,this.Eo=null,this.Ne=null,this.ge=null,this.Kn=null,this.jn=null,this.qn=null,e.Ue=null,e.Be=h.NO_SESSION_KEY}},d=V.PlayerMonitorImpl=function(){var o=this;o.Pe=null,o.Ue=null,o.Be=h.NO_SESSION_KEY,function(t,n){J.call(this,n),o.Pe=t}.apply(this,arguments),this.getPHT=function(){return o.Io()},this.getBufferLength=function(){return o.To()},this.getRenderedFrameRate=function(){return o.No()},this.getSignalStrength=function(){return o.Do()},this.Co=function(){o.Ue&&o._ContentSessionKey!==h.NO_SESSION_KEY&&(o.yo()?o.Ue.setPlayerSeekStart(o._o()):o.Ue.setPlayerSeekEnd())},this.Ao=function(){o.Ue&&(o.Ue.setPlayerState(o.po()),o.Ee()>0&&o.Ue.setBitrateKbps(o.Ee()),o.mo()>0&&o.Ue.setAvgBitrateKbps(o.mo()),o.Po()>0&&o.Ue.setVideoResolutionWidth(o.Po()),o.Lo()>0&&o.Ue.setVideoResolutionHeight(o.Lo()),o.Oo()&&o.Ue.setCDNServerIP(o.Oo()),w.It(o.Ii())&&o.Ue.setDroppedFramesTotal(o.Ii()),w.Pt(o.si())&&o.Ue.setAudioLang(o.si()),w.Pt(o.ri())&&o.Ue.setSubtitleLang(o.ri()),w.Pt(o.ui()))&&o.Ue.setCcLang(o.ui())},this.Lt=function(){o.Be!==h.NO_SESSION_KEY&&o.Pe&&o.Pe.updateContentMetadata(o.Be,o.Ot)},this.ke=function(){if(o.Ue){o.do&&w.Ht(o.do)>0&&(o.do[I.MODULE_NAME]&&o.do[I.MODULE_VERSION]&&(t=o.do[I.MODULE_NAME],n=o.do[I.MODULE_VERSION],w.Pt(t))&&w.Pt(n)&&o.Ue.setModuleNameAndVersion(t,n),o.do[I.FRAMEWORK_NAME]&&(t=o.do[I.FRAMEWORK_NAME],w.Pt(t))&&o.Ue.setPlayerType(t),o.do[I.FRAMEWORK_VERSION])&&(n=o.do[I.FRAMEWORK_VERSION],w.Pt(n))&&o.Ue.setPlayerVersion(n);var t,n,i=o.Wo();o.xo();for(var e=0;e<i.length;e++){var s=i[e];o.Ue.vi(s)}}},this.zo=function(){o.Ue&&o.Be!==h.NO_SESSION_KEY&&(o.Ao(),this.nr())},this.Ut=function(){o.Ue&&o.Be!==h.NO_SESSION_KEY&&(o.Ao(),o.Pe.kt(o.Be))},this.nr=function(){o.Pe&&o.Be!==I.NO_SESSION_KEY&&o.Pe.adEnd(o.Be)},this.Qo=function(t,n,i){var e;o.Ue&&o.Be!==I.NO_SESSION_KEY&&(e=null,I.AdType.CLIENT_SIDE===t?e=h.AdStream.SEPARATE:I.AdType.SERVER_SIDE===t&&(e=h.AdStream.CONTENT),o.ir(e,n,i))},this.Mt=function(){o.Ue&&o.Be!==I.NO_SESSION_KEY&&o.Pe.Vt(o.Be)},this.ir=function(t,n,i){o.Pe&&o.Be!==I.NO_SESSION_KEY&&o.Pe.adStart(o.Be,t,n,i)},this.Ve=function(){if(o.Pe){o.Ue=o.Pe.getPlayerStateManager(!0),o.ke(),o.Ue.setClientMeasureInterface(this);try{var t;o.Ot&&o.Ot.custom&&!o.Ot.custom[I.UTM_TRACKING_URL]&&(Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var e,s=[],o=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)r in n&&(e=n[r],t.call(o,e,r,n))&&s.push(e);return s}),""!==(t=w.er().split("?").join("").split("&").filter(function(t){return 2===t.split("=").length&&t.split("=")[0].toLowerCase().indexOf("utm_")>=0}).join("&")))&&(o.Ot.custom[I.UTM_TRACKING_URL]=t)}catch(t){o.g.error("PlayerMonitorImpl _createSession : "+t)}o.Be=o.Pe.createSession(o.Ot,o.Ue,!0)}},this.Ko=function(){o.Pe&&(o.Ue&&(o.Ue.setPlayerState(I.PlayerState.STOPPED),o.Ue=null),o.Be!==I.NO_SESSION_KEY)&&(o.Pe.cleanupSession(o.Be),o.Be=I.NO_SESSION_KEY)},this.Ri=function(){if(o.Pe&&o.Be!==h.NO_SESSION_KEY){var t=o.Wo();o.xo();for(var n=0;n<t.length;n++){var i=t[n];o.Pe.reportError(o.Be,i.sr(),i.rr())}}},this.Yo=function(){o.Be!==h.NO_SESSION_KEY&&o.Pe&&o.Pe.sendCustomEvent(o.Be,o.jo(),o.qo())},this.ko=function(){var t,n=o.Vo(),i=!1,e=!1;for(t in n){var s=n[t];if(w.Pt(t)&&null!==s&&void 0!==s)switch(t){case I.STREAM_URL:e=!0,o.Ot.streamUrl=s;break;case I.ASSET_NAME:e=!0,o.Ot.assetName=s;break;case I.DEFAULT_RESOURCE:e=!0,o.Ot.defaultResource=s;break;case I.VIEWER_ID:e=!0,o.Ot.viewerId=s;break;case I.PLAYER_NAME:e=!0,o.Ot.applicationName=s;break;case I.DURATION:e=!0,o.Ot.duration=s;break;case I.IS_LIVE:e=!0,o.Ot.streamType=s;break;case I.ENCODED_FRAMERATE:e=!0,o.Ot.encodedFrameRate=s;break;case I.MODULE_NAME:case I.MODULE_VERSION:case I.FRAMEWORK_NAME:case I.FRAMEWORK_VERSION:i=!0,o.do[t]=s;break;default:I.APPLICATION_VERSION;e=!0,o.Ot.custom[t]=s}}i&&this.ke(),e&&this.Lt()},this.Jo=function(){this.ar(I.Events.POD_START)},this.Zo=function(){this.ar(I.Events.POD_END)},this.ar=function(t){var n,i,e;o.Pe&&o.Be!==I.NO_SESSION_KEY&&(n={},(e=this.$o())&&((i=e[I.POD_POSITION])&&(n[I.POD_POSITION]=i),(i=e[I.POD_INDEX])&&(n[I.POD_INDEX]=i+""),t===I.Events.POD_START)&&(i=e[I.POD_DURATION])&&(n[I.POD_DURATION]=i+""),(e=this.tr())&&(n[I.AD_TYPE]=e),o.Pe.sendCustomEvent(o.Be,t,n))},this.wo=function(t){o.Ue.setDroppedFramesCount(t)},this.ur=function(t){this.Be===I.NO_SESSION_KEY&&t!==I.NO_SESSION_KEY&&(this.Be=t)},this.Fe=function(){return this.Be},this.Jt=function(){return o.Pe.getSessionId(this.Be)},this.Qt=function(){return o.Pe.getClientId(this.Be)},this.zt=function(t,n){o.Pe.zt(this.Be,t,n)},d.prototype=Object.create(J.prototype),d.prototype.constructor=d},lt.Impl=lt.Impl||{},lt.Impl.Html5Http=function(){!function(){}.apply(this,arguments),this.makeRequest=function(){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(t,n,i,e,s,o){var r=new XMLHttpRequest;return r.open(t,n,!0),e&&r.overrideMimeType&&(r.overrideMimeType=e),e&&r.setRequestHeader&&r.setRequestHeader("Content-Type",e),s>0&&(r.timeout=s,r.ontimeout=function(){r.ontimeout=r.onreadystatechange=null,o&&o(!1,"timeout after "+s+" ms")}),r.onreadystatechange=function(){4===r.readyState&&(r.ontimeout=r.onreadystatechange=null,200===r.status?o&&o(!0,r.responseText):o&&o(!1,"http status "+r.status))},r.send(i),null},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Logging=function(){!function(){}.apply(this,arguments),this.consoleLog=function(t,n){"undefined"!==typeof console&&(console.log&&n===u.LogLevel.DEBUG||n===u.LogLevel.INFO?console.log(t):console.warn&&n===u.LogLevel.WARNING?console.warn(t):console.error&&n===u.LogLevel.ERROR&&console.error(t))},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Metadata=function(){!function(){}.apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!==typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Storage=function(){!function(){}.apply(this,arguments),this.saveData=function(t,n,i,e){t=t+"."+n;try{localStorage.setItem(t,i),e(!0,null)}catch(t){e(!1,t.toString())}},this.loadData=function(t,n,i){t=t+"."+n;try{i(!0,localStorage.getItem(t))}catch(t){i(!1,t.toString())}},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Time=function(){!function(){}.apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},lt.Impl=lt.Impl||{},lt.Impl.Html5Timer=function(){!function(){}.apply(this,arguments),this.createTimer=function(t,n){var i=setInterval(t,n);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}},v=V.VideoAnalytics=function(){var s=this;s.pe=null,s.g=null,s._=null,s.Ae=null,s.de=null,s.ye=null,this.release=function(){s.g&&s.g.debug("VideoAnalytics.release()"),s.de&&s.de.fe()&&s.de.ve(!1),"undefined"!==typeof lt.ProxyMonitor&&s.ye&&(lt.ProxyMonitor.release(s.ye),s.ye=null),s.de&&(s.de.Ie(null),s.de.me(),s.de=null),s.Ae=null},function(t,n){s.pe=t,s._=n,s.Ae=n.buildTimer(I.version),s.g=n.buildLogger(),s.g.setModuleName("VideoAnalytics"),s.de=new d(s.pe,s.Ae),m.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(t){s.g&&s.g.debug("VideoAnalytics.reportPlaybackRequested()"),s.de?(w.Ht(t)>0&&s.setContentInfo(t),s.de.fe()||s.de.ve(!0)):s.g.error("VideoAnalytics.reportPlaybackRequested() : "+I.v)},this.reportPlaybackEnded=function(){s.g&&s.g.debug("VideoAnalytics.reportPlaybackEnded()"),s.de?s.de.fe()&&(s.de.ve(!1),"undefined"!==typeof lt.ProxyMonitor&&s.ye&&(lt.ProxyMonitor.release(s.ye),s.ye=null),s.de.Ie(null)):s.g.error("VideoAnalytics.reportPlaybackEnded() : "+I.v)},this.reportPlaybackFailed=function(t,n){s.de?(w.Ht(n)>0&&s.setContentInfo(n),s.de.fe()||s.de.ve(!0),s.g&&s.g.debug("VideoAnalytics.reportPlaybackFailed()"),s.reportPlaybackError(t,h.ErrorSeverity.FATAL),s.reportPlaybackEnded()):s.g.error("VideoAnalytics.reportPlaybackFailed() : "+I.o)},this.setContentInfo=function(t){w.Ht(t)<=0?s.g.error("VideoAnalytics.setContentInfo() : Content Info is not set"):s.de?(s.g&&s.g.debug("VideoAnalytics.setContentInfo()"),s.de.Re(t)):s.g.error("VideoAnalytics.setContentInfo() : "+I.o)},this.setPlayerInfo=function(t){w.Ht(t)<=0?s.g.error("VideoAnalytics.setPlayerInfo() : Player Info is not set"):s.de?(s.g&&s.g.debug("VideoAnalytics.setPlayerInfo()"),s.de.Re(t)):s.g.error("VideoAnalytics.setPlayerInfo() : "+I.o)},this.reportPlaybackMetric=function(){0===arguments.length?s.g.error("VideoAnalytics.reportPlaybackMetric() : Need to report metric mandatory"):1===arguments.length?s.Ce(arguments[0]):2===arguments.length?s.Ce(arguments[0],arguments[1]):3===arguments.length?s.Ce(arguments[0],arguments[1],arguments[2]):4===arguments.length&&s.Ce(arguments[0],arguments[1],arguments[2],arguments[3])},this.reportPlaybackError=function(t,n){s.de?w.Pt(t)?(s.g&&s.g.debug("VideoAnalytics.reportPlaybackError()"),t=new L(t,n),s.de.vi(t)):s.g.error("VideoAnalytics.reportPlaybackError() : errorMessage need to be valid string"):s.g.error("VideoAnalytics.reportPlaybackError() : "+I.o)},this.reportPlaybackEvent=function(t,n){if(w.Pt(t))if(s.de){if(s.g&&s.g.debug("VideoAnalytics.reportPlaybackEvent()"),s.de)switch(t){case I.Events.USER_WAIT_STARTED:case I.Events.BUMPER_VIDEO_STARTED:s.de.Mt();break;case I.Events.USER_WAIT_ENDED:case I.Events.BUMPER_VIDEO_ENDED:s.de.Ut();break;default:s.de.Te(t,n)}}else s.g.error("VideoAnalytics.reportPlaybackEvent() : "+I.o);else s.g.error("VideoAnalytics.reportPlaybackEvent(): eventType parameter must be a valid string.")},this.setCallback=function(t){s.g&&s.g.debug("setCallback()"),s.de&&s.de.Ie(t)},this.reportAdBreakStarted=function(t,n,i){s.de?(s.g&&s.g.debug("VideoAnalytics.reportAdBreakStarted()"),s.de.Oe(t,n,i)):s.g.error("VideoAnalytics.reportAdBreakStarted() : "+I.o)},this.reportAdBreakEnded=function(){s.de?(s.g&&s.g.debug("VideoAnalytics.reportAdBreakEnded()"),s.de.we()):s.g.error("VideoAnalytics.reportAdBreakEnded() : "+I.o)},this.setPlayer=function(t,n){var i,e;void 0===t?s.g.error("VideoAnalytics.setPlayer() : Need to configure the Player"):(n&&(i=n[I.CONVIVA_MODULE],e=n[I.MEDIA_ELEMENT]),"undefined"!==typeof i?lt.ProxyMonitor=i.ProxyMonitor:"undefined"!==typeof ConvivaModule&&(lt.ProxyMonitor=ConvivaModule.ProxyMonitor),"undefined"===typeof lt.ProxyMonitor?s.g.error("VideoAnalytics.setPlayer() : Include the missing Player Module"):(s.g&&s.g.debug("VideoAnalytics.setPlayer()"),!t&&s.ye?(lt.ProxyMonitor.release(s.ye),s.ye=null):t?(s.ye&&lt.ProxyMonitor.release(s.ye),s.g&&s.g.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),s.ye="undefined"!==typeof e?lt.ProxyMonitor.initConvivaDropIn(t,e,s._,this,lt):lt.ProxyMonitor.initConvivaDropIn(t,s._,this,lt)):"undefined"!==typeof e&&(s.ye=lt.ProxyMonitor.initConvivaDropIn(t,e,s._,this,lt))))},this.setAdAnalytics=function(t){t?s.getAdType()&&(s.getAdType()===I.AdType.SERVER_SIDE?s.ce=t.getAdPlayerMonitor():s.getAdType()===I.AdType.CLIENT_SIDE&&s.g&&s.g.error("VideoAnalytics.setAdAnalytics() : API is not meant for Client Side Ads")):s.ce=null},this.configureExistingSession=function(t){t===I.NO_SESSION_KEY?s.g.error("VideoAnalytics.configureExistingSession() : Invalid Session Key"):s.de?(s.g&&s.g.debug("VideoAnalytics.configureExistingSession()"),s.de.ur(t)):s.g.error("VideoAnalytics.configureExistingSession() : "+I.o)},this.getSessionId=function(){return s.de?(s.g&&s.g.debug("VideoAnalytics.getSessionId()"),s.de.Jt()):(s.g.error("VideoAnalytics.getSessionId() : "+I.o),I.NO_SESSION_KEY)},this.getClientId=function(){return s.de?(s.g&&s.g.debug("VideoAnalytics.getClientId()"),s.de.Qt()):(s.g.error("VideoAnalytics.getClientId() : "+I.o),null)},this._e=function(){return s.g&&s.g.debug("VideoAnalytics.getPlayerMonitor()"),this.de},this.getAdType=function(){return s.de?s.de.Ne:null},this.De=function(){return s.de?s.de.ge:null},v.prototype=Object.create(m.prototype),v.prototype.constructor=v},V.JsonParse=(k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(t){throw{name:"SyntaxError",message:t,at:n,text:U}},r=function(t){return t&&t!==s&&o("Expected '"+t+"' instead of '"+s+"'"),s=U.charAt(n),n+=1,s},F=function(){var t,n,i,e="";if('"'===s)for(;r();){if('"'===s)return r(),e;if("\\"===s)if(r(),"u"===s){for(n=i=0;n<4&&(t=parseInt(r(),16),isFinite(t));n+=1)i=16*i+t;e+=String.fromCharCode(i)}else{if("string"!==typeof k[s])break;e+=k[s]}else e+=s}o("Bad string")},e=function(){for(;s&&s<=" ";)r()},a=function(){switch(e(),s){case"{":var t,n={};if("{"===s){if(r("{"),e(),"}"===s)return r("}"),n;for(;s;){if(t=F(),e(),r(":"),Object.hasOwnProperty.call(n,t)&&o('Duplicate key "'+t+'"'),n[t]=a(),e(),"}"===s)return r("}"),n;r(","),e()}}return void o("Bad object");case"[":var i=[];if("["===s){if(r("["),e(),"]"===s)return r("]"),i;for(;s;){if(i.push(a()),e(),"]"===s)return r("]"),i;r(","),e()}}return void o("Bad array");case'"':return F();case"-":return ct();default:return(s>="0"&&s<="9"?ct:function(){switch(s){case"t":return r("t"),r("r"),r("u"),r("e"),!0;case"f":return r("f"),r("a"),r("l"),r("s"),r("e"),!1;case"n":return r("n"),r("u"),r("l"),r("l"),null}o("Unexpected '"+s+"'")})()}},function(t,r){return U=t,n=0,s=" ",t=a(),e(),s&&o("Syntax error"),"function"===typeof r?function t(n,i){var e,s,o=n[i];if(o&&"object"===typeof o)for(e in o)Object.hasOwnProperty.call(o,e)&&(void 0!==(s=t(o,e))?o[e]=s:delete o[e]);return r.call(n,i,o)}({"":t},""):t}),y=V.JSON2={},"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!==typeof y.stringify&&(E=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Q={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},y.stringify=function(t,n,i){var e;if(A=p="","number"===typeof i)for(e=0;e<i;e+=1)A+=" ";else"string"===typeof i&&(A=i);if(!(g=n)||"function"===typeof n||"object"===typeof n&&"number"===typeof n.length)return function t(n,i){var e,s,o,r,a,u=p,h=i[n];switch(h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(n)),typeof(h="function"===typeof g?g.call(i,n,h):h)){case"string":return ft(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(p+=A,a=[],Object.prototype.toString.apply(h)===Object.prototype.toString.apply([])){for(r=h.length,e=0;e<r;e+=1)a[e]=t(e,h)||"null";o=0===a.length?"[]":p?"[\n"+p+a.join(",\n"+p)+"\n"+u+"]":"["+a.join(",")+"]"}else{if(g&&"object"===typeof g)for(r=g.length,e=0;e<r;e+=1)"string"===typeof g[e]&&(o=t(s=g[e],h))&&a.push(ft(s)+(p?": ":":")+o);else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(o=t(s,h))&&a.push(ft(s)+(p?": ":":")+o);o=0===a.length?"{}":p?"{\n"+p+a.join(",\n"+p)+"\n"+u+"}":"{"+a.join(",")+"}"}return p=u,o}}("",{"":t});throw new Error("JSON2.stringify")}),R=V.hr={cr:"0123456789abcdef",lr:function(t){for(var n="",i=7;i>=0;i--)n+=R.cr.charAt(t>>4*i&15);return n},dr:function(t){for(var n=1+(t.length+8>>6),i=new Array(16*n),e=0;e<16*n;e++)i[e]=0;for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<24-e%4*8;return i[e>>2]|=128<<24-e%4*8,i[16*n-1]=8*t.length,i},vr:function(t,n){var i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i},Er:function(t,n){return t<<n|t>>>32-n},pr:function(t,n,i,e){return t<20?n&i|~n&e:!(t<40)&&t<60?n&i|n&e|i&e:n^i^e},Ar:function(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514},gr:function(t){for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return R.yr(n)},yr:function(t){if(""===t)return"";for(var n,i=R.dr(t),e=new Array(80),s=1732584193,o=-271733879,r=-1732584194,a=271733878,u=-1009589776,h=0;h<i.length;h+=16){for(var c=s,f=o,l=r,d=a,v=u,E=0;E<80;E++)e[E]=E<16?i[h+E]:R.Er(e[E-3]^e[E-8]^e[E-14]^e[E-16],1),n=R.vr(R.vr(R.Er(s,5),R.pr(E,o,r,a)),R.vr(R.vr(u,e[E]),R.Ar(E))),u=a,a=r,r=R.Er(o,30),o=s,s=n;s=R.vr(s,c),o=R.vr(o,f),r=R.vr(r,l),a=R.vr(a,d),u=R.vr(u,v)}return R.lr(s)+R.lr(o)+R.lr(r)+R.lr(a)+R.lr(u)}},(C=V.CwsProtocol=function(){this.Sr=function(t,n,i,e){return e.seq=t,e.st=n,e.t=i,e},this._r=function(t,n){var i=C.zs;return this.Sr(t,n,i,{})}}).version="2.6",C.Rr="/0/wsg",C.H="0",C.Cr=-1,C.Ir=!1,C.Tr=2,C.mr=-1,C.Nr=-1,C.Or=1e3,C.wr="sdk.js.1",C.Gs="CwsStateChangeEvent",C.Xs="CwsErrorEvent",C.zs="CwsSessionEndEvent",C.Zs="CwsCustomEvent",C.Dr="CwsSeekEvent",C.Pr="CwsDataSamplesEvent",C.Lr="ok",C.Mr="err",C.Vr="clid",C.Ur="cfg",C.kr="evs",C.Fr="maxhbinfos",C.Br="slg",C.Hr="hbi",C.Gr="gw",C.Kr="fp",C.jr="csi_en",C.qr="CwsSessionHb",C.Wr="t",C.Yr="st",C.Xr="sst",C.Jr="lv",C.Qr="seq",C.zr="cid",C.Zr="clid",C.$r="clv",C.ta="pver",C.na="iid",C.ia="sid",C.ea="vid",C.sa="an",C.oa="pn",C.ra="tags",C.aa="sf",C.ua="evs",C.ha="lg",C.ca="hbinfos",C.fa="sdk",C.la="pj",C.Ks="ps",C.xs="br",C.Ys="avgbr",C.da="cl",C.va="efps",C.Ea="afps",C.pa="rfpstot",C.Aa="rfpscnt",C.ga="rs",C.ya="pht",C.Sa="bl",C._a="url",C.Ra="caps",C.Ca="pm",C.Ia="w",C.Ta="h",C.ma="ct",C.Na="le",C.Oa="dftot",C.wa="dfcnt",C.Da="al",C.Pa="sl",C.ba="cal",C.La="ss",C.Ma="csi_n",C.Va="csi_t",C.Ua="csi_l",C.ka="csi_v",C.Fa="csi_c",C.Ba="sch",C.Ha="br",C.Ga="brv",C.Ka="dvb",C.ja="dvma",C.qa="dvm",C.Wa="dvt",C.xa="dvv",C.Ya="sw",C.Xa="sh",C.Ja="scf",C.Qa="fw",C.za="fwv",C.Za="cc",C.$a="mn",C.tu="mv",C.nu="os",C.iu="osv",C.eu="cat",C.su="caps",C.ou="t",C.ru="seq",C.au="st",C.uu="act",C.hu="skto",C.Js="err",C.Qs="ft",C.Ds="new",C.cu="old",C.$s="name",C.no="attr",C.fu="seq",C.lu="err",C.du="rtt",C.vu="ad",C.Eu="csi",C.pu=function(t){switch(t){case T.PlayerState.STOPPED:return C.Au;case T.PlayerState.PLAYING:return C.js;case T.PlayerState.BUFFERING:return C.qs;case T.PlayerState.PAUSED:return C.Ws;case T.PlayerState.NOT_MONITORED:return C.gu;default:return C.yu}},C.Au=1,C.js=3,C.qs=6,C.Ws=12,C.gu=98,C.yu=100,C.Su={_u:0,Rt:1,Ru:2,Cu:4},C.Iu={Tu:0},z=V.LibJSONInterface=function(){this.mu=function(t){var n=null;try{n=y.stringify(t)}catch(t){}return n},this.Nu=function(t){var n=null;try{n=V.JsonParse(t)}catch(t){return n}return n=w.Ou(n)?n:null}},Z=V.CwsHeartbeat=function(){this.wu={},function(){}.apply(this,arguments),this.get=function(){return this.wu},this.Du=function(t,n){this.wu[t]=n},this.Pu=function(t,n,i){this.wu[t]||(this.wu[t]={}),this.wu[t][n]=i},this.bu=function(t){this.Du(C.Wr,t)},this.Lu=function(t){this.Du(C.Yr,t)},this.Mu=function(t){this.Du(C.Xr,t)},this.Vu=function(t){this.Du(C.Jr,t)},this.Uu=function(t){this.Du(C.Qr,t)},this.ku=function(t){this.Du(C.zr,t)},this.Fu=function(t){this.Du(C.Zr,t)},this.Bu=function(t){this.Du(C.$r,t)},this.Hu=function(t){this.Du(C.ta,t)},this.Gu=function(t){this.Du(C.su,t)},this.ci=function(t){this.Du(C.ia,t)},this.Ku=function(t){this.Du(C.na,t)},this.ju=function(t){this.Du(C.ea,t)},this.qu=function(t){this.Du(C.sa,t)},this.Wu=function(t){this.Du(C.oa,t)},this.xu=function(t){this.Du(C.ra,t)},this.Yu=function(t){this.Du(C.aa,t)},this.Xu=function(t){this.Du(C.Ra,t)},this.Ju=function(t){this.Du(C.ua,t)},this.Qu=function(t){this.Du(C.fa,t)},this.zu=function(t){this.Du(C.ha,t)},this.Zu=function(t){this.Du(C.ca,t)},this.Qe=function(t){this.Du(C.Ks,t)},this.$u=function(t){this.Du(C.la,t)},this.th=function(t){this.Du(C.da,t)},this.nh=function(t){this.Du(C.xs,t)},this.ih=function(t){this.Du(C.Ys,t)},this.eh=function(t){this.Du(C.ga,t)},this.sh=function(t){this.Du(C.va,t)},this.oh=function(t){this.Du(C.Ea,t)},this.rh=function(t){this.Du(C.Aa,t)},this.ah=function(t){this.Du(C.pa,t)},this.uh=function(t){this.Pu(C.Ca,C.Ba,t)},this.hh=function(t){this.Pu(C.Ca,C.Ha,t)},this.fh=function(t){this.Pu(C.Ca,C.Ga,t)},this.lh=function(t){this.Pu(C.Ca,C.Ka,t)},this.dh=function(t){this.Pu(C.Ca,C.ja,t)},this.Eh=function(t){this.Pu(C.Ca,C.qa,t)},this.ph=function(t){this.Pu(C.Ca,C.Wa,t)},this.Ah=function(t){this.Pu(C.Ca,C.xa,t)},this.gh=function(t){this.Pu(C.Ca,C.Qa,t),this.Du(C.Qa,t)},this.yh=function(t){this.Pu(C.Ca,C.za,t),this.Du(C.za,t)},this.Sh=function(t){this.Pu(C.Ca,C.nu,t.toUpperCase())},this._h=function(t){this.Pu(C.Ca,C.iu,t)},this.Rh=function(t){this.Pu(C.Ca,C.eu,t)},this.Ch=function(t){this.Pu(C.Ca,C.Ya,t)},this.Ih=function(t){this.Pu(C.Ca,C.Xa,t)},this.Th=function(t){this.Pu(C.Ca,C.Ja,t)},this.mh=function(t){this.Du(C.Oa,t)},this.wo=function(t){this.Du(C.wa,t)},this.Nh=function(t){this.Du(C.ya,t)},this.Oh=function(t){this.Du(C.Sa,t)},this.wh=function(t){this.Du(C._a,t)},this.Dh=function(t){this.Du(C.Ia,t)},this.Ph=function(t){this.Du(C.Ta,t)},this.bh=function(t){this.Du(C.ma,t)},this.Lh=function(t){this.Du(C.Na,t)},this.Mh=function(){this.Du(C.vu,!0)},this.Vh=function(t){this.Du(C.La,t)},this.setModuleName=function(t){this.Pu(C.Za,C.$a,t)},this.Uh=function(t){this.Pu(C.Za,C.tu,t)},this.kh=function(t){this.Du(C.Eu,t)},this.Fh=function(t){t&&this.Du(C.Ma,t)},this.Bh=function(t){t&&this.Du(C.Va,t)},this.Hh=function(t){t&&this.Du(C.Ua,t)},this.Gh=function(t){t&&this.Du(C.ka,t)},this.Kh=function(t){t&&this.Du(C.Fa,t)},this.jh=function(t){this.Du(C.Da,t)},this.qh=function(t){this.Du(C.Pa,t)},this.Wh=function(t){this.Du(C.ba,t)}},(N=V.CwsSession=function(){var p=this;p.Yh=null,p.Xh=200,p.Jh=5e3,p.Ot=null,p.bs=0,p.Qh=0,p.zh=C.Su._u,p.Zh=C.Iu.Tu,p.$h=[],p.tc=-1,p.wn=-2,p.Dn=-2,p.Ti=-1,p.nc=-1,p.ic=null,p.Pn=T.PlayerState.UNKNOWN,p.Nn=-1,p.Vs=-1,p.Rn=null,p.Fn=-1,p.Bn=-1,p.Ue=null,p.An=null,p.Sn=null,p.Ms=null,p.Us=null,p.ec={},p.sc=null,p.oc=null,p.rc=null,p.ac=null,p.uc=null,p.hc=null,p.cc=null,p.fc=null,p.lc=null,p.dc=null,p.vc=null,p.Ec=null,p.Ac=null,p.gc=null,p.yc=null,p.Un=null,p.kn=null,p.M=null,p.V=null,p.fo=null,p.Sc=null,p._c=!1,p.Rc=!1,p.Cc=!1,p.Ic=!1,p.Tc=!1,p.mc=null,p.Nc=1e3,p.Oc=0,p.wc=0,p.Dc={},p.D={},p.Pc=!1,p.bc=null,p.Lc=null,p.Mc=null,p.Vc=null,p.Uc=null,p.kc=null,p.Fc=12e4,p.Bc=C.Ir,p.Hc=!1,p.Gc=null,p.Fi=null,p.Kn=null,p.jn=null,p.qn=null,function(t,n,i,e,s,o,r,a,u,h,c,f,l){this.Kc=t,this.pe=n,this.ki=i,this.g=e,this.g.setModuleName("CwsSession"),this.T=s,this.Ae=o,this.jc=r,this.qc=a,this.Wc=u,this.Bi=h,this.xc=c,this.Ot=f,this.Ot&&(p.Nn=this.Ot.encodedFrameRate,p.Rn=this.Ot.streamUrl,p.Vs=this.Ot.duration),this.xc&&(p.Gc=p.xc.get(O.B)),p.Fi=l}.apply(this,arguments),this.St=function(){this.xc=null,this.Bi=null,this.I=null,this.Wc=null,this.qc=null,this.jc=null,this.Ae=null,this.T=null,this.g=null,this.ki=null,this.pe=null,this.Kc.Yc(),this.Kc=null,this.Sc=null,this.Cc=!0},this.Xc=function(t){this.Ps=t,this.Jc=this.Ps.Jc,this.g.ci(this.Ps.N),this.bs=this.Wc.current(),this.ws()||this.Qc()?(this.zh+=N.xh,p.g.info("start(): assetName="+p.Ot.assetName)):p.g.info("start()"+p.zc())},this.Zc=function(){this.Ic=!0},this.$c=function(){this.g.debug("initialize()"),(this.ws()||this.Qc()||this.Bs())&&(this.pe&&this.pe.p&&this.pe.p.Hs(I.APP_TRACKER_EVENT.VIDEO_ATTEMPT,{},this),p.tf(),p.nf(),p.if(),this.ws()||this.Qc())&&p.ef()},this.sf=function(){this.g.debug("end(): schedule the last hb before session cleanup"+p.zc()),this.rf(),this.af(),this.uf(),this.hf()},this.cf=function(){this.Ic||(this.hf(),this.ff())},this.hh=function(t){var n=p.sc;n!==t&&t&&(p.g.debug("Change browserName from "+n+" to "+t),p.sc=t)},this.fh=function(t){var n=p.oc;n!==t&&t&&(p.g.debug("Change browserVersion from "+n+" to "+t),p.oc=t)},this.lh=function(t){var n=p.rc;n!==t&&t&&(p.g.debug("Change deviceBrand from "+n+" to "+t),p.rc=t)},this.dh=function(t){var n=p.ac;n!==t&&t&&(p.g.debug("Change deviceManufacturer from "+n+" to "+t),p.ac=t)},this.Eh=function(t){var n=p.uc;n!==t&&t&&(p.g.debug("Change deviceModel from "+n+" to "+t),p.uc=t)},this.ph=function(t){var n=p.hc;n!==t&&t&&(p.g.debug("Change deviceType from "+n+" to "+t),p.hc=t)},this.Ah=function(t){var n=p.cc;n!==t&&t&&(p.g.debug("Change deviceVersion from "+n+" to "+t),p.cc=t)},this.Sh=function(t){var n=p.dc;n!==t&&t&&(p.g.debug("Change operatingSystemName from "+n+" to "+t),p.dc=t)},this._h=function(t){var n=p.vc;n!==t&&t&&(p.g.debug("Change operatingSystemVersion from "+n+" to "+t),p.vc=t)},this.Rh=function(t){var n=p.Ec;n!==t&&t&&(p.g.debug("Change deviceCategory from "+n+" to "+t),p.Ec=t)},this.Ch=function(t){var n=p.Ac;n!==t&&t&&(p.g.debug("Change screenWidth from "+n+" to "+t),p.Ac=t)},this.Ih=function(t){var n=p.gc;n!==t&&t&&(p.g.debug("Change screenHeight from "+n+" to "+t),p.gc=t)},this.Th=function(t){var n=p.Ec;n!==t&&t&&(p.g.debug("Change scaleFactor from "+n+" to "+t),p.yc=t)},this.ks=function(){return p.fc},this.gh=function(t){var n=p.fc;n!==t&&t&&(p.g.debug("Change frameworkName from "+n+" to "+t),p.fc=t)},this.Fs=function(){return p.lc},this.yh=function(t){var n=p.lc;n!==t&&t&&(p.g.debug("Change frameworkVersion from "+n+" to "+t),p.lc=t)},this.wh=function(t){var n;p.Ot.streamUrl||(n=p.Rn)!==t&&t&&(p.g.debug("Change stream url from "+n+" to "+t),p.Rn=t)},this.lf=function(){p.af(),p.Hc||(p.df(),p.kc=p.Ae.create(p.df,p.Fc,"CwsSession.startCdnTimer"),p.g.debug("fetching cdn ip timer started"))},this.af=function(){p.kc&&(p.kc(),p.vf(null,null,null,null,null),p.kc=null)},this.df=function(){p.g.debug("detectCDNServerIp(): For "+p.Rn),p.Bc?p.Ef():p.af()},this.Ef=function(){try{var t;"function"===typeof XMLHttpRequest||"object"===typeof XMLHttpRequest?((t=new XMLHttpRequest).open("HEAD",p.Rn,!0),t.setRequestHeader("Pragma","akamai-x-cache-on"),t.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(this.getAllResponseHeaders().indexOf("x-cache")>=0||this.getAllResponseHeaders().indexOf("X-Cache")>=0)?p.vf("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):p.vf("null","header","null","null",""+this.status))},t.send()):p.g.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){p.g.info("Exception caught in makeAkamaiHeadRequest")}},this.vf=function(t,n,i,e,s){var o={},r={};p.bc!==t&&(null!==p.bc&&(r[C.Ma]=p.bc),p.bc=t,null===p.bc?o[C.Ma]="null":o[C.Ma]=p.bc),p.Lc!==n&&(null!==p.Lc&&(r[C.Va]=p.Lc),p.Lc=n,null===p.Lc?o[C.Va]="null":o[C.Va]=p.Lc),p.Mc!==i&&(null!==p.Mc&&(r[C.Ua]=p.Mc),p.Mc=i,null===p.Mc?o[C.Ua]="null":o[C.Ua]=p.Mc),p.Vc!==e&&(null!==p.Vc&&(r[C.ka]=p.Vc),p.Vc=e,null===p.Vc?o[C.ka]="null":o[C.ka]=p.Vc),p.Uc!==s&&(null!==p.Uc&&(r[C.Fa]=p.Uc),p.Uc=s,null===p.Uc?o[C.Fa]="null":o[C.Fa]=p.Uc),"{}"!==JSON.stringify(o)&&p.pf(o,r)},this.Af=function(t){var n=p.wn;n!==t&&t>0&&(p.g.info("Change bitrate from "+n+" to "+t),p.gf(n,t),p.wn=t)},this.yf=function(t){var n=p.Dn;n!==t&&t>0&&(p.g.info("Change Avg bitrate from "+n+" to "+t),p.Sf(n,t),p.Dn=t)},this.mh=function(t){var n=p.Ti;n!==t&&t>=0&&(p.g.info("Change dropped frames total from "+n+" to "+t),p._f(n,t),p.Ti=t)},this.wo=function(t){var n=p.nc,i=t+(-1===p.nc?0:p.nc);n!==t&&i>=0&&(p.g.info("Change dropped frames count from "+n+" to "+i),p.Rf(n,i),p.nc=i)},this.eh=function(t){var n=p.ic;n!==t&&t&&(p.g.info("Change resource from "+n+" to "+t),p.ic=t)},this.qu=function(t){p.An!==t&&t&&(p.g.info("Change assetName from "+p.An+" to "+t),p.An=t)},this.Vu=function(t){var n=p.Us;n!==t&&w.ee(t)&&(p.g.info("Change isLive from "+n+" to "+t),p.Us=t)},this.ju=function(t){var n=p.Sn;n!==t&&t&&(p.g.info("Change viewerId from "+n+" to "+t),p.Sn=t)},this.Wu=function(t){var n=p.Ms;n!==t&&t&&(p.g.info("Change playerName from "+n+" to "+t),p.Ms=t)},this.xu=function(t){var n=p.ec;!w.Cf(n,t)&&t&&(p.g.info("Change tags from "+w.If(n)+" to "+w.If(t)),p.ec=t)},this.sh=function(t){p.Ot.encodedFrameRate>0||(p.g.debug("setEncodedFrameRate(): "+t),p.Nn=t)},this.th=function(t){p.Ot.duration>0||(p.g.debug("setContentLength(): "+t),p.Vs=t)},this.Qe=function(t){var n,i=!1;p.Rc||t!==T.PlayerState.PLAYING||(p.Rc=!0,p.ws()&&(i=!0),w.Pt(p.Ot.viewerId)||p.g.error("Missing viewerId. viewerId should be updated before first frame is rendered."),w.Pt(p.Ot.streamType)&&f.StreamType.UNKNOWN!==p.Ot.streamType||p.g.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),w.Pt(p.Ot.applicationName))||p.g.error("Missing applicationName. applicationName should be updated before first frame is rendered."),p.Pn!==t&&(n=p.Pn,p.g.info("setPlayerState(): changing player state from "+n+" to "+t),p.Tf(n,t),p.Pn=t,i)&&(p.g.info("SetPlayerState(): to playing state triggered urgent HB"),p.mf())},this.Nf=function(t){var n=p.Fn;n!==t&&t>0&&(p.g.debug("Change stream resolution width from "+n+" to "+t),p.Of(n,t),p.Fn=t)},this.wf=function(t){var n=p.Bn;n!==t&&t>0&&(p.g.debug("Change stream resolution height from "+n+" to "+t),p.Df(n,t),p.Bn=t)},this.bh=function(t){var n=p.M;n!==t&&t&&(p.g.debug("Change network connection type from "+n+" to "+t),p.Pf(n,t),p.M=t)},this.Lh=function(t){var n=p.V;n!==t&&t&&(p.g.debug("Change network link encryption from "+n+" to "+t),p.bf(n,t),p.V=t)},this.kh=function(t){p.Hc=!0,p.af();var n=p.fo;n!==t&&w.Pt(t)&&(p.g.debug("Change CDN Server IP from "+n+" to "+t),p.Lf(n,t),p.fo=t)},this.jh=function(t){var n=p.Kn;n!==t&&w.Pt(t)&&!p.Ps.Mf&&(p.g.info("Change Audio Lang from "+n+" to "+t),p.Vf(n,t),p.Kn=t)},this.qh=function(t){var n=p.jn;n!==t&&w.Pt(t)&&!p.Ps.Uf&&(p.g.info("Change Subtitle Lang from "+n+" to "+t),p.kf(n,t),p.jn=t)},this.Wh=function(t){var n=p.qn;n!==t&&w.Pt(t)&&!p.Ps.Ff&&(p.g.info("Change Closed Caption Lang from "+n+" to "+t),p.Bf(n,t),p.qn=t)},this.Hf=function(t){var n;p.g.debug("togglePauseJoin()"),p._c===t?p.g.debug("togglePauseJoin(): same value, ignoring"):(t=p._c,n=!p._c,p.Gf(t,n),p._c=!p._c)},this.Kf=function(t,n){p.jf(t,n),p.g.info("sendError(): triggered urgent HB"),n&&p.mf()},this.qf=function(t,n){var i,e;n[C.ou]=t,n[C.au]=this.Ls(),n[C.ru]=this.Kc.Wf(),this.Ue&&(i=b.xf(this.Ue.getPHT(),0,null,-1),e=b.xf(this.Ue.getBufferLength(),0,null,-1),i>=0&&(n[C.ya]=i),e>0)&&(n[C.Sa]=e),this.Kc.Yf(n),this.pe.p&&this.pe.p.Hs(t,n,this)},this.Xf=function(t){p.Ue=t,p.Ue?p.Jf():p.Qf()},this.rf=function(){var t=this.qc._r(this.zf(),this.Ls());this.pe.p&&this.pe.p.Hs(C.zs,{},this),this.Kc.Yf(t)},this.jf=function(t,n){var i={};i[C.Js]=t,i[C.Qs]=n,this.qf(C.Xs,i)},this.gf=function(t,n){var i={},e={};t>0&&(e[C.xs]=t),i[C.xs]=n,this.pf(i,e)},this.Sf=function(t,n){var i={},e={};t>0&&(e[C.Ys]=t),i[C.Ys]=n,this.pf(i,e)},this.Zf=function(t,n){var i={};i[C.uu]=t,n>=0&&(i[C.hu]=n),this.qf(C.Dr,i)},this.Of=function(t,n){var i={},e={};-1!==t&&(e[C.Ia]=t),i[C.Ia]=n,this.pf(i,e)},this.Df=function(t,n){var i={},e={};-1!==t&&(e[C.Ta]=t),i[C.Ta]=n,this.pf(i,e)},this.Pf=function(t,n){var i={},e={};null!==t&&(e[C.ma]=t),i[C.ma]=n,this.pf(i,e)},this.bf=function(t,n){var i={},e={};null!==t&&(e[C.Na]=t),i[C.Na]=n,this.pf(i,e)},this.Lf=function(t,n){var i={},e={};w.Pt(t)&&(e[C.Eu]=t),i[C.Eu]=n,this.pf(i,e)},this._f=function(t,n){var i={},e={};t>=0&&(e[C.Oa]=t),i[C.Oa]=n,this.pf(i,e)},this.Rf=function(t,n){var i={},e={};t>=0&&(e[C.wa]=t),i[C.wa]=n,this.pf(i,e)},this.Vf=function(t,n){var i={},e={};t!==n&&("string"===typeof t&&(e[C.Da]=t),i[C.Da]=n),this.pf(i,e)},this.kf=function(t,n){var i={},e={};t!==n&&("string"===typeof t&&(e[C.Pa]=t),i[C.Pa]=n),this.pf(i,e)},this.Bf=function(t,n){var i={},e={};t!==n&&("string"===typeof t&&(e[C.ba]=t),i[C.ba]=n),this.pf(i,e)},this.Gf=function(t,n){var i={},e={};e[C.la]=t,i[C.la]=n,this.pf(i,e)},this.Tf=function(t,n){var i={},e={};i[C.Ks]=C.pu(n),e[C.Ks]=C.pu(t),this.pf(i,e)},this.pf=function(t,n){var i={};i[C.Ds]=t,n&&w.Ht(n)>0&&(i[C.cu]=n),this.qf(C.Gs,i)},this.$f=function(t,n){var i={};i[C.$s]=t,w.Ht(n)>0&&(i[C.no]=n),this.qf(C.Zs,i)},this.uf=function(){p.Yh&&(p.Yh(),p.Yh=null)},this.ff=function(){p.uf();var t=1e3*p.ki.heartbeatInterval;p.Yh=p.Ae.create(p.hf,t,"Session.sendHeartbeat:"+this.Jc)},this.Qf=function(){p.mc&&(p.mc(),p.mc=null)},this.Jf=function(){p.Qf(),p.mc=p.Ae.create(p.tl,p.Nc,"Session.startRfpsTimer")},this.nl=function(){var t={err:"pending"};t.seq=p.Qh-1,t.sentAt=p.Ls(),t.rtt=-1,p.$h.push(t);for(var n=0;n<p.$h.length;n++)"ok"===(t=p.$h[n]).err&&(p.$h.splice(n,1),n--)},this.il=function(t,n){for(var i=0;i<p.$h.length;i++){var e=p.$h[i];e.seq===t&&(e.rtt=p.Ls()-e.sentAt,e.err=n)}},this.el=function(t){for(var n=0;n<p.$h.length;n++){var i=p.$h[n];i.seq===t&&(i.rtt=p.Ls()-i.sentAt,i.err="ok")}},this.sl=function(){for(var t,n,i=p.xc.get(O.ol),e=[],s=-1,o=0;o<p.$h.length;o++)if("ok"===(n=p.$h[o]).err){s=n.seq;break}for(var r=0;r<p.$h.length;r++)((t=(n=p.$h[r]).seq)<p.Qh-i||t<s)&&e.push(r);for(var a=[],u=0;u<p.$h.length;u++)t=(n=p.$h[u]).seq,e.indexOf(u)<0&&a.push(p.$h[u]);p.$h=a},this.rl=function(){p.sl();for(var t=[],n=0;n<p.$h.length;n++){var i=p.$h[n],e={};e[C.fu]=i.seq,e[C.du]=i.rtt,e[C.lu]=i.err,t.push(e)}return t},this.al=function(){var t,n=-1,i=-1,e=p.Kc.Yc();if(p.Bs()&&0===e.length)return null;var s=new Z,o=(s.bu(C.qr),s.ku(p.ki.customerKey),s.Fu(p.xc.get(O.B)),s.ci(p.Ps.N),s.Uu(p.Qh),s.Hu(C.version),I.version);if(p.Fi&&(o=p.Fi),s.Bu(o),s.Ku(p.pe.N),s.Gu(0),p.pe.M?s.bh(p.pe.M):p.M&&s.bh(p.M),p.pe.V?s.Lh(p.pe.V):p.V&&s.Lh(p.V),w.Pt(p.fo)&&s.kh(p.fo),s.uh(C.wr),p.sc&&s.hh(p.sc),p.oc&&s.fh(p.oc),p.rc&&s.lh(p.rc),p.ac&&s.dh(p.ac),p.uc&&s.Eh(p.uc),p.hc&&s.ph(p.hc),p.cc&&s.Ah(p.cc),p.dc&&s.Sh(p.dc),p.vc&&s._h(p.vc),p.Ec&&s.Rh(p.Ec),p.fc&&s.gh(p.fc),p.lc&&s.yh(p.lc),p.Ac&&!isNaN(p.Ac)&&s.Ch(parseInt(p.Ac,10)),p.gc&&!isNaN(p.gc)&&s.Ih(parseInt(p.gc,10)),p.yc&&!isNaN(p.yc)?s.Th(parseFloat(p.yc)):(p.Ac&&!isNaN(p.Ac)||p.gc&&!isNaN(p.gc))&&s.Th(1),p.Ue&&(p.Un=p.Ue.Zn(),p.Un&&s.setModuleName(p.Un),p.kn=p.Ue.$n(),p.kn&&s.Uh(p.kn),p.Ue.ti()&&(p.fc=p.Ue.ti(),s.gh(p.fc)),p.Ue.ii())&&(p.lc=p.Ue.ii(),s.yh(p.lc)),p.Sn&&s.ju(p.Sn),w.Ht(p.ec)>0&&s.xu(p.ec),p.ws()||p.Qc()){p.Qc()&&s.Mh(),p.An&&s.qu(p.An),s.Yu(p.zh);o=C.pu(p.Pn),o=(s.Qe(o),s.$u(p._c),p.Ms&&s.Wu(p.Ms),w.ee(p.Us)&&s.Vu(p.Us),p.Vs>0&&s.th(p.Vs),p.wn>0&&s.nh(p.wn),p.Dn>0&&s.ih(p.Dn),null!==p.ic&&s.eh(p.ic),p.Nn>0&&s.sh(p.Nn),p.Ue&&(n=b.xf(p.Ue.getPHT(),0,null,-1),i=b.xf(p.Ue.getBufferLength(),0,null,-1)),w.It(p.pe.U)?t=p.pe.U:p.Ue&&(t=p.Ue.getSignalStrength()),n>=0&&s.Nh(n),i>0&&s.Oh(i),p.ul());if(o>0&&s.oh(o),p.wc>0&&s.ah(b.xf(p.wc,0,null,-1)),p.Oc>0&&s.rh(b.xf(p.Oc,0,null,-1)),t!==T.DEFAULT_SIGNAL_STRENGTH&&s.Vh(t),p.Rn&&s.wh(p.Rn),p.Fn>0&&s.Dh(p.Fn),p.Bn>0&&s.Ph(p.Bn),p.Ti>-1&&s.mh(p.Ti),p.nc>-1&&(s.wo(p.nc),p.nc>0)&&(p.Rf(p.nc,0),p.nc=0),p.Kn&&s.jh(p.Kn),p.jn&&s.qh(p.jn),p.qn&&s.Wh(p.qn),"undefined"!==typeof p.Sc)for(var r in p.Sc)s.Du(r,p.Sc[r])}else s.Yu(C.Su._u);return e.length>0&&s.Ju(e),s.Xu(p.Zh),s.Qu(!0),p.xc.get(O.hl)&&s.zu(p.Bi.Yc()),p.xc.get(O.ol)>0&&(n=p.rl()).length>0&&s.Zu(n),0===p.Qh&&(s=p.fl(s)),(s=0!==p.Qh?p.ll(s):s).Mu(p.bs),s.Lu(p.Ls()),p.Bc&&(s.Fh(p.bc),s.Bh(p.Lc),s.Hh(p.Mc),s.Gh(p.Vc),s.Kh(p.Uc)),p.Qh++,s.get()},this.ll=function(t){var n,i=p.D,e={};for(n in t.wu.tags)Object.prototype.hasOwnProperty.call(i,n)||(e[n]=t.wu.tags[n]);t.wu.tags=e,p.D={};for(var s=0;s<p.Dc.length;s++)Object.prototype.hasOwnProperty.call(p.pe.D,p.Dc[s])?Object.prototype.hasOwnProperty.call(p.pe.L,p.Dc[s])?p.pe.L[p.Dc[s]]===O.$t.tn?(p.D[O.dl+""+p.Dc[s]]=O.$t.tn,p.pe.P("End-user chose to opt-out of personal data collection")):p.pe.L[p.Dc[s]]===O.$t.en?(p.D[O.dl+""+p.Dc[s]]=O.$t.en,p.pe.P("End-user chose to opt-out of personal data collection")):p.pe.L[p.Dc[s]]===O.$t.Zt?(p.D[O.dl+""+p.Dc[s]]=O.$t.Zt,p.pe.P("End-user used privacy settings and chose to opt-out of personal data collection")):(p.D[O.dl+""+p.Dc[s]]=p.pe.D[p.Dc[s]],p.pe.P("Data collection successful")):(p.D[O.dl+""+p.Dc[s]]=p.pe.D[p.Dc[s]],p.pe.P("Data collection successful")):p.D[O.dl+""+p.Dc[s]]=O.$t.vl;var o,r={};for(o in i){var a=o.split(".");"{}"!==JSON.stringify(p.Dc)&&-1!==p.Dc.indexOf(""+a[2])||i[O.dl+""+a[2]]===O.$t.El||(p.pe.P("Data collection restricted from Conviva back-end"),p.D[O.dl+""+a[2]]=O.$t.El,r[O.dl+""+a[2]]=O.$t.El)}if("{}"!==JSON.stringify(p.D)){var u,h=w.pl(p.D);for(u in t.wu.tags)h[u]=t.wu.tags[u];if(t.wu.tags=h,!w.Cf(i,p.D)){var c={};if("{}"!==JSON.stringify(r)&&(c[C.ra]=r),"{}"!==JSON.stringify(i)){for(var f in i)p.D[f]&&i[f]!==p.D[f]&&(c[C.ra]||(c[C.ra]={}),c[C.ra][f]=p.D[f]);for(var l in p.D)Object.prototype.hasOwnProperty.call(i,l)&&i[l]===p.D[l]||(c[C.ra]||(c[C.ra]={}),c[C.ra][l]=p.D[l])}"{}"===JSON.stringify(i)&&(c[C.ra]=p.D);var d,v,E={};E[C.Ds]=c,E[C.ou]=C.Gs,E[C.au]=p.Ls(),E[C.ru]=p.Kc.Wf(),p.Ue&&(d=b.xf(p.Ue.getPHT(),0,null,-1),v=b.xf(p.Ue.getBufferLength(),0,null,-1),d>=0&&(E[C.ya]=d),v>0)&&(E[C.Sa]=v),t.wu.evs||(t.wu.evs=[]),t.wu.evs.push(E)}}return t},this.fl=function(t){var n=p.Al();if("{}"!==JSON.stringify(n)){var i,e=w.pl(n);for(i in t.wu.tags)e[i]=t.wu.tags[i];t.wu.tags=e;var s,o={},n=(o[C.ra]=n,{});n[C.Ds]=o,n[C.ou]=C.Gs,n[C.au]=p.Ls(),n[C.ru]=p.Kc.Wf(),p.Ue&&(o=b.xf(p.Ue.getPHT(),0,null,-1),s=b.xf(p.Ue.getBufferLength(),0,null,-1),o>=0&&(n[C.ya]=o),s>0)&&(n[C.Sa]=s),t.wu.evs||(t.wu.evs=[]),t.wu.evs.push(n)}return t},this.Al=function(){var t={};if("undefined"!==typeof navigator&&navigator){if(t["c3.fp.cookie"]="undefined"!==typeof navigator.cookieEnabled&&navigator.cookieEnabled?""+navigator.cookieEnabled:"",t["c3.fp.memory"]="undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?""+navigator.deviceMemory:"",t["c3.fp.hwConc"]="undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",t["c3.fp.java"]=""+("function"!==typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),t["c3.fp.lang"]="undefined"!==typeof navigator.language&&navigator.language?""+navigator.language:"",t["c3.fp.langs"]="undefined"!==typeof navigator.languages&&navigator.languages&&navigator.languages.length>0?""+navigator.languages.toString():"",t["c3.fp.maxTp"]="undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",t["c3.fp.plugins"]="","undefined"!==typeof navigator.plugins&&navigator.plugins&&navigator.plugins.length>0)for(var n=0;n<navigator.plugins.length;n++)t["c3.fp.plugins"]+=navigator.plugins[n].name+",";if(t["c3.fp.mime"]="","undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var i=0;i<navigator.mimeTypes.length;i++)t["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";t["c3.fp.sysLang"]="undefined"!==typeof navigator.systemLanguage&&navigator.systemLanguage?""+navigator.systemLanguage:"",t["c3.fp.platform"]="undefined"!==typeof navigator.platform&&navigator.platform?""+navigator.platform:"",t["c3.fp.product"]="undefined"!==typeof navigator.product&&navigator.product?""+navigator.product:"",t["c3.fp.productSub"]="undefined"!==typeof navigator.productSub&&navigator.productSub?""+navigator.productSub:"",t["c3.fp.vendor"]="undefined"!==typeof navigator.vendor&&navigator.vendor?""+navigator.vendor:"",t["c3.fp.vendorSub"]="undefined"!==typeof navigator.vendorSub&&navigator.vendorSub?""+navigator.vendorSub:"";var e=p.gl();""!==e&&(t["c3.fp.canvFp"]=e)}return"undefined"!==typeof window&&window&&("undefined"!==typeof window.screen&&window.screen&&(t["c3.fp.availHeight"]="undefined"!==typeof window.screen.availHeight&&window.screen.availHeight?""+window.screen.availHeight:"",t["c3.fp.availWidth"]="undefined"!==typeof window.screen.availWidth&&window.screen.availWidth?""+window.screen.availWidth:"",t["c3.fp.height"]="undefined"!==typeof window.screen.height&&window.screen.height?""+window.screen.height:"",t["c3.fp.width"]="undefined"!==typeof window.screen.width&&window.screen.width?""+window.screen.width:"",t["c3.fp.colorDepth"]="undefined"!==typeof window.screen.colorDepth&&window.screen.colorDepth?""+window.screen.colorDepth:"",t["c3.fp.deviceXDPI"]="undefined"!==typeof window.screen.deviceXDPI&&window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",t["c3.fp.deviceYDPI"]="undefined"!==typeof window.screen.deviceYDPI&&window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),t["c3.fp.dpi"]="undefined"!==typeof window.devicePixelRatio&&window.devicePixelRatio?""+window.devicePixelRatio:"",t["c3.fp.secure"]="boolean"===typeof window.isSecureContext?""+window.isSecureContext:""),t},this.gl=function(){try{if("undefined"!==typeof document&&document){var t,n,i=document.createElement("CANVAS");if("undefined"!==typeof i&&i&&"function"===typeof i.getContext)return t=i.getContext("2d"),n="conviva",t.textBaseline="top",t.font="14px Arial",t.textBaseline="alphabetic",t.fillStyle="#f40",t.fillRect("undefined"!==typeof navigator.plugins&&navigator.plugins?navigator.plugins.length:0,"undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes?navigator.mimeTypes.length:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0,"undefined"!==typeof navigator.vendor&&navigator.vendor?navigator.vendor.length:0),t.fillStyle="#069",t.fillText(n,"undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>=0?navigator.maxTouchPoints:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,"undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?navigator.deviceMemory:0,"undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),R.yr(i.toDataURL())}return""}catch(t){return""}},this.hf=function(){var t;p.Cc||(t=p.al())&&p.yl(t)},this.tl=function(){var t;p.Pn===T.PlayerState.PLAYING&&p.Ue&&(t=p.Ue.getRenderedFrameRate())>0&&(p.wc+=t,p.Oc++)},this.ul=function(){return p.wc>0&&p.Oc>0||(this.tl(),p.wc>0&&p.Oc>0)?w.Sl.Cast(+p.wc/p.Oc):T.DEFAULT_RENDERED_FRAME_RATE},this.yl=function(t){p.nl();var i=p.Qh-1;p.g.info("postHeartbeat(): Send HB["+i+"]"+p.zc());p.jc._l(t,function(t,n){p.Rl(t,n,i)})},this.Rl=function(i,e,s){p.Cc||p.T.F("onHeartbeatResponse",function(){var t,n;i?e?(p.g.debug("onHeartbeatResponse(): received valid response for HB["+s+"]"),p.el(s),(t=e[C.Vr])&&t!==(n=p.xc.get(O.B))&&(p.g.debug("onHeartbeatResponse(): setting the client id to "+t+" (from gateway)"),p.xc.set(O.B,t),p.xc.Cl(),n===C.H)&&t!==C.H&&(p.pe.k(),p.Tc)&&(p.g.debug("Send enqueued urgent hb as client id is available"),p.mf()),(n=e[C.Mr])&&n!==C.Lr&&p.g.error("onHeartbeatResponse(): error from gateway: "+n),"object"===typeof(t=e[C.Ur])&&((n=t[C.Fr])>=0&&p.xc.get(O.ol)!==n&&(p.g.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+n+" (from gateway)"),p.xc.set(O.ol,n)),n=t[C.Br],(n=!!w.ee(n)&&n)!==p.xc.get(O.hl)&&(p.g.debug("onHeartbeatResponse(): turning "+(n?"on":"off")+" sending of logs"),p.xc.set(O.hl,n)),n=t[C.Hr],w.It(n)&&(n=w.Sl.Cast(n))!==p.ki.heartbeatInterval&&(p.g.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+n),p.ki.heartbeatInterval=n,p.Yh)&&p.ff(),(n=t[C.Gr])&&n!==p.ki.gatewayUrl&&(p.g.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),p.ki.gatewayUrl=n),p.Il()||(p.Dc={},(n=t[C.Kr])&&(p.Pc||(p.Pc=!0),p.g.debug("onHeartbeatResponse(): received fp from gateway: "+n),p.Dc=n.split(",")),p.Bc=t[C.jr],w.ee(p.Bc)&&(p.Bc?(p.g.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),p.kc||p.lf()):(p.g.debug("onHeartbeatResponse(): disabling the CDN Server IP collection (from gateway)"),p.af()))))):p.g.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(w.Pt(n=e)?w.Tl(n,"HTTP timeout")?p.g.warning("onHeartbeatResponse(): "+n):p.g.error("onHeartbeatResponse(): failed to send heartbeat: "+n):(n=$.ml,p.g.error("onHeartbeatResponse(): "+n)),p.il(s,n))})},this.Ls=function(){return w.Sl.Cast(p.Wc.current()-p.bs)},this.zf=function(){return this.Kc.Wf()},this.zc=function(){return this.Bs()?" (global session)":""},this.Bs=function(){return this.Jc===N.Ct._u},this.Il=function(){return this.Jc===N.Ct._u&&"T"===this.ec["c3.IPV4IPV6GlobalSession"]},this.ws=function(){return this.Jc===N.Ct.Rt},this.Qc=function(){return this.Jc===N.Ct.Dt},this.Lt=function(t){p.Nl(t),p.tf()},this.Nl=function(t){var n={},i={};if(w.Pt(t.assetName)&&!p.Ps.Ol&&(p.Ot.assetName!==t.assetName?(p.Ot.assetName&&(n[C.sa]=p.Ot.assetName),i[C.sa]=t.assetName,p.Ot.assetName=t.assetName):p.g.warning("mergeContentMetadata(): assetName was not changed.")),w.Pt(t.applicationName)&&(p.Ot.applicationName!==t.applicationName?(p.Ot.applicationName&&(n[C.oa]=p.Ot.applicationName),i[C.oa]=t.applicationName,p.Ot.applicationName=t.applicationName):p.g.warning("mergeContentMetadata(): applicationName was not changed.")),w.Pt(t.streamUrl)&&!p.Ps.wl&&(p.Ot.streamUrl!==t.streamUrl?(p.Ot.streamUrl&&(n[C._a]=p.Ot.streamUrl),i[C._a]=t.streamUrl,p.Ot.streamUrl=t.streamUrl,p.Rn=p.Ot.streamUrl):p.g.warning("mergeContentMetadata(): streamUrl was not changed.")),w.Pt(t.viewerId)&&(p.Ot.viewerId!==t.viewerId?(p.Ot.viewerId&&(n[C.ea]=p.Ot.viewerId),i[C.ea]=t.viewerId,p.Ot.viewerId=t.viewerId):p.g.warning("mergeContentMetadata(): viewerId was not changed.")),w.Pt(t.defaultResource)&&!p.Ps.Dl&&(p.Ot.defaultResource!==t.defaultResource?(p.Ot.defaultResource&&(n[C.ga]=p.Ot.defaultResource),i[C.ga]=t.defaultResource,p.Ot.defaultResource=t.defaultResource):p.g.warning("mergeContentMetadata(): defaultResource was not changed.")),w.It(t.duration)&&t.duration>0&&!p.Ps.Pl&&(p.Ot.duration!==t.duration?(p.Vs>0&&(n[C.da]=p.Vs),i[C.da]=t.duration,p.Ot.duration=t.duration,p.Vs=p.Ot.duration):p.g.warning("mergeContentMetadata(): duration was not changed.")),w.It(t.encodedFrameRate)&&t.encodedFrameRate>0&&!p.Ps.bl&&(p.Ot.encodedFrameRate!==t.encodedFrameRate?(p.Ot.encodedFrameRate>-1&&(n[C.va]=p.Ot.encodedFrameRate),i[C.va]=t.encodedFrameRate,p.Ot.encodedFrameRate=t.encodedFrameRate,p.Nn=p.Ot.encodedFrameRate):p.g.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!==f.StreamType.UNKNOWN&&(p.Ot.streamType!==t.streamType?(p.Ot.streamType!==f.StreamType.UNKNOWN&&(p.Ot.streamType===f.StreamType.LIVE?n[C.Jr]=!0:n[C.Jr]=!1),t.streamType===f.StreamType.LIVE?i[C.Jr]=!0:i[C.Jr]=!1,p.Ot.streamType=t.streamType):p.g.warning("mergeContentMetadata(): streamType was not changed.")),w.Ht(t.custom)>0){var e,s={},o={};for(e in t.custom)p.Ot.custom[e]!==t.custom[e]?(s[e]=t.custom[e],p.Ot.custom[e]&&(o[e]=p.Ot.custom[e]),p.Ot.custom[e]=t.custom[e]):p.g.info("mergeContentMetadata(): custom."+e+" was not changed.");w.Ht(s)>0?(w.Ht(o)>0&&(n[C.ra]=o),i[C.ra]=s):p.g.warning("mergeContentMetadata(): custom was not changed.")}w.Ht(i)>0&&this.pf(i,n)},this.tf=function(){var t;p.g.debug("setStatesFromContentMetadata()"),p.Ot.defaultResource&&this.eh(p.Ot.defaultResource),p.Ot.streamUrl&&this.wh(p.Ot.streamUrl),p.Ot.duration>0&&this.th(p.Ot.duration),p.Ot.encodedFrameRate>0&&this.sh(p.Ot.encodedFrameRate),p.Ot.streamType!==f.StreamType.UNKNOWN&&(t=p.Ot.streamType===f.StreamType.LIVE,this.Vu(t)),p.Ot.assetName&&this.qu(p.Ot.assetName),p.Ot.viewerId&&this.ju(p.Ot.viewerId),(p.Ot.applicationName||p.Ot.playerName)&&this.Wu(p.Ot.applicationName||p.Ot.playerName),w.Ht(p.Ot.custom)>0&&this.xu(p.Ot.custom)},this.nf=function(){var t={};if(this.Bs()||(p.Ot.assetName?t[C.sa]=p.Ot.assetName:p.g.warning("enqueueEventForContentMetadata(): assetName was not set."),p.Ot.applicationName?t[C.oa]=p.Ot.applicationName:p.g.warning("enqueueEventForContentMetadata(): applicationName was not set."),p.Ot.streamUrl?t[C._a]=p.Ot.streamUrl:p.g.warning("enqueueEventForContentMetadata(): streamUrl was not set."),p.Ot.viewerId?t[C.ea]=p.Ot.viewerId:p.g.warning("enqueueEventForContentMetadata(): viewerId was not set."),p.Ot.defaultResource?t[C.ga]=p.Ot.defaultResource:p.g.warning("enqueueEventForContentMetadata(): defaultResource was not set."),p.Ot.duration>-1?t[C.da]=p.Ot.duration:p.g.warning("enqueueEventForContentMetadata(): duration was not set."),p.Ot.encodedFrameRate>-1?t[C.va]=p.Ot.encodedFrameRate:p.g.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),p.Ot.streamType!==f.StreamType.UNKNOWN?p.Ot.streamType===f.StreamType.LIVE?t[C.Jr]=!0:t[C.Jr]=!1:p.g.warning("enqueueEventForContentMetadata(): streamType was not set.")),w.Ht(p.Ot.custom)>0)for(var n in t[C.ra]={},p.Ot.custom)t[C.ra][n]=p.Ot.custom[n];else this.Bs()||p.g.warning("enqueueEventForContentMetadata(): custom tags were not set.");w.Ht(t)>0&&this.pf(t,null)},this.ef=function(){p.Ot&&w.Pt(p.Ot.assetName)||p.g.warning("Missing assetName during session creation"),p.Ot&&w.Pt(p.Ot.defaultResource)||p.g.warning("Missing resource during session creation"),p.Ot&&w.Pt(p.Ot.streamUrl)||p.g.warning("Missing streamUrl during session creation"),(!p.Ot||p.Ot.encodedFrameRate<=0)&&p.g.warning("Missing encodedFrameRate during session creation"),p.Ot&&w.Pt(p.Ot.viewerId)||p.g.warning("Missing viewerId during session creation"),p.Ot&&p.Ot.streamType&&f.StreamType.UNKNOWN!==p.Ot.streamType||p.g.warning("Missing streamType during session creation"),p.Ot&&w.Pt(p.Ot.applicationName)||p.g.warning("Missing applicationName during session creation"),(!p.Ot||p.Ot.duration<=0)&&p.g.warning("Missing duration during session creation")},this.zt=function(t,n){p.Sc||(p.Sc={}),p.Sc[t]=n},this.if=function(){var t={};p.pe&&p.pe.M&&(t[C.ma]=p.pe.M,p.M=p.pe.M),p.pe&&p.pe.V&&(t[C.Na]=p.pe.V,p.V=p.pe.V),w.Ht(t)>0&&this.pf(t,null)},this.mf=function(){var t;p.Ic||((t=p.xc.get(O.B))&&t!==C.H&&""!==t&&"null"!==t?(p.Tc=!1,t=P.Ll(p.Xh,p.Jh),p.ff(),setTimeout(function(){try{p&&(p.hf(),p.ff())}catch(t){}},t)):(p.g.debug("Delay sending of urgent hb due to missing client id"),p.Tc=!0))}}).xh=C.Su.Rt+C.Su.Ru+C.Su.Cu,N.Ct={Rt:"Video",_u:"Global",Dt:"Ad"},($=V.Session=function(){var e=this;e.Ue=null,e.N=0,e.Jc=N.Ct.Rt,e.Ml=!1,e.Cc=!1,e.Vl=!1,e.Ul=null,e.ge=null,e.kl=null,e.Fl=!1,e.Bl=T.PlayerState.NOT_MONITORED,e.Hl=!1,e.Gl=!1,e.Kl=!1,e.bl=!1,e.jl=!1,e.Uf=!1,e.Ff=!1,e.Mf=!1,e.Ol=!1,e.wl=!1,e.ql=!1,e.Pl=!1,e.Dl=!1,e.Wl=!1,function(t,n,i,e,s,o,r){this.N=t,this.Jc=n,this.xc=i,this.xl=e,this.Nt=s,this.T=o,this.g=r,this.g.setModuleName("Session"),this.g.ci(w.wt(this.N))}.apply(e,arguments),this.Xc=function(t,n){e.Nt.Xc(this),t&&e.Ut(t),e.xc.Yl()?e.Xl(n):e.xc.Jl(function(){e.Xl(n)})},this.cleanup=function(){e.g.info("cleanup()"+e.zc()),e.Ml=!0,e.Nt.Zc(),e.xc.Yl()?e.Ql():e.xc.Jl(function(){e.Ql()})},this.zl=function(){e.g.debug("cleanupAll()"+e.zc()),(e.ws()||e.Qc())&&e.Ue&&e.Zl(),e.g.ci(null),e.g=null,e.T=null,e.pe=null,e.xc=null,e.xl=null,e.Nt.St(),e.Nt=null,e.Cc=!0},this.Ql=function(){e.Nt.sf(),e.zl()},this.Xl=function(t){e.Nt.$c(),e.$l(),t?(e.bt(t.sr(),t.rr()),e.Nt.Qe(T.PlayerState.STOPPED),e.Nt.sf(),e.zl()):e.Nt.cf()},this.$l=function(){e.g.debug("setStatesFromSystemMetadata()");var t=e.xl.get(),n=t[M.BROWSER_NAME],n=(n&&e.Nt.hh(n),t[M.BROWSER_VERSION]),n=(n&&e.Nt.fh(n),t[M.DEVICE_BRAND]),n=(n&&e.Nt.lh(n),t[M.DEVICE_MANUFACTURER]),n=(n&&e.Nt.dh(n),t[M.DEVICE_MODEL]),n=(n&&e.Nt.Eh(n),t[M.DEVICE_TYPE]),n=(n&&e.Nt.ph(n),t[M.DEVICE_VERSION]),n=(n&&e.Nt.Ah(n),t[M.FRAMEWORK_NAME]),n=(n&&e.Nt.gh(n),t[M.FRAMEWORK_VERSION]),n=(n&&e.Nt.yh(n),t[M.OPERATING_SYSTEM_NAME]),n=(n&&e.Nt.Sh(n),t[M.OPERATING_SYSTEM_VERSION]),n=(n&&e.Nt._h(n),t[M.DEVICE_CATEGORY]),n=(n&&e.Nt.Rh(n),t[M.SCREEN_WIDTH]),n=(n&&e.Nt.Ch(n),t[M.SCREEN_HEIGHT]),n=(n&&e.Nt.Ih(n),t[M.SCALE_FACTOR]);n&&e.Nt.Th(n)},this.pi=function(t){e.g.debug("onPlayerStateChange(): "+t),e.Nt.Pn!==t&&(e.Nt.Pn===T.PlayerState.NOT_MONITORED&&t!==T.PlayerState.NOT_MONITORED&&(e.Bl=t),e.Fl?e.g.debug("onPlayerStateChange(): "+t+" (pooled, "+(e.Vl?"ad playing":"preloading")+")"):e.Nt.Qe(t))},this.Ai=function(t){e.g.debug("onBitrateChange(): "+t),e.Hl?e.g.info("onBitrateChange(): ignored"):e.Nt.Af(t)},this.gi=function(t){e.g.debug("onAvgBitrateChange(): "+t),e.Hl?e.g.info("onAvgBitrateChange(): ignored"):e.Nt.yf(t)},this.mi=function(t){e.g.debug("onDroppedFramesTotalChange(): "+t),e.Gl?e.g.info("onDroppedFramesTotalChange(): ignored"):e.Nt.mh(t)},this.Ni=function(t){e.g.debug("onDroppedFramesCountChange(): "+t),e.Gl?e.g.info("onDroppedFramesCountChange(): ignored"):e.Nt.wo(t)},this.yi=function(t,n){!w.It(n)&&e.Wl&&(e.g.warning("onSeekEvent(): Ignored non-integer seekToPosition data: "+n),n=-1),e.Nt.Zf(t,n)},this.Yn=function(t){e.g.debug("onEncodedFrameRateChange(): "+t),t>0?e.bl?e.g.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+t+" (ads)"):(e.Nt.sh(t),e.g.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+t)):e.g.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+t)},this.Qn=function(t){e.g.debug("onContentLengthChange(): "+t),t>0?e.Pl?e.g.info("setContentLength(): Ignored content length data: "+t+" (ads)"):(e.Nt.th(t),e.g.info("setContentLength(): Received content length data: "+t)):e.g.warning("setContentLength(): Ignored invalid content length data: "+t)},this.zn=function(t){e.g.debug("onStreamUrlChange(): "+t),e.Nt.wh(t)},this.Si=function(t){e.g.debug("onStreamResolutionWidthChange(): "+t),e.Nt.Nf(t)},this._i=function(t){e.g.debug("onStreamResolutionHeightChange(): "+t),e.Nt.wf(t)},this.nt=function(t){e.g.debug("onConnectionTypeChange(): "+t),e.Nt.bh(t)},this.et=function(t){e.g.debug("onLinkEncryptionChange(): "+t),e.Nt.Lh(t)},this.ni=function(t){e.g.debug("onPlayerTypeChange(): "+t),e.Nt.ks()||e.Nt.gh(t)},this.ei=function(t){e.g.debug("onPlayerVersionChange(): "+t),e.Nt.Fs()||e.Nt.yh(t)},this.Ci=function(t){e.g.debug("onCDNServerIPChange(): "+t),e.Nt.kh(t)},this.oi=function(t){e.g.debug("onAudioLangChange(): "+t),e.Nt.jh(t)},this.ai=function(t){e.g.debug("onSubtitleLangChange(): "+t),e.Nt.qh(t)},this.hi=function(t){e.g.debug("onCcLangChange(): "+t),e.Nt.Wh(t)},this.Ri=function(t,n){e.g.debug("onError(): "+t+" ("+n+")"),e.bt(t,n)},this.Wn=function(){e.g.debug("onRelease()"),e.Zl()},this.qt=function(t,n,i){e.g.debug("adStart(): adStream="+t+" adPlayer="+n+" adPosition="+i),e.Vl?e.g.warning("adStart(): multiple _adStart calls, ignoring"):(e.Vl=!0,e.Ul=t,e.ge=n,e.kl=i,e.Nt.Hf(!0),e.Ul===h.AdStream.CONTENT||e.ge===h.AdPlayer.SEPARATE?(e.Nt.Pn!==T.PlayerState.NOT_MONITORED&&(e.Bl=e.Nt.Pn),e.Nt.Qe(T.PlayerState.NOT_MONITORED),e.Fl=!0):e.Ul===h.AdStream.SEPARATE&&e.ge===h.AdPlayer.CONTENT&&(e.Nt.Pn!==T.PlayerState.NOT_MONITORED&&(e.Bl=e.Nt.Pn),e.Nt.Qe(T.PlayerState.NOT_MONITORED),e.Fl=!0,e.Hl=!0,e.Gl=!0,e.bl=!0,e.Kl=!0,e.Uf=!0,e.Ff=!0,e.Mf=!0,e.Ol=!0,e.wl=!0,e.ql=!0,e.Pl=!0,e.Dl=!0,e.Wl=!0))},this.Wt=function(){e.g.debug("adEnd()"),e.Vl?(e.Nt.Hf(!1),e.Ul===h.AdStream.CONTENT||e.ge===h.AdPlayer.SEPARATE?e.td||(e.Fl=!1,e.Nt.Qe(e.Bl)):e.Ul===h.AdStream.SEPARATE&&e.ge===h.AdPlayer.CONTENT&&(e.Hl=!1,e.Gl=!1,e.bl=!1,e.Kl=!1,e.jl=!1,e.td||(e.Fl=!1,e.Nt.Qe(e.Bl)),e.Uf=!1,e.Ff=!1,e.Mf=!1,e.Ol=!1,e.wl=!1,e.ql=!1,e.Pl=!1,e.Dl=!1,e.Wl=!1),e.Vl=!1,e.Ul=e.ge=e.kl=null):e.g.warning("adEnd(): called before _adStart, ignoring")},this.Mt=function(){e.g.debug("detachPlayer()"),e.Ue?e.Ue&&(e.T.F("Session.detachPlayer",function(){e.Ue.xn()}),e.Ue=null,e.Nt.Xf(null),e.Nt.Qe(T.PlayerState.NOT_MONITORED)):e.g.error("detachPlayer(): called before attachPlayer, ignoring")},this.Zl=function(){e.Ue&&(e.T.F("Session.releasePlayerStateManager",function(){e.Ue.xn()}),e.Ue=null,e.Nt.Xf(null),e.Nt.Qe(T.PlayerState.NOT_MONITORED))},this.Vt=function(){e.g.debug("offFocus()"),e.Nt.Hf(!0),e.Nt.Pn!==T.PlayerState.NOT_MONITORED&&(e.Bl=e.Nt.Pn),e.Nt.Qe(T.PlayerState.NOT_MONITORED),e.Fl=!0},this.Ut=function(t){e.g.debug("attachPlayer()"),e.Ue?e.g.error("attachPlayer(): detach current PlayerStateManager first"):t instanceof T?e.T.F("Session.attachPlayer()",function(){t.setMonitoringNotifier(e,e.N)?(t.fi(),e.Ue=t,e.Nt.Xf(e.Ue)):e.g.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")}):e.g.error("attachPlayer(): Incorrect PlayerStateManager instance")},this.kt=function(){e.g.debug("onFocus()"),e.Nt.Hf(!1),e.Hl=!1,e.Gl=!1,e.nd=!1,e.Kl=!1,e.jl=!1,e.Uf=!1,e.Ff=!1,e.Mf=!1,e.Ol=!1,e.wl=!1,e.ql=!1,e.Pl=!1,e.Dl=!1,e.Wl=!1,e.td||(e.Fl=!1,e.Bl!==T.PlayerState.NOT_MONITORED&&e.Nt.Qe(e.Bl))},this.Yt=function(){return e.g.debug("getPlayerStateManager()"),e.Ue},this.Ft=function(){e.g.debug("contentPreload()"),e.td?e.g.debug("contentPreload(): called twice, ignoring"):(e.td=!0,e.Fl=!0)},this.Bt=function(){e.g.debug("contentStart()"),e.td?(e.td=!1,e.Vl||(e.Fl=!1,e.Bl!==T.PlayerState.NOT_MONITORED&&e.Nt.Qe(e.Bl))):e.g.warning("contentStart(): called without _contentPreload, ignoring")},this.bt=function(t,n){e.g.info("reportError(): "+t),w.Pt(t)?n!==h.ErrorSeverity.FATAL&&n!==h.ErrorSeverity.WARNING?e.g.error("reportError(): invalid error severity: "+n):e.jl?e.g.debug("reportError(): ignored"):(n=n===h.ErrorSeverity.FATAL,e.Nt.Kf(t,n)):e.g.error("reportError(): invalid error message string: "+t)},this.Lt=function(t){e.T.F("Session.updateContentMetadata",function(){e.Nt.Lt(t)})},this.jt=function(t,n){e.g.info("sendEvent(): eventName="+t+e.zc()),e.Nt.$f(t,n)},this.Bs=function(){return e.Jc===N.Ct._u},this.ws=function(){return e.Jc===N.Ct.Rt},this.Qc=function(){return e.Jc===N.Ct.Dt},this.zc=function(){return e.Bs()?" (global session)":""},this.Jt=function(){return this.N},this.Qt=function(){var t=null;return t=e.xc.Yl()?e.xc.get(O.B):t},this.zt=function(t,n){e.Nt.zt(t,n)}}).ml="received no response (or a bad response) to heartbeat POST request",tt=V.SessionFactory=function(){var o=this;o.g=null,o.Bi=null,o.ed=0,o.sd=null,function(t,n,i,e){o.pe=t,o.ki=n,o.xc=i,o._=e,o.g=o._.buildLogger(),o.g.setModuleName("SessionFactory"),o.ed=0,o.sd={}}.apply(o,arguments),this.St=function(){for(var t in o.g=null,o.Bi=null,o.sd)o.sd[t].cleanup();o.sd=null,o.ed=0},this.od=function(){var t=o.ed;return o.ed++,t},this._t=function(t,n,i,e,s){return t||(t=new f),o.rd(t,n,i,e,s)},this.W=function(t){return o.rd(t,N.Ct._u,void 0,I.version)},this.ad=function(){return P.ud()},this.rd=function(t,n,i,e,s){n=o._.Zi(o.pe,o.ki,o.xc,o.ad(),n,t.ct(),e),t=o.od();return"undefined"!==typeof s&&"undefined"!==typeof s.error?n.Xc(i,s.error):(o.hd(t,n),n.Xc(i)),t},this.Kt=function(t){t=o.sd[t];return t||o.g.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t},this.Tt=function(t){t=this.Kt(t);return!t||t.ws()||t.Qc()||(o.g.error("Client: invalid Video sessionKey. Did you cleanup that session previously?"),t=null),t},this.hd=function(t,n){o.sd[t]=n},this.fd=function(t){delete o.sd[t]},this.xt=function(t){var n=o.Kt(t);o.fd(t),n.cleanup()},this.tt=function(){return o.sd}},nt=V.ld=function(t){this.Ae=t,this.dd=function(i,t,n){var e=!1;this.Ae.createOnce(function(){e||i(!(e=!0),n+" ("+t+" ms)")},t,"CallbackWithTimeout.wrap");return function(t,n){e||(e=!0,i(t,n))}}},(O=V.Config=function(t,n,i){var e=this;this.g=t,this.g.setModuleName("Config"),this.Ed=n,this.pd=i,this.Ad={clientId:C.H,iid:C.Cr,sendLogs:!1,maxHbInfos:C.Tr},this.m=w.pl(this.Ad),this.gd=!1,this.yd=!1,this.Sd=[],this.Yl=function(){return this.gd},this.Et=function(){this.Ed.Et(O.vd,function(t,n){t?(e._d(n),e.g.debug("load): configuration successfully loaded from local storage"+(e.yd?" (was empty)":"")+".")):e.g.error("load): error loading configuration from local storage: "+n),e.gd=!0,e.Rd()})},this._d=function(t){var n,t=this.pd.Nu(t);t?t&&(n=t[O.Cd],t=t[O.At],n&&n!==C.H&&""!==n&&"null"!==n?(this.m[O.B]=n,this.g.debug("parse(): loaded clientId="+n+" (from local storage)")):(this.m[O.B]=this.Id(),this.Cl()),t!==C.Cr)&&""!==t&&"null"!==t&&(this.m[O.At]=t,this.g.debug("parse(): loaded iid="+t+" (from local storage)")):(this.m[O.B]=this.Id(),this.Cl(),this.yd=!0)},this.Td=function(){var t={};return t[O.Cd]=this.m.clientId,this.g.debug("marshall(): saving clientId="+this.m.clientId+" (to local storage)"),this.pd.mu(t)},this.Cl=function(){this.Ed.Cl(O.vd,this.Td(),function(t,n){t?e.g.debug("save(): configuration successfully saved to local storage."):e.g.error("save(): error saving configuration to local storage: "+n)})},this.Jl=function(t){this.Yl()?t():this.Sd.push(t)},this.get=function(t){return this.gd?this.m[t]:null},this.set=function(t,n){this.gd&&(this.m[t]=n)},this.Rd=function(){for(var t;"undefined"!==typeof(t=this.Sd.shift());)t()},this.getClientId=function(){return this.m.clientId},this.Id=function(){try{var t=2147483647;return Math.floor(Math.random()*t).toString()+"."+Math.floor(Math.random()*t).toString()+"."+Math.floor(Math.random()*t).toString()+"."+Math.floor(Math.random()*t).toString()}catch(t){this.g.debug("error caught in _generateClid()")}return"0"},this.getIid=function(){return this.m.iid}}).vd="sdkConfig",O.Cd="clId",O.At="iid",O.B="clientId",O.hl="sendLogs",O.ol="maxHbInfos",O.dl="c3.fp.",O.$t={vl:"0",md:"1",tn:"2",Zt:"3",El:"4",en:"5",nn:"6"},it=V.EventQueue=function(){this.Nd=[],this.Od=0,this.Yf=function(t){this.Nd.push(t)},this.Wf=function(){var t=this.Od;return this.Od++,t},this.Yc=function(){var t=this.Nd;return this.Nd=[],t}},et=V.ExceptionCatcher=function(t,n,i){this.g=t,this.g.setModuleName("ExceptionCatcher"),this.wd=n,this.I=i,this.F=function(n,t,i){try{t()}catch(t){if(i)i(t);else{if(this.I.allowUncaughtExceptions)throw t;this.Dd(n,t)}}},this.Dd=function(t,n){t="Uncaught exception: "+t+": "+n.toString();if(this.wd)try{this.wd._l(t)}catch(t){this.g.error("Caught exception while sending ping: "+t.toString())}this.g.error(t)}},st=V.GatewayControl=function(t,n,i,e,s){var o=this;this.ki=t,this.g=n,this.g.setModuleName("GatewayControl"),this.Pd=i,this.pd=e,this.bd=s,this._l=function(t,e){var n=(this.bd?this.bd.indexOf("ipv4")>-1?this.ki.G:this.ki.Y:this.ki.gatewayUrl)+C.Rr;this.Pd.Ld("POST",n,this.pd.mu(t),"application/json",function(t,n){var i;t?(i=o.pd.Nu(n),e(t,i)):e(t,n)})}},w=V.Lang={Md:function(t){return w.Pt(t)&&t&&"undefined"!==t&&"null"!==t},Gt:function(t){var n,i,e={};for(n in t)w.Md(n)&&(i=t[n],w.Md(i))&&(e[n]=i);return e},Xn:function(t,n,i){if(!t)throw new Error("Expected "+i+" implementation is null.");for(var e in n)if("function"!==typeof t[e])throw new Error("Expected method "+e+" in "+i+" implementation.")},Ht:function(t){var n,i=0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&i++;return i},wt:function(t){return""+t},Vd:function(t){return Math.floor(t)},fn:function(t){return Math.abs(w.Vd(t))},Ud:function(t){return Boolean(t)},Pt:function(t){return"string"===typeof t&&""!==t},Tl:function(t,n){return"string"===typeof t&&"string"===typeof n&&"function"===typeof t.indexOf&&0===t.indexOf(n)},ee:function(t){return"boolean"===typeof t},kd:function(t){return escape(t)},Ou:function(t){return"object"===typeof t},If:function(t){var n,i="";for(n in t)i+=n+"="+t[n];return"Object{"+i+"}"},Fd:function(t){var n,i=w.pl(t);for(n in i)i[n]||delete i[n];return i},pl:function(t){var n,i={};for(n in t)i[n]=t[n];return i},Cf:function(t,n){if(typeof t!==typeof n)return!1;if(t instanceof Object&&n instanceof Object){if(w.Ht(t)!==w.Ht(n))return!1;for(var i in t)if(!(t[i]===n[i]))return!1;return!0}return t===n},Bo:function(){for(var t={},n=0;n<arguments.length;n++)for(var i in arguments[n])arguments[n][i]&&(t[i]=arguments[n][i]);return t},It:function(t){return"number"===typeof t&&Math.round(t)===t},Bd:function(t){return"[object Array]"===Object.prototype.toString.call(t)},Hd:function(t,n){if(t!==n){if(!t||!n)return!1;if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(w.Bd(t[i])&&w.Bd(n[i])){if(!w.Hd(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1}return!0},Gd:function(){return"undefined"!==typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()},rn:function(t,n,i){if(w.Gd())Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:i});else{if("undefined"===typeof t.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");t.__defineGetter__(n,i)}},un:function(t,n,i){if(w.Gd())Object.defineProperty(t,n,{configurable:!0,set:i});else{if("undefined"===typeof t.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");t.__defineSetter__(n,i)}}},(S={two32:4294967296}).Kd=S.two32-1,S.jd=0,w.qd=S,w.qd.Cast=function(t){t=parseInt(t,10);return t>S.Kd?t=t%S.two32:t<S.jd&&(t=S.two32-(t=-t%S.two32)),t},w.qd.Wd=function(t){t=parseInt(t,10);return t<=S.Kd&&t>=S.jd},_={Kd:2147483647,jd:-2147483648},w.Sl=_,w.Sl.Cast=function(t){t=parseInt(t,10);return t>_.Kd?t=t%_.Kd:t<_.jd&&(t=_.Kd-(t=-t%_.Kd)),t},w.Sl.Wd=function(t){t=parseInt(t,10);return t<=_.Kd&&t>=_.jd},w.er=function(){return"undefined"!==typeof window&&window&&window.location&&window.location.search?window.location.search:""},w.xd=function(){return document&&document.referrer?document.referrer:""},ot=V.LogBuffer=function(){this.Yd=[],this.vr=function(t){this.Yd.length>=32&&this.Yd.shift(),this.Yd.push(t)},this.Yc=function(){var t=this.Yd;return this.Yd=[],t}},(D=V.Ping=function(t,n,i,e){this.Jd=!1,this.Qd=null,this.g=t,this.g.setModuleName("Ping"),this.Pd=n,this.ki=i,this.Fi=e,this._l=function(t){this.Jd||(this.Jd=!0,t=this.zd()+"&d="+w.kd(t.toString()),this.g.error("send(): "+t),this.Pd.Ld("GET",t,null,null,null),this.Jd=!1)},this.zd=function(){if(!this.Qd){var t=D.Zd+"?comp="+D.Xd+"&clv="+(this.Fi||h.version);if(this.ki&&(t+="&cid="+this.ki.customerKey),t+="&sch="+C.wr,!this.ki)return t;this.Qd=t}return this.Qd}}).Xd="sdkjs",D.Zd="https://pings.conviva.com/ping.ping",P=V.$d={tv:4294967295,nv:2147483647,iv:-2147483648,ud:function(){return Math.floor(Math.random()*P.tv)+P.iv},gt:function(){return Math.floor(Math.random()*P.tv)},Ll:function(t,n){return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t}},b=V.ev={xf:function(t,n,i,e){return isNaN(t)||"number"!==typeof t||t===e?e:(e=w.Vd(t),b.sv(e,n,i))},sv:function(t,n,i){return w.It(i)&&t>i?t=i:w.It(n)&&t<n&&(t=n),t},Tn:function(t){return t=-1!==t&&-2!==t?b.xf(t,0,null,-1):t}},L=V.StreamerError=function(){var i=this;i.errorCode=null,i.severity=h.ErrorSeverity.FATAL,function(t,n){i.errorCode=t,i.severity=n}.apply(i,arguments),this.sr=function(){return i.errorCode},this.rr=function(){return i.severity}},rt=V.HttpClient=function(t,n,i,e){this.g=t,this.g.setModuleName("HttpClient"),this.Pi=n,this.ov=i,this.I=e,this.Ld=function(t,n,i,e,s){var o=1e3*this.I.httpTimeout,r=null;s&&(r=this.ov.dd(s,o,"HTTP timeout")),this.g.debug("request(): calling HttpInterface.makeRequest"),this.Pi.makeRequest(t,n,i,e,o,r)}},(at=V.Logger=function(t,n,i,e,s){this.Mi=t,this.wi=n,this.C=i,this.Bi=e,this.Ui=s,this.debug=function(t){this.log(t,u.LogLevel.DEBUG)},this.info=function(t){this.log(t,u.LogLevel.INFO)},this.warning=function(t){this.log(t,u.LogLevel.WARNING)},this.error=function(t){this.log(t,u.LogLevel.ERROR)},this.log=function(t,n){t=this.av(t,n);this.Bi.vr(t),this.C.logLevel<=n&&this.Mi.consoleLog(t,n)},this.uv=function(t){return"["+this.Un+"] "+t},this.hv=function(t){return"["+this.Ui+"] "+t},this.cv=function(t){return"[Conviva] "+t},this.fv=function(t){return"["+(this.wi.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+t},this.dv=function(t,n){return"["+at.rv(n)+"] "+t},this.vv=function(t){return t=this.Ev?"sid="+this.Ev+" "+t:t},this.ci=function(t){this.Ev=t},this.setModuleName=function(t){this.Un=t},this.av=function(t,n){return this.cv(this.fv(this.dv(this.hv(this.uv(this.vv(t))),n)))}}).rv=function(t){var n;switch(t){case u.LogLevel.ERROR:n="ERROR";break;case u.LogLevel.WARNING:n="WARNING";break;case u.LogLevel.INFO:n="INFO";break;case u.LogLevel.DEBUG:n="DEBUG"}return n},V.Storage=function(t,n,i,e){this.g=t,this.g.setModuleName("Storage"),this.bi=n,this.ov=i,this.I=e,this.Et=function(t,n){n=this.ov.dd(n,1e3*this.I.storageTimeout,"storage load timeout");this.g.debug("load): calling StorageInterface.loadData"),this.bi.loadData(V.Storage.pv,t,n)},this.Cl=function(t,n,i){i=this.ov.dd(i,1e3*this.I.storageTimeout,"storage save timeout");this.g.debug("save(): calling StorageInterface.saveData"),this.bi.saveData(V.Storage.pv,t,n,i)}},V.Storage.pv="Conviva",(M=V.SystemMetadata=function(t,n,i){this.g=t,this.g.setModuleName("SystemMetadata"),this.Li=n,this.T=i,this.Av=null,this.get=function(){return this.Av||this.retrieve(),this.Av},this.retrieve=function(){var t,n={},e=(n[M.BROWSER_NAME]=this.Li.getBrowserName,n[M.BROWSER_VERSION]=this.Li.getBrowserVersion,n[M.DEVICE_BRAND]=this.Li.getDeviceBrand,n[M.DEVICE_MANUFACTURER]=this.Li.getDeviceManufacturer,n[M.DEVICE_MODEL]=this.Li.getDeviceModel,n[M.DEVICE_TYPE]=this.Li.getDeviceType,n[M.DEVICE_VERSION]=this.Li.getDeviceVersion,n[M.FRAMEWORK_NAME]=this.Li.getFrameworkName,n[M.FRAMEWORK_VERSION]=this.Li.getFrameworkVersion,n[M.OPERATING_SYSTEM_NAME]=this.Li.getOperatingSystemName,n[M.OPERATING_SYSTEM_VERSION]=this.Li.getOperatingSystemVersion,n[M.DEVICE_CATEGORY]=this.Li.getDeviceCategory,n[M.SCREEN_WIDTH]=this.Li.getScreenWidth,n[M.SCREEN_HEIGHT]=this.Li.getScreenHeight,n[M.SCALE_FACTOR]=this.Li.getScaleFactor,this);for(t in this.g.debug("retrieve(): calling MetadataInterface methods"),n)!function(n,i){e.T.F("Session.getSystemMetadataSchema(): "+n,function(){var t=i[n];i[n]=t.call(e.Li)})}(t,n),w.Pt(n[t])||delete n[t];var i=!1;if("undefined"!==typeof n[M.DEVICE_TYPE]){for(var s in h.DeviceType)if(n[M.DEVICE_TYPE]===h.DeviceType[s]){i=!0;break}i||delete n[M.DEVICE_TYPE]}if(i=!1,"undefined"!==typeof n[M.DEVICE_CATEGORY]){for(var o in h.DeviceCategory)if(n[M.DEVICE_CATEGORY]===h.DeviceCategory[o]){i=!0;break}i||delete n[M.DEVICE_CATEGORY]}this.Av=w.Fd(n)}}).BROWSER_NAME="browserName",M.BROWSER_VERSION="browserVersion",M.DEVICE_BRAND="deviceBrand",M.DEVICE_MANUFACTURER="deviceManufacturer",M.DEVICE_MODEL="deviceModel",M.DEVICE_TYPE="deviceType",M.DEVICE_VERSION="deviceVersion",M.FRAMEWORK_NAME="frameworkName",M.FRAMEWORK_VERSION="frameworkVersion",M.OPERATING_SYSTEM_NAME="operatingSystemName",M.OPERATING_SYSTEM_VERSION="operatingSystemVersion",M.DEVICE_CATEGORY="deviceCategory",M.SCREEN_WIDTH="screenWidth",M.SCREEN_HEIGHT="screenHeight",M.SCALE_FACTOR="scaleFactor",ut=V.Time=function(t,n){this.wi=t,this.g=n,this.g.setModuleName("Time"),this.current=function(){var t=this.wi.getEpochTimeMs();return w.It(t)||this.g.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+t+")"),t}},ht=V.Timer=function(t,n,i){var s=this;this.g=t,this.g.setModuleName("Timer"),this.Di=n,this.T=i,this.create=function(t,n,i){return this.createTimer(function(){s.T.F(i,function(){t()})},n,i)},this.createOnce=function(t,n,i){var e={cancel:null};return e.cancel=this.createTimer(function(){s.T.F(i,function(){e&&"function"===typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),t()})},n,i),e.cancel},this.createTimer=function(t,n,i){return this.g.debug("createTimer(): calling TimerInterface.create"),this.Di.createTimer(t,n,i)}}}(),lt});