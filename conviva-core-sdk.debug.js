/*! (C) 2022 Conviva, Inc. All rights reserved. Confidential and proprietary. */
!function(t,n){"function"===typeof define&&define.amd?define(n):("object"===typeof exports||"object"===typeof module&&module.exports)&&(module.exports=n()),"undefined"===typeof t||!t||t.Conviva||t.ConvivaLoading||(t.ConvivaLoading=!0,t.Conviva=n(),delete t.ConvivaLoading)}(this,function(){var ft={};return function(){"use strict";var n,s,U,k,o,r,F,e,a,y,h,c,f,S,B,H,K,G,j,W,x,q,u,i,l,Y,R,J,d,v,E,p,A,X,g,_,I,T,C,m,Q,z,N,Z,$,tt,O,nt,it,et,w,st,D,P,b,M,ot,rt,L,at,ut,V={};function ht(){var t,n="";for("-"===s&&r(n="-");s>="0"&&s<="9";)n+=s,r();if("."===s)for(n+=".";r()&&s>="0"&&s<="9";)n+=s;if("e"===s||"E"===s)for(n+=s,r(),"-"!==s&&"+"!==s||(n+=s,r());s>="0"&&s<="9";)n+=s,r();if(t=+n,!isNaN(t))return t;o("Bad number")}function t(t){return t<10?"0"+t:t}function ct(t){return E.lastIndex=0,E.test(t)?'"'+t.replace(E,function(t){var n=X[t];return"string"===typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}y=ft.Constants={version:"4.5.10",CUSTOMER_KEY:"customerKey",GATEWAY_URL:"gatewayUrl",LOG_LEVEL:"logLevel",ASSET_NAME:"Conviva.assetName",PLAYER_NAME:"Conviva.applicationName",APPLICATION_VERSION:"c3.app.version",IS_LIVE:"Conviva.streamType",ENCODED_FRAMERATE:"Conviva.encodedFrameRate",DEFAULT_RESOURCE:"Conviva.defaultResource",STREAM_URL:"Conviva.streamUrl",VIEWER_ID:"Conviva.viewerId",DURATION:"Conviva.duration",UTM_TRACKING_URL:"c3.cm.utmTrackingUrl",POD_INDEX:"podIndex",POD_POSITION:"podPosition",POD_DURATION:"podDuration",AD_TYPE:"adType",MODULE_NAME:"Conviva.moduleName",MODULE_VERSION:"Conviva.moduleVersion",FRAMEWORK_NAME:"Conviva.frameworkName",FRAMEWORK_VERSION:"Conviva.frameworkVersion",i:"Constants not yet configured",o:"Invalid : Did you report playback ended?",u:"Invalid : Did you report ad playback ended?",h:"Player cannot be null",l:"PlaybackAnlytics already built",v:"PlaybackAnlytics not yet built",Playback:{BITRATE:"BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT"},Network:{SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},ErrorSeverity:{FATAL:1,WARNING:0},NO_SESSION_KEY:-2,AdPosition:{PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},AdPlayer:{CONTENT:"CONTENT",SEPARATE:"SEPARATE"},DeviceType:{DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},AdType:{CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},AdSlates:{BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},AdServingType:{INLINE:"Inline",WRAPPER:"Wrapper"},DeviceCategory:{ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},LogLevel:{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},PlayerState:{STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},Events:{USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},ErrorType:{ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},StreamType:{UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},CallbackFunctions:{CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer",GENERATE_HASH:"generateHash",BASE64_ENCODE:"base64Encode"},DeviceMetadata:{BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},AD_PRELOAD_FEATURE:"adPreloading",AD_TAG_URL:"adTagUrl",IMASDK_CONTENT_PLAYER:"imaMainContentPlayer",CONVIVA_AD_MODULE:"convivaAdModule",CONVIVA_MODULE:"convivaModule",MEDIA_ELEMENT:"mediaElement"},(h=ft.Client=function(){var u=this;this.p=!1,this.version=h.version,this.A=null,this.g=null,this.S=null,this.R=-1,this._=null,this.I=null,this.T=null,this.C=null,this.m=-1,this.N=!1,this.O={},this.D=function(){u.A&&arguments.length>0&&u.A.info(" Client:: uniqueIdentifierCallback(): "+arguments[0])},this.P={},this.M=null,this.L=null,this.V=null,this.U=function(){this.T.k("Client.makeIPV4IPV6GlobalSessions",function(){var t;u.C&&null!==(t=u.C.get(O.F))&&t!==m.B&&u.g&&((t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u._.H.indexOf(c.K)>-1?c.K:c.G,u.j=u.g.W(t,null),(t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u._.q.indexOf(c.Y)>-1?c.Y:c.J,u.X=u.g.W(t,null))})},this.Z=function(i){u.T.k("Client.updateConnectionType",function(){if(u.M=i,u.g){var t,n=u.g.$();for(t in n)n[t].tt(i)}})},this.nt=function(i){u.T.k("Client.updateLinkEncryption",function(){if(u.L=i,u.g){var t,n=u.g.$();for(t in n)n[t].it(i)}})},this.et=function(t){u.T.k("Client.updateSignalStrength",function(){u.V=t})},function(t,n,i,e){if(!(t instanceof c))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof q))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!==c.ot+c.rt&&t.gatewayUrl!==c.ut+c.rt||(this.p=!0),e&&(this.version=e),this._=t.ht(),this.S=n,this.S.ct("SDK",this._,this.version),this.T=this.S.ft(this.version),this.T.k("Client.init",function(){if(u.C=u.S.lt(),u.C.dt(),u.m=u.C.get(O.vt),-1!==u.m&&void 0!==u.m&&null!==u.m||(u.m=P.Et()),u.A=u.S.buildLogger(),u.A.setModuleName("Client"),u.p&&u.A.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),u.A.info("init(): url="+u._.gatewayUrl+" customerKey="+u._.customerKey),u.g=u.S.At(u,u._,u.C),i)for(var t in i)switch(t){case y.Network.CONNECTION_TYPE:u.Z(i[t]);break;case y.Network.LINK_ENCRYPTION:u.nt(i[t]);break;case y.Network.SIGNAL_STRENGTH:u.et(i[t])}u.U(),u.A.info("init(): done.")},function(t){throw new Error("Client constructor failed: "+t.message)})}.apply(this,arguments),this.release=function(){this.N||this.T.k("Client.release",function(){u.A&&(u.A.info("release()"),u.A=null),u.g.gt(),u.g=null,u.R=-1,u.m=-1,u.T=null,u._=null,u.I=null,u.S=null,u.N=!0})},this.createSession=function(t,n,i){var e=h.NO_SESSION_KEY;return this.N||(!t||t instanceof f?this.T.k("Client.createSession",function(){e=u.g.yt(t,N.Rt.St,n,(i?y:u).version)}):u.A.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),e},this.createAdSession=function(i,e,s,o,r){var a=h.NO_SESSION_KEY;return this.N||(!e||e instanceof f?this.T.k("Client.createAdSession",function(){var t,n;e||(e=new f),w._t(i)&&i!==h.NO_SESSION_KEY&&(t=u.g.It(i))&&(n=e.custom[y.APPLICATION_VERSION],t.Tt&&t.Tt.Ct&&(!e.viewerId&&t.Tt.Ct.viewerId&&(e.viewerId=t.Tt.Ct.viewerId),!e.applicationName&&t.Tt.Ct.applicationName&&(e.applicationName=t.Tt.Ct.applicationName),e.streamType===y.StreamType.UNKNOWN&&t.Tt.Ct.streamType!==y.StreamType.UNKNOWN&&(e.streamType=t.Tt.Ct.streamType),"undefined"!==typeof n&&n||"undefined"!==typeof(n=t.Tt.Ct.custom[y.APPLICATION_VERSION])&&n&&(e.custom[y.APPLICATION_VERSION]=n)),e.custom["c3.csid"]=w.Nt(t.m)),a=u.g.yt(e,N.Rt.Ot,s,(o?y:u).version,r)}):u.A.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),a},this.reportError=function(n,i,e){this.N||(w.wt(i)?e!==h.ErrorSeverity.FATAL&&e!==h.ErrorSeverity.WARNING?this.A.error("reportError(): invalid error severity: "+e):this.T.k("Client.reportError",function(){var t=u.g.It(n);t&&t.Dt(i,e)}):this.A.error("reportError(): invalid error message string: "+i))},this.updateContentMetadata=function(i,e){this.N||(e instanceof f?this.T.k("Client.updateContentMetadata",function(){var t,n=u.g.It(i);n&&(t=e.ht(),n.Pt(t))}):u.A.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter"))},this.detachPlayer=function(n){this.N||this.T.k("Client.detachPlayer",function(){var t=u.g.It(n);t&&t.bt()})},this.Mt=function(n){this.N||this.T.k("Client.offFocus",function(){var t=u.g.It(n);t&&t.Mt()})},this.attachPlayer=function(n,i){this.N||(i instanceof S?this.T.k("Client.attachPlayer",function(){var t=u.g.It(n);t&&t.Lt(i)}):u.A.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter"))},this.Vt=function(n){this.N||this.T.k("Client.onFocus",function(){var t=u.g.It(n);t&&t.Vt()})},this.contentPreload=function(n){this.N||this.T.k("Client.contentPreload",function(){var t=u.g.It(n);t&&t.Ut()})},this.contentStart=function(n){this.N||this.T.k("Client.contentStart",function(){var t=u.g.It(n);t&&t.kt()})},this.sendCustomEvent=function(i,e,s){this.N||(w.wt(e)?(w.Ft(s)<=0&&u.A.warning("eventAttributes(): should have proper data."),this.T.k("Client.sendCustomEvent",function(){i===h.NO_SESSION_KEY&&(u.R<0&&(t=new f,u.R=u.g.W(t,null)),i=u.R);var t=w.Bt(s),n=u.g.Ht(i);n&&n.Kt(e,t)})):u.A.error("sendCustomEvent(): eventName parameter must be a valid string."))},this.adStart=function(n,i,e,s){this.N||(i!==h.AdStream.CONTENT&&i!==h.AdStream.SEPARATE?this.A.error("adStart(): ignored, invalid value for adStream parameter: "+i):e!==h.AdPlayer.CONTENT&&e!==h.AdPlayer.SEPARATE?this.A.error("adStart(): ignored, invalid value for adPlayer parameter: "+e):(s!==h.AdPosition.PREROLL&&s!==h.AdPosition.MIDROLL&&s!==h.AdPosition.POSTROLL&&this.A.info("adStart(): ignored, invalid value for adPosition parameter: "+s),this.T.k("Client.adStart",function(){var t=u.g.It(n);t&&t.Gt(i,e,s)})))},this.adEnd=function(n){this.N||this.T.k("Client.adEnd",function(){var t=u.g.It(n);t&&t.jt()})},this.cleanupSession=function(t){this.N||(t===h.NO_SESSION_KEY?this.A.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):this.T.k("Client.cleanupSession",function(){u.g.It(t)&&u.g.Wt(t)}))},this.getAttachedPlayer=function(n){var i=null;return this.N||(n===h.NO_SESSION_KEY?this.A.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this.T.k("Client.getAttachedPlayer",function(){var t=u.g.It(n);t&&(i=t.xt())})),i},this.isPlayerAttached=function(t){return!this.N&&null!==this.getAttachedPlayer(t)},this.getPlayerStateManager=function(t){if(this.N)throw new Error("This instance of Conviva.Client has been released.");return new S(this.S,(t?y:u).version)},this.releasePlayerStateManager=function(t){if(this.N)throw new Error("This instance of Conviva.Client has been released.");this.T.k("Client.releasePlayerStateManager",function(){t instanceof S&&t.release()})},this.qt=function(){return this._},this.getId=function(){return this.m},this.getSessionId=function(n){var i;return this.N?y.NO_SESSION_KEY:(i=null,this.T.k("Client.getSessionId",function(){var t=u.g.It(n);t&&(i=t.Yt())}),i)},this.getClientId=function(n){var i;return this.N?null:(i=null,this.T.k("Client.getClientId",function(){var t=u.g.It(n);t&&(i=t.Jt())}),i)},this.Xt=function(n,i,e){this.N||this.T.k("Client.updateCustomMetric",function(){var t=u.g.It(n);t&&t.Xt(i,e)})},this.setUniqueIdentifier=function(t,n){if(this.N)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)this.O[i]=t[i];n&&(this.D=n)},this.setUserPreferenceForDataCollection=function(t,n){if(this.N)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)"false"===t[i]?this.P[i]=n?O.zt.Qt:O.zt.Zt:this.P[i]=O.zt.$t},this.setUserPreferenceForDataDeletion=function(t){if(this.N)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var n in t)"true"===t[n]?this.P[n]=O.zt.tn:this.P[n]=O.zt.$t}}).version="4.5.10L",h.NO_SESSION_KEY=y.NO_SESSION_KEY,h.AdPosition={PREROLL:y.AdPosition.PREROLL,MIDROLL:y.AdPosition.MIDROLL,POSTROLL:y.AdPosition.POSTROLL},h.AdStream={CONTENT:y.AdPlayer.CONTENT,SEPARATE:y.AdPlayer.SEPARATE},h.AdPlayer={CONTENT:y.AdPlayer.CONTENT,SEPARATE:y.AdPlayer.SEPARATE},h.ErrorSeverity={FATAL:y.ErrorSeverity.FATAL,WARNING:y.ErrorSeverity.WARNING},h.DeviceType={DESKTOP:y.DeviceType.DESKTOP,CONSOLE:y.DeviceType.CONSOLE,SETTOP:y.DeviceType.SETTOP,MOBILE:y.DeviceType.MOBILE,TABLET:y.DeviceType.TABLET,SMARTTV:y.DeviceType.SMARTTV},h.AdTechnology={CLIENT_SIDE:y.AdType.CLIENT_SIDE,SERVER_SIDE:y.AdType.SERVER_SIDE},h.AdType={BLACKOUT_SLATE:y.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:y.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:y.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:y.AdSlates.OTHER_SLATE,VPAID:y.AdSlates.VPAID,REGULAR:y.AdSlates.REGULAR},h.AdServingType={INLINE:y.AdServingType.INLINE,WRAPPER:y.AdServingType.WRAPPER},h.DeviceCategory={ANDROID_DEVICE:y.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:y.DeviceCategory.APPLE_DEVICE,CHROMECAST:y.DeviceCategory.CHROMECAST,DESKTOP_APP:y.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:y.DeviceCategory.DEVICE_SIMULATOR,LG_TV:y.DeviceCategory.LG_TV,NINTENDO:y.DeviceCategory.NINTENDO,PLAYSTATION:y.DeviceCategory.PLAYSTATION,ROKU:y.DeviceCategory.ROKU,SAMSUNG_TV:y.DeviceCategory.SAMSUNG_TV,SMART_TV:y.DeviceCategory.SMART_TV,SET_TOP_BOX:y.DeviceCategory.SET_TOP_BOX,TIVO:y.DeviceCategory.TIVO,WEB:y.DeviceCategory.WEB,WINDOWS_DEVICE:y.DeviceCategory.WINDOWS_DEVICE,XBOX:y.DeviceCategory.XBOX,KAIOS_DEVICE:y.DeviceCategory.KAIOS_DEVICE},(c=ft.ClientSettings=function(){var e=this;this.en=null,w.sn(this,"customerKey",function(){return this.en}),w.on(this,"customerKey",function(t){w.wt(t)&&(this.en=t)}),this.rn=c.an,w.sn(this,"heartbeatInterval",function(){return this.rn}),w.on(this,"heartbeatInterval",function(t){var n;"number"===typeof t&&(n=w.un(t))===t&&(this.rn=n)}),this.hn=null,this.H=null,this.q=null,w.sn(this,"gatewayUrl",function(){return this.hn}),w.on(this,"gatewayUrl",function(t){var n;!w.wt(t)||"https"!==(n=t.split("://"))[0]&&"http"!==n[0]||-1===t.indexOf(".com",t.length-".com".length)||(this.hn=t)}),function(t){if(!w.wt(t))throw new Error("customerKey must be valid");this.customerKey=t}.apply(this,arguments),this.equals=function(t){return this.customerKey===t.customerKey&&this.gatewayUrl===t.gatewayUrl&&this.heartbeatInterval===t.heartbeatInterval},this.ht=function(){var t=new c(this.customerKey);return t.gatewayUrl=function(t){if(w.wt(t)){var n,i=t.split("://");if("https"===i[0]||"http"===i[0])return i[1]!==c.rt&&-1!==i[1].indexOf(c.rt)?(n=i[1].split(c.rt),e.H="https://"+n[0]+c.K,e.q="https://"+n[0]+c.Y):i[1]!==c.cn&&-1!==i[1].indexOf("testonly.conviva.com")?(n=i[1].split("testonly.conviva.com"),e.H="https://"+n[0]+c.G,e.q="https://"+n[0]+c.J):i[1]===c.cn?(e.H="https://"+e.customerKey+"."+c.G,e.q="https://"+e.customerKey+"."+c.J):(e.H="https://"+e.customerKey+"."+c.K,e.q="https://"+e.customerKey+"."+c.Y,t="https://"+e.customerKey+"."+c.rt),t}return e.H="https://"+e.customerKey+"."+c.K,e.q="https://"+e.customerKey+"."+c.Y,"https://"+e.customerKey+"."+c.rt}(this.gatewayUrl),t.heartbeatInterval=this.heartbeatInterval,t.H=this.H,t.q=this.q,t}}).nn="https://conviva.testonly.conviva.com",c.fn="https://cws.conviva.com",c.rt="cws.conviva.com",c.K="ipv4.cws.conviva.com",c.Y="ipv6.cws.conviva.com",c.cn="conviva.testonly.conviva.com",c.G="ipv4.testonly.conviva.com",c.J="ipv6.testonly.conviva.com",c.ot="https://",c.ut="http://",c.ln=5,c.an=20,(f=ft.ContentMetadata=function(){this.dn=null,w.sn(this,"assetName",function(){return this.dn}),w.on(this,"assetName",function(t){"string"===typeof t&&(this.dn=t)}),this.vn={},w.sn(this,"custom",function(){return this.vn}),w.on(this,"custom",function(t){"object"===typeof t&&(this.vn=w.Bt(t))}),this.En=null,w.sn(this,"defaultResource",function(){return this.En}),w.on(this,"defaultResource",function(t){"string"===typeof t&&(this.En=t)}),this.pn=null,w.sn(this,"viewerId",function(){return this.pn}),w.on(this,"viewerId",function(t){"string"===typeof t&&(this.pn=t)}),this.An=null,w.sn(this,"applicationName",function(){return this.An}),w.on(this,"applicationName",function(t){"string"===typeof t&&(this.An=t)}),this.gn=null,w.sn(this,"streamUrl",function(){return this.gn}),w.on(this,"streamUrl",function(t){"string"===typeof t&&(this.gn=t)}),this.yn=f.StreamType.UNKNOWN,w.sn(this,"streamType",function(){return this.yn}),w.on(this,"streamType",function(t){t!==f.StreamType.UNKNOWN&&t!==f.StreamType.VOD&&t!==f.StreamType.LIVE||(this.yn=t)}),this.Sn=-1,w.sn(this,"duration",function(){return this.Sn}),w.on(this,"duration",function(t){this.Sn=b.Rn(t)}),this._n=-1,w.sn(this,"encodedFrameRate",function(){return this._n}),w.on(this,"encodedFrameRate",function(t){this._n=b.Rn(t)}),function(){}.apply(this,arguments),this.ht=function(){var t,n=new f;for(t in n.assetName=this.assetName,n.applicationName=this.applicationName,n.streamUrl=this.streamUrl,n.viewerId=this.viewerId,n.defaultResource=this.defaultResource,n.streamType=this.streamType,n.duration=this.duration,n.encodedFrameRate=this.encodedFrameRate,this.custom)n.custom[t]=this.custom[t];return n}}).StreamType={UNKNOWN:y.StreamType.UNKNOWN,LIVE:y.StreamType.LIVE,VOD:y.StreamType.VOD},ft.ErrorType={ERROR_UNKNOWN:y.ErrorType.ERROR_UNKNOWN,ERROR_IO:y.ErrorType.ERROR_IO,ERROR_TIMEOUT:y.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:y.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:y.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:y.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:y.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:y.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:y.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:y.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:y.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:y.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:y.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},ft.Events={AD_REQUESTED:y.Events.AD_REQUESTED,AD_RESPONSE:y.Events.AD_RESPONSE,AD_SLOT_STARTED:y.Events.AD_SLOT_STARTED,AD_ATTEMPTED:y.Events.AD_ATTEMPTED,AD_SLOT_ENDED:y.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:y.Events.AD_IMPRESSION_START,AD_START:y.Events.AD_START,AD_FIRST_QUARTILE:y.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:y.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:y.Events.AD_THIRD_QUARTILE,AD_COMPLETE:y.Events.AD_COMPLETE,AD_END:y.Events.AD_END,AD_IMPRESSION_END:y.Events.AD_IMPRESSION_END,AD_SKIPPED:y.Events.AD_SKIPPED,AD_ERROR:y.Events.AD_ERROR,AD_PROGRESS:y.Events.AD_PROGRESS,AD_CLOSE:y.Events.AD_CLOSE,CONTENT_PAUSED:y.Events.CONTENT_PAUSED,CONTENT_RESUMED:y.Events.CONTENT_RESUMED,POD_START:y.Events.POD_START,POD_END:y.Events.POD_END},(S=ft.PlayerStateManager=function(){var e=this;e.In=null,e.Tn=-2,e.Cn=S.PlayerState.UNKNOWN,e.mn={},e.Nn=-2,e._n=-2,e.Sn=-2,e.On=null,e.wn=null,e.gn=null,e.Dn=null,e.Pn=null,e.bn=-1,e.Mn=-1,e.M=null,e.L=null,e.Ln=null,e.Vn=[],e.N=!1,this.release=function(){e.N||e.T.k("PlayerStateManager.release",function(){e.In&&e.In.Un(),e.kn(),e.S=null,e.A=null,e.T=null,e.N=!0})},this.setPlayheadTime=function(){},this.setBufferLength=function(){},this.setRenderedFrameRate=function(){},this.getEncodedFrameRate=function(){return e._n},this.setEncodedFrameRate=function(n){e.N||e.T.k("PlayerStateManager.setEncodedFrameRate",function(){var t=b.Rn(n);t>=-1&&(e._n=t,e.In)&&e.In.Fn(e._n)})},this.getDuration=function(){return e.Sn},this.setClientMeasureInterface=function(t){w.Bn(t,new ft.ClientMeasureInterface,"ClientMeasureInterface"),this.Hn=t},this.getPHT=function(){return this.Hn&&"function"===typeof this.Hn.getPHT?this.Hn.getPHT():S.DEFAULT_PHT},this.getBufferLength=function(){return this.Hn&&"function"===typeof this.Hn.getBufferLength?this.Hn.getBufferLength():S.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.Hn&&"function"===typeof this.Hn.getSignalStrength?this.Hn.getSignalStrength():S.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.Hn&&"function"===typeof this.Hn.getRenderedFrameRate?this.Hn.getRenderedFrameRate():S.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(n){e.N||e.T.k("PlayerStateManager.setDuration",function(){var t=b.Rn(n);t>=-1&&(e.Sn=t,e.In)&&e.In.Kn(e.Sn)})},this.getStreamUrl=function(){return e.gn},this.setStreamUrl=function(t){e.N||e.T.k("PlayerStateManager.setStreamUrl",function(){t&&(e.gn=t,e.In)&&e.In.Gn(e.gn)})},this.jn=function(){return e.Dn},this.Wn=function(){return e.Pn},this.setModuleNameAndVersion=function(t,n){e.Dn=t,e.Pn=n},this.xn=function(){return e.wn},this.setPlayerType=function(t){e.N||e.T.k("PlayerStateManager.setPlayerType",function(){e.wn=t,e.In&&e.In.qn(e.wn)})},this.Yn=function(){return e.On},this.setPlayerVersion=function(t){e.N||e.T.k("PlayerStateManager.setPlayerVersion",function(){e.On=t,e.In&&e.In.Jn(e.On)})},this.setMonitoringNotifier=function(t){return!e.N&&!e.In&&(e.In=t,e.A&&arguments.length>=2&&e.A.Xn(arguments[1]),!0)},this.kn=function(){e.N||(e.In=null,e.A&&e.A.Xn(null))},this.Qn=function(){e.setPlayerState(e.getPlayerState()),e.setBitrateKbps(e.zn()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.xn()),e.setPlayerVersion(e.Yn());for(var t=0;t<e.Vn.length;t++){var n=e.Vn[t];e.Zn(n)}e.Vn=[]},this.getPlayerState=function(){return e.Cn},this.setPlayerState=function(t){e.N||e.T.k("PlayerStateManager.setPlayerState",function(){S.$n(t)?(e.Cn=t,e.In&&e.In.ti(e.Cn)):e.A.error("PlayerStateManager.SetPlayerState(): invalid state: "+t)})},this.zn=function(){return e.Tn},this.setBitrateKbps=function(n){e.N||e.T.k("PlayerStateManager.setBitrateKbps",function(){var t=b.Rn(n);t>=-1&&(e.Tn=t,e.In)&&e.In.ni(e.Tn)})},this.setPlayerSeekStart=function(t){e.N||e.T.k("PlayerStateManager.setPlayerSeekStart()",function(){e.In&&e.In.ii(S.SEEK_ACTIONS_TYPE.SEEK_START,t)})},this.setPlayerSeekEnd=function(){e.N||e.T.k("PlayerStateManager.setPlayerSeekEnd()",function(){e.In&&e.In.ii(S.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e.N||e.T.k("PlayerStateManager.setUserSeekButtonUp()",function(){e.In&&e.In.ii(S.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e.N||e.T.k("PlayerStateManager.setUserSeekButtonDown()",function(){e.In&&e.In.ii(S.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(n){e.N||e.T.k("PlayerStateManager.setVideoResolutionWidth()",function(){var t=b.Rn(n);t>0&&(e.bn=t),e.In&&e.In.ei(e.bn)})},this.setVideoResolutionHeight=function(n){e.N||e.T.k("PlayerStateManager.setVideoResolutionHeight()",function(){var t=b.Rn(n);t>0&&(e.Mn=t),e.In&&e.In.si(e.Mn)})},this.setConnectionType=function(t){e.N||e.T.k("PlayerStateManager.setConnectionType()",function(){e.M=t,e.In&&e.In.tt(e.M)})},this.setLinkEncryption=function(t){e.N||e.T.k("PlayerStateManager.setLinkEncryption()",function(){e.L=t,e.In&&e.In.it(e.L)})},this.setSignalStrength=function(){},this.Zn=function(t){var n,i;e.Ln=t,e.In?(n=t.errorCode,i=t.severity,e.In.oi(n,i)):e.Vn.push(t)},this.sendError=function(n,i){e.N||e.T.k("PlayerStateManager.sendError",function(){var t=new M(n,i);e.Zn(t)})},this.reset=function(){e.N||e.T.k("PlayerStateManager.reset",function(){e.Tn=-2,e.Cn=S.PlayerState.UNKNOWN,e.mn={},e.Nn=-1,e._n=-1,e.Sn=-1,e.On=null,e.wn=null,e.gn=null,e.Ln=null,e.Vn=[]})},this.setCDNServerIP=function(t){e.N||e.T.k("PlayerStateManager.setCDNServerIP",function(){e.In&&e.In.ri(t)})},this.ai=function(){return e.ui},this.setDroppedFramesTotal=function(t){e.N||e.T.k("PlayerStateManager.setDroppedFramesTotal",function(){e.In&&e.In.hi(t)})},this.setDroppedFramesCount=function(t){e.N||e.T.k("PlayerStateManager.setDroppedFramesCount",function(){e.In&&e.In.ci(t)})},this.fi=function(){return e.Ln},function(t,n){e.S=t,e.A=e.S.buildLogger(),e.A.setModuleName("PlayerStateManager"),e.T=e.S.ft(n)}.apply(e,arguments)}).PlayerState={STOPPED:y.PlayerState.STOPPED,PLAYING:y.PlayerState.PLAYING,BUFFERING:y.PlayerState.BUFFERING,PAUSED:y.PlayerState.PAUSED,UNKNOWN:y.PlayerState.UNKNOWN,NOT_MONITORED:y.PlayerState.NOT_MONITORED},S.$n=function(t){return t===S.PlayerState.STOPPED||t===S.PlayerState.PLAYING||t===S.PlayerState.BUFFERING||t===S.PlayerState.PAUSED||t===S.PlayerState.UNKNOWN||t===S.PlayerState.NOT_MONITORED},S.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},S.DEFAULT_SIGNAL_STRENGTH=1e3,S.DEFAULT_RENDERED_FRAME_RATE=-1,S.DEFAULT_BUFFER_LENGTH=-1,S.DEFAULT_PHT=-1,ft.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}},B=ft.HttpInterface=function(){this.makeRequest=function(){},this.release=function(){}},H=ft.LoggingInterface=function(){this.consoleLog=function(){},this.release=function(){}},K=ft.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},G=ft.StorageInterface=function(){this.saveData=function(){},this.loadData=function(){},this.release=function(){}},j=ft.SystemInterface=function(){!function(t,n,i,e,s,o){w.Bn(t,new W,"TimeInterface"),w.Bn(n,new x,"TimerInterface"),w.Bn(i,new B,"HttpInterface"),w.Bn(e,new G,"StorageInterface"),w.Bn(s,new K,"MetadataInterface"),w.Bn(o,new H,"LoggingInterface"),this.li=t,this.di=n,this.vi=i,this.Ei=e,this.pi=s,this.Ai=o}.apply(this,arguments),this.release=function(){this.li&&(this.li.release(),this.li=null),this.di&&(this.di.release(),this.di=null),this.vi&&(this.vi.release(),this.vi=null),this.Ei&&(this.Ei.release(),this.Ei=null),this.pi&&(this.pi.release(),this.pi=null),this.Ai&&(this.Ai.release(),this.Ai=null)}},W=ft.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},x=ft.TimerInterface=function(){this.createTimer=function(){},this.release=function(){}},q=ft.SystemFactory=function(){var t=this;!function(t,n){if(!(t instanceof j))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.gi=t,this.li=this.gi.li,this.di=this.gi.di,this.vi=this.gi.vi,this.Ei=this.gi.Ei,this.pi=this.gi.pi,this.Ai=this.gi.Ai,n instanceof u?this._=n.ht():this._=new u}.apply(this,arguments),this.ct=function(t,n,i){this.yi=t,this.Si=n,this.Ri=i},this.release=function(){this.gi.release(),this.gi=null,this.yi=null,this._=null,this._i=null};var n=function(){return new rt(t.Ai,t.li,t.qt(),t._i,t.yi)};this.buildLogger=function(){return n()},this.At=function(t,n,i){return new $(t,n,i,this)},this.Ii=function(t){return new D(this.buildLogger(),this.Ti(),this.Si,t)},this.Ci=function(){return new tt(this.buildTimer(t.Ri))},this.mi=function(){var t=new ut(this.buildLogger(),this.di,new it(this.buildLogger(),null,this.qt()));return new tt(t)},this.Ti=function(){return new ot(this.buildLogger(),this.vi,this.mi(),this.qt())},this.ft=function(t){return new it(this.buildLogger(),this.Ii(t),this.qt())},this.buildTime=function(){return new at(this.li,this.buildLogger())},this.buildTimer=function(t){return new ut(this.buildLogger(),this.di,this.ft(t))},this.Ni=function(){return new V.Storage(this.buildLogger(),this.Ei,this.Ci(),this.qt())},this.lt=function(){return new O(this.buildLogger(),this.Ni(),this.Oi())},this.wi=function(t){return new L(this.buildLogger(),this.pi,this.ft(t))},this.Di=function(){return new m},this.Pi=function(t,n){return new et(t,this.buildLogger(),this.Ti(),this.Oi(),n)},this.bi=function(t,n,i,e,s){var o=this.Pi(n,e.custom["c3.domain"]);return new N(this.Mi(),t,n,this.buildLogger(),this.ft(s),this.buildTimer(s),o,this.Di(),this.buildTime(),this.Li(),i,e,s)},this.Vi=function(t,n,i,e,s,o,r){t=this.bi(t,n.ht(),i,o,r);return new Z(e,s,i,this.wi(r),t,this.ft(r),this.buildLogger())},this.Mi=function(){return new nt},this.Oi=function(){return new Q},this.Li=function(){return this._i},this.qt=function(){return this._},this._i=new st},(u=ft.SystemSettings=function(){this.Ui=u.ki,w.sn(this,"logLevel",function(){return this.Ui}),w.on(this,"logLevel",function(t){var n;"number"===typeof t&&(n=w.un(t))===t&&n>=u.LogLevel.DEBUG&&n<=u.LogLevel.ERROR&&(this.Ui=n)}),this.Fi=u.Bi,w.sn(this,"allowUncaughtExceptions",function(){return this.Fi}),w.on(this,"allowUncaughtExceptions",function(t){w.Hi(t)&&(this.Fi=t)}),this.Ki=u.Gi,w.sn(this,"storageTimeout",function(){return this.Ki}),w.on(this,"storageTimeout",function(t){var n;"number"===typeof t&&(n=w.un(t))===t&&(this.Ki=n)}),this.ji=u.Wi,w.sn(this,"httpTimeout",function(){return this.ji}),w.on(this,"httpTimeout",function(t){var n;"number"===typeof t&&(n=w.un(t))===t&&(this.ji=n)}),function(){}.apply(this,arguments),this.equals=function(t){return this.logLevel===t.logLevel&&this.allowUncaughtExceptions===t.allowUncaughtExceptions&&this.storageTimeout===t.storageTimeout&&this.httpTimeout===t.httpTimeout},this.ht=function(){var t=new u;return t.logLevel=this.logLevel,t.allowUncaughtExceptions=this.allowUncaughtExceptions,t.storageTimeout=this.storageTimeout,t.httpTimeout=this.httpTimeout,t}}).LogLevel={DEBUG:y.LogLevel.DEBUG,INFO:y.LogLevel.INFO,WARNING:y.LogLevel.WARNING,ERROR:y.LogLevel.ERROR,NONE:y.LogLevel.NONE},u.xi=u.LogLevel.DEBUG,u.ki=u.LogLevel.NONE,u.qi=!0,u.Bi=!1,u.Gi=10,u.Wi=10,i=V.AdAnalytics=function(){var e=this;function n(t){e.Yi?(w.Ft(t)>0&&e.setAdInfo(t),e.Yi.Ji()||(e.Yi.Xi(e.Qi),e.Yi.zi(!0),e.getAdType()===y.AdType.SERVER_SIDE&&e.reportAdMetric(y.Playback.BITRATE,e.Qi.Zi()))):e.A&&e.A.error("AdAnalytics.onAdInitiated() : contentPlayer - "+y.o)}e.$i=null,e.A=null,e.S=null,e.te=null,e.Qi=null,e.Yi=null,e.ne=null,e.ie=null,e.ee=null,function(t,n,i){e.$i=t,e.ee=i,e.S=n,i&&(e.Qi=i.se()),e.te=n.buildTimer(y.version),e.A=n.buildLogger(),e.A.setModuleName("AdAnalytics"),e.Yi=new l(e.$i,e.te),R.call(this)}.apply(this,arguments),this.setAdInfo=function(t){w.Ft(t)<=0?e.A&&e.A.error("AdAnalytics.setAdInfo() : AD Info is not set"):(e.A&&e.A.debug("AdAnalytics.setAdInfo()"),e.Yi&&e.Yi.oe(t))},this.setAdPlayerInfo=function(t){w.Ft(t)<=0?e.A&&e.A.error("AdAnalytics.setAdPlayerInfo() : Ad Player Info is not set"):(e.A&&e.A.debug("AdAnalytics.setAdPlayerInfo()"),e.Yi&&e.Yi.oe(t))},this.reportAdMetric=function(){0===arguments.length?e.A&&e.A.error("AdAnalytics.reportAdMetric() : Need to report metric mandatory"):1===arguments.length?e.re(arguments[0]):2===arguments.length?e.re(arguments[0],arguments[1]):3===arguments.length?e.re(arguments[0],arguments[1],arguments[2]):4===arguments.length&&e.re(arguments[0],arguments[1],arguments[2],arguments[3])},this.setCallback=function(t){e.Yi&&e.Yi.ae(t)},this.reportAdFailed=function(t,n){e.Yi?(w.Ft(n)>0&&e.setAdInfo(n),e.Yi.Ji()?(e.A&&e.A.debug("AdAnalytics.reportAdFailed() : "+t),e.reportAdError(t,h.ErrorSeverity.FATAL),e.reportAdEnded()):(e.Yi.Xi(e.Qi),e.A&&e.A.debug("AdAnalytics.reportAdFailed() : "+t),n=new M(t,h.ErrorSeverity.FATAL),e.Yi.zi(!0,n))):e.A&&e.A.error("AdAnalytics.reportAdFailed() : "+y.o)},this.reportAdLoaded=function(t){e.A&&e.A.debug("AdAnalytics.reportAdLoaded()"),n(t)},this.reportAdStarted=function(t){e.A&&e.A.debug("AdAnalytics.reportAdStarted()"),n(t)},this.reportAdEnded=function(){e.Yi?(e.A&&e.A.debug("AdAnalytics.reportAdEnded()"),e.Yi.Ji()&&(e.Yi.Xi(null),e.Yi.zi(!1))):e.A&&e.A.error("AdAnalytics.reportAdEnded() : "+y.u)},this.reportAdError=function(t,n){e.Yi?(e.A&&e.A.debug("AdAnalytics.reportAdError() : "+t),t=new M(t,n),e.Yi.Zn(t)):e.A&&e.A.error("AdAnalytics.reportAdError() : "+y.o)},this.reportAdPlayerEvent=function(t,n){if(w.wt(t))if(e.A&&e.A.debug("AdAnalytics.reportAdPlayerEvent()"),e.Yi)switch(t){case y.Events.USER_WAIT_STARTED:case y.Events.BUMPER_VIDEO_STARTED:e.Yi.bt();break;case y.Events.USER_WAIT_ENDED:case y.Events.BUMPER_VIDEO_ENDED:e.Yi.Lt();break;default:e.Yi.ue(t,n)}else e.A&&e.A.error("AdAnalytics.reportAdPlayerEvent() : "+y.o);else e.A&&e.A.error("AdAnalytics.reportAdPlayerEvent(): eventType parameter must be a valid string.")},this.reportAdSkipped=function(){e.Yi?(e.A&&e.A.debug("AdAnalytics.reportAdSkipped()"),e.reportAdPlayerEvent(y.Events.AD_SKIPPED),e.reportAdEnded()):e.A&&e.A.error("AdAnalytics.reportAdSkipped() : "+y.o)},this.release=function(){e.A&&e.A.debug("AdAnalytics.release()"),e.Yi&&(e.Yi.Ji()&&(e.Yi.Xi(null),e.Yi.zi(!1)),e.Yi.ae(null),e.Yi.he(),e.Yi=null),"undefined"!==typeof ft.AdProxyMonitor&&e.ie&&(ft.AdProxyMonitor.release(e.ie),e.ie=null)},this.setAdListener=function(t,n){t?("undefined"!==typeof n&&"undefined"!==typeof n.convivaModule?ft.AdProxyMonitor=n.convivaModule.AdProxyMonitor:"undefined"!==typeof ConvivaModule&&(ft.AdProxyMonitor=ConvivaModule.AdProxyMonitor),"undefined"===typeof ft.AdProxyMonitor?e.A.error("AdAnalytics.setAdListener() : Include the missing Ads SDK Module"):!t&&e.ie?(ft.AdProxyMonitor.release(e.ie),e.ie=null):t&&e.ie?(ft.AdProxyMonitor.release(e.ie),e.A&&e.A.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.ie=ft.AdProxyMonitor.initConvivaDropIn(t,n,this,ft,e.S)):t&&!e.ie&&(e.A&&e.A.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.ie=ft.AdProxyMonitor.initConvivaDropIn(t,n,this,ft,e.S))):e.A.error("AdAnalytics.setAdListener() : Need to configure the adListener instance")},this.reportAdBreakStarted=function(t,n,i){e.Qi?(e.A&&e.A.debug("AdAnalytics.reportAdBreakStarted()"),e.ce=t,e.ne=n,e.Qi.fe(t,n,i)):e.A.error("AdAnalytics.reportAdBreakStarted() : "+y.o)},this.reportAdBreakEnded=function(){e.Qi?(e.A&&e.A.debug("AdAnalytics.reportAdBreakEnded()"),e.ce=null,e.ne=null,e.Qi.le()):e.A.error("AdAnalytics.reportAdBreakEnded() : "+y.o)},this.getSessionId=function(){return e.Qi?(e.A&&e.A.debug("VideoAnalytics.getSessionId()"),e.Yi.Yt()):(e.A.error("VideoAnalytics.getSessionId() : "+y.o),y.NO_SESSION_KEY)},this.getClientId=function(){return e.Qi?(e.A&&e.A.debug("VideoAnalytics.getClientId()"),e.Yi.Jt()):(e.A.error("VideoAnalytics.getClientId() : "+y.o),null)},this.getPlayerMonitor=function(){return e.Qi},this.getAdPlayerMonitor=function(){return e.Yi},this.getVideoAnalytics=function(){return e.ee},this.getAdType=function(){return e.Qi?e.Qi.ce:null},this.de=function(){return e.Qi?e.Qi.ne:null},i.prototype=Object.create(R.prototype),i.prototype.constructor=i},l=V.AdPlayerMonitorImpl=function(){var s=this;s.ve=null,s.Ee=null,function(t,n){d.call(this,t,n)}.apply(this,arguments),this.Xi=function(t){this.pe()!==t&&(this.Ae(),s.Ee=t||null)},this.pe=function(){return s.Ee},this.ge=function(t){var n,i=this.pe(),e={};e.error=t,s.ve&&(s.ye=s.ve.getPlayerStateManager(!0),s.Se(),s.ye.setClientMeasureInterface(this),n=null,i&&(n=i.Re()),s._e=s.ve.createAdSession(n,s.Ct,s.ye,!0,e),"undefined"!==typeof t)&&(s.Ie(),s.he())},l.prototype=Object.create(d.prototype),l.prototype.constructor=l},Y=ft.Analytics={init:function(){if(this.$i)this.A.error("Client is already configured");else{if(arguments.length<=0)throw new Error("customerKey must be valid");var t=null,n=null,i=null;if("string"===typeof arguments[0]&&!w.wt(t=arguments[0]))throw new Error("customerKey must be valid");arguments.length>=2&&"object"===typeof arguments[1]&&(n=arguments[1]),arguments.length>=3&&"object"===typeof arguments[2]&&(i=arguments[2]);var t=new c(t),e=new u,i=(w.Ft(i)>0&&(i[y.GATEWAY_URL]&&(t.gatewayUrl=i[y.GATEWAY_URL]),i[y.LOG_LEVEL]>=0)&&(e.logLevel=i[y.LOG_LEVEL]),new ft.Impl.Html5Logging),s=new ft.Impl.Html5Storage,o=new ft.Impl.Html5Http,r=new ft.Impl.Html5Timer,a=new ft.Impl.Html5Time;this.pi||(this.pi=new ft.Impl.Html5Metadata),n&&(n[y.CallbackFunctions.CONSOLE_LOG]&&(i.consoleLog=n[y.CallbackFunctions.CONSOLE_LOG]),n[y.CallbackFunctions.MAKE_REQUEST]&&(o.makeRequest=n[y.CallbackFunctions.MAKE_REQUEST]),n[y.CallbackFunctions.SAVE_DATA]&&(s.saveData=n[y.CallbackFunctions.SAVE_DATA]),n[y.CallbackFunctions.LOAD_DATA]&&(s.loadData=n[y.CallbackFunctions.LOAD_DATA]),n[y.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(a.getEpochTimeMs=n[y.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),n[y.CallbackFunctions.CREATE_TIMER])&&(r.createTimer=n[y.CallbackFunctions.CREATE_TIMER]),this.gi=new j(a,r,o,s,this.pi,i),this.S=new q(this.gi,e),this.S.ct("Analytics",t),this.$i=new h(t,this.S,this.Te,Y.version),this.A=this.S.buildLogger(),this.A.setModuleName("Analytics")}},release:function(){var t=0;if(this.Ce){for(t=0;t<this.Ce.length;t++){var n=this.Ce[t];n&&(n.release(),n.A=null,n.te=null,this.Ce.splice(t,1),t--)}this.Ce=null}if(this.me){for(t=0;t<this.me.length;t++){var i=this.me[t];i&&(i.release(),i.A=null,i.te=null,this.me.splice(t,1),t--)}this.me=null}this.S&&(this.S.release(),this.S=null),this.$i&&(this.$i.release(),this.$i=null),this.$i=null,this.A=null,this.gi=null,this.pi=null,this.Te=null},setUniqueIdentifier:function(t,n){if(!this.$i)throw new Error(y.i);this.$i.setUniqueIdentifier(t,n)},setUserPreferenceForDataCollection:function(t,n){if(!this.$i)throw new Error(y.i);this.$i.setUserPreferenceForDataCollection(t,n)},setUserPreferenceForDataDeletion:function(t){if(!this.$i)throw new Error(y.i);this.$i.setUserPreferenceForDataDeletion(t)},reportAppEvent:function(t,n){if(!this.$i)throw new Error(y.i);this.$i.sendCustomEvent(h.NO_SESSION_KEY,t,n)},reportAppBackgrounded:function(){if(!this.$i)throw new Error(y.i);this.$i.sendCustomEvent(h.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(!this.$i)throw new Error(y.i);this.$i.sendCustomEvent(h.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(t){if(!(t instanceof h))throw new Error(y.i);this.$i=t,this.S=this.$i.S,this.A=this.S.buildLogger(),this.A.setModuleName("Analytics")},buildVideoAnalytics:function(){var t;if(this.$i)return t=new v(this.$i,this.S),this.me||(this.me=[]),this.me.push(t),t;throw new Error(y.i)},buildAdAnalytics:function(t){if(this.$i)return t=new i(this.$i,this.S,t||null),this.Ce||(this.Ce=[]),this.Ce.push(t),t;throw new Error(y.i)},setDeviceMetadata:function(t){var n,i,e;arguments.length<=0||0===w.Ft(t)?this.A.error("Device Metadata must be valid"):(this.pi||(this.pi=new ft.Impl.Html5Metadata),t[y.DeviceMetadata.BRAND]&&(this.pi.getDeviceBrand=function(){return t[y.DeviceMetadata.BRAND]}),t[y.DeviceMetadata.MANUFACTURER]&&(this.pi.getDeviceManufacturer=function(){return t[y.DeviceMetadata.MANUFACTURER]}),t[y.DeviceMetadata.MODEL]&&(this.pi.getDeviceModel=function(){return t[y.DeviceMetadata.MODEL]}),t[y.DeviceMetadata.TYPE]&&(this.pi.getDeviceType=function(){return t[y.DeviceMetadata.TYPE]}),t[y.DeviceMetadata.VERSION]&&(this.pi.getDeviceVersion=function(){return t[y.DeviceMetadata.VERSION]}),t[y.DeviceMetadata.OS_NAME]&&(this.pi.getOperatingSystemName=function(){return t[y.DeviceMetadata.OS_NAME]}),t[y.DeviceMetadata.OS_VERSION]&&(this.pi.getOperatingSystemVersion=function(){return t[y.DeviceMetadata.OS_VERSION]}),t[y.DeviceMetadata.CATEGORY]&&(this.pi.getDeviceCategory=function(){return t[y.DeviceMetadata.CATEGORY]}),n=t[y.DeviceMetadata.SCREEN_RESOLUTION_WIDTH],w._t(n)&&(this.pi.getScreenWidth=function(){return n.toString()}),i=t[y.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT],w._t(i)&&(this.pi.getScreenHeight=function(){return i.toString()}),e=t[y.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR],w._t(e)&&(this.pi.getScaleFactor=function(){return e.toString()}))},reportDeviceMetric:function(t,n){switch(this.Te||(this.Te={}),t){case y.Network.CONNECTION_TYPE:w.wt(n)?(this.Te[t]=n,this.$i&&this.$i.Z(this.Te[y.Network.CONNECTION_TYPE])):this.A.error("reportDeviceMetric() : Connection Type is not a valid string");break;case y.Network.LINK_ENCRYPTION:w.wt(n)?(this.Te[t]=n,this.$i&&this.$i.nt(this.Te[y.Network.LINK_ENCRYPTION])):this.A.error("reportDeviceMetric() : Link Encryption is not a valid string");break;case y.Network.SIGNAL_STRENGTH:var i=parseInt(n,10);w._t(i)?S.DEFAULT_SIGNAL_STRENGTH===i?this.A.error("reportDeviceMetric() : DEFAULT_SIGNAL_STRENGTH shouldn't be reported"):(this.Te[t]=i,this.$i&&this.$i.et(i)):this.A.error("reportDeviceMetric() : Signal Strength is not a number");break;default:this.A.error("reportDeviceMetric() : unknown device metric = "+t)}},version:"4.5.10"},R=V.AnalyticsImpl=function(){var h=this;function c(){var t=!!h.Yi,n=h.getAdType(),i=h.de();return n===y.AdType.SERVER_SIDE&&i===y.AdPlayer.CONTENT?R.Oe.Ne:n!==y.AdType.SERVER_SIDE||i!==y.AdPlayer.SEPARATE?n===y.AdType.CLIENT_SIDE&&i===y.AdPlayer.CONTENT||(n===y.AdType.CLIENT_SIDE&&y.AdPlayer.SEPARATE,t)?R.Oe.we:R.Oe.De:void 0}function f(t,n,i){t=parseInt(t,10),n=parseInt(n,10);isNaN(t)&&isNaN(n)?h.A.error("reportPlaybackResolution() : width and height are not numbers"):(isNaN(t)&&h.A.warning("reportPlaybackResolution() : width is not a number"),isNaN(n)&&h.A.warning("reportPlaybackResolution() : height is not a number"),!h.Yi||i!==R.Oe.we&&i!==R.Oe.Ne||h.Yi.Pe(t,n),!h.Qi||i!==R.Oe.De&&i!==R.Oe.Ne||h.Qi.Pe(t,n))}function l(t,n){S.$n(t)?(!h.Yi||n!==R.Oe.we&&n!==R.Oe.Ne||h.Yi.be(t),(h.Qi&&n===R.Oe.De||n===R.Oe.Ne)&&h.Qi.be(t)):h.A.error("reportPlayerState() : Player State is not valid")}function d(t,n){t=parseInt(t,10);isNaN(t)?h.A.error("reportPlayerPlayHeadTime() : playheadtime is not a number"):(!h.Yi||n!==R.Oe.we&&n!==R.Oe.Ne||h.Yi.Me(t),!h.Qi||n!==R.Oe.De&&n!==R.Oe.Ne||h.Qi.Me(t))}function v(t,n){t=parseInt(t,10);isNaN(t)?h.A.error("reportPlayerBufferLength() : buffer length is not a number"):(!h.Yi||n!==R.Oe.we&&n!==R.Oe.Ne||h.Yi.Le(t),!h.Qi||n!==R.Oe.De&&n!==R.Oe.Ne||h.Qi.Le(t))}function E(t,n){t=parseInt(t,10);!h.Yi||n!==R.Oe.we&&n!==R.Oe.Ne||h.Yi.Ve(!0,t),!h.Qi||n!==R.Oe.De&&n!==R.Oe.Ne||h.Qi.Ve(!0,t)}function p(t){!h.Yi||t!==R.Oe.we&&t!==R.Oe.Ne||h.Yi.Ve(!1,-1),!h.Qi||t!==R.Oe.De&&t!==R.Oe.Ne||h.Qi.Ve(!1,-1)}function A(t,n){t=parseInt(t,10);isNaN(t)?h.A.error("reportPlayerBitrate() : bitrate is not a number"):(!h.Yi||n!==R.Oe.we&&n!==R.Oe.Ne||h.Yi.Ue(t),!h.Qi||n!==R.Oe.De&&n!==R.Oe.Ne||h.Qi.Ue(t))}function g(t,n){t=parseInt(t,10);isNaN(t)?h.A.error("reportPlayerRenderedFrameRate() : rendered framerate is not a number"):(!h.Yi||n!==R.Oe.we&&n!==R.Oe.Ne||h.Yi.ke(t),!h.Qi||n!==R.Oe.De&&n!==R.Oe.Ne||h.Qi.ke(t))}!function(){}.apply(this,arguments),this.re=function(t,n,i,e){switch(h.A&&t!==y.Playback.PLAY_HEAD_TIME&&t!==y.Playback.BUFFER_LENGTH&&h.A.debug("reportMetric() "+t+" "+(void 0!==n&&"CONVIVA"!==n?n:"")+" "+(void 0!==i&&"CONVIVA"!==i&&i!==R.Oe.we?i:"")+" "+(void 0!==e&&"CONVIVA"!==e&&e!==R.Oe.we?e:"")),t){case y.Playback.BITRATE:"CONVIVA"===i?h.A.info("Bitrate change requested from the Conviva Library:"):h.A.info("Bitrate change requested from the application:"),e===R.Oe.we?A(n,R.Oe.we):A(n,c());break;case y.Playback.PLAY_HEAD_TIME:e===R.Oe.we?d(n,R.Oe.we):d(n,c());break;case y.Playback.RESOLUTION:e===R.Oe.we?f(n,i,R.Oe.we):f(n,i,c());break;case y.Playback.BUFFER_LENGTH:e===R.Oe.we?v(n,R.Oe.we):v(n,c());break;case y.Playback.PLAYER_STATE:e===R.Oe.we?l(n,R.Oe.we):l(n,c());break;case y.Playback.RENDERED_FRAMERATE:e===R.Oe.we?g(n,R.Oe.we):g(n,c());break;case y.Playback.SEEK_STARTED:arguments.length>=2&&"CONVIVA"!==n?E(n,c()):i===R.Oe.we?E(-1,R.Oe.we):E(-1,c());break;case y.Playback.SEEK_ENDED:i===R.Oe.we?p(R.Oe.we):p(c());break;case y.Playback.CDN_IP:"CONVIVA"===i?h.A.info("CDN Server IP change requested from the Conviva Library:"):h.A.info("CDN Server IP change requested from the application:"),a=n,u=c(),w.wt(a)?(!h.Yi||u!==R.Oe.we&&u!==R.Oe.Ne||h.Yi.Fe(a),!h.Qi||u!==R.Oe.De&&u!==R.Oe.Ne||h.Qi.Fe(a)):h.A.error("reportCDNServerIp() : CDNServerIP is not a valid string");break;case y.Playback.DROPPED_FRAMES_TOTAL:"CONVIVA"===i?h.A.info("Dropped frames total change requested from the Conviva Library:"):h.A.info("Dropped frames total change requested from the application:");u=n,a=c();u=parseInt(u,10),isNaN(u)?h.A.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!h.Yi||a!==R.Oe.we&&a!==R.Oe.Ne||h.Yi.Be(u),!h.Qi||a!==R.Oe.De&&a!==R.Oe.Ne||h.Qi.Be(u));break;case y.Playback.DROPPED_FRAMES_COUNT:"CONVIVA"===i?h.A.info("Dropped frames count change requested from the Conviva Library:"):h.A.info("Dropped frames count change requested from the application:");var s=n,o=c();s=parseInt(s,10),isNaN(s)?h.A.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!h.Yi||o!==R.Oe.we&&o!==R.Oe.Ne||h.Yi.He(s),!h.Qi||o!==R.Oe.De&&o!==R.Oe.Ne||h.Qi.He(s));break;default:o=t,s=n,r=c(),w.wt(o)&&s?(!h.Yi||r!==R.Oe.we&&r!==R.Oe.Ne||h.Yi.Xt(o,s),!h.Qi||r!==R.Oe.De&&r!==R.Oe.Ne||h.Qi.Xt(o,s)):h.A.error("reportMetric() : Metric key/value should be a proper value")}var r,a,u}},V.AnalyticsImpl.Oe={we:1,De:2,Ne:3},J=V.PlayerMonitor=function(){var e=this;this.Ke=null,this.Ge=null,this.Ct=null,this.je=null,this.Cn=S.PlayerState.UNKNOWN,this.We=-1,this.xe=-1,this.Vn=[],this.qe=null,this.Ye=null,this.Je=-2,this.Nn=-1,this.V=S.DEFAULT_SIGNAL_STRENGTH,this.Xe=null,this.ui=null,this.L=null,this.M=null,this.te=null,this.Qe=null,this.ze=null,this.Ze=null,this.$e=null,this.ce=null,this.ne=null,function(t){e.te=t}.apply(this,arguments),this.ts=function(){return e.Cn},this.be=function(t){e.Cn!==t&&(e.Ae(),e.Cn=t,e.ns())},this.es=function(){return e.ss},this.os=function(){return e.rs},this.Ve=function(t,n){e.Ae(),e.ss=t,e.rs=n,e.us()},this.hs=function(){return e.We},this.Me=function(t){e.We=t},this.cs=function(){return e.xe},this.Le=function(t){e.xe=t},this.Zi=function(){return e.Je},this.Ue=function(t){e.Je!==t&&(e.Je=t,e.ns())},this.fs=function(){return e.Nn},this.ke=function(t){e.Nn=t},this.ls=function(){return e.Xe},this.Fe=function(t){e.Xe=t,e.ns()},this.ai=function(){return e.ui},this.Be=function(t){e.ui=t,e.ns()},this.He=function(t){e.ds(t)},this.vs=function(){return e.V},this.Es=function(){return e.ps},this.As=function(){return e.gs},this.Pe=function(t,n){n<0&&(n=0),e.ps===(t=t<0?0:t)&&e.gs===n||(e.ps=t,e.gs=n,e.ns())},this.ys=function(){return e.Ge},this.Ss=function(){e.ys()&&(e.Ct=new f,e.je={},e.ze={},e.Rs())},this._s=function(t){(e.Ge||t)&&(this.Ae(),e.Ge&&(e.Ge=null,e.Ss()),t)&&(e.Ge=w.Is(e.Ge,t),e.Ss())},this.oe=function(t){if(t)if(e.Ct){var n,i=!1;for(n in t)if(e.Ct[n]!==t[n]){i=!0;break}i&&(e.Ae(),e.Ge=w.Is(t),e.Rs())}else e._s(t)},this.ae=function(t){t?e.Ze!==t&&(e.Ze=t,e.Ts()):(e.Ze=null,e.Ie())},this.Ae=function(){e.Cs||e.Ze&&(e.Cs=!0,e.Ze(),e.Cs=!1)},this.Ji=function(){return e.Ke},this.zi=function(t,n){e.Ke!==t&&(e.Ae(),e.Ke&&(e.Ns(),e.Ie(),e.he()),e.Ke=t,e.Ke)&&e.ge(n)},this.Os=function(){return e.qe},this.ws=function(){return e.Ye||null},this.Ds=function(){return e.Vn},this.Ps=function(){e.Vn=[]},this.Zn=function(t){this.Ae(),e.Vn.push(t),e.oi()},this.ue=function(t,n){e.Ae(),e.qe=t,e.Ye=n,e.bs()},this.Ms=function(){e.Ae()},this.Ts=function(){e.Ie(),e.Qe=e.te.create(e.Ms,1e3,"PlayerMonitor.update")},this.Ie=function(){e.Qe&&(e.Qe(),e.Qe=null)},this.fe=function(t,n,i){e.$e=i,e.ce=t,e.Ls(),e.ne=n,e.ce&&y.AdType.CLIENT_SIDE===e.ce&&(e.Cn=y.PlayerState.UNKNOWN,e.Vs(e.ce,n,i?i[y.POD_POSITION]:null))},this.le=function(){e.ce&&y.AdType.CLIENT_SIDE===e.ce&&(e.Us(),e.Cn=y.PlayerState.UNKNOWN),e.ks(),e.ce=null,e.ne=null},this.Fs=function(){return e.$e},this.Bs=function(){return e.ce},this.getContentMetadata=function(){return this.Ct},this.he=function(){this.Ke=null,this.Ge=null,this.Ct=null,this.je=null,this.Cn=S.PlayerState.UNKNOWN,this.We=-1,this.xe=-1,this.Vn=[],this.qe=null,this.Ye=null,this.Je=-2,this.Nn=-1,this.V=S.DEFAULT_SIGNAL_STRENGTH,this.Xe=null,this.ui=null,this.L=null,this.M=null,this.te=null,this.Qe=null,this.ze=null,this.Ze=null,this.$e=null,this.ce=null,this.ne=null,e.ye=null,e._e=h.NO_SESSION_KEY}},d=V.PlayerMonitorImpl=function(){var o=this;o.ve=null,o.ye=null,o._e=h.NO_SESSION_KEY,function(t,n){J.call(this,n),o.ve=t}.apply(this,arguments),this.getPHT=function(){return o.hs()},this.getBufferLength=function(){return o.cs()},this.getRenderedFrameRate=function(){return o.fs()},this.getSignalStrength=function(){return o.vs()},this.us=function(){o.ye&&o._ContentSessionKey!==h.NO_SESSION_KEY&&(o.es()?o.ye.setPlayerSeekStart(o.os()):o.ye.setPlayerSeekEnd())},this.ns=function(){o.ye&&(o.ye.setPlayerState(o.ts()),o.Zi()>0&&o.ye.setBitrateKbps(o.Zi()),o.Es()>0&&o.ye.setVideoResolutionWidth(o.Es()),o.As()>0&&o.ye.setVideoResolutionHeight(o.As()),o.ls()&&o.ye.setCDNServerIP(o.ls()),w._t(o.ai()))&&o.ye.setDroppedFramesTotal(o.ai())},this.Pt=function(){o._e!==h.NO_SESSION_KEY&&o.ve&&o.ve.updateContentMetadata(o._e,o.Ct)},this.Se=function(){if(o.ye){o.ze&&w.Ft(o.ze)>0&&(o.ze[y.MODULE_NAME]&&o.ze[y.MODULE_VERSION]&&(t=o.ze[y.MODULE_NAME],n=o.ze[y.MODULE_VERSION],w.wt(t))&&w.wt(n)&&o.ye.setModuleNameAndVersion(t,n),o.ze[y.FRAMEWORK_NAME]&&(t=o.ze[y.FRAMEWORK_NAME],w.wt(t))&&o.ye.setPlayerType(t),o.ze[y.FRAMEWORK_VERSION])&&(n=o.ze[y.FRAMEWORK_VERSION],w.wt(n))&&o.ye.setPlayerVersion(n);var t,n,i=o.Ds();o.Ps();for(var e=0;e<i.length;e++){var s=i[e];o.ye.Zn(s)}}},this.Us=function(){o.ye&&o._e!==h.NO_SESSION_KEY&&(o.ns(),this.Hs())},this.Lt=function(){o.ye&&o._e!==h.NO_SESSION_KEY&&(o.ns(),o.ve.Vt(o._e))},this.Hs=function(){o.ve&&o._e!==y.NO_SESSION_KEY&&o.ve.adEnd(o._e)},this.Vs=function(t,n,i){var e;o.ye&&o._e!==y.NO_SESSION_KEY&&(e=null,y.AdType.CLIENT_SIDE===t?e=h.AdStream.SEPARATE:y.AdType.SERVER_SIDE===t&&(e=h.AdStream.CONTENT),o.Ks(e,n,i))},this.bt=function(){o.ye&&o._e!==y.NO_SESSION_KEY&&o.ve.Mt(o._e)},this.Ks=function(t,n,i){o.ve&&o._e!==y.NO_SESSION_KEY&&o.ve.adStart(o._e,t,n,i)},this.ge=function(){if(o.ve){o.ye=o.ve.getPlayerStateManager(!0),o.Se(),o.ye.setClientMeasureInterface(this);try{var t;o.Ct&&o.Ct.custom&&!o.Ct.custom[y.UTM_TRACKING_URL]&&(Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var e,s=[],o=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)r in n&&(e=n[r],t.call(o,e,r,n))&&s.push(e);return s}),""!==(t=w.Gs().split("?").join("").split("&").filter(function(t){return 2===t.split("=").length&&t.split("=")[0].toLowerCase().indexOf("utm_")>=0}).join("&")))&&(o.Ct.custom[y.UTM_TRACKING_URL]=t)}catch(t){o.A.error("PlayerMonitorImpl _createSession : "+t)}o._e=o.ve.createSession(o.Ct,o.ye,!0)}},this.Ns=function(){o.ve&&(o.ye&&(o.ye.setPlayerState(y.PlayerState.STOPPED),o.ye=null),o._e!==y.NO_SESSION_KEY)&&(o.ve.cleanupSession(o._e),o._e=y.NO_SESSION_KEY)},this.oi=function(){if(o.ve&&o._e!==h.NO_SESSION_KEY){var t=o.Ds();o.Ps();for(var n=0;n<t.length;n++){var i=t[n];o.ve.reportError(o._e,i.js(),i.Ws())}}},this.bs=function(){o._e!==h.NO_SESSION_KEY&&o.ve&&o.ve.sendCustomEvent(o._e,o.Os(),o.ws())},this.Rs=function(){var t,n=o.ys(),i=!1,e=!1;for(t in n){var s=n[t];if(w.wt(t)&&null!==s&&void 0!==s)switch(t){case y.STREAM_URL:e=!0,o.Ct.streamUrl=s;break;case y.ASSET_NAME:e=!0,o.Ct.assetName=s;break;case y.DEFAULT_RESOURCE:e=!0,o.Ct.defaultResource=s;break;case y.VIEWER_ID:e=!0,o.Ct.viewerId=s;break;case y.PLAYER_NAME:e=!0,o.Ct.applicationName=s;break;case y.DURATION:e=!0,o.Ct.duration=s;break;case y.IS_LIVE:e=!0,o.Ct.streamType=s;break;case y.ENCODED_FRAMERATE:e=!0,o.Ct.encodedFrameRate=s;break;case y.MODULE_NAME:case y.MODULE_VERSION:case y.FRAMEWORK_NAME:case y.FRAMEWORK_VERSION:i=!0,o.ze[t]=s;break;default:y.APPLICATION_VERSION;e=!0,o.Ct.custom[t]=s}}i&&this.Se(),e&&this.Pt()},this.Ls=function(){this.xs(y.Events.POD_START)},this.ks=function(){this.xs(y.Events.POD_END)},this.xs=function(t){var n,i,e;o.ve&&o._e!==y.NO_SESSION_KEY&&(n={},(e=this.Fs())&&((i=e[y.POD_POSITION])&&(n[y.POD_POSITION]=i),(i=e[y.POD_INDEX])&&(n[y.POD_INDEX]=i+""),t===y.Events.POD_START)&&(i=e[y.POD_DURATION])&&(n[y.POD_DURATION]=i+""),(e=this.Bs())&&(n[y.AD_TYPE]=e),o.ve.sendCustomEvent(o._e,t,n))},this.ds=function(t){o.ye.setDroppedFramesCount(t)},this.qs=function(t){this._e===y.NO_SESSION_KEY&&t!==y.NO_SESSION_KEY&&(this._e=t)},this.Re=function(){return this._e},this.Yt=function(){return o.ve.getSessionId(this._e)},this.Jt=function(){return o.ve.getClientId(this._e)},this.Xt=function(t,n){o.ve.Xt(this._e,t,n)},d.prototype=Object.create(J.prototype),d.prototype.constructor=d},ft.Impl=ft.Impl||{},ft.Impl.Html5Http=function(){!function(){}.apply(this,arguments),this.makeRequest=function(){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(t,n,i,e,s,o){var r=new XMLHttpRequest;return r.open(t,n,!0),e&&r.overrideMimeType&&(r.overrideMimeType=e),e&&r.setRequestHeader&&r.setRequestHeader("Content-Type",e),s>0&&(r.timeout=s,r.ontimeout=function(){r.ontimeout=r.onreadystatechange=null,o&&o(!1,"timeout after "+s+" ms")}),r.onreadystatechange=function(){4===r.readyState&&(r.ontimeout=r.onreadystatechange=null,200===r.status?o&&o(!0,r.responseText):o&&o(!1,"http status "+r.status))},r.send(i),null},this.release=function(){}},ft.Impl=ft.Impl||{},ft.Impl.Html5Logging=function(){!function(){}.apply(this,arguments),this.consoleLog=function(t,n){"undefined"!==typeof console&&(console.log&&n===u.LogLevel.DEBUG||n===u.LogLevel.INFO?console.log(t):console.warn&&n===u.LogLevel.WARNING?console.warn(t):console.error&&n===u.LogLevel.ERROR&&console.error(t))},this.release=function(){}},ft.Impl=ft.Impl||{},ft.Impl.Html5Metadata=function(){!function(){}.apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!==typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},ft.Impl=ft.Impl||{},ft.Impl.Html5Storage=function(){!function(){}.apply(this,arguments),this.saveData=function(t,n,i,e){t=t+"."+n;try{localStorage.setItem(t,i),e(!0,null)}catch(t){e(!1,t.toString())}},this.loadData=function(t,n,i){t=t+"."+n;try{i(!0,localStorage.getItem(t))}catch(t){i(!1,t.toString())}},this.release=function(){}},ft.Impl=ft.Impl||{},ft.Impl.Html5Time=function(){!function(){}.apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},ft.Impl=ft.Impl||{},ft.Impl.Html5Timer=function(){!function(){}.apply(this,arguments),this.createTimer=function(t,n){var i=setInterval(t,n);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}},v=V.VideoAnalytics=function(){var s=this;s.$i=null,s.A=null,s.S=null,s.te=null,s.Qi=null,s.ie=null,this.release=function(){s.A&&s.A.debug("VideoAnalytics.release()"),s.Qi&&s.Qi.Ji()&&s.Qi.zi(!1),"undefined"!==typeof ft.ProxyMonitor&&s.ie&&(ft.ProxyMonitor.release(s.ie),s.ie=null),s.Qi&&(s.Qi.ae(null),s.Qi.he(),s.Qi=null),s.te=null},function(t,n){s.$i=t,s.S=n,s.te=n.buildTimer(y.version),s.A=n.buildLogger(),s.A.setModuleName("VideoAnalytics"),s.Qi=new d(s.$i,s.te),R.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(t){s.A&&s.A.debug("VideoAnalytics.reportPlaybackRequested()"),s.Qi?(w.Ft(t)>0&&s.setContentInfo(t),s.Qi.Ji()||s.Qi.zi(!0)):s.A.error("VideoAnalytics.reportPlaybackRequested() : "+y.v)},this.reportPlaybackEnded=function(){s.A&&s.A.debug("VideoAnalytics.reportPlaybackEnded()"),s.Qi?s.Qi.Ji()&&(s.Qi.zi(!1),"undefined"!==typeof ft.ProxyMonitor&&s.ie&&(ft.ProxyMonitor.release(s.ie),s.ie=null),s.Qi.ae(null)):s.A.error("VideoAnalytics.reportPlaybackEnded() : "+y.v)},this.reportPlaybackFailed=function(t,n){s.Qi?(w.Ft(n)>0&&s.setContentInfo(n),s.Qi.Ji()||s.Qi.zi(!0),s.A&&s.A.debug("VideoAnalytics.reportPlaybackFailed()"),s.reportPlaybackError(t,h.ErrorSeverity.FATAL),s.reportPlaybackEnded()):s.A.error("VideoAnalytics.reportPlaybackFailed() : "+y.o)},this.setContentInfo=function(t){w.Ft(t)<=0?s.A.error("VideoAnalytics.setContentInfo() : Content Info is not set"):s.Qi?(s.A&&s.A.debug("VideoAnalytics.setContentInfo()"),s.Qi.oe(t)):s.A.error("VideoAnalytics.setContentInfo() : "+y.o)},this.setPlayerInfo=function(t){w.Ft(t)<=0?s.A.error("VideoAnalytics.setPlayerInfo() : Player Info is not set"):s.Qi?(s.A&&s.A.debug("VideoAnalytics.setPlayerInfo()"),s.Qi.oe(t)):s.A.error("VideoAnalytics.setPlayerInfo() : "+y.o)},this.reportPlaybackMetric=function(){0===arguments.length?s.A.error("VideoAnalytics.reportPlaybackMetric() : Need to report metric mandatory"):1===arguments.length?s.re(arguments[0]):2===arguments.length?s.re(arguments[0],arguments[1]):3===arguments.length?s.re(arguments[0],arguments[1],arguments[2]):4===arguments.length&&s.re(arguments[0],arguments[1],arguments[2],arguments[3])},this.reportPlaybackError=function(t,n){s.Qi?w.wt(t)?(s.A&&s.A.debug("VideoAnalytics.reportPlaybackError()"),t=new M(t,n),s.Qi.Zn(t)):s.A.error("VideoAnalytics.reportPlaybackError() : errorMessage need to be valid string"):s.A.error("VideoAnalytics.reportPlaybackError() : "+y.o)},this.reportPlaybackEvent=function(t,n){if(w.wt(t))if(s.Qi){if(s.A&&s.A.debug("VideoAnalytics.reportPlaybackEvent()"),s.Qi)switch(t){case y.Events.USER_WAIT_STARTED:case y.Events.BUMPER_VIDEO_STARTED:s.Qi.bt();break;case y.Events.USER_WAIT_ENDED:case y.Events.BUMPER_VIDEO_ENDED:s.Qi.Lt();break;default:s.Qi.ue(t,n)}}else s.A.error("VideoAnalytics.reportPlaybackEvent() : "+y.o);else s.A.error("VideoAnalytics.reportPlaybackEvent(): eventType parameter must be a valid string.")},this.setCallback=function(t){s.A&&s.A.debug("setCallback()"),s.Qi&&s.Qi.ae(t)},this.reportAdBreakStarted=function(t,n,i){s.Qi?(s.A&&s.A.debug("VideoAnalytics.reportAdBreakStarted()"),s.Qi.fe(t,n,i)):s.A.error("VideoAnalytics.reportAdBreakStarted() : "+y.o)},this.reportAdBreakEnded=function(){s.Qi?(s.A&&s.A.debug("VideoAnalytics.reportAdBreakEnded()"),s.Qi.le()):s.A.error("VideoAnalytics.reportAdBreakEnded() : "+y.o)},this.setPlayer=function(t,n){var i,e;void 0===t?s.A.error("VideoAnalytics.setPlayer() : Need to configure the Player"):(n&&(i=n[y.CONVIVA_MODULE],e=n[y.MEDIA_ELEMENT]),"undefined"!==typeof i?ft.ProxyMonitor=i.ProxyMonitor:"undefined"!==typeof ConvivaModule&&(ft.ProxyMonitor=ConvivaModule.ProxyMonitor),"undefined"===typeof ft.ProxyMonitor?s.A.error("VideoAnalytics.setPlayer() : Include the missing Player Module"):(s.A&&s.A.debug("VideoAnalytics.setPlayer()"),!t&&s.ie?(ft.ProxyMonitor.release(s.ie),s.ie=null):t?(s.ie&&ft.ProxyMonitor.release(s.ie),s.A&&s.A.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),s.ie="undefined"!==typeof e?ft.ProxyMonitor.initConvivaDropIn(t,e,s.S,this,ft):ft.ProxyMonitor.initConvivaDropIn(t,s.S,this,ft)):"undefined"!==typeof e&&(s.ie=ft.ProxyMonitor.initConvivaDropIn(t,e,s.S,this,ft))))},this.setAdAnalytics=function(t){t?s.getAdType()&&(s.getAdType()===y.AdType.SERVER_SIDE?s.Yi=t.getAdPlayerMonitor():s.getAdType()===y.AdType.CLIENT_SIDE&&s.A&&s.A.error("VideoAnalytics.setAdAnalytics() : API is not meant for Client Side Ads")):s.Yi=null},this.configureExistingSession=function(t){t===y.NO_SESSION_KEY?s.A.error("VideoAnalytics.configureExistingSession() : Invalid Session Key"):s.Qi?(s.A&&s.A.debug("VideoAnalytics.configureExistingSession()"),s.Qi.qs(t)):s.A.error("VideoAnalytics.configureExistingSession() : "+y.o)},this.getSessionId=function(){return s.Qi?(s.A&&s.A.debug("VideoAnalytics.getSessionId()"),s.Qi.Yt()):(s.A.error("VideoAnalytics.getSessionId() : "+y.o),y.NO_SESSION_KEY)},this.getClientId=function(){return s.Qi?(s.A&&s.A.debug("VideoAnalytics.getClientId()"),s.Qi.Jt()):(s.A.error("VideoAnalytics.getClientId() : "+y.o),null)},this.se=function(){return s.A&&s.A.debug("VideoAnalytics.getPlayerMonitor()"),this.Qi},this.getAdType=function(){return s.Qi?s.Qi.ce:null},this.de=function(){return s.Qi?s.Qi.ne:null},v.prototype=Object.create(R.prototype),v.prototype.constructor=v},V.JsonParse=(k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(t){throw{name:"SyntaxError",message:t,at:n,text:U}},r=function(t){return t&&t!==s&&o("Expected '"+t+"' instead of '"+s+"'"),s=U.charAt(n),n+=1,s},F=function(){var t,n,i,e="";if('"'===s)for(;r();){if('"'===s)return r(),e;if("\\"===s)if(r(),"u"===s){for(n=i=0;n<4&&(t=parseInt(r(),16),isFinite(t));n+=1)i=16*i+t;e+=String.fromCharCode(i)}else{if("string"!==typeof k[s])break;e+=k[s]}else e+=s}o("Bad string")},e=function(){for(;s&&s<=" ";)r()},a=function(){switch(e(),s){case"{":var t,n={};if("{"===s){if(r("{"),e(),"}"===s)return r("}"),n;for(;s;){if(t=F(),e(),r(":"),Object.hasOwnProperty.call(n,t)&&o('Duplicate key "'+t+'"'),n[t]=a(),e(),"}"===s)return r("}"),n;r(","),e()}}return void o("Bad object");case"[":var i=[];if("["===s){if(r("["),e(),"]"===s)return r("]"),i;for(;s;){if(i.push(a()),e(),"]"===s)return r("]"),i;r(","),e()}}return void o("Bad array");case'"':return F();case"-":return ht();default:return(s>="0"&&s<="9"?ht:function(){switch(s){case"t":return r("t"),r("r"),r("u"),r("e"),!0;case"f":return r("f"),r("a"),r("l"),r("s"),r("e"),!1;case"n":return r("n"),r("u"),r("l"),r("l"),null}o("Unexpected '"+s+"'")})()}},function(t,r){return U=t,n=0,s=" ",t=a(),e(),s&&o("Syntax error"),"function"===typeof r?function t(n,i){var e,s,o=n[i];if(o&&"object"===typeof o)for(e in o)Object.hasOwnProperty.call(o,e)&&(void 0!==(s=t(o,e))?o[e]=s:delete o[e]);return r.call(n,i,o)}({"":t},""):t}),_=V.JSON2={},"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!==typeof _.stringify&&(E=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,X={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},_.stringify=function(t,n,i){var e;if(A=p="","number"===typeof i)for(e=0;e<i;e+=1)A+=" ";else"string"===typeof i&&(A=i);if(!(g=n)||"function"===typeof n||"object"===typeof n&&"number"===typeof n.length)return function t(n,i){var e,s,o,r,a,u=p,h=i[n];switch(h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(n)),typeof(h="function"===typeof g?g.call(i,n,h):h)){case"string":return ct(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(p+=A,a=[],Object.prototype.toString.apply(h)===Object.prototype.toString.apply([])){for(r=h.length,e=0;e<r;e+=1)a[e]=t(e,h)||"null";o=0===a.length?"[]":p?"[\n"+p+a.join(",\n"+p)+"\n"+u+"]":"["+a.join(",")+"]"}else{if(g&&"object"===typeof g)for(r=g.length,e=0;e<r;e+=1)"string"===typeof g[e]&&(o=t(s=g[e],h))&&a.push(ct(s)+(p?": ":":")+o);else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(o=t(s,h))&&a.push(ct(s)+(p?": ":":")+o);o=0===a.length?"{}":p?"{\n"+p+a.join(",\n"+p)+"\n"+u+"}":"{"+a.join(",")+"}"}return p=u,o}}("",{"":t});throw new Error("JSON2.stringify")}),C=V.Ys={Js:"0123456789abcdef",Xs:function(t){for(var n="",i=7;i>=0;i--)n+=C.Js.charAt(t>>4*i&15);return n},Qs:function(t){for(var n=1+(t.length+8>>6),i=new Array(16*n),e=0;e<16*n;e++)i[e]=0;for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<24-e%4*8;return i[e>>2]|=128<<24-e%4*8,i[16*n-1]=8*t.length,i},zs:function(t,n){var i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i},Zs:function(t,n){return t<<n|t>>>32-n},$s:function(t,n,i,e){return t<20?n&i|~n&e:!(t<40)&&t<60?n&i|n&e|i&e:n^i^e},no:function(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514},io:function(t){for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return C.eo(n)},eo:function(t){if(""===t)return"";for(var n,i=C.Qs(t),e=new Array(80),s=1732584193,o=-271733879,r=-1732584194,a=271733878,u=-1009589776,h=0;h<i.length;h+=16){for(var c=s,f=o,l=r,d=a,v=u,E=0;E<80;E++)e[E]=E<16?i[h+E]:C.Zs(e[E-3]^e[E-8]^e[E-14]^e[E-16],1),n=C.zs(C.zs(C.Zs(s,5),C.$s(E,o,r,a)),C.zs(C.zs(u,e[E]),C.no(E))),u=a,a=r,r=C.Zs(o,30),o=s,s=n;s=C.zs(s,c),o=C.zs(o,f),r=C.zs(r,l),a=C.zs(a,d),u=C.zs(u,v)}return C.Xs(s)+C.Xs(o)+C.Xs(r)+C.Xs(a)+C.Xs(u)}},(m=V.CwsProtocol=function(){this.so=function(t,n,i,e){return e.seq=t,e.st=n,e.t=i,e},this.oo=function(t,n){var i=m.ro;return this.so(t,n,i,{})}}).version="2.6",m.ao="/0/wsg",m.B="0",m.uo=-1,m.ho=!1,m.co=2,m.fo=-1,m.lo=-1,m.do=1e3,m.vo="sdk.js.1",m.Eo="CwsStateChangeEvent",m.po="CwsErrorEvent",m.ro="CwsSessionEndEvent",m.Ao="CwsCustomEvent",m.yo="CwsSeekEvent",m.So="CwsDataSamplesEvent",m.Ro="ok",m._o="err",m.Io="clid",m.To="cfg",m.Co="evs",m.mo="maxhbinfos",m.No="slg",m.Oo="hbi",m.wo="gw",m.Do="fp",m.Po="csi_en",m.bo="CwsSessionHb",m.Mo="t",m.Lo="st",m.Vo="sst",m.Uo="lv",m.ko="seq",m.Fo="cid",m.Bo="clid",m.Ho="clv",m.Ko="pver",m.Go="iid",m.jo="sid",m.Wo="vid",m.xo="an",m.qo="pn",m.Yo="tags",m.Jo="sf",m.Xo="evs",m.Qo="lg",m.zo="hbinfos",m.Zo="sdk",m.$o="pj",m.tr="ps",m.nr="br",m.ir="cl",m.er="efps",m.sr="afps",m.rr="rfpstot",m.ar="rfpscnt",m.ur="rs",m.hr="pht",m.cr="bl",m.lr="url",m.dr="caps",m.vr="pm",m.Er="w",m.pr="h",m.Ar="ct",m.gr="le",m.yr="dftot",m.Sr="dfcnt",m.Rr="ss",m._r="csi_n",m.Ir="csi_t",m.Tr="csi_l",m.Cr="csi_v",m.mr="csi_c",m.Nr="sch",m.Or="br",m.wr="brv",m.Dr="dvb",m.Pr="dvma",m.br="dvm",m.Mr="dvt",m.Lr="dvv",m.Vr="sw",m.Ur="sh",m.kr="scf",m.Fr="fw",m.Br="fwv",m.Hr="cc",m.Kr="mn",m.Gr="mv",m.jr="os",m.Wr="osv",m.qr="cat",m.Yr="caps",m.Jr="t",m.Xr="seq",m.Qr="st",m.zr="act",m.Zr="skto",m.$r="err",m.ta="ft",m.na="new",m.ia="old",m.ea="name",m.sa="attr",m.oa="seq",m.ra="err",m.aa="rtt",m.ua="ad",m.ha="csi",m.ca=function(t){switch(t){case S.PlayerState.STOPPED:return m.fa;case S.PlayerState.PLAYING:return m.la;case S.PlayerState.BUFFERING:return m.da;case S.PlayerState.PAUSED:return m.va;case S.PlayerState.NOT_MONITORED:return m.Ea;default:return m.pa}},m.fa=1,m.la=3,m.da=6,m.va=12,m.Ea=98,m.pa=100,m.Aa={ga:0,St:1,ya:2,Sa:4},m.Ra={_a:0},Q=V.LibJSONInterface=function(){this.Ia=function(t){var n=null;try{n=_.stringify(t)}catch(t){}return n},this.Ta=function(t){var n=null;try{n=V.JsonParse(t)}catch(t){return n}return n=w.Ca(n)?n:null}},z=V.CwsHeartbeat=function(){this.ma={},function(){}.apply(this,arguments),this.get=function(){return this.ma},this.Na=function(t,n){this.ma[t]=n},this.Oa=function(t,n,i){this.ma[t]||(this.ma[t]={}),this.ma[t][n]=i},this.wa=function(t){this.Na(m.Mo,t)},this.Da=function(t){this.Na(m.Lo,t)},this.Pa=function(t){this.Na(m.Vo,t)},this.ba=function(t){this.Na(m.Uo,t)},this.Ma=function(t){this.Na(m.ko,t)},this.La=function(t){this.Na(m.Fo,t)},this.Va=function(t){this.Na(m.Bo,t)},this.Ua=function(t){this.Na(m.Ho,t)},this.ka=function(t){this.Na(m.Ko,t)},this.Fa=function(t){this.Na(m.Yr,t)},this.Xn=function(t){this.Na(m.jo,t)},this.Ba=function(t){this.Na(m.Go,t)},this.Ha=function(t){this.Na(m.Wo,t)},this.Ka=function(t){this.Na(m.xo,t)},this.Ga=function(t){this.Na(m.qo,t)},this.ja=function(t){this.Na(m.Yo,t)},this.Wa=function(t){this.Na(m.Jo,t)},this.xa=function(t){this.Na(m.dr,t)},this.qa=function(t){this.Na(m.Xo,t)},this.Ya=function(t){this.Na(m.Zo,t)},this.Ja=function(t){this.Na(m.Qo,t)},this.Xa=function(t){this.Na(m.zo,t)},this.be=function(t){this.Na(m.tr,t)},this.Qa=function(t){this.Na(m.$o,t)},this.za=function(t){this.Na(m.ir,t)},this.Za=function(t){this.Na(m.nr,t)},this.$a=function(t){this.Na(m.ur,t)},this.tu=function(t){this.Na(m.er,t)},this.nu=function(t){this.Na(m.sr,t)},this.iu=function(t){this.Na(m.ar,t)},this.eu=function(t){this.Na(m.rr,t)},this.su=function(t){this.Oa(m.vr,m.Nr,t)},this.ou=function(t){this.Oa(m.vr,m.Or,t)},this.ru=function(t){this.Oa(m.vr,m.wr,t)},this.au=function(t){this.Oa(m.vr,m.Dr,t)},this.uu=function(t){this.Oa(m.vr,m.Pr,t)},this.hu=function(t){this.Oa(m.vr,m.br,t)},this.cu=function(t){this.Oa(m.vr,m.Mr,t)},this.fu=function(t){this.Oa(m.vr,m.Lr,t)},this.lu=function(t){this.Oa(m.vr,m.Fr,t),this.Na(m.Fr,t)},this.du=function(t){this.Oa(m.vr,m.Br,t),this.Na(m.Br,t)},this.vu=function(t){this.Oa(m.vr,m.jr,t.toUpperCase())},this.Eu=function(t){this.Oa(m.vr,m.Wr,t)},this.pu=function(t){this.Oa(m.vr,m.qr,t)},this.Au=function(t){this.Oa(m.vr,m.Vr,t)},this.gu=function(t){this.Oa(m.vr,m.Ur,t)},this.yu=function(t){this.Oa(m.vr,m.kr,t)},this.Su=function(t){this.Na(m.yr,t)},this.ds=function(t){this.Na(m.Sr,t)},this.Ru=function(t){this.Na(m.hr,t)},this._u=function(t){this.Na(m.cr,t)},this.Iu=function(t){this.Na(m.lr,t)},this.Tu=function(t){this.Na(m.Er,t)},this.Cu=function(t){this.Na(m.pr,t)},this.mu=function(t){this.Na(m.Ar,t)},this.Nu=function(t){this.Na(m.gr,t)},this.Ou=function(){this.Na(m.ua,!0)},this.wu=function(t){this.Na(m.Rr,t)},this.setModuleName=function(t){this.Oa(m.Hr,m.Kr,t)},this.Du=function(t){this.Oa(m.Hr,m.Gr,t)},this.Pu=function(t){this.Na(m.ha,t)},this.bu=function(t){t&&this.Na(m._r,t)},this.Mu=function(t){t&&this.Na(m.Ir,t)},this.Lu=function(t){t&&this.Na(m.Tr,t)},this.Vu=function(t){t&&this.Na(m.Cr,t)},this.Uu=function(t){t&&this.Na(m.mr,t)}},(N=V.CwsSession=function(){var p=this;p.Fu=null,p.Ct=null,p.Bu=0,p.Hu=0,p.Ku=m.Aa.ga,p.Gu=m.Ra._a,p.ju=[],p.Wu=-1,p.Tn=-2,p.ui=-1,p.xu=-1,p.qu=null,p.Cn=S.PlayerState.UNKNOWN,p._n=-1,p.Yu=-1,p.gn=null,p.bn=-1,p.Mn=-1,p.ye=null,p.dn=null,p.pn=null,p.Ju=null,p.Xu=null,p.Qu={},p.zu=null,p.Zu=null,p.$u=null,p.th=null,p.nh=null,p.ih=null,p.eh=null,p.sh=null,p.oh=null,p.rh=null,p.ah=null,p.uh=null,p.hh=null,p.fh=null,p.lh=null,p.Dn=null,p.Pn=null,p.M=null,p.L=null,p.Xe=null,p.dh=null,p.Eh=!1,p.ph=!1,p.Ah=!1,p.gh=!1,p.yh=null,p.Sh=1e3,p.Rh=0,p._h=0,p.Ih={},p.O={},p.Th=!1,p.Ch=null,p.mh=null,p.Nh=null,p.Oh=null,p.wh=null,p.Dh=null,p.Ph=12e4,p.bh=m.ho,p.Mh=!1,p.Lh=null,p.Ri=null,function(t,n,i,e,s,o,r,a,u,h,c,f,l){this.Vh=t,this.$i=n,this.Si=i,this.A=e,this.A.setModuleName("CwsSession"),this.T=s,this.te=o,this.Uh=r,this.kh=a,this.Fh=u,this._i=h,this.Bh=c,this.Ct=f,this.Ct&&(p._n=this.Ct.encodedFrameRate,p.gn=this.Ct.streamUrl,p.Yu=this.Ct.duration),this.Bh&&(p.Lh=p.Bh.get(O.F)),p.Ri=l}.apply(this,arguments),this.gt=function(){this.Bh=null,this._i=null,this.I=null,this.Fh=null,this.kh=null,this.Uh=null,this.te=null,this.T=null,this.A=null,this.Si=null,this.$i=null,this.Vh.Hh(),this.Vh=null,this.dh=null,this.Ah=!0},this.Kh=function(t){this.Gh=t,this.jh=this.Gh.jh,this.A.Xn(this.Gh.m),this.Bu=this.Fh.current(),this.Wh()||this.xh()?(this.Ku+=N.ku,p.A.info("start(): assetName="+p.Ct.assetName)):p.A.info("start()"+p.qh())},this.Yh=function(){this.gh=!0},this.Jh=function(){this.A.debug("initialize()"),(this.Wh()||this.xh()||this.Xh())&&(p.Qh(),p.zh(),p.Zh(),this.Wh()||this.xh())&&p.$h()},this.tc=function(){this.A.debug("end(): schedule the last hb before session cleanup"+p.qh()),this.nc(),this.ic(),this.ec(),this.sc()},this.oc=function(){this.gh||(this.sc(),this.rc())},this.ou=function(t){var n=p.zu;n!==t&&t&&(p.A.debug("Change browserName from "+n+" to "+t),p.zu=t)},this.ru=function(t){var n=p.Zu;n!==t&&t&&(p.A.debug("Change browserVersion from "+n+" to "+t),p.Zu=t)},this.au=function(t){var n=p.$u;n!==t&&t&&(p.A.debug("Change deviceBrand from "+n+" to "+t),p.$u=t)},this.uu=function(t){var n=p.th;n!==t&&t&&(p.A.debug("Change deviceManufacturer from "+n+" to "+t),p.th=t)},this.hu=function(t){var n=p.nh;n!==t&&t&&(p.A.debug("Change deviceModel from "+n+" to "+t),p.nh=t)},this.cu=function(t){var n=p.ih;n!==t&&t&&(p.A.debug("Change deviceType from "+n+" to "+t),p.ih=t)},this.fu=function(t){var n=p.eh;n!==t&&t&&(p.A.debug("Change deviceVersion from "+n+" to "+t),p.eh=t)},this.vu=function(t){var n=p.rh;n!==t&&t&&(p.A.debug("Change operatingSystemName from "+n+" to "+t),p.rh=t)},this.Eu=function(t){var n=p.ah;n!==t&&t&&(p.A.debug("Change operatingSystemVersion from "+n+" to "+t),p.ah=t)},this.pu=function(t){var n=p.uh;n!==t&&t&&(p.A.debug("Change deviceCategory from "+n+" to "+t),p.uh=t)},this.Au=function(t){var n=p.hh;n!==t&&t&&(p.A.debug("Change screenWidth from "+n+" to "+t),p.hh=t)},this.gu=function(t){var n=p.fh;n!==t&&t&&(p.A.debug("Change screenHeight from "+n+" to "+t),p.fh=t)},this.yu=function(t){var n=p.uh;n!==t&&t&&(p.A.debug("Change scaleFactor from "+n+" to "+t),p.lh=t)},this.ac=function(){return p.sh},this.lu=function(t){var n=p.sh;n!==t&&t&&(p.A.debug("Change frameworkName from "+n+" to "+t),p.sh=t)},this.uc=function(){return p.oh},this.du=function(t){var n=p.oh;n!==t&&t&&(p.A.debug("Change frameworkVersion from "+n+" to "+t),p.oh=t)},this.Iu=function(t){var n;p.Ct.streamUrl||(n=p.gn)!==t&&t&&(p.A.debug("Change stream url from "+n+" to "+t),p.gn=t)},this.hc=function(){p.ic(),p.Mh||(p.cc(),p.Dh=p.te.create(p.cc,p.Ph,"CwsSession.startCdnTimer"),p.A.debug("fetching cdn ip timer started"))},this.ic=function(){p.Dh&&(p.Dh(),p.fc(null,null,null,null,null),p.Dh=null)},this.cc=function(){p.A.debug("detectCDNServerIp(): For "+p.gn),p.bh?p.lc():p.ic()},this.lc=function(){try{var t;"function"===typeof XMLHttpRequest||"object"===typeof XMLHttpRequest?((t=new XMLHttpRequest).open("HEAD",p.gn,!0),t.setRequestHeader("Pragma","akamai-x-cache-on"),t.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(this.getAllResponseHeaders().indexOf("x-cache")>=0||this.getAllResponseHeaders().indexOf("X-Cache")>=0)?p.fc("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):p.fc("null","header","null","null",""+this.status))},t.send()):p.A.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){p.A.info("Exception caught in makeAkamaiHeadRequest")}},this.fc=function(t,n,i,e,s){var o={},r={};p.Ch!==t&&(null!==p.Ch&&(r[m._r]=p.Ch),p.Ch=t,null===p.Ch?o[m._r]="null":o[m._r]=p.Ch),p.mh!==n&&(null!==p.mh&&(r[m.Ir]=p.mh),p.mh=n,null===p.mh?o[m.Ir]="null":o[m.Ir]=p.mh),p.Nh!==i&&(null!==p.Nh&&(r[m.Tr]=p.Nh),p.Nh=i,null===p.Nh?o[m.Tr]="null":o[m.Tr]=p.Nh),p.Oh!==e&&(null!==p.Oh&&(r[m.Cr]=p.Oh),p.Oh=e,null===p.Oh?o[m.Cr]="null":o[m.Cr]=p.Oh),p.wh!==s&&(null!==p.wh&&(r[m.mr]=p.wh),p.wh=s,null===p.wh?o[m.mr]="null":o[m.mr]=p.wh),"{}"!==JSON.stringify(o)&&p.dc(o,r)},this.vc=function(t){var n=p.Tn;n!==t&&t>0&&(p.A.info("Change bitrate from "+n+" to "+t),p.Ec(n,t),p.Tn=t)},this.Su=function(t){var n=p.ui;n!==t&&t>=0&&(p.A.info("Change dropped frames total from "+n+" to "+t),p.Ac(n,t),p.ui=t)},this.ds=function(t){var n=p.xu,i=t+(-1===p.xu?0:p.xu);n!==t&&i>=0&&(p.A.info("Change dropped frames count from "+n+" to "+i),p.gc(n,i),p.xu=i)},this.$a=function(t){var n=p.qu;n!==t&&t&&(p.A.info("Change resource from "+n+" to "+t),p.qu=t)},this.Ka=function(t){p.dn!==t&&t&&(p.A.info("Change assetName from "+p.dn+" to "+t),p.dn=t)},this.ba=function(t){var n=p.Xu;n!==t&&w.Hi(t)&&(p.A.info("Change isLive from "+n+" to "+t),p.Xu=t)},this.Ha=function(t){var n=p.pn;n!==t&&t&&(p.A.info("Change viewerId from "+n+" to "+t),p.pn=t)},this.Ga=function(t){var n=p.Ju;n!==t&&t&&(p.A.info("Change playerName from "+n+" to "+t),p.Ju=t)},this.ja=function(t){var n=p.Qu;!w.yc(n,t)&&t&&(p.A.info("Change tags from "+w.Sc(n)+" to "+w.Sc(t)),p.Qu=t)},this.tu=function(t){p.Ct.encodedFrameRate>0||(p.A.debug("setEncodedFrameRate(): "+t),p._n=t)},this.za=function(t){p.Ct.duration>0||(p.A.debug("setContentLength(): "+t),p.Yu=t)},this.be=function(t){var n;p.ph||t!==S.PlayerState.PLAYING||(p.ph=!0,w.wt(p.Ct.viewerId)||p.A.error("Missing viewerId. viewerId should be updated before first frame is rendered."),w.wt(p.Ct.streamType)&&f.StreamType.UNKNOWN!==p.Ct.streamType||p.A.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),w.wt(p.Ct.applicationName))||p.A.error("Missing applicationName. applicationName should be updated before first frame is rendered."),p.Cn!==t&&(n=p.Cn,p.A.info("setPlayerState(): changing player state from "+n+" to "+t),p.Rc(n,t),p.Cn=t)},this._c=function(t){var n=p.bn;n!==t&&t>0&&(p.A.debug("Change stream resolution width from "+n+" to "+t),p.Ic(n,t),p.bn=t)},this.Tc=function(t){var n=p.Mn;n!==t&&t>0&&(p.A.debug("Change stream resolution height from "+n+" to "+t),p.Cc(n,t),p.Mn=t)},this.mu=function(t){var n=p.M;n!==t&&t&&(p.A.debug("Change network connection type from "+n+" to "+t),p.mc(n,t),p.M=t)},this.Nu=function(t){var n=p.L;n!==t&&t&&(p.A.debug("Change network link encryption from "+n+" to "+t),p.Nc(n,t),p.L=t)},this.Pu=function(t){p.Mh=!0,p.ic();var n=p.Xe;n!==t&&w.wt(t)&&(p.A.debug("Change CDN Server IP from "+n+" to "+t),p.Oc(n,t),p.Xe=t)},this.wc=function(t){var n;p.A.debug("togglePauseJoin()"),p.Eh===t?p.A.debug("togglePauseJoin(): same value, ignoring"):(t=p.Eh,n=!p.Eh,p.Dc(t,n),p.Eh=!p.Eh)},this.Pc=function(t,n){p.bc(t,n)},this.Mc=function(t,n){var i;n[m.Jr]=t,n[m.Qr]=this.Lc(),n[m.Xr]=this.Vh.Vc(),this.ye&&(t=b.Uc(this.ye.getPHT(),0,null,-1),i=b.Uc(this.ye.getBufferLength(),0,null,-1),t>=0&&(n[m.hr]=t),i>0)&&(n[m.cr]=i),this.Vh.kc(n)},this.Fc=function(t){p.ye=t,p.ye?p.Bc():p.Hc()},this.nc=function(){var t=this.kh.oo(this.Kc(),this.Lc());this.Vh.kc(t)},this.bc=function(t,n){var i={};i[m.$r]=t,i[m.ta]=n,this.Mc(m.po,i)},this.Ec=function(t,n){var i={},e={};t>0&&(e[m.nr]=t),i[m.nr]=n,this.dc(i,e)},this.Gc=function(t,n){var i={};i[m.zr]=t,n>=0&&(i[m.Zr]=n),this.Mc(m.yo,i)},this.Ic=function(t,n){var i={},e={};-1!==t&&(e[m.Er]=t),i[m.Er]=n,this.dc(i,e)},this.Cc=function(t,n){var i={},e={};-1!==t&&(e[m.pr]=t),i[m.pr]=n,this.dc(i,e)},this.mc=function(t,n){var i={},e={};null!==t&&(e[m.Ar]=t),i[m.Ar]=n,this.dc(i,e)},this.Nc=function(t,n){var i={},e={};null!==t&&(e[m.gr]=t),i[m.gr]=n,this.dc(i,e)},this.Oc=function(t,n){var i={},e={};w.wt(t)&&(e[m.ha]=t),i[m.ha]=n,this.dc(i,e)},this.Ac=function(t,n){var i={},e={};t>=0&&(e[m.yr]=t),i[m.yr]=n,this.dc(i,e)},this.gc=function(t,n){var i={},e={};t>=0&&(e[m.Sr]=t),i[m.Sr]=n,this.dc(i,e)},this.Dc=function(t,n){var i={},e={};e[m.$o]=t,i[m.$o]=n,this.dc(i,e)},this.Rc=function(t,n){var i={},e={};i[m.tr]=m.ca(n),e[m.tr]=m.ca(t),this.dc(i,e)},this.dc=function(t,n){var i={};i[m.na]=t,n&&w.Ft(n)>0&&(i[m.ia]=n),this.Mc(m.Eo,i)},this.jc=function(t,n){var i={};i[m.ea]=t,w.Ft(n)>0&&(i[m.sa]=n),this.Mc(m.Ao,i)},this.ec=function(){p.Fu&&(p.Fu(),p.Fu=null)},this.rc=function(){p.ec();var t=1e3*p.Si.heartbeatInterval;p.Fu=p.te.create(p.sc,t,"Session.sendHeartbeat:"+this.jh)},this.Hc=function(){p.yh&&(p.yh(),p.yh=null)},this.Bc=function(){p.Hc(),p.yh=p.te.create(p.Wc,p.Sh,"Session.startRfpsTimer")},this.xc=function(){var t={err:"pending"};t.seq=p.Hu-1,t.sentAt=p.Lc(),t.rtt=-1,p.ju.push(t);for(var n=0;n<p.ju.length;n++)"ok"===(t=p.ju[n]).err&&(p.ju.splice(n,1),n--)},this.qc=function(t,n){for(var i=0;i<p.ju.length;i++){var e=p.ju[i];e.seq===t&&(e.rtt=p.Lc()-e.sentAt,e.err=n)}},this.Yc=function(t){for(var n=0;n<p.ju.length;n++){var i=p.ju[n];i.seq===t&&(i.rtt=p.Lc()-i.sentAt,i.err="ok")}},this.Jc=function(){for(var t,n,i=p.Bh.get(O.Xc),e=[],s=-1,o=0;o<p.ju.length;o++)if("ok"===(n=p.ju[o]).err){s=n.seq;break}for(var r=0;r<p.ju.length;r++)((t=(n=p.ju[r]).seq)<p.Hu-i||t<s)&&e.push(r);for(var a=[],u=0;u<p.ju.length;u++)t=(n=p.ju[u]).seq,e.indexOf(u)<0&&a.push(p.ju[u]);p.ju=a},this.Qc=function(){p.Jc();for(var t=[],n=0;n<p.ju.length;n++){var i=p.ju[n],e={};e[m.oa]=i.seq,e[m.aa]=i.rtt,e[m.ra]=i.err,t.push(e)}return t},this.zc=function(){var t,n=-1,i=-1,e=p.Vh.Hh();if(p.Xh()&&0===e.length)return null;var s=new z,o=(s.wa(m.bo),s.La(p.Si.customerKey),s.Va(p.Bh.get(O.F)),s.Xn(p.Gh.m),s.Ma(p.Hu),s.ka(m.version),y.version);if(p.Ri&&(o=p.Ri),s.Ua(o),s.Ba(p.$i.m),s.Fa(0),p.$i.M?s.mu(p.$i.M):p.M&&s.mu(p.M),p.$i.L?s.Nu(p.$i.L):p.L&&s.Nu(p.L),w.wt(p.Xe)&&s.Pu(p.Xe),s.su(m.vo),p.zu&&s.ou(p.zu),p.Zu&&s.ru(p.Zu),p.$u&&s.au(p.$u),p.th&&s.uu(p.th),p.nh&&s.hu(p.nh),p.ih&&s.cu(p.ih),p.eh&&s.fu(p.eh),p.rh&&s.vu(p.rh),p.ah&&s.Eu(p.ah),p.uh&&s.pu(p.uh),p.sh&&s.lu(p.sh),p.oh&&s.du(p.oh),p.hh&&!isNaN(p.hh)&&s.Au(parseInt(p.hh,10)),p.fh&&!isNaN(p.fh)&&s.gu(parseInt(p.fh,10)),p.lh&&!isNaN(p.lh)?s.yu(parseFloat(p.lh)):(p.hh&&!isNaN(p.hh)||p.fh&&!isNaN(p.fh))&&s.yu(1),p.ye&&(p.Dn=p.ye.jn(),p.Dn&&s.setModuleName(p.Dn),p.Pn=p.ye.Wn(),p.Pn&&s.Du(p.Pn),p.ye.xn()&&(p.sh=p.ye.xn(),s.lu(p.sh)),p.ye.Yn())&&(p.oh=p.ye.Yn(),s.du(p.oh)),p.pn&&s.Ha(p.pn),w.Ft(p.Qu)>0&&s.ja(p.Qu),p.Wh()||p.xh()){p.xh()&&s.Ou(),p.dn&&s.Ka(p.dn),s.Wa(p.Ku);o=m.ca(p.Cn),o=(s.be(o),s.Qa(p.Eh),p.Ju&&s.Ga(p.Ju),w.Hi(p.Xu)&&s.ba(p.Xu),p.Yu>0&&s.za(p.Yu),p.Tn>0&&s.Za(p.Tn),null!==p.qu&&s.$a(p.qu),p._n>0&&s.tu(p._n),p.ye&&(n=b.Uc(p.ye.getPHT(),0,null,-1),i=b.Uc(p.ye.getBufferLength(),0,null,-1)),w._t(p.$i.V)?t=p.$i.V:p.ye&&(t=p.ye.getSignalStrength()),n>=0&&s.Ru(n),i>0&&s._u(i),p.Zc());if(o>0&&s.nu(o),p._h>0&&s.eu(b.Uc(p._h,0,null,-1)),p.Rh>0&&s.iu(b.Uc(p.Rh,0,null,-1)),t!==S.DEFAULT_SIGNAL_STRENGTH&&s.wu(t),p.gn&&s.Iu(p.gn),p.bn>0&&s.Tu(p.bn),p.Mn>0&&s.Cu(p.Mn),p.ui>-1&&s.Su(p.ui),p.xu>-1&&(s.ds(p.xu),p.xu>0)&&(p.gc(p.xu,0),p.xu=0),"undefined"!==typeof p.dh)for(var r in p.dh)s.Na(r,p.dh[r])}else s.Wa(m.Aa.ga);return e.length>0&&s.qa(e),s.xa(p.Gu),s.Ya(!0),p.Bh.get(O.$c)&&s.Ja(p._i.Hh()),p.Bh.get(O.Xc)>0&&(n=p.Qc()).length>0&&s.Xa(n),0===p.Hu&&(s=p.tf(s)),(s=0!==p.Hu?p.nf(s):s).Pa(p.Bu),s.Da(p.Lc()),p.bh&&(s.bu(p.Ch),s.Mu(p.mh),s.Lu(p.Nh),s.Vu(p.Oh),s.Uu(p.wh)),p.Hu++,s.get()},this.nf=function(t){var n,i=p.O,e={};for(n in t.ma.tags)Object.prototype.hasOwnProperty.call(i,n)||(e[n]=t.ma.tags[n]);t.ma.tags=e,p.O={};for(var s=0;s<p.Ih.length;s++)Object.prototype.hasOwnProperty.call(p.$i.O,p.Ih[s])?Object.prototype.hasOwnProperty.call(p.$i.P,p.Ih[s])?p.$i.P[p.Ih[s]]===O.zt.Zt?(p.O[O.if+""+p.Ih[s]]=O.zt.Zt,p.$i.D("End-user chose to opt-out of personal data collection")):p.$i.P[p.Ih[s]]===O.zt.tn?(p.O[O.if+""+p.Ih[s]]=O.zt.tn,p.$i.D("End-user chose to opt-out of personal data collection")):p.$i.P[p.Ih[s]]===O.zt.Qt?(p.O[O.if+""+p.Ih[s]]=O.zt.Qt,p.$i.D("End-user used privacy settings and chose to opt-out of personal data collection")):(p.O[O.if+""+p.Ih[s]]=p.$i.O[p.Ih[s]],p.$i.D("Data collection successful")):(p.O[O.if+""+p.Ih[s]]=p.$i.O[p.Ih[s]],p.$i.D("Data collection successful")):p.O[O.if+""+p.Ih[s]]=O.zt.ef;var o,r={};for(o in i){var a=o.split(".");"{}"!==JSON.stringify(p.Ih)&&-1!==p.Ih.indexOf(""+a[2])||i[O.if+""+a[2]]===O.zt.sf||(p.$i.D("Data collection restricted from Conviva back-end"),p.O[O.if+""+a[2]]=O.zt.sf,r[O.if+""+a[2]]=O.zt.sf)}if("{}"!==JSON.stringify(p.O)){var u,h=w.rf(p.O);for(u in t.ma.tags)h[u]=t.ma.tags[u];if(t.ma.tags=h,!w.yc(i,p.O)){var c={};if("{}"!==JSON.stringify(r)&&(c[m.Yo]=r),"{}"!==JSON.stringify(i)){for(var f in i)p.O[f]&&i[f]!==p.O[f]&&(c[m.Yo]||(c[m.Yo]={}),c[m.Yo][f]=p.O[f]);for(var l in p.O)Object.prototype.hasOwnProperty.call(i,l)&&i[l]===p.O[l]||(c[m.Yo]||(c[m.Yo]={}),c[m.Yo][l]=p.O[l])}"{}"===JSON.stringify(i)&&(c[m.Yo]=p.O);var d,v,E={};E[m.na]=c,E[m.Jr]=m.Eo,E[m.Qr]=p.Lc(),E[m.Xr]=p.Vh.Vc(),p.ye&&(d=b.Uc(p.ye.getPHT(),0,null,-1),v=b.Uc(p.ye.getBufferLength(),0,null,-1),d>=0&&(E[m.hr]=d),v>0)&&(E[m.cr]=v),t.ma.evs||(t.ma.evs=[]),t.ma.evs.push(E)}}return t},this.tf=function(t){var n=p.af();if("{}"!==JSON.stringify(n)){var i,e=w.rf(n);for(i in t.ma.tags)e[i]=t.ma.tags[i];t.ma.tags=e;var s,o={},n=(o[m.Yo]=n,{});n[m.na]=o,n[m.Jr]=m.Eo,n[m.Qr]=p.Lc(),n[m.Xr]=p.Vh.Vc(),p.ye&&(o=b.Uc(p.ye.getPHT(),0,null,-1),s=b.Uc(p.ye.getBufferLength(),0,null,-1),o>=0&&(n[m.hr]=o),s>0)&&(n[m.cr]=s),t.ma.evs||(t.ma.evs=[]),t.ma.evs.push(n)}return t},this.af=function(){var t={};if("undefined"!==typeof navigator&&navigator){if(t["c3.fp.cookie"]="undefined"!==typeof navigator.cookieEnabled&&navigator.cookieEnabled?""+navigator.cookieEnabled:"",t["c3.fp.memory"]="undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?""+navigator.deviceMemory:"",t["c3.fp.hwConc"]="undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",t["c3.fp.java"]=""+("function"!==typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),t["c3.fp.lang"]="undefined"!==typeof navigator.language&&navigator.language?""+navigator.language:"",t["c3.fp.langs"]="undefined"!==typeof navigator.languages&&navigator.languages&&navigator.languages.length>0?""+navigator.languages.toString():"",t["c3.fp.maxTp"]="undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",t["c3.fp.plugins"]="","undefined"!==typeof navigator.plugins&&navigator.plugins&&navigator.plugins.length>0)for(var n=0;n<navigator.plugins.length;n++)t["c3.fp.plugins"]+=navigator.plugins[n].name+",";if(t["c3.fp.mime"]="","undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var i=0;i<navigator.mimeTypes.length;i++)t["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";t["c3.fp.sysLang"]="undefined"!==typeof navigator.systemLanguage&&navigator.systemLanguage?""+navigator.systemLanguage:"",t["c3.fp.platform"]="undefined"!==typeof navigator.platform&&navigator.platform?""+navigator.platform:"",t["c3.fp.product"]="undefined"!==typeof navigator.product&&navigator.product?""+navigator.product:"",t["c3.fp.productSub"]="undefined"!==typeof navigator.productSub&&navigator.productSub?""+navigator.productSub:"",t["c3.fp.vendor"]="undefined"!==typeof navigator.vendor&&navigator.vendor?""+navigator.vendor:"",t["c3.fp.vendorSub"]="undefined"!==typeof navigator.vendorSub&&navigator.vendorSub?""+navigator.vendorSub:"";var e=p.uf();""!==e&&(t["c3.fp.canvFp"]=e)}return"undefined"!==typeof window&&window&&("undefined"!==typeof window.screen&&window.screen&&(t["c3.fp.availHeight"]="undefined"!==typeof window.screen.availHeight&&window.screen.availHeight?""+window.screen.availHeight:"",t["c3.fp.availWidth"]="undefined"!==typeof window.screen.availWidth&&window.screen.availWidth?""+window.screen.availWidth:"",t["c3.fp.height"]="undefined"!==typeof window.screen.height&&window.screen.height?""+window.screen.height:"",t["c3.fp.width"]="undefined"!==typeof window.screen.width&&window.screen.width?""+window.screen.width:"",t["c3.fp.colorDepth"]="undefined"!==typeof window.screen.colorDepth&&window.screen.colorDepth?""+window.screen.colorDepth:"",t["c3.fp.deviceXDPI"]="undefined"!==typeof window.screen.deviceXDPI&&window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",t["c3.fp.deviceYDPI"]="undefined"!==typeof window.screen.deviceYDPI&&window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),t["c3.fp.dpi"]="undefined"!==typeof window.devicePixelRatio&&window.devicePixelRatio?""+window.devicePixelRatio:"",t["c3.fp.secure"]="boolean"===typeof window.isSecureContext?""+window.isSecureContext:""),t},this.uf=function(){try{if("undefined"!==typeof document&&document){var t,n,i=document.createElement("CANVAS");if("undefined"!==typeof i&&i&&"function"===typeof i.getContext)return t=i.getContext("2d"),n="conviva",t.textBaseline="top",t.font="14px Arial",t.textBaseline="alphabetic",t.fillStyle="#f40",t.fillRect("undefined"!==typeof navigator.plugins&&navigator.plugins?navigator.plugins.length:0,"undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes?navigator.mimeTypes.length:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0,"undefined"!==typeof navigator.vendor&&navigator.vendor?navigator.vendor.length:0),t.fillStyle="#069",t.fillText(n,"undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>=0?navigator.maxTouchPoints:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,"undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?navigator.deviceMemory:0,"undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),C.eo(i.toDataURL())}return""}catch(t){return""}},this.sc=function(){var t;p.Ah||(t=p.zc())&&p.hf(t)},this.Wc=function(){var t;p.Cn===S.PlayerState.PLAYING&&p.ye&&(t=p.ye.getRenderedFrameRate())>0&&(p._h+=t,p.Rh++)},this.Zc=function(){return p._h>0&&p.Rh>0||(this.Wc(),p._h>0&&p.Rh>0)?w.cf.Cast(+p._h/p.Rh):S.DEFAULT_RENDERED_FRAME_RATE},this.hf=function(t){p.xc();var i=p.Hu-1;p.A.info("postHeartbeat(): Send HB["+i+"]"+p.qh());p.Uh.ff(t,function(t,n){p.lf(t,n,i)})},this.lf=function(i,e,s){p.Ah||p.T.k("onHeartbeatResponse",function(){var t,n;i?e?(p.A.debug("onHeartbeatResponse(): received valid response for HB["+s+"]"),p.Yc(s),(t=e[m.Io])&&t!==(n=p.Bh.get(O.F))&&(p.A.debug("onHeartbeatResponse(): setting the client id to "+t+" (from gateway)"),p.Bh.set(O.F,t),p.Bh.df(),n===m.B)&&t!==m.B&&p.$i.U(),(n=e[m._o])&&n!==m.Ro&&p.A.error("onHeartbeatResponse(): error from gateway: "+n),"object"===typeof(t=e[m.To])&&((n=t[m.mo])>=0&&p.Bh.get(O.Xc)!==n&&(p.A.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+n+" (from gateway)"),p.Bh.set(O.Xc,n)),n=t[m.No],(n=!!w.Hi(n)&&n)!==p.Bh.get(O.$c)&&(p.A.debug("onHeartbeatResponse(): turning "+(n?"on":"off")+" sending of logs"),p.Bh.set(O.$c,n)),n=t[m.Oo],w._t(n)&&(n=w.cf.Cast(n))!==p.Si.heartbeatInterval&&(p.A.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+n),p.Si.heartbeatInterval=n,p.Fu)&&p.rc(),(n=t[m.wo])&&n!==p.Si.gatewayUrl&&(p.A.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),p.Si.gatewayUrl=n),p.vf()||(p.Ih={},(n=t[m.Do])&&(p.Th||(p.Th=!0),p.A.debug("onHeartbeatResponse(): received fp from gateway: "+n),p.Ih=n.split(",")),p.bh=t[m.Po],w.Hi(p.bh)&&(p.bh?(p.A.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),p.Dh||p.hc()):(p.A.debug("onHeartbeatResponse(): disabling the CDN Server IP collection (from gateway)"),p.ic()))))):p.A.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(w.wt(n=e)?w.Ef(n,"HTTP timeout")?p.A.warning("onHeartbeatResponse(): "+n):p.A.error("onHeartbeatResponse(): failed to send heartbeat: "+n):(n=Z.pf,p.A.error("onHeartbeatResponse(): "+n)),p.qc(s,n))})},this.Lc=function(){return w.cf.Cast(p.Fh.current()-p.Bu)},this.Kc=function(){return this.Vh.Vc()},this.qh=function(){return this.Xh()?" (global session)":""},this.Xh=function(){return this.jh===N.Rt.ga},this.vf=function(){return this.jh===N.Rt.ga&&"T"===this.Qu["c3.IPV4IPV6GlobalSession"]},this.Wh=function(){return this.jh===N.Rt.St},this.xh=function(){return this.jh===N.Rt.Ot},this.Pt=function(t){p.Af(t),p.Qh()},this.Af=function(t){var n={},i={};if(w.wt(t.assetName)&&(p.Ct.assetName!==t.assetName?(p.Ct.assetName&&(n[m.xo]=p.Ct.assetName),i[m.xo]=t.assetName,p.Ct.assetName=t.assetName):p.A.warning("mergeContentMetadata(): assetName was not changed.")),w.wt(t.applicationName)&&(p.Ct.applicationName!==t.applicationName?(p.Ct.applicationName&&(n[m.qo]=p.Ct.applicationName),i[m.qo]=t.applicationName,p.Ct.applicationName=t.applicationName):p.A.warning("mergeContentMetadata(): applicationName was not changed.")),w.wt(t.streamUrl)&&(p.Ct.streamUrl!==t.streamUrl?(p.Ct.streamUrl&&(n[m.lr]=p.Ct.streamUrl),i[m.lr]=t.streamUrl,p.Ct.streamUrl=t.streamUrl,p.gn=p.Ct.streamUrl):p.A.warning("mergeContentMetadata(): streamUrl was not changed.")),w.wt(t.viewerId)&&(p.Ct.viewerId!==t.viewerId?(p.Ct.viewerId&&(n[m.Wo]=p.Ct.viewerId),i[m.Wo]=t.viewerId,p.Ct.viewerId=t.viewerId):p.A.warning("mergeContentMetadata(): viewerId was not changed.")),w.wt(t.defaultResource)&&(p.Ct.defaultResource!==t.defaultResource?(p.Ct.defaultResource&&(n[m.ur]=p.Ct.defaultResource),i[m.ur]=t.defaultResource,p.Ct.defaultResource=t.defaultResource):p.A.warning("mergeContentMetadata(): defaultResource was not changed.")),w._t(t.duration)&&t.duration>0&&(p.Ct.duration!==t.duration?(p.Yu>0&&(n[m.ir]=p.Yu),i[m.ir]=t.duration,p.Ct.duration=t.duration,p.Yu=p.Ct.duration):p.A.warning("mergeContentMetadata(): duration was not changed.")),w._t(t.encodedFrameRate)&&t.encodedFrameRate>0&&(p.Ct.encodedFrameRate!==t.encodedFrameRate?(p.Ct.encodedFrameRate>-1&&(n[m.er]=p.Ct.encodedFrameRate),i[m.er]=t.encodedFrameRate,p.Ct.encodedFrameRate=t.encodedFrameRate,p._n=p.Ct.encodedFrameRate):p.A.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!==f.StreamType.UNKNOWN&&(p.Ct.streamType!==t.streamType?(p.Ct.streamType!==f.StreamType.UNKNOWN&&(p.Ct.streamType===f.StreamType.LIVE?n[m.Uo]=!0:n[m.Uo]=!1),t.streamType===f.StreamType.LIVE?i[m.Uo]=!0:i[m.Uo]=!1,p.Ct.streamType=t.streamType):p.A.warning("mergeContentMetadata(): streamType was not changed.")),w.Ft(t.custom)>0){var e,s={},o={};for(e in t.custom)p.Ct.custom[e]!==t.custom[e]?(s[e]=t.custom[e],p.Ct.custom[e]&&(o[e]=p.Ct.custom[e]),p.Ct.custom[e]=t.custom[e]):p.A.info("mergeContentMetadata(): custom."+e+" was not changed.");w.Ft(s)>0?(w.Ft(o)>0&&(n[m.Yo]=o),i[m.Yo]=s):p.A.warning("mergeContentMetadata(): custom was not changed.")}w.Ft(i)>0&&this.dc(i,n)},this.Qh=function(){var t;p.A.debug("setStatesFromContentMetadata()"),p.Ct.defaultResource&&this.$a(p.Ct.defaultResource),p.Ct.streamUrl&&this.Iu(p.Ct.streamUrl),p.Ct.duration>0&&this.za(p.Ct.duration),p.Ct.encodedFrameRate>0&&this.tu(p.Ct.encodedFrameRate),p.Ct.streamType!==f.StreamType.UNKNOWN&&(t=p.Ct.streamType===f.StreamType.LIVE,this.ba(t)),p.Ct.assetName&&this.Ka(p.Ct.assetName),p.Ct.viewerId&&this.Ha(p.Ct.viewerId),(p.Ct.applicationName||p.Ct.playerName)&&this.Ga(p.Ct.applicationName||p.Ct.playerName),w.Ft(p.Ct.custom)>0&&this.ja(p.Ct.custom)},this.zh=function(){var t={};if(this.Xh()||(p.Ct.assetName?t[m.xo]=p.Ct.assetName:p.A.warning("enqueueEventForContentMetadata(): assetName was not set."),p.Ct.applicationName?t[m.qo]=p.Ct.applicationName:p.A.warning("enqueueEventForContentMetadata(): applicationName was not set."),p.Ct.streamUrl?t[m.lr]=p.Ct.streamUrl:p.A.warning("enqueueEventForContentMetadata(): streamUrl was not set."),p.Ct.viewerId?t[m.Wo]=p.Ct.viewerId:p.A.warning("enqueueEventForContentMetadata(): viewerId was not set."),p.Ct.defaultResource?t[m.ur]=p.Ct.defaultResource:p.A.warning("enqueueEventForContentMetadata(): defaultResource was not set."),p.Ct.duration>-1?t[m.ir]=p.Ct.duration:p.A.warning("enqueueEventForContentMetadata(): duration was not set."),p.Ct.encodedFrameRate>-1?t[m.er]=p.Ct.encodedFrameRate:p.A.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),p.Ct.streamType!==f.StreamType.UNKNOWN?p.Ct.streamType===f.StreamType.LIVE?t[m.Uo]=!0:t[m.Uo]=!1:p.A.warning("enqueueEventForContentMetadata(): streamType was not set.")),w.Ft(p.Ct.custom)>0)for(var n in t[m.Yo]={},p.Ct.custom)t[m.Yo][n]=p.Ct.custom[n];else this.Xh()||p.A.warning("enqueueEventForContentMetadata(): custom tags were not set.");w.Ft(t)>0&&this.dc(t,null)},this.$h=function(){p.Ct&&w.wt(p.Ct.assetName)||p.A.warning("Missing assetName during session creation"),p.Ct&&w.wt(p.Ct.defaultResource)||p.A.warning("Missing resource during session creation"),p.Ct&&w.wt(p.Ct.streamUrl)||p.A.warning("Missing streamUrl during session creation"),(!p.Ct||p.Ct.encodedFrameRate<=0)&&p.A.warning("Missing encodedFrameRate during session creation"),p.Ct&&w.wt(p.Ct.viewerId)||p.A.warning("Missing viewerId during session creation"),p.Ct&&p.Ct.streamType&&f.StreamType.UNKNOWN!==p.Ct.streamType||p.A.warning("Missing streamType during session creation"),p.Ct&&w.wt(p.Ct.applicationName)||p.A.warning("Missing applicationName during session creation"),(!p.Ct||p.Ct.duration<=0)&&p.A.warning("Missing duration during session creation")},this.Xt=function(t,n){p.dh||(p.dh={}),p.dh[t]=n},this.Zh=function(){var t={};p.$i.M&&(t[m.Ar]=p.$i.M,p.M=p.$i.M),p.$i.L&&(t[m.gr]=p.$i.L,p.L=p.$i.L),w.Ft(t)>0&&this.dc(t,null)}}).ku=m.Aa.St+m.Aa.ya+m.Aa.Sa,N.Rt={St:"Video",ga:"Global",Ot:"Ad"},(Z=V.Session=function(){var e=this;e.ye=null,e.m=0,e.jh=N.Rt.St,e.gf=!1,e.Ah=!1,e.yf=!1,e.Sf=null,e.ne=null,e.Rf=null,e._f=!1,e.If=S.PlayerState.NOT_MONITORED,e.Tf=!1,e.Cf=!1,e.mf=!1,e.Nf=!1,e.Of=!1,function(t,n,i,e,s,o,r){this.m=t,this.jh=n,this.Bh=i,this.wf=e,this.Tt=s,this.T=o,this.A=r,this.A.setModuleName("Session"),this.A.Xn(w.Nt(this.m))}.apply(e,arguments),this.Kh=function(t,n){e.Tt.Kh(this),t&&e.Lt(t),e.Bh.Df()?e.Pf(n):e.Bh.bf(function(){e.Pf(n)})},this.cleanup=function(){e.A.info("cleanup()"+e.qh()),e.gf=!0,e.Tt.Yh(),e.Bh.Df()?e.Mf():e.Bh.bf(function(){e.Mf()})},this.Lf=function(){e.A.debug("cleanupAll()"+e.qh()),(e.Wh()||e.xh())&&e.ye&&e.Vf(),e.A.Xn(null),e.A=null,e.T=null,e.$i=null,e.Bh=null,e.wf=null,e.Tt.gt(),e.Tt=null,e.Ah=!0},this.Mf=function(){e.Tt.tc(),e.Lf()},this.Pf=function(t){e.Tt.Jh(),e.Uf(),t?(e.Dt(t.js(),t.Ws()),e.Tt.be(S.PlayerState.STOPPED),e.Tt.tc(),e.Lf()):e.Tt.oc()},this.Uf=function(){e.A.debug("setStatesFromSystemMetadata()");var t=e.wf.get(),n=t[L.BROWSER_NAME],n=(n&&e.Tt.ou(n),t[L.BROWSER_VERSION]),n=(n&&e.Tt.ru(n),t[L.DEVICE_BRAND]),n=(n&&e.Tt.au(n),t[L.DEVICE_MANUFACTURER]),n=(n&&e.Tt.uu(n),t[L.DEVICE_MODEL]),n=(n&&e.Tt.hu(n),t[L.DEVICE_TYPE]),n=(n&&e.Tt.cu(n),t[L.DEVICE_VERSION]),n=(n&&e.Tt.fu(n),t[L.FRAMEWORK_NAME]),n=(n&&e.Tt.lu(n),t[L.FRAMEWORK_VERSION]),n=(n&&e.Tt.du(n),t[L.OPERATING_SYSTEM_NAME]),n=(n&&e.Tt.vu(n),t[L.OPERATING_SYSTEM_VERSION]),n=(n&&e.Tt.Eu(n),t[L.DEVICE_CATEGORY]),n=(n&&e.Tt.pu(n),t[L.SCREEN_WIDTH]),n=(n&&e.Tt.Au(n),t[L.SCREEN_HEIGHT]),n=(n&&e.Tt.gu(n),t[L.SCALE_FACTOR]);n&&e.Tt.yu(n)},this.ti=function(t){e.A.debug("onPlayerStateChange(): "+t),e.Tt.Cn!==t&&(e.Tt.Cn===S.PlayerState.NOT_MONITORED&&t!==S.PlayerState.NOT_MONITORED&&(e.If=t),e._f?e.A.debug("onPlayerStateChange(): "+t+" (pooled, "+(e.yf?"ad playing":"preloading")+")"):e.Tt.be(t))},this.ni=function(t){e.A.debug("onBitrateChange(): "+t),e.Tf?e.A.info("onBitrateChange(): ignored"):e.Tt.vc(t)},this.hi=function(t){e.A.debug("onDroppedFramesTotalChange(): "+t),e.Cf?e.A.info("onDroppedFramesTotalChange(): ignored"):e.Tt.Su(t)},this.ci=function(t){e.A.debug("onDroppedFramesCountChange(): "+t),e.Cf?e.A.info("onDroppedFramesCountChange(): ignored"):e.Tt.ds(t)},this.ii=function(t,n){w._t(n)||(e.A.warning("onSeekEvent(): Ignored non-integer seekToPosition data: "+n),n=-1),e.Tt.Gc(t,n)},this.Fn=function(t){e.A.debug("onEncodedFrameRateChange(): "+t),t>0?e.Nf?e.A.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+t+" (ads)"):(e.Tt.tu(t),e.A.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+t)):e.A.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+t)},this.Kn=function(t){e.A.debug("onContentLengthChange(): "+t),t>0?e.Nf?e.A.info("setContentLength(): Ignored content length data: "+t+" (ads)"):(e.Tt.za(t),e.A.info("setContentLength(): Received content length data: "+t)):e.A.warning("setContentLength(): Ignored invalid content length data: "+t)},this.Gn=function(t){e.A.debug("onStreamUrlChange(): "+t),e.Tt.Iu(t)},this.ei=function(t){e.A.debug("onStreamResolutionWidthChange(): "+t),e.Tt._c(t)},this.si=function(t){e.A.debug("onStreamResolutionHeightChange(): "+t),e.Tt.Tc(t)},this.tt=function(t){e.A.debug("onConnectionTypeChange(): "+t),e.Tt.mu(t)},this.it=function(t){e.A.debug("onLinkEncryptionChange(): "+t),e.Tt.Nu(t)},this.qn=function(t){e.A.debug("onPlayerTypeChange(): "+t),e.Tt.ac()||e.Tt.lu(t)},this.Jn=function(t){e.A.debug("onPlayerVersionChange(): "+t),e.Tt.uc()||e.Tt.du(t)},this.ri=function(t){e.A.debug("onCDNServerIPChange(): "+t),e.Tt.Pu(t)},this.oi=function(t,n){e.A.debug("onError(): "+t+" ("+n+")"),e.Dt(t,n)},this.Un=function(){e.A.debug("onRelease()"),e.Vf()},this.Gt=function(t,n,i){e.A.debug("adStart(): adStream="+t+" adPlayer="+n+" adPosition="+i),e.yf?e.A.warning("adStart(): multiple _adStart calls, ignoring"):(e.yf=!0,e.Sf=t,e.ne=n,e.Rf=i,e.Tt.wc(!0),e.Sf===h.AdStream.CONTENT||e.ne===h.AdPlayer.SEPARATE?(e.Tt.Cn!==S.PlayerState.NOT_MONITORED&&(e.If=e.Tt.Cn),e.Tt.be(S.PlayerState.NOT_MONITORED),e._f=!0):e.Sf===h.AdStream.SEPARATE&&e.ne===h.AdPlayer.CONTENT&&(e.Tt.Cn!==S.PlayerState.NOT_MONITORED&&(e.If=e.Tt.Cn),e.Tt.be(S.PlayerState.NOT_MONITORED),e._f=!0,e.Tf=!0,e.Cf=!0,e.Nf=!0,e.mf=!0))},this.jt=function(){e.A.debug("adEnd()"),e.yf?(e.Tt.wc(!1),e.Sf===h.AdStream.CONTENT||e.ne===h.AdPlayer.SEPARATE?e.kf||(e._f=!1,e.Tt.be(e.If)):e.Sf===h.AdStream.SEPARATE&&e.ne===h.AdPlayer.CONTENT&&(e.Tf=!1,e.Cf=!1,e.Nf=!1,e.mf=!1,e.Of=!1,e.kf||(e._f=!1,e.Tt.be(e.If))),e.yf=!1,e.Sf=e.ne=e.Rf=null):e.A.warning("adEnd(): called before _adStart, ignoring")},this.bt=function(){e.A.debug("detachPlayer()"),e.ye?e.ye&&(e.T.k("Session.detachPlayer",function(){e.ye.kn()}),e.ye=null,e.Tt.Fc(null),e.Tt.be(S.PlayerState.NOT_MONITORED)):e.A.error("detachPlayer(): called before attachPlayer, ignoring")},this.Vf=function(){e.ye&&(e.T.k("Session.releasePlayerStateManager",function(){e.ye.kn()}),e.ye=null,e.Tt.Fc(null),e.Tt.be(S.PlayerState.NOT_MONITORED))},this.Mt=function(){e.A.debug("offFocus()"),e.Tt.wc(!0),e.Tt.Cn!==S.PlayerState.NOT_MONITORED&&(e.If=e.Tt.Cn),e.Tt.be(S.PlayerState.NOT_MONITORED),e._f=!0},this.Lt=function(t){e.A.debug("attachPlayer()"),e.ye?e.A.error("attachPlayer(): detach current PlayerStateManager first"):t instanceof S?e.T.k("Session.attachPlayer()",function(){t.setMonitoringNotifier(e,e.m)?(t.Qn(),e.ye=t,e.Tt.Fc(e.ye)):e.A.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")}):e.A.error("attachPlayer(): Incorrect PlayerStateManager instance")},this.Vt=function(){e.A.debug("onFocus()"),e.Tt.wc(!1),e.Tf=!1,e.Cf=!1,e.Nf=!1,e.mf=!1,e.Of=!1,e.kf||(e._f=!1,e.If!==S.PlayerState.NOT_MONITORED&&e.Tt.be(e.If))},this.xt=function(){return e.A.debug("getPlayerStateManager()"),e.ye},this.Ut=function(){e.A.debug("contentPreload()"),e.kf?e.A.debug("contentPreload(): called twice, ignoring"):(e.kf=!0,e._f=!0)},this.kt=function(){e.A.debug("contentStart()"),e.kf?(e.kf=!1,e.yf||(e._f=!1,e.If!==S.PlayerState.NOT_MONITORED&&e.Tt.be(e.If))):e.A.warning("contentStart(): called without _contentPreload, ignoring")},this.Dt=function(t,n){e.A.info("reportError(): "+t),w.wt(t)?n!==h.ErrorSeverity.FATAL&&n!==h.ErrorSeverity.WARNING?e.A.error("reportError(): invalid error severity: "+n):e.Of?e.A.debug("reportError(): ignored"):(n=n===h.ErrorSeverity.FATAL,e.Tt.Pc(t,n)):e.A.error("reportError(): invalid error message string: "+t)},this.Pt=function(t){e.T.k("Session.updateContentMetadata",function(){e.Tt.Pt(t)})},this.Kt=function(t,n){e.A.info("sendEvent(): eventName="+t+e.qh()),e.Tt.jc(t,n)},this.Xh=function(){return e.jh===N.Rt.ga},this.Wh=function(){return e.jh===N.Rt.St},this.xh=function(){return e.jh===N.Rt.Ot},this.qh=function(){return e.Xh()?" (global session)":""},this.Yt=function(){return this.m},this.Jt=function(){var t=null;return t=e.Bh.Df()?e.Bh.get(O.F):t},this.Xt=function(t,n){e.Tt.Xt(t,n)}}).pf="received no response (or a bad response) to heartbeat POST request",$=V.SessionFactory=function(){var o=this;o.A=null,o._i=null,o.Ff=0,o.Bf=null,function(t,n,i,e){o.$i=t,o.Si=n,o.Bh=i,o.S=e,o.A=o.S.buildLogger(),o.A.setModuleName("SessionFactory"),o.Ff=0,o.Bf={}}.apply(o,arguments),this.gt=function(){for(var t in o.A=null,o._i=null,o.Bf)o.Bf[t].cleanup();o.Bf=null,o.Ff=0},this.Hf=function(){var t=o.Ff;return o.Ff++,t},this.yt=function(t,n,i,e,s){return t||(t=new f),o.Kf(t,n,i,e,s)},this.W=function(t){return o.Kf(t,N.Rt.ga,void 0,y.version)},this.Gf=function(){return P.jf()},this.Kf=function(t,n,i,e,s){n=o.S.Vi(o.$i,o.Si,o.Bh,o.Gf(),n,t.ht(),e),t=o.Hf();return"undefined"!==typeof s&&"undefined"!==typeof s.error?n.Kh(i,s.error):(o.Wf(t,n),n.Kh(i)),t},this.Ht=function(t){t=o.Bf[t];return t||o.A.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t},this.It=function(t){t=this.Ht(t);return!t||t.Wh()||t.xh()||(o.A.error("Client: invalid Video sessionKey. Did you cleanup that session previously?"),t=null),t},this.Wf=function(t,n){o.Bf[t]=n},this.xf=function(t){delete o.Bf[t]},this.Wt=function(t){var n=o.Ht(t);o.xf(t),n.cleanup()},this.$=function(){return o.Bf}},tt=V.qf=function(t){this.te=t,this.Yf=function(i,t,n){var e=!1;this.te.createOnce(function(){e||i(!(e=!0),n+" ("+t+" ms)")},t,"CallbackWithTimeout.wrap");return function(t,n){e||(e=!0,i(t,n))}}},(O=V.Config=function(t,n,i){var e=this;this.A=t,this.A.setModuleName("Config"),this.Xf=n,this.Qf=i,this.zf={clientId:m.B,iid:m.uo,sendLogs:!1,maxHbInfos:m.co},this.C=w.rf(this.zf),this.Zf=!1,this.$f=!1,this.tl=[],this.Df=function(){return this.Zf},this.dt=function(){this.Xf.dt(O.Jf,function(t,n){t?(e.nl(n),e.A.debug("load): configuration successfully loaded from local storage"+(e.$f?" (was empty)":"")+".")):e.A.error("load): error loading configuration from local storage: "+n),e.Zf=!0,e.il()})},this.nl=function(t){var n,t=this.Qf.Ta(t);t?t&&(n=t[O.el],t=t[O.vt],n&&n!==m.B&&""!==n&&"null"!==n&&(this.C[O.F]=n,this.A.debug("parse(): loaded clientId="+n+" (from local storage)")),t!==m.uo)&&""!==t&&"null"!==t&&(this.C[O.vt]=t,this.A.debug("parse(): loaded iid="+t+" (from local storage)")):this.$f=!0},this.sl=function(){var t={};return t[O.el]=this.C.clientId,this.A.debug("marshall(): saving clientId="+this.C.clientId+" (to local storage)"),this.Qf.Ia(t)},this.df=function(){this.Xf.df(O.Jf,this.sl(),function(t,n){t?e.A.debug("save(): configuration successfully saved to local storage."):e.A.error("save(): error saving configuration to local storage: "+n)})},this.bf=function(t){this.Df()?t():this.tl.push(t)},this.get=function(t){return this.Zf?this.C[t]:null},this.set=function(t,n){this.Zf&&(this.C[t]=n)},this.il=function(){for(var t;"undefined"!==typeof(t=this.tl.shift());)t()}}).Jf="sdkConfig",O.el="clId",O.vt="iid",O.F="clientId",O.$c="sendLogs",O.Xc="maxHbInfos",O.if="c3.fp.",O.zt={ef:"0",ol:"1",Zt:"2",Qt:"3",sf:"4",tn:"5",$t:"6"},nt=V.EventQueue=function(){this.rl=[],this.al=0,this.kc=function(t){this.rl.push(t)},this.Vc=function(){var t=this.al;return this.al++,t},this.Hh=function(){var t=this.rl;return this.rl=[],t}},it=V.ExceptionCatcher=function(t,n,i){this.A=t,this.A.setModuleName("ExceptionCatcher"),this.ul=n,this.I=i,this.k=function(n,t,i){try{t()}catch(t){if(i)i(t);else{if(this.I.allowUncaughtExceptions)throw t;this.hl(n,t)}}},this.hl=function(t,n){t="Uncaught exception: "+t+": "+n.toString();if(this.ul)try{this.ul.ff(t)}catch(t){this.A.error("Caught exception while sending ping: "+t.toString())}this.A.error(t)}},et=V.GatewayControl=function(t,n,i,e,s){var o=this;this.Si=t,this.A=n,this.A.setModuleName("GatewayControl"),this.cl=i,this.Qf=e,this.fl=s,this.ff=function(t,e){var n=(this.fl?this.fl.indexOf("ipv4")>-1?this.Si.H:this.Si.q:this.Si.gatewayUrl)+m.ao;this.cl.ll("POST",n,this.Qf.Ia(t),"application/json",function(t,n){var i;t?(i=o.Qf.Ta(n),e(t,i)):e(t,n)})}},w=V.Lang={dl:function(t){return w.wt(t)&&t&&"undefined"!==t&&"null"!==t},Bt:function(t){var n,i,e={};for(n in t)w.dl(n)&&(i=t[n],w.dl(i))&&(e[n]=i);return e},Bn:function(t,n,i){if(!t)throw new Error("Expected "+i+" implementation is null.");for(var e in n)if("function"!==typeof t[e])throw new Error("Expected method "+e+" in "+i+" implementation.")},Ft:function(t){var n,i=0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&i++;return i},Nt:function(t){return""+t},vl:function(t){return Math.floor(t)},un:function(t){return Math.abs(w.vl(t))},El:function(t){return Boolean(t)},wt:function(t){return"string"===typeof t&&""!==t},Ef:function(t,n){return"string"===typeof t&&"string"===typeof n&&"function"===typeof t.indexOf&&0===t.indexOf(n)},Hi:function(t){return"boolean"===typeof t},pl:function(t){return escape(t)},Ca:function(t){return"object"===typeof t},Sc:function(t){var n,i="";for(n in t)i+=n+"="+t[n];return"Object{"+i+"}"},Al:function(t){var n,i=w.rf(t);for(n in i)i[n]||delete i[n];return i},rf:function(t){var n,i={};for(n in t)i[n]=t[n];return i},yc:function(t,n){if(typeof t!==typeof n)return!1;if(t instanceof Object&&n instanceof Object){if(w.Ft(t)!==w.Ft(n))return!1;for(var i in t)if(!(t[i]===n[i]))return!1;return!0}return t===n},Is:function(){for(var t={},n=0;n<arguments.length;n++)for(var i in arguments[n])arguments[n][i]&&(t[i]=arguments[n][i]);return t},_t:function(t){return"number"===typeof t&&Math.round(t)===t},gl:function(t){return"[object Array]"===Object.prototype.toString.call(t)},yl:function(t,n){if(t!==n){if(!t||!n)return!1;if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(w.gl(t[i])&&w.gl(n[i])){if(!w.yl(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1}return!0},Sl:function(){return"undefined"!==typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()},sn:function(t,n,i){if(w.Sl())Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:i});else{if("undefined"===typeof t.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");t.__defineGetter__(n,i)}},on:function(t,n,i){if(w.Sl())Object.defineProperty(t,n,{configurable:!0,set:i});else{if("undefined"===typeof t.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");t.__defineSetter__(n,i)}}},(I={two32:4294967296}).Rl=I.two32-1,I._l=0,w.Il=I,w.Il.Cast=function(t){t=parseInt(t,10);return t>I.Rl?t=t%I.two32:t<I._l&&(t=I.two32-(t=-t%I.two32)),t},w.Il.Tl=function(t){t=parseInt(t,10);return t<=I.Rl&&t>=I._l},T={Rl:2147483647,_l:-2147483648},w.cf=T,w.cf.Cast=function(t){t=parseInt(t,10);return t>T.Rl?t=t%T.Rl:t<T._l&&(t=T.Rl-(t=-t%T.Rl)),t},w.cf.Tl=function(t){t=parseInt(t,10);return t<=T.Rl&&t>=T._l},w.Gs=function(){return window&&window.location&&window.location.search?window.location.search:""},w.Cl=function(){return document&&document.referrer?document.referrer:""},st=V.LogBuffer=function(){this.ml=[],this.zs=function(t){this.ml.length>=32&&this.ml.shift(),this.ml.push(t)},this.Hh=function(){var t=this.ml;return this.ml=[],t}},(D=V.Ping=function(t,n,i,e){this.Ol=!1,this.wl=null,this.A=t,this.A.setModuleName("Ping"),this.cl=n,this.Si=i,this.Ri=e,this.ff=function(t){this.Ol||(this.Ol=!0,t=this.Dl()+"&d="+w.pl(t.toString()),this.A.error("send(): "+t),this.cl.ll("GET",t,null,null,null),this.Ol=!1)},this.Dl=function(){if(!this.wl){var t=D.Pl+"?comp="+D.Nl+"&clv="+(this.Ri||h.version);if(this.Si&&(t+="&cid="+this.Si.customerKey),t+="&sch="+m.vo,!this.Si)return t;this.wl=t}return this.wl}}).Nl="sdkjs",D.Pl="https://pings.conviva.com/ping.ping",P=V.bl={Ml:4294967295,Ll:2147483647,Vl:-2147483648,jf:function(){return Math.floor(Math.random()*P.Ml)+P.Vl},Et:function(){return Math.floor(Math.random()*P.Ml)}},b=V.Ul={Uc:function(t,n,i,e){return isNaN(t)||"number"!==typeof t||t===e?e:(e=w.vl(t),b.kl(e,n,i))},kl:function(t,n,i){return w._t(i)&&t>i?t=i:w._t(n)&&t<n&&(t=n),t},Rn:function(t){return t=-1!==t&&-2!==t?b.Uc(t,0,null,-1):t}},M=V.StreamerError=function(){var i=this;i.errorCode=null,i.severity=h.ErrorSeverity.FATAL,function(t,n){i.errorCode=t,i.severity=n}.apply(i,arguments),this.js=function(){return i.errorCode},this.Ws=function(){return i.severity}},ot=V.HttpClient=function(t,n,i,e){this.A=t,this.A.setModuleName("HttpClient"),this.vi=n,this.Fl=i,this.I=e,this.ll=function(t,n,i,e,s){var o=1e3*this.I.httpTimeout,r=null;s&&(r=this.Fl.Yf(s,o,"HTTP timeout")),this.A.debug("request(): calling HttpInterface.makeRequest"),this.vi.makeRequest(t,n,i,e,o,r)}},(rt=V.Logger=function(t,n,i,e,s){this.Ai=t,this.li=n,this._=i,this._i=e,this.yi=s,this.debug=function(t){this.log(t,u.LogLevel.DEBUG)},this.info=function(t){this.log(t,u.LogLevel.INFO)},this.warning=function(t){this.log(t,u.LogLevel.WARNING)},this.error=function(t){this.log(t,u.LogLevel.ERROR)},this.log=function(t,n){t=this.Hl(t,n);this._i.zs(t),this._.logLevel<=n&&this.Ai.consoleLog(t,n)},this.Kl=function(t){return"["+this.Dn+"] "+t},this.Gl=function(t){return"["+this.yi+"] "+t},this.jl=function(t){return"[Conviva] "+t},this.Wl=function(t){return"["+(this.li.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+t},this.xl=function(t,n){return"["+rt.Bl(n)+"] "+t},this.ql=function(t){return t=this.Yl?"sid="+this.Yl+" "+t:t},this.Xn=function(t){this.Yl=t},this.setModuleName=function(t){this.Dn=t},this.Hl=function(t,n){return this.jl(this.Wl(this.xl(this.Gl(this.Kl(this.ql(t))),n)))}}).Bl=function(t){var n;switch(t){case u.LogLevel.ERROR:n="ERROR";break;case u.LogLevel.WARNING:n="WARNING";break;case u.LogLevel.INFO:n="INFO";break;case u.LogLevel.DEBUG:n="DEBUG"}return n},V.Storage=function(t,n,i,e){this.A=t,this.A.setModuleName("Storage"),this.Ei=n,this.Fl=i,this.I=e,this.dt=function(t,n){n=this.Fl.Yf(n,1e3*this.I.storageTimeout,"storage load timeout");this.A.debug("load): calling StorageInterface.loadData"),this.Ei.loadData(V.Storage.Jl,t,n)},this.df=function(t,n,i){i=this.Fl.Yf(i,1e3*this.I.storageTimeout,"storage save timeout");this.A.debug("save(): calling StorageInterface.saveData"),this.Ei.saveData(V.Storage.Jl,t,n,i)}},V.Storage.Jl="Conviva",(L=V.SystemMetadata=function(t,n,i){this.A=t,this.A.setModuleName("SystemMetadata"),this.pi=n,this.T=i,this.Xl=null,this.get=function(){return this.Xl||this.retrieve(),this.Xl},this.retrieve=function(){var t,n={},e=(n[L.BROWSER_NAME]=this.pi.getBrowserName,n[L.BROWSER_VERSION]=this.pi.getBrowserVersion,n[L.DEVICE_BRAND]=this.pi.getDeviceBrand,n[L.DEVICE_MANUFACTURER]=this.pi.getDeviceManufacturer,n[L.DEVICE_MODEL]=this.pi.getDeviceModel,n[L.DEVICE_TYPE]=this.pi.getDeviceType,n[L.DEVICE_VERSION]=this.pi.getDeviceVersion,n[L.FRAMEWORK_NAME]=this.pi.getFrameworkName,n[L.FRAMEWORK_VERSION]=this.pi.getFrameworkVersion,n[L.OPERATING_SYSTEM_NAME]=this.pi.getOperatingSystemName,n[L.OPERATING_SYSTEM_VERSION]=this.pi.getOperatingSystemVersion,n[L.DEVICE_CATEGORY]=this.pi.getDeviceCategory,n[L.SCREEN_WIDTH]=this.pi.getScreenWidth,n[L.SCREEN_HEIGHT]=this.pi.getScreenHeight,n[L.SCALE_FACTOR]=this.pi.getScaleFactor,this);for(t in this.A.debug("retrieve(): calling MetadataInterface methods"),n)!function(n,i){e.T.k("Session.getSystemMetadataSchema(): "+n,function(){var t=i[n];i[n]=t.call(e.pi)})}(t,n),w.wt(n[t])||delete n[t];var i=!1;if("undefined"!==typeof n[L.DEVICE_TYPE]){for(var s in h.DeviceType)if(n[L.DEVICE_TYPE]===h.DeviceType[s]){i=!0;break}i||delete n[L.DEVICE_TYPE]}if(i=!1,"undefined"!==typeof n[L.DEVICE_CATEGORY]){for(var o in h.DeviceCategory)if(n[L.DEVICE_CATEGORY]===h.DeviceCategory[o]){i=!0;break}i||delete n[L.DEVICE_CATEGORY]}this.Xl=w.Al(n)}}).BROWSER_NAME="browserName",L.BROWSER_VERSION="browserVersion",L.DEVICE_BRAND="deviceBrand",L.DEVICE_MANUFACTURER="deviceManufacturer",L.DEVICE_MODEL="deviceModel",L.DEVICE_TYPE="deviceType",L.DEVICE_VERSION="deviceVersion",L.FRAMEWORK_NAME="frameworkName",L.FRAMEWORK_VERSION="frameworkVersion",L.OPERATING_SYSTEM_NAME="operatingSystemName",L.OPERATING_SYSTEM_VERSION="operatingSystemVersion",L.DEVICE_CATEGORY="deviceCategory",L.SCREEN_WIDTH="screenWidth",L.SCREEN_HEIGHT="screenHeight",L.SCALE_FACTOR="scaleFactor",at=V.Time=function(t,n){this.li=t,this.A=n,this.A.setModuleName("Time"),this.current=function(){var t=this.li.getEpochTimeMs();return w._t(t)||this.A.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+t+")"),t}},ut=V.Timer=function(t,n,i){var s=this;this.A=t,this.A.setModuleName("Timer"),this.di=n,this.T=i,this.create=function(t,n,i){return this.createTimer(function(){s.T.k(i,function(){t()})},n,i)},this.createOnce=function(t,n,i){var e={cancel:null};return e.cancel=this.createTimer(function(){s.T.k(i,function(){e&&"function"===typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),t()})},n,i),e.cancel},this.createTimer=function(t,n,i){return this.A.debug("createTimer(): calling TimerInterface.create"),this.di.createTimer(t,n,i)}}}(),ft});