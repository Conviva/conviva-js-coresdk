/*! (C) 2025 Conviva, Inc. All rights reserved. Confidential and proprietary. */
((t,n)=>{"function"===typeof define&&define.amd?define(n):("object"===typeof exports||"object"===typeof module&&module.exports)&&(module.exports=n()),"undefined"===typeof t||!t||t.Conviva||t.ConvivaLoading||(t.ConvivaLoading=!0,t.Conviva=n(),delete t.ConvivaLoading)})(this,function(){var n,s,U,k,o,r,F,i,e,C,h,c,f,a,B,H,G,K,j,q,x,W,u,l,d,Y,T,X,J,v,E,p,g,A,Q,y,z,S,_,R,I,Z,$,m,tt,nt,it,N,et,st,ot,O,rt,w,D,P,b,at,ut,L,ht,ct,M,V={};function ft(){var t,n="";for("-"===s&&r(n="-");s>="0"&&s<="9";)n+=s,r();if("."===s)for(n+=".";r()&&s>="0"&&s<="9";)n+=s;if("e"===s||"E"===s)for(n+=s,r(),"-"!==s&&"+"!==s||(n+=s,r());s>="0"&&s<="9";)n+=s,r();if(t=+n,!isNaN(t))return t;o("Bad number")}function lt(){switch(s){case"t":return r("t"),r("r"),r("u"),r("e"),!0;case"f":return r("f"),r("a"),r("l"),r("s"),r("e"),!1;case"n":return r("n"),r("u"),r("l"),r("l"),null}o("Unexpected '"+s+"'")}function dt(){var t=[];if("["===s){if(r("["),i(),"]"===s)return r("]"),t;for(;s;){if(t.push(e()),i(),"]"===s)return r("]"),t;r(","),i()}}o("Bad array")}function vt(){var t,n={};if("{"===s){if(r("{"),i(),"}"===s)return r("}"),n;for(;s;){if(t=F(),i(),r(":"),Object.hasOwnProperty.call(n,t)&&o('Duplicate key "'+t+'"'),n[t]=e(),i(),"}"===s)return r("}"),n;r(","),i()}}o("Bad object")}function t(t){return t<10?"0"+t:t}function Et(t){return p.lastIndex=0,p.test(t)?'"'+t.replace(p,function(t){var n=Q[t];return"string"===typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}return M={},C=V.Constants={version:"4.7.16",CUSTOMER_KEY:"customerKey",GATEWAY_URL:"gatewayUrl",LOG_LEVEL:"logLevel",ASSET_NAME:"Conviva.assetName",PLAYER_NAME:"Conviva.applicationName",APPLICATION_VERSION:"c3.app.version",IS_LIVE:"Conviva.streamType",ENCODED_FRAMERATE:"Conviva.encodedFrameRate",DEFAULT_RESOURCE:"Conviva.defaultResource",STREAM_URL:"Conviva.streamUrl",VIEWER_ID:"Conviva.viewerId",DURATION:"Conviva.duration",UTM_TRACKING_URL:"c3.cm.utmTrackingUrl",POD_INDEX:"podIndex",POD_POSITION:"podPosition",POD_DURATION:"podDuration",AD_TYPE:"adType",MODULE_NAME:"Conviva.moduleName",MODULE_VERSION:"Conviva.moduleVersion",FRAMEWORK_NAME:"Conviva.frameworkName",FRAMEWORK_VERSION:"Conviva.frameworkVersion",i:"Constants not yet configured",o:"Invalid : Did you report playback ended?",u:"Invalid : Did you report ad playback ended?",h:"Player cannot be null",l:"PlaybackAnlytics already built",v:"PlaybackAnlytics not yet built",Playback:{BITRATE:"BITRATE",AVG_BITRATE:"AVG_BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT",AUDIO_LANGUAGE:"AUDIO_LANGUAGE",SUBTITLES_LANGUAGE:"SUBTITLES_LANGUAGE",CLOSED_CAPTIONS_LANGUAGE:"CLOSED_CAPTIONS_LANGUAGE"},Network:{SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},ErrorSeverity:{FATAL:1,WARNING:0},NO_SESSION_KEY:-2,AdPosition:{PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},AdPlayer:{CONTENT:"CONTENT",SEPARATE:"SEPARATE"},DeviceType:{DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV",VEHICLE:"Vehicle",OTHER:"Other"},AdType:{CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},AdSlates:{BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},AdServingType:{INLINE:"Inline",WRAPPER:"Wrapper"},DeviceCategory:{ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS",LINUX:"LNX"},LogLevel:{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},PlayerState:{STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},Events:{USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},ErrorType:{ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},StreamType:{UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},CallbackFunctions:{CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer",GENERATE_HASH:"generateHash",BASE64_ENCODE:"base64Encode"},DeviceMetadata:{BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},AD_PRELOAD_FEATURE:"adPreloading",AD_TAG_URL:"adTagUrl",IMASDK_CONTENT_PLAYER:"imaMainContentPlayer",CONVIVA_AD_MODULE:"convivaAdModule",CONVIVA_MODULE:"convivaModule",MEDIA_ELEMENT:"mediaElement",APP_TRACKER_EVENT:{TYPE:"convivaVideoEvent",INIT:"c3.sdk.init",VIDEO_ATTEMPT:"c3.video.attempt",VIDEO_END:"c3.video.end",VIDEO_PLAY:"c3.video.play",VIDEO_PAUSE:"c3.video.pause",VIDEO_BUFFERING:"c3.video.buffering",VIDEO_ERROR:"c3.video.error",SDK_CUSTOM_EVENT:"c3.sdk.custom_event",VIDEO_CUSTOM_EVENT:"c3.video.custom_event",AD_BREAK_START:"c3.ad.ad_break_start",AD_BREAK_END:"c3.ad.ad_break_end",VIDEO_METADATA_CHANGE:"c3.video.set_content_info",VIDEO_BITRATE_SWITCH:"c3.video.bitrate_switch"}},(h=V.Client=function(){var u=this;this.p=null,this.g=!1,this.version=h.version,this.A=null,this.S=null,this._=null,this.R=-1,this.I=null,this.C=null,this.T=null,this.m=null,this.N=-1,this.O=!1,this.D={},this.P=function(){u.A&&arguments.length>0&&u.A.info(" Client:: uniqueIdentifierCallback(): "+arguments[0])},this.L={},this.M=null,this.V=null,this.U=null,this.k=function(){this.T.F("Client.makeIPV4IPV6GlobalSessions",function(){var t;u.m&&null!==(t=u.m.get(N.B))&&t!==I.H&&u.S&&((t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.I.G.indexOf(c.K)>-1?c.K:c.j,u.q=u.S.W(t,null),(t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.I.Y.indexOf(c.X)>-1?c.X:c.J,u.Z=u.S.W(t,null))})},this.$=function(i){u.T.F("Client.updateConnectionType",function(){if(u.M=i,u.S){var t,n=u.S.tt();for(t in n)n[t].nt(i)}})},this.it=function(i){u.T.F("Client.updateLinkEncryption",function(){if(u.V=i,u.S){var t,n=u.S.tt();for(t in n)n[t].et(i)}})},this.ot=function(t){u.T.F("Client.updateSignalStrength",function(){u.U=t})},function(t,n,i,e){if(!(t instanceof c))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof W))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!==c.rt+c.ut&&t.gatewayUrl!==c.ht+c.ut||(this.g=!0),e&&(this.version=e),this.I=t.ct(),this._=n,this._.lt("SDK",this.I,this.version),this.T=this._.dt(this.version),this.T.F("Client.init",function(){if(u.m=u._.vt(),u.m.Et(),u.N=u.m.get(N.gt),-1!==u.N&&void 0!==u.N&&null!==u.N||(u.N=D.At()),"undefined"!==typeof u.m.get(N.yt)&&(u.I.heartbeatInterval=u.m.get(N.yt)),u.A=u._.buildLogger(),u.A.setModuleName("Client"),u.g&&u.A.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),u.A.info("init(): url="+u.I.gatewayUrl+" customerKey="+u.I.customerKey),u.S=u._.St(u,u.I,u.m),i)for(var t in i)switch(t){case C.Network.CONNECTION_TYPE:u.$(i[t]);break;case C.Network.LINK_ENCRYPTION:u.it(i[t]);break;case C.Network.SIGNAL_STRENGTH:u.ot(i[t])}u.k(),u.A.info("init(): done.")},function(t){throw new Error("Client constructor failed: "+t.message)})}.apply(this,arguments),this.release=function(){this.O||this.T.F("Client.release",function(){u.A&&(u.A.info("release()"),u.A=null),u.S._t(),u.S=null,u.R=-1,u.N=-1,u.T=null,u.I=null,u.C=null,u._=null,u.O=!0})},this.createSession=function(t,n,i){var e=h.NO_SESSION_KEY;return this.O||(!t||t instanceof f?this.T.F("Client.createSession",function(){e=u.S.Rt(t,m.Ct.It,n,(i?C:u).version)}):u.A.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),e},this.createAdSession=function(i,e,s,o,r){var a=h.NO_SESSION_KEY;return this.O||(!e||e instanceof f?this.T.F("Client.createAdSession",function(){var t,n;e||(e=new f),O.Tt(i)&&i!==h.NO_SESSION_KEY&&(t=u.S.Nt(i))&&(n=e.custom[C.APPLICATION_VERSION],t.Ot&&t.Ot.wt&&(!e.viewerId&&t.Ot.wt.viewerId&&(e.viewerId=t.Ot.wt.viewerId),!e.applicationName&&t.Ot.wt.applicationName&&(e.applicationName=t.Ot.wt.applicationName),e.streamType===C.StreamType.UNKNOWN&&t.Ot.wt.streamType!==C.StreamType.UNKNOWN&&(e.streamType=t.Ot.wt.streamType),"undefined"!==typeof n&&n||"undefined"!==typeof(n=t.Ot.wt.custom[C.APPLICATION_VERSION])&&n&&(e.custom[C.APPLICATION_VERSION]=n)),e.custom["c3.csid"]=O.Dt(t.N)),a=u.S.Rt(e,m.Ct.Pt,s,(o?C:u).version,r)}):u.A.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),a},this.reportError=function(n,i,e){this.O||(O.bt(i)?e!==h.ErrorSeverity.FATAL&&e!==h.ErrorSeverity.WARNING?this.A.error("reportError(): invalid error severity: "+e):this.T.F("Client.reportError",function(){var t=u.S.Nt(n);t&&t.Lt(i,e)}):this.A.error("reportError(): invalid error message string: "+i))},this.updateContentMetadata=function(i,e){this.O||(e instanceof f?this.T.F("Client.updateContentMetadata",function(){var t,n=u.S.Nt(i);n&&(t=e.ct(),n.Mt(t))}):u.A.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter"))},this.detachPlayer=function(n){this.O||this.T.F("Client.detachPlayer",function(){var t=u.S.Nt(n);t&&t.Vt()})},this.Ut=function(n){this.O||this.T.F("Client.offFocus",function(){var t=u.S.Nt(n);t&&t.Ut()})},this.attachPlayer=function(n,i){this.O||(i instanceof a?this.T.F("Client.attachPlayer",function(){var t=u.S.Nt(n);t&&t.kt(i)}):u.A.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter"))},this.Ft=function(n){this.O||this.T.F("Client.onFocus",function(){var t=u.S.Nt(n);t&&t.Ft()})},this.contentPreload=function(n){this.O||this.T.F("Client.contentPreload",function(){var t=u.S.Nt(n);t&&t.Bt()})},this.contentStart=function(n){this.O||this.T.F("Client.contentStart",function(){var t=u.S.Nt(n);t&&t.Ht()})},this.sendCustomEvent=function(i,e,s){this.O||(O.bt(e)?(O.Gt(s)<=0&&u.A.warning("eventAttributes(): should have proper data."),this.T.F("Client.sendCustomEvent",function(){i===h.NO_SESSION_KEY&&(u.R<0&&(t=new f,u.R=u.S.W(t,null)),i=u.R);var t=O.Kt(s),n=u.S.jt(i);n&&n.qt(e,t)})):u.A.error("sendCustomEvent(): eventName parameter must be a valid string."))},this.adStart=function(n,i,e,s){this.O||(i!==h.AdStream.CONTENT&&i!==h.AdStream.SEPARATE?this.A.error("adStart(): ignored, invalid value for adStream parameter: "+i):e!==h.AdPlayer.CONTENT&&e!==h.AdPlayer.SEPARATE?this.A.error("adStart(): ignored, invalid value for adPlayer parameter: "+e):(s!==h.AdPosition.PREROLL&&s!==h.AdPosition.MIDROLL&&s!==h.AdPosition.POSTROLL&&this.A.info("adStart(): ignored, invalid value for adPosition parameter: "+s),this.T.F("Client.adStart",function(){var t=u.S.Nt(n);t&&t.xt(i,e,s)})))},this.adEnd=function(n){this.O||this.T.F("Client.adEnd",function(){var t=u.S.Nt(n);t&&t.Wt()})},this.cleanupSession=function(t){this.O||(t===h.NO_SESSION_KEY?this.A.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"):this.T.F("Client.cleanupSession",function(){u.S.Nt(t)&&u.S.Yt(t)}))},this.getAttachedPlayer=function(n){var i=null;return this.O||(n===h.NO_SESSION_KEY?this.A.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this.T.F("Client.getAttachedPlayer",function(){var t=u.S.Nt(n);t&&(i=t.Xt())})),i},this.isPlayerAttached=function(t){return!this.O&&null!==this.getAttachedPlayer(t)},this.getPlayerStateManager=function(t){if(this.O)throw new Error("This instance of Conviva.Client has been released.");return new a(this._,(t?C:u).version)},this.releasePlayerStateManager=function(t){if(this.O)throw new Error("This instance of Conviva.Client has been released.");this.T.F("Client.releasePlayerStateManager",function(){t instanceof a&&t.release()})},this.Jt=function(){return this.I},this.getId=function(){return this.N},this.getSessionId=function(n){var i;return this.O?C.NO_SESSION_KEY:(i=null,this.T.F("Client.getSessionId",function(){var t=u.S.Nt(n);t&&(i=t.Qt())}),i)},this.getClientId=function(n){var i;return this.O?null:(i=null,this.T.F("Client.getClientId",function(){var t=u.S.Nt(n);t&&(i=t.zt())}),i)},this.Zt=function(n,i,e){this.O||this.T.F("Client.updateCustomMetric",function(){var t=u.S.Nt(n);t&&t.Zt(i,e)})},this.setUniqueIdentifier=function(t,n){if(this.O)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)this.D[i]=t[i];n&&(this.P=n)},this.setUserPreferenceForDataCollection=function(t,n){if(this.O)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)"false"===t[i]?this.L[i]=n?N.tn.$t:N.tn.nn:this.L[i]=N.tn.en},this.setUserPreferenceForDataDeletion=function(t){if(this.O)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var n in t)"true"===t[n]?this.L[n]=N.tn.sn:this.L[n]=N.tn.en},this.getConfig=function(){if(this.O)throw new Error("This instance of Conviva.Client has been released.");return this.m}}).version="4.7.16L",h.NO_SESSION_KEY=C.NO_SESSION_KEY,h.AdPosition={PREROLL:C.AdPosition.PREROLL,MIDROLL:C.AdPosition.MIDROLL,POSTROLL:C.AdPosition.POSTROLL},h.AdStream={CONTENT:C.AdPlayer.CONTENT,SEPARATE:C.AdPlayer.SEPARATE},h.AdPlayer={CONTENT:C.AdPlayer.CONTENT,SEPARATE:C.AdPlayer.SEPARATE},h.ErrorSeverity={FATAL:C.ErrorSeverity.FATAL,WARNING:C.ErrorSeverity.WARNING},h.DeviceType={DESKTOP:C.DeviceType.DESKTOP,CONSOLE:C.DeviceType.CONSOLE,SETTOP:C.DeviceType.SETTOP,MOBILE:C.DeviceType.MOBILE,TABLET:C.DeviceType.TABLET,SMARTTV:C.DeviceType.SMARTTV,VEHICLE:C.DeviceType.VEHICLE,OTHER:C.DeviceType.OTHER},h.AdTechnology={CLIENT_SIDE:C.AdType.CLIENT_SIDE,SERVER_SIDE:C.AdType.SERVER_SIDE},h.AdType={BLACKOUT_SLATE:C.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:C.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:C.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:C.AdSlates.OTHER_SLATE,VPAID:C.AdSlates.VPAID,REGULAR:C.AdSlates.REGULAR},h.AdServingType={INLINE:C.AdServingType.INLINE,WRAPPER:C.AdServingType.WRAPPER},h.DeviceCategory={ANDROID_DEVICE:C.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:C.DeviceCategory.APPLE_DEVICE,CHROMECAST:C.DeviceCategory.CHROMECAST,DESKTOP_APP:C.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:C.DeviceCategory.DEVICE_SIMULATOR,LG_TV:C.DeviceCategory.LG_TV,NINTENDO:C.DeviceCategory.NINTENDO,PLAYSTATION:C.DeviceCategory.PLAYSTATION,ROKU:C.DeviceCategory.ROKU,SAMSUNG_TV:C.DeviceCategory.SAMSUNG_TV,SMART_TV:C.DeviceCategory.SMART_TV,SET_TOP_BOX:C.DeviceCategory.SET_TOP_BOX,TIVO:C.DeviceCategory.TIVO,WEB:C.DeviceCategory.WEB,WINDOWS_DEVICE:C.DeviceCategory.WINDOWS_DEVICE,XBOX:C.DeviceCategory.XBOX,KAIOS_DEVICE:C.DeviceCategory.KAIOS_DEVICE,LINUX:C.DeviceCategory.LINUX},(c=V.ClientSettings=function(){var e=this;this.rn=null,O.un(this,"customerKey",function(){return this.rn}),O.hn(this,"customerKey",function(t){O.bt(t)&&(this.rn=t)}),this.cn=c.fn,O.un(this,"heartbeatInterval",function(){return this.cn}),O.hn(this,"heartbeatInterval",function(t){var n;"number"===typeof t&&(n=O.ln(t))===t&&(this.cn=n)}),this.dn=null,this.G=null,this.Y=null,O.un(this,"gatewayUrl",function(){return this.dn}),O.hn(this,"gatewayUrl",function(t){var n;!O.bt(t)||"https"!==(n=t.split("://"))[0]&&"http"!==n[0]||(this.dn=t)}),function(t){if(!O.bt(t))throw new Error("customerKey must be valid");this.customerKey=t}.apply(this,arguments),this.equals=function(t){return this.customerKey===t.customerKey&&this.gatewayUrl===t.gatewayUrl&&this.heartbeatInterval===t.heartbeatInterval},this.ct=function(){var t=new c(this.customerKey);return t.gatewayUrl=(t=>{if(O.bt(t)){var n,i=t.split("://");if("https"===i[0]||"http"===i[0])return i[1]!==c.ut&&-1!==i[1].indexOf(c.ut)?(n=i[1].split(c.ut),e.G="https://"+n[0]+c.K,e.Y="https://"+n[0]+c.X):(e.G="https://ipv4."+i[1],e.Y="https://ipv6."+i[1]),t}return e.G="https://"+e.customerKey+"."+c.K,e.Y="https://"+e.customerKey+"."+c.X,"https://"+e.customerKey+"."+c.ut})(this.gatewayUrl),t.heartbeatInterval=this.heartbeatInterval,t.G=this.G,t.Y=this.Y,t}}).on="https://conviva.testonly.conviva.com",c.vn="https://cws.conviva.com",c.ut="cws.conviva.com",c.K="ipv4.cws.conviva.com",c.X="ipv6.cws.conviva.com",c.En="conviva.testonly.conviva.com",c.j="ipv4.testonly.conviva.com",c.J="ipv6.testonly.conviva.com",c.rt="https://",c.ht="http://",c.gn=5,c.fn=20,(f=V.ContentMetadata=function(){this.An=null,O.un(this,"assetName",function(){return this.An}),O.hn(this,"assetName",function(t){"string"===typeof t&&(this.An=t)}),this.yn={},O.un(this,"custom",function(){return this.yn}),O.hn(this,"custom",function(t){"object"===typeof t&&(this.yn=O.Kt(t))}),this.Sn=null,O.un(this,"defaultResource",function(){return this.Sn}),O.hn(this,"defaultResource",function(t){"string"===typeof t&&(this.Sn=t)}),this._n=null,O.un(this,"viewerId",function(){return this._n}),O.hn(this,"viewerId",function(t){"string"===typeof t&&(this._n=t)}),this.Rn=null,O.un(this,"applicationName",function(){return this.Rn}),O.hn(this,"applicationName",function(t){"string"===typeof t&&(this.Rn=t)}),this.In=null,O.un(this,"streamUrl",function(){return this.In}),O.hn(this,"streamUrl",function(t){"string"===typeof t&&(this.In=t)}),this.Cn=f.StreamType.UNKNOWN,O.un(this,"streamType",function(){return this.Cn}),O.hn(this,"streamType",function(t){t!==f.StreamType.UNKNOWN&&t!==f.StreamType.VOD&&t!==f.StreamType.LIVE||(this.Cn=t)}),this.Tn=-1,O.un(this,"duration",function(){return this.Tn}),O.hn(this,"duration",function(t){this.Tn=P.Nn(t)}),this.On=-1,O.un(this,"encodedFrameRate",function(){return this.On}),O.hn(this,"encodedFrameRate",function(t){this.On=P.Nn(t)}),function(){}.apply(this,arguments),this.ct=function(){var t,n=new f;for(t in n.assetName=this.assetName,n.applicationName=this.applicationName,n.streamUrl=this.streamUrl,n.viewerId=this.viewerId,n.defaultResource=this.defaultResource,n.streamType=this.streamType,n.duration=this.duration,n.encodedFrameRate=this.encodedFrameRate,this.custom)n.custom[t]=this.custom[t];return n}}).StreamType={UNKNOWN:C.StreamType.UNKNOWN,LIVE:C.StreamType.LIVE,VOD:C.StreamType.VOD},V.ErrorType={ERROR_UNKNOWN:C.ErrorType.ERROR_UNKNOWN,ERROR_IO:C.ErrorType.ERROR_IO,ERROR_TIMEOUT:C.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:C.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:C.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:C.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:C.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:C.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:C.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:C.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:C.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:C.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:C.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},V.Events={AD_REQUESTED:C.Events.AD_REQUESTED,AD_RESPONSE:C.Events.AD_RESPONSE,AD_SLOT_STARTED:C.Events.AD_SLOT_STARTED,AD_ATTEMPTED:C.Events.AD_ATTEMPTED,AD_SLOT_ENDED:C.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:C.Events.AD_IMPRESSION_START,AD_START:C.Events.AD_START,AD_FIRST_QUARTILE:C.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:C.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:C.Events.AD_THIRD_QUARTILE,AD_COMPLETE:C.Events.AD_COMPLETE,AD_END:C.Events.AD_END,AD_IMPRESSION_END:C.Events.AD_IMPRESSION_END,AD_SKIPPED:C.Events.AD_SKIPPED,AD_ERROR:C.Events.AD_ERROR,AD_PROGRESS:C.Events.AD_PROGRESS,AD_CLOSE:C.Events.AD_CLOSE,CONTENT_PAUSED:C.Events.CONTENT_PAUSED,CONTENT_RESUMED:C.Events.CONTENT_RESUMED,POD_START:C.Events.POD_START,POD_END:C.Events.POD_END},(a=V.PlayerStateManager=function(){var e=this;e.wn=null,e.Dn=-2,e.Pn=-2,e.bn=a.PlayerState.UNKNOWN,e.Ln={},e.Mn=-2,e.On=-2,e.Tn=-2,e.Vn=null,e.Un=null,e.In=null,e.kn=null,e.Fn=null,e.Bn=-1,e.Hn=-1,e.M=null,e.V=null,e.Gn=null,e.Kn=[],e.O=!1,e.jn=null,e.qn=null,e.xn=null,this.release=function(){e.O||e.T.F("PlayerStateManager.release",function(){e.wn&&e.wn.Wn(),e.Yn(),e._=null,e.A=null,e.T=null,e.O=!0})},this.setPlayheadTime=function(){},this.setBufferLength=function(){},this.setRenderedFrameRate=function(){},this.getEncodedFrameRate=function(){return e.On},this.setEncodedFrameRate=function(n){e.O||e.T.F("PlayerStateManager.setEncodedFrameRate",function(){var t=P.Nn(n);t>=-1&&(e.On=t,e.wn)&&e.wn.Xn(e.On)})},this.getDuration=function(){return e.Tn},this.setClientMeasureInterface=function(t){O.Jn(t,new V.ClientMeasureInterface,"ClientMeasureInterface"),this.Qn=t},this.getPHT=function(){return this.Qn&&"function"===typeof this.Qn.getPHT?this.Qn.getPHT():a.DEFAULT_PHT},this.getBufferLength=function(){return this.Qn&&"function"===typeof this.Qn.getBufferLength?this.Qn.getBufferLength():a.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.Qn&&"function"===typeof this.Qn.getSignalStrength?this.Qn.getSignalStrength():a.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.Qn&&"function"===typeof this.Qn.getRenderedFrameRate?this.Qn.getRenderedFrameRate():a.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(n){e.O||e.T.F("PlayerStateManager.setDuration",function(){var t=P.Nn(n);t>=-1&&(e.Tn=t,e.wn)&&e.wn.zn(e.Tn)})},this.getStreamUrl=function(){return e.In},this.setStreamUrl=function(t){e.O||e.T.F("PlayerStateManager.setStreamUrl",function(){t&&(e.In=t,e.wn)&&e.wn.Zn(e.In)})},this.$n=function(){return e.kn},this.ti=function(){return e.Fn},this.setModuleNameAndVersion=function(t,n){e.kn=t,e.Fn=n},this.ni=function(){return e.Un},this.setPlayerType=function(t){e.O||e.T.F("PlayerStateManager.setPlayerType",function(){e.Un=t,e.wn&&e.wn.ii(e.Un)})},this.ei=function(){return e.Vn},this.setPlayerVersion=function(t){e.O||e.T.F("PlayerStateManager.setPlayerVersion",function(){e.Vn=t,e.wn&&e.wn.si(e.Vn)})},this.oi=function(){return e.jn},this.setAudioLang=function(t){e.O||e.T.F("PlayerStateManager.setAudioLang",function(){e.jn=t,e.wn&&e.wn.ri(e.jn)})},this.ai=function(){return e.qn},this.setSubtitleLang=function(t){e.O||e.T.F("PlayerStateManager.setSubtitleLang",function(){e.qn=t,e.wn&&e.wn.ui(e.qn)})},this.hi=function(){return e.xn},this.setCcLang=function(t){e.O||e.T.F("PlayerStateManager.setCCLang",function(){e.xn=t,e.wn&&e.wn.ci(e.xn)})},this.setMonitoringNotifier=function(t){return!e.O&&!e.wn&&(e.wn=t,e.A&&arguments.length>=2&&e.A.fi(arguments[1]),!0)},this.Yn=function(){e.O||(e.wn=null,e.A&&e.A.fi(null))},this.li=function(){e.setPlayerState(e.getPlayerState()),e.setBitrateKbps(e.di()),e.setAvgBitrateKbps(e.vi()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.ni()),e.setPlayerVersion(e.ei()),e.setAudioLang(e.oi()),e.setSubtitleLang(e.ai()),e.setCcLang(e.hi());for(var t=0;t<e.Kn.length;t++){var n=e.Kn[t];e.Ei(n)}e.Kn=[]},this.getPlayerState=function(){return e.bn},this.setPlayerState=function(t){e.O||e.T.F("PlayerStateManager.setPlayerState",function(){a.pi(t)?(e.bn=t,e.wn&&e.wn.gi(e.bn)):e.A.error("PlayerStateManager.SetPlayerState(): invalid state: "+t)})},this.di=function(){return e.Dn},this.setBitrateKbps=function(n){e.O||e.T.F("PlayerStateManager.setBitrateKbps",function(){var t=P.Nn(n);t>=-1&&(e.Dn=t,e.wn)&&e.wn.Ai(e.Dn)})},this.vi=function(){return e.Pn},this.setAvgBitrateKbps=function(n){e.O||e.T.F("PlayerStateManager.setAvgBitrateKbps",function(){var t=P.Nn(n);t>=-1&&(e.Pn=t,e.wn)&&e.wn.yi(e.Pn)})},this.setPlayerSeekStart=function(t){e.O||e.T.F("PlayerStateManager.setPlayerSeekStart()",function(){e.wn&&e.wn.Si(a.SEEK_ACTIONS_TYPE.SEEK_START,t)})},this.setPlayerSeekEnd=function(){e.O||e.T.F("PlayerStateManager.setPlayerSeekEnd()",function(){e.wn&&e.wn.Si(a.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e.O||e.T.F("PlayerStateManager.setUserSeekButtonUp()",function(){e.wn&&e.wn.Si(a.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e.O||e.T.F("PlayerStateManager.setUserSeekButtonDown()",function(){e.wn&&e.wn.Si(a.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(n){e.O||e.T.F("PlayerStateManager.setVideoResolutionWidth()",function(){var t=P.Nn(n);t>0&&(e.Bn=t),e.wn&&e.wn._i(e.Bn)})},this.setVideoResolutionHeight=function(n){e.O||e.T.F("PlayerStateManager.setVideoResolutionHeight()",function(){var t=P.Nn(n);t>0&&(e.Hn=t),e.wn&&e.wn.Ri(e.Hn)})},this.setConnectionType=function(t){e.O||e.T.F("PlayerStateManager.setConnectionType()",function(){e.M=t,e.wn&&e.wn.nt(e.M)})},this.setLinkEncryption=function(t){e.O||e.T.F("PlayerStateManager.setLinkEncryption()",function(){e.V=t,e.wn&&e.wn.et(e.V)})},this.setSignalStrength=function(){},this.Ei=function(t){var n;e.Gn=t,e.wn?(n=t.errorCode,e.wn.Ii(n,t.severity)):e.Kn.push(t)},this.sendError=function(n,i){e.O||e.T.F("PlayerStateManager.sendError",function(){var t=new b(n,i);e.Ei(t)})},this.reset=function(){e.O||e.T.F("PlayerStateManager.reset",function(){e.Dn=-2,e.Pn=-2,e.bn=a.PlayerState.UNKNOWN,e.Ln={},e.Mn=-1,e.On=-1,e.Tn=-1,e.Vn=null,e.Un=null,e.In=null,e.Gn=null,e.Kn=[]})},this.setCDNServerIP=function(t){e.O||e.T.F("PlayerStateManager.setCDNServerIP",function(){e.wn&&e.wn.Ci(t)})},this.Ti=function(){return e.mi},this.setDroppedFramesTotal=function(t){e.O||e.T.F("PlayerStateManager.setDroppedFramesTotal",function(){e.wn&&e.wn.Ni(t)})},this.setDroppedFramesCount=function(t){e.O||e.T.F("PlayerStateManager.setDroppedFramesCount",function(){e.wn&&e.wn.Oi(t)})},this.wi=function(){return e.Gn},function(t,n){e._=t,e.A=e._.buildLogger(),e.A.setModuleName("PlayerStateManager"),e.T=e._.dt(n)}.apply(e,arguments)}).PlayerState={STOPPED:C.PlayerState.STOPPED,PLAYING:C.PlayerState.PLAYING,BUFFERING:C.PlayerState.BUFFERING,PAUSED:C.PlayerState.PAUSED,UNKNOWN:C.PlayerState.UNKNOWN,NOT_MONITORED:C.PlayerState.NOT_MONITORED},a.pi=function(t){return t===a.PlayerState.STOPPED||t===a.PlayerState.PLAYING||t===a.PlayerState.BUFFERING||t===a.PlayerState.PAUSED||t===a.PlayerState.UNKNOWN||t===a.PlayerState.NOT_MONITORED},a.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},a.DEFAULT_SIGNAL_STRENGTH=1e3,a.DEFAULT_RENDERED_FRAME_RATE=-1,a.DEFAULT_BUFFER_LENGTH=-1,a.DEFAULT_PHT=-1,V.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}},B=V.HttpInterface=function(){this.makeRequest=function(){},this.release=function(){}},H=V.LoggingInterface=function(){this.consoleLog=function(){},this.release=function(){}},G=V.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},K=V.StorageInterface=function(){this.saveData=function(){},this.loadData=function(){},this.release=function(){}},j=V.SystemInterface=function(){!function(t,n,i,e,s,o){O.Jn(t,new q,"TimeInterface"),O.Jn(n,new x,"TimerInterface"),O.Jn(i,new B,"HttpInterface"),O.Jn(e,new K,"StorageInterface"),O.Jn(s,new G,"MetadataInterface"),O.Jn(o,new H,"LoggingInterface"),this.Di=t,this.Pi=n,this.bi=i,this.Li=e,this.Mi=s,this.Vi=o}.apply(this,arguments),this.release=function(){this.Di&&(this.Di.release(),this.Di=null),this.Pi&&(this.Pi.release(),this.Pi=null),this.bi&&(this.bi.release(),this.bi=null),this.Li&&(this.Li.release(),this.Li=null),this.Mi&&(this.Mi.release(),this.Mi=null),this.Vi&&(this.Vi.release(),this.Vi=null)}},q=V.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},x=V.TimerInterface=function(){this.createTimer=function(){},this.release=function(){}},W=V.SystemFactory=function(){var t=this;!function(t,n){if(!(t instanceof j))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.Ui=t,this.Di=this.Ui.Di,this.Pi=this.Ui.Pi,this.bi=this.Ui.bi,this.Li=this.Ui.Li,this.Mi=this.Ui.Mi,this.Vi=this.Ui.Vi,n instanceof u?this.I=n.ct():this.I=new u}.apply(this,arguments),this.lt=function(t,n,i){this.ki=t,this.Fi=n,this.Bi=i},this.release=function(){this.Ui.release(),this.Ui=null,this.ki=null,this.I=null,this.Hi=null};var n=function(){return new ut(t.Vi,t.Di,t.Jt(),t.Hi,t.ki)};this.buildLogger=function(){return n()},this.St=function(t,n,i){return new nt(t,n,i,this)},this.Gi=function(t){return new w(this.buildLogger(),this.Ki(),this.Fi,t)},this.ji=function(){return new it(this.buildTimer(t.Bi))},this.qi=function(){var t=new ct(this.buildLogger(),this.Pi,new st(this.buildLogger(),null,this.Jt()));return new it(t)},this.Ki=function(){return new at(this.buildLogger(),this.bi,this.qi(),this.Jt())},this.dt=function(t){return new st(this.buildLogger(),this.Gi(t),this.Jt())},this.buildTime=function(){return new ht(this.Di,this.buildLogger())},this.buildTimer=function(t){return new ct(this.buildLogger(),this.Pi,this.dt(t))},this.xi=function(){return new M.Storage(this.buildLogger(),this.Li,this.ji(),this.Jt())},this.vt=function(){return new N(this.buildLogger(),this.xi(),this.Wi())},this.Yi=function(t){return new L(this.buildLogger(),this.Mi,this.dt(t))},this.Xi=function(){return new I},this.Ji=function(t,n){return new ot(t,this.buildLogger(),this.Ki(),this.Wi(),n)},this.Qi=function(t,n,i,e,s){var o=this.Ji(n,e.custom["c3.domain"]);return new m(this.zi(),t,n,this.buildLogger(),this.dt(s),this.buildTimer(s),o,this.Xi(),this.buildTime(),this.Zi(),i,e,s)},this.$i=function(t,n,i,e,s,o,r){t=this.Qi(t,n.ct(),i,o,r);return new tt(e,s,i,this.Yi(r),t,this.dt(r),this.buildLogger())},this.zi=function(){return new et},this.Wi=function(){return new Z},this.Zi=function(){return this.Hi},this.Jt=function(){return this.I},this.Hi=new rt},(u=V.SystemSettings=function(){this.te=u.ne,O.un(this,"logLevel",function(){return this.te}),O.hn(this,"logLevel",function(t){var n;"number"===typeof t&&(n=O.ln(t))===t&&n>=u.LogLevel.DEBUG&&n<=u.LogLevel.ERROR&&(this.te=n)}),this.ie=u.ee,O.un(this,"allowUncaughtExceptions",function(){return this.ie}),O.hn(this,"allowUncaughtExceptions",function(t){O.se(t)&&(this.ie=t)}),this.oe=u.re,O.un(this,"storageTimeout",function(){return this.oe}),O.hn(this,"storageTimeout",function(t){var n;"number"===typeof t&&(n=O.ln(t))===t&&(this.oe=n)}),this.ae=u.ue,O.un(this,"httpTimeout",function(){return this.ae}),O.hn(this,"httpTimeout",function(t){var n;"number"===typeof t&&(n=O.ln(t))===t&&(this.ae=n)}),function(){}.apply(this,arguments),this.equals=function(t){return this.logLevel===t.logLevel&&this.allowUncaughtExceptions===t.allowUncaughtExceptions&&this.storageTimeout===t.storageTimeout&&this.httpTimeout===t.httpTimeout},this.ct=function(){var t=new u;return t.logLevel=this.logLevel,t.allowUncaughtExceptions=this.allowUncaughtExceptions,t.storageTimeout=this.storageTimeout,t.httpTimeout=this.httpTimeout,t}}).LogLevel={DEBUG:C.LogLevel.DEBUG,INFO:C.LogLevel.INFO,WARNING:C.LogLevel.WARNING,ERROR:C.LogLevel.ERROR,NONE:C.LogLevel.NONE},u.he=u.LogLevel.DEBUG,u.ne=u.LogLevel.NONE,u.ce=!0,u.ee=!1,u.re=10,u.ue=10,l=M.AdAnalytics=function(){var e=this;function n(t){e.fe?(O.Gt(t)>0&&e.setAdInfo(t),e.fe.le()||(e.fe.de(e.ve),e.fe.Ee(!0),e.getAdType()===C.AdType.SERVER_SIDE&&e.reportAdMetric(C.Playback.BITRATE,e.ve.pe()))):e.A&&e.A.error("AdAnalytics.onAdInitiated() : contentPlayer - "+C.o)}e.ge=null,e.A=null,e._=null,e.Ae=null,e.ve=null,e.fe=null,e.ye=null,e.Se=null,e._e=null,function(t,n,i){e.ge=t,e._e=i,e._=n,i&&(e.ve=i.Re()),e.Ae=n.buildTimer(C.version),e.A=n.buildLogger(),e.A.setModuleName("AdAnalytics"),e.fe=new d(e.ge,e.Ae),T.call(this)}.apply(this,arguments),this.setAdInfo=function(t){O.Gt(t)<=0?e.A&&e.A.error("AdAnalytics.setAdInfo() : AD Info is not set"):(e.A&&e.A.debug("AdAnalytics.setAdInfo()"),e.fe&&e.fe.Ie(t))},this.setAdPlayerInfo=function(t){O.Gt(t)<=0?e.A&&e.A.error("AdAnalytics.setAdPlayerInfo() : Ad Player Info is not set"):(e.A&&e.A.debug("AdAnalytics.setAdPlayerInfo()"),e.fe&&e.fe.Ie(t))},this.reportAdMetric=function(){0===arguments.length?e.A&&e.A.error("AdAnalytics.reportAdMetric() : Need to report metric mandatory"):1===arguments.length?e.Ce(arguments[0]):2===arguments.length?e.Ce(arguments[0],arguments[1]):3===arguments.length?e.Ce(arguments[0],arguments[1],arguments[2]):4===arguments.length&&e.Ce(arguments[0],arguments[1],arguments[2],arguments[3])},this.setCallback=function(t){e.fe&&e.fe.Te(t)},this.reportAdFailed=function(t,n){e.fe?(O.Gt(n)>0&&e.setAdInfo(n),e.fe.le()?(e.A&&e.A.debug("AdAnalytics.reportAdFailed() : "+t),e.reportAdError(t,h.ErrorSeverity.FATAL),e.reportAdEnded()):(e.fe.de(e.ve),e.A&&e.A.debug("AdAnalytics.reportAdFailed() : "+t),n=new b(t,h.ErrorSeverity.FATAL),e.fe.Ee(!0,n))):e.A&&e.A.error("AdAnalytics.reportAdFailed() : "+C.o)},this.reportAdLoaded=function(t){e.A&&e.A.debug("AdAnalytics.reportAdLoaded()"),n(t)},this.reportAdStarted=function(t){e.A&&e.A.debug("AdAnalytics.reportAdStarted()"),n(t)},this.reportAdEnded=function(){e.fe?(e.A&&e.A.debug("AdAnalytics.reportAdEnded()"),e.fe.le()&&(e.fe.de(null),e.fe.Ee(!1))):e.A&&e.A.error("AdAnalytics.reportAdEnded() : "+C.u)},this.reportAdError=function(t,n){e.fe?(e.A&&e.A.debug("AdAnalytics.reportAdError() : "+t),t=new b(t,n),e.fe.Ei(t)):e.A&&e.A.error("AdAnalytics.reportAdError() : "+C.o)},this.reportAdPlayerEvent=function(t,n){if(O.bt(t))if(e.A&&e.A.debug("AdAnalytics.reportAdPlayerEvent()"),e.fe)switch(t){case C.Events.USER_WAIT_STARTED:case C.Events.BUMPER_VIDEO_STARTED:e.fe.Vt();break;case C.Events.USER_WAIT_ENDED:case C.Events.BUMPER_VIDEO_ENDED:e.fe.kt();break;default:e.fe.me(t,n)}else e.A&&e.A.error("AdAnalytics.reportAdPlayerEvent() : "+C.o);else e.A&&e.A.error("AdAnalytics.reportAdPlayerEvent(): eventType parameter must be a valid string.")},this.reportAdSkipped=function(){e.fe?(e.A&&e.A.debug("AdAnalytics.reportAdSkipped()"),e.reportAdPlayerEvent(C.Events.AD_SKIPPED),e.reportAdEnded()):e.A&&e.A.error("AdAnalytics.reportAdSkipped() : "+C.o)},this.release=function(){e.A&&e.A.debug("AdAnalytics.release()"),e.fe&&(e.fe.le()&&(e.fe.de(null),e.fe.Ee(!1)),e.fe.Te(null),e.fe.Ne(),e.fe=null),"undefined"!==typeof V.AdProxyMonitor&&e.Se&&(V.AdProxyMonitor.release(e.Se),e.Se=null)},this.setAdListener=function(t,n){t?("undefined"!==typeof n&&"undefined"!==typeof n.convivaModule?V.AdProxyMonitor=n.convivaModule.AdProxyMonitor:"undefined"!==typeof ConvivaModule&&(V.AdProxyMonitor=ConvivaModule.AdProxyMonitor),"undefined"===typeof V.AdProxyMonitor?e.A.error("AdAnalytics.setAdListener() : Include the missing Ads SDK Module"):!t&&e.Se?(V.AdProxyMonitor.release(e.Se),e.Se=null):t&&e.Se?(V.AdProxyMonitor.release(e.Se),e.A&&e.A.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.Se=V.AdProxyMonitor.initConvivaDropIn(t,n,this,V,e._)):t&&!e.Se&&(e.A&&e.A.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.Se=V.AdProxyMonitor.initConvivaDropIn(t,n,this,V,e._))):e.A.error("AdAnalytics.setAdListener() : Need to configure the adListener instance")},this.reportAdBreakStarted=function(t,n,i){e.ve?(e.A&&e.A.debug("AdAnalytics.reportAdBreakStarted()"),e.Oe=t,e.ye=n,e.ve.we(t,n,i)):e.A.error("AdAnalytics.reportAdBreakStarted() : "+C.o)},this.reportAdBreakEnded=function(){e.ve?(e.A&&e.A.debug("AdAnalytics.reportAdBreakEnded()"),e.Oe=null,e.ye=null,e.ve.De()):e.A.error("AdAnalytics.reportAdBreakEnded() : "+C.o)},this.getSessionId=function(){return e.ve?(e.A&&e.A.debug("VideoAnalytics.getSessionId()"),e.fe.Qt()):(e.A.error("VideoAnalytics.getSessionId() : "+C.o),C.NO_SESSION_KEY)},this.getClientId=function(){return e.ve?(e.A&&e.A.debug("VideoAnalytics.getClientId()"),e.fe.zt()):(e.A.error("VideoAnalytics.getClientId() : "+C.o),null)},this.getPlayerMonitor=function(){return e.ve},this.getAdPlayerMonitor=function(){return e.fe},this.getVideoAnalytics=function(){return e._e},this.getAdType=function(){return e.ve?e.ve.Oe:null},this.Pe=function(){return e.ve?e.ve.ye:null},l.prototype=Object.create(T.prototype),l.prototype.constructor=l},d=M.AdPlayerMonitorImpl=function(){var s=this;s.be=null,s.Le=null,function(t,n){v.call(this,t,n)}.apply(this,arguments),this.de=function(t){this.Me()!==t&&(this.Ve(),s.Le=t||null)},this.Me=function(){return s.Le},this.Ue=function(t){var n,i=this.Me(),e={};e.error=t,s.be&&(s.ke=s.be.getPlayerStateManager(!0),s.Fe(),s.ke.setClientMeasureInterface(this),n=null,i&&(n=i.Be()),s.He=s.be.createAdSession(n,s.wt,s.ke,!0,e),"undefined"!==typeof t)&&(s.Ge(),s.Ne())},d.prototype=Object.create(v.prototype),d.prototype.constructor=d},Y=V.Analytics={init:function(){if(this.ge)this.A.error("Client is already configured");else{if(arguments.length<=0)throw new Error("customerKey must be valid");var t=null,n=null,i=null;if("string"===typeof arguments[0]&&!O.bt(t=arguments[0]))throw new Error("customerKey must be valid");arguments.length>=2&&"object"===typeof arguments[1]&&(n=arguments[1]),arguments.length>=3&&"object"===typeof arguments[2]&&(i=arguments[2]);var t=new c(t),e=new u,i=(O.Gt(i)>0&&(i[C.GATEWAY_URL]&&(t.gatewayUrl=i[C.GATEWAY_URL]),i[C.LOG_LEVEL]>=0)&&(e.logLevel=i[C.LOG_LEVEL]),new V.Impl.Html5Logging),s=new V.Impl.Html5Storage,o=new V.Impl.Html5Http,r=new V.Impl.Html5Timer,a=new V.Impl.Html5Time;this.Mi||(this.Mi=new V.Impl.Html5Metadata),n&&(n[C.CallbackFunctions.CONSOLE_LOG]&&(i.consoleLog=n[C.CallbackFunctions.CONSOLE_LOG]),n[C.CallbackFunctions.MAKE_REQUEST]&&(o.makeRequest=n[C.CallbackFunctions.MAKE_REQUEST]),n[C.CallbackFunctions.SAVE_DATA]&&(s.saveData=n[C.CallbackFunctions.SAVE_DATA]),n[C.CallbackFunctions.LOAD_DATA]&&(s.loadData=n[C.CallbackFunctions.LOAD_DATA]),n[C.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(a.getEpochTimeMs=n[C.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),n[C.CallbackFunctions.CREATE_TIMER])&&(r.createTimer=n[C.CallbackFunctions.CREATE_TIMER]),this.Ui=new j(a,r,o,s,this.Mi,i),this._=new W(this.Ui,e),this._.lt("Analytics",t),this.ge=new h(t,this._,this.Ke,Y.version),this.A=this._.buildLogger(),this.A.setModuleName("Analytics"),this.ge.p=new X(this.ge,this),this.ge.p&&this.ge.p.je()}},release:function(){var t=0;if(this.qe){for(t=0;t<this.qe.length;t++){var n=this.qe[t];n&&(n.release(),n.A=null,n.Ae=null,this.qe.splice(t,1),t--)}this.qe=null}if(this.xe){for(t=0;t<this.xe.length;t++){var i=this.xe[t];i&&(i.release(),i.A=null,i.Ae=null,this.xe.splice(t,1),t--)}this.xe=null}this._&&(this._.release(),this._=null),this.ge&&(this.ge.release(),this.ge=null),this.ge=null,this.A=null,this.Ui=null,this.Mi=null,this.Ke=null},setUniqueIdentifier:function(t,n){if(!this.ge)throw new Error(C.i);this.ge.setUniqueIdentifier(t,n)},setUserPreferenceForDataCollection:function(t,n){if(!this.ge)throw new Error(C.i);this.ge.setUserPreferenceForDataCollection(t,n)},setUserPreferenceForDataDeletion:function(t){if(!this.ge)throw new Error(C.i);this.ge.setUserPreferenceForDataDeletion(t)},reportAppEvent:function(t,n){if(!this.ge)throw new Error(C.i);this.ge.sendCustomEvent(h.NO_SESSION_KEY,t,n)},reportAppBackgrounded:function(){if(!this.ge)throw new Error(C.i);this.ge.sendCustomEvent(h.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(!this.ge)throw new Error(C.i);this.ge.sendCustomEvent(h.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(t){if(!(t instanceof h))throw new Error(C.i);this.ge=t,this._=this.ge._,this.A=this._.buildLogger(),this.A.setModuleName("Analytics")},buildVideoAnalytics:function(){var t;if(this.ge)return t=new E(this.ge,this._),this.xe||(this.xe=[]),this.xe.push(t),t;throw new Error(C.i)},buildAdAnalytics:function(t){if(this.ge)return t=new l(this.ge,this._,t||null),this.qe||(this.qe=[]),this.qe.push(t),t;throw new Error(C.i)},setDeviceMetadata:function(t){var n,i,e;arguments.length<=0||0===O.Gt(t)?this.A.error("Device Metadata must be valid"):(this.Mi||(this.Mi=new V.Impl.Html5Metadata),t[C.DeviceMetadata.BRAND]&&(this.Mi.getDeviceBrand=function(){return t[C.DeviceMetadata.BRAND]}),t[C.DeviceMetadata.MANUFACTURER]&&(this.Mi.getDeviceManufacturer=function(){return t[C.DeviceMetadata.MANUFACTURER]}),t[C.DeviceMetadata.MODEL]&&(this.Mi.getDeviceModel=function(){return t[C.DeviceMetadata.MODEL]}),t[C.DeviceMetadata.TYPE]&&(this.Mi.getDeviceType=function(){return t[C.DeviceMetadata.TYPE]}),t[C.DeviceMetadata.VERSION]&&(this.Mi.getDeviceVersion=function(){return t[C.DeviceMetadata.VERSION]}),t[C.DeviceMetadata.OS_NAME]&&(this.Mi.getOperatingSystemName=function(){return t[C.DeviceMetadata.OS_NAME]}),t[C.DeviceMetadata.OS_VERSION]&&(this.Mi.getOperatingSystemVersion=function(){return t[C.DeviceMetadata.OS_VERSION]}),t[C.DeviceMetadata.CATEGORY]&&(this.Mi.getDeviceCategory=function(){return t[C.DeviceMetadata.CATEGORY]}),n=t[C.DeviceMetadata.SCREEN_RESOLUTION_WIDTH],O.Tt(n)&&(this.Mi.getScreenWidth=function(){return n.toString()}),i=t[C.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT],O.Tt(i)&&(this.Mi.getScreenHeight=function(){return i.toString()}),e=t[C.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR],O.Tt(e)&&(this.Mi.getScaleFactor=function(){return e.toString()}))},reportDeviceMetric:function(t,n){switch(this.Ke||(this.Ke={}),t){case C.Network.CONNECTION_TYPE:O.bt(n)?(this.Ke[t]=n,this.ge&&this.ge.$(this.Ke[C.Network.CONNECTION_TYPE])):this.A.error("reportDeviceMetric() : Connection Type is not a valid string");break;case C.Network.LINK_ENCRYPTION:O.bt(n)?(this.Ke[t]=n,this.ge&&this.ge.it(this.Ke[C.Network.LINK_ENCRYPTION])):this.A.error("reportDeviceMetric() : Link Encryption is not a valid string");break;case C.Network.SIGNAL_STRENGTH:var i=parseInt(n,10);O.Tt(i)?a.DEFAULT_SIGNAL_STRENGTH===i?this.A.error("reportDeviceMetric() : DEFAULT_SIGNAL_STRENGTH shouldn't be reported"):(this.Ke[t]=i,this.ge&&this.ge.ot(i)):this.A.error("reportDeviceMetric() : Signal Strength is not a number");break;default:this.A.error("reportDeviceMetric() : unknown device metric = "+t)}},version:"4.7.16"},T=M.AnalyticsImpl=function(){var f=this;function l(){var t=!!f.fe,n=f.getAdType(),i=f.Pe();return n===C.AdType.SERVER_SIDE&&i===C.AdPlayer.CONTENT?T.Ye.We:n!==C.AdType.SERVER_SIDE||i!==C.AdPlayer.SEPARATE?n===C.AdType.CLIENT_SIDE&&i===C.AdPlayer.CONTENT||(n===C.AdType.CLIENT_SIDE&&C.AdPlayer.SEPARATE,t)?T.Ye.Xe:T.Ye.Je:void 0}function d(t,n,i){t=parseInt(t,10),n=parseInt(n,10);isNaN(t)&&isNaN(n)?f.A.error("reportPlaybackResolution() : width and height are not numbers"):(isNaN(t)&&f.A.warning("reportPlaybackResolution() : width is not a number"),isNaN(n)&&f.A.warning("reportPlaybackResolution() : height is not a number"),!f.fe||i!==T.Ye.Xe&&i!==T.Ye.We||f.fe.Qe(t,n),!f.ve||i!==T.Ye.Je&&i!==T.Ye.We||f.ve.Qe(t,n))}function v(t,n){a.pi(t)?(!f.fe||n!==T.Ye.Xe&&n!==T.Ye.We||f.fe.ze(t),(f.ve&&n===T.Ye.Je||n===T.Ye.We)&&f.ve.ze(t)):f.A.error("reportPlayerState() : Player State is not valid")}function E(t,n){t=parseInt(t,10);isNaN(t)?f.A.error("reportPlayerPlayHeadTime() : playheadtime is not a number"):(!f.fe||n!==T.Ye.Xe&&n!==T.Ye.We||f.fe.Ze(t),!f.ve||n!==T.Ye.Je&&n!==T.Ye.We||f.ve.Ze(t))}function p(t,n){t=parseInt(t,10);isNaN(t)?f.A.error("reportPlayerBufferLength() : buffer length is not a number"):(!f.fe||n!==T.Ye.Xe&&n!==T.Ye.We||f.fe.$e(t),!f.ve||n!==T.Ye.Je&&n!==T.Ye.We||f.ve.$e(t))}function g(t,n){t=parseInt(t,10);!f.fe||n!==T.Ye.Xe&&n!==T.Ye.We||f.fe.ts(!0,t),!f.ve||n!==T.Ye.Je&&n!==T.Ye.We||f.ve.ts(!0,t)}function A(t){!f.fe||t!==T.Ye.Xe&&t!==T.Ye.We||f.fe.ts(!1,-1),!f.ve||t!==T.Ye.Je&&t!==T.Ye.We||f.ve.ts(!1,-1)}function y(t,n){t=parseInt(t,10);isNaN(t)?f.A.error("reportPlayerBitrate() : bitrate is not a number"):(!f.fe||n!==T.Ye.Xe&&n!==T.Ye.We||f.fe.ns(t),!f.ve||n!==T.Ye.Je&&n!==T.Ye.We||f.ve.ns(t))}function S(t,n){t=parseInt(t,10);isNaN(t)?f.A.error("reportPlayerAvgBitrate() : avgBitrate is not a number"):(!f.fe||n!==T.Ye.Xe&&n!==T.Ye.We||f.fe.es(t),!f.ve||n!==T.Ye.Je&&n!==T.Ye.We||f.ve.es(t))}function _(t,n){t=parseInt(t,10);isNaN(t)?f.A.error("reportPlayerRenderedFrameRate() : rendered framerate is not a number"):(!f.fe||n!==T.Ye.Xe&&n!==T.Ye.We||f.fe.ss(t),!f.ve||n!==T.Ye.Je&&n!==T.Ye.We||f.ve.ss(t))}function R(t,n){var i;O.bt(t)?(i=f.ve.hi(),O.bt(i)&&"off"!==i&&"off"!==t&&I("off",n),!f.fe||n!==T.Ye.Xe&&n!==T.Ye.We||f.fe.os(t),!f.ve||n!==T.Ye.Je&&n!==T.Ye.We||f.ve.os(t)):f.A.error("reportSubtitleLang() : subtitleLang is not a valid string")}function I(t,n){var i;O.bt(t)?(i=f.ve.ai(),O.bt(i)&&"off"!==i&&"off"!==t&&R("off",n),!f.fe||n!==T.Ye.Xe&&n!==T.Ye.We||f.fe.rs(t),!f.ve||n!==T.Ye.Je&&n!==T.Ye.We||f.ve.rs(t)):f.A.error("reportCcLang() : ccLang is not a valid string")}!function(){}.apply(this,arguments),this.Ce=function(t,n,i,e){switch(f.A&&t!==C.Playback.PLAY_HEAD_TIME&&t!==C.Playback.BUFFER_LENGTH&&f.A.debug("reportMetric() "+t+" "+(void 0!==n&&"CONVIVA"!==n?n:"")+" "+(void 0!==i&&"CONVIVA"!==i&&i!==T.Ye.Xe?i:"")+" "+(void 0!==e&&"CONVIVA"!==e&&e!==T.Ye.Xe?e:"")),t){case C.Playback.BITRATE:"CONVIVA"===i?f.A.info("Bitrate change requested from the Conviva Library:"):f.A.info("Bitrate change requested from the application:"),e===T.Ye.Xe?y(n,T.Ye.Xe):y(n,l());break;case C.Playback.AVG_BITRATE:"CONVIVA"===i?f.A.info("Average Bitrate change requested from the Conviva Library:"):f.A.info("Average Bitrate change requested from the application:"),e===T.Ye.Xe?S(n,T.Ye.Xe):S(n,l());break;case C.Playback.PLAY_HEAD_TIME:e===T.Ye.Xe?E(n,T.Ye.Xe):E(n,l());break;case C.Playback.RESOLUTION:e===T.Ye.Xe?d(n,i,T.Ye.Xe):d(n,i,l());break;case C.Playback.BUFFER_LENGTH:e===T.Ye.Xe?p(n,T.Ye.Xe):p(n,l());break;case C.Playback.PLAYER_STATE:e===T.Ye.Xe?v(n,T.Ye.Xe):v(n,l());break;case C.Playback.RENDERED_FRAMERATE:e===T.Ye.Xe?_(n,T.Ye.Xe):_(n,l());break;case C.Playback.SEEK_STARTED:arguments.length>=2&&"CONVIVA"!==n?g(n,l()):i===T.Ye.Xe?g(-1,T.Ye.Xe):g(-1,l());break;case C.Playback.SEEK_ENDED:i===T.Ye.Xe?A(T.Ye.Xe):A(l());break;case C.Playback.CDN_IP:"CONVIVA"===i?f.A.info("CDN Server IP change requested from the Conviva Library:"):f.A.info("CDN Server IP change requested from the application:"),h=n,c=l(),O.bt(h)?(!f.fe||c!==T.Ye.Xe&&c!==T.Ye.We||f.fe.us(h),!f.ve||c!==T.Ye.Je&&c!==T.Ye.We||f.ve.us(h)):f.A.error("reportCDNServerIp() : CDNServerIP is not a valid string");break;case C.Playback.DROPPED_FRAMES_TOTAL:"CONVIVA"===i?f.A.info("Dropped frames total change requested from the Conviva Library:"):f.A.info("Dropped frames total change requested from the application:");c=n,h=l();c=parseInt(c,10),isNaN(c)?f.A.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!f.fe||h!==T.Ye.Xe&&h!==T.Ye.We||f.fe.hs(c),!f.ve||h!==T.Ye.Je&&h!==T.Ye.We||f.ve.hs(c));break;case C.Playback.DROPPED_FRAMES_COUNT:"CONVIVA"===i?f.A.info("Dropped frames count change requested from the Conviva Library:"):f.A.info("Dropped frames count change requested from the application:");var s=n,o=l();s=parseInt(s,10),isNaN(s)?f.A.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!f.fe||o!==T.Ye.Xe&&o!==T.Ye.We||f.fe.cs(s),!f.ve||o!==T.Ye.Je&&o!==T.Ye.We||f.ve.cs(s));break;case C.Playback.AUDIO_LANGUAGE:"CONVIVA"===i?f.A.info("Audio Language change requested from Conviva Library"):f.A.info("Audio Language change requested from Application"),o=n,s=l(),O.bt(o)?(!f.fe||s!==T.Ye.Xe&&s!==T.Ye.We||f.fe.fs(o),!f.ve||s!==T.Ye.Je&&s!==T.Ye.We||f.ve.fs(o)):f.A.error("reportAudioLang() : audioLang is not a valid string");break;case C.Playback.SUBTITLES_LANGUAGE:"CONVIVA"===i?f.A.info("Subtitle Language change requested from Conviva Library"):f.A.info("Subtitle Language change requested from Application"),R(n,l());break;case C.Playback.CLOSED_CAPTIONS_LANGUAGE:"CONVIVA"===i?f.A.info("Caption Language change requested from Conviva Library"):f.A.info("Caption Language change requested from Application"),I(n,l());break;default:r=t,a=n,u=l(),O.bt(r)&&a?(!f.fe||u!==T.Ye.Xe&&u!==T.Ye.We||f.fe.Zt(r,a),!f.ve||u!==T.Ye.Je&&u!==T.Ye.We||f.ve.Zt(r,a)):f.A.error("reportMetric() : Metric key/value should be a proper value")}var r,a,u,h,c}},M.AnalyticsImpl.Ye={Xe:1,Je:2,We:3},X=M.AppAnalyticsHandler=function(){var r=this;r.ge=null,r.ls=null,r.ds=null,r.vs=null,r.Ot=null,function(t,n){r.ge=t,r.ls=n,"undefined"!==typeof document&&document&&"function"===typeof document.createEvent&&(r.ds=document.createEvent("HTMLEvents"),r.ds.initEvent(C.APP_TRACKER_EVENT.TYPE,!0,!0))}.apply(this,arguments),this.je=function(){r.Es(C.APP_TRACKER_EVENT.INIT)},this.ps=function(){r.Es(C.APP_TRACKER_EVENT.VIDEO_ATTEMPT)},this.gs=function(){r.Es(C.APP_TRACKER_EVENT.VIDEO_END),r.Ot=null},this.As=function(t){r.Es(C.APP_TRACKER_EVENT.VIDEO_PLAY,t)},this.ys=function(t){r.Es(C.APP_TRACKER_EVENT.VIDEO_PAUSE,t)},this.Ss=function(t){r.Es(C.APP_TRACKER_EVENT.VIDEO_ERROR,t)},this._s=function(t){r.Es(C.APP_TRACKER_EVENT.VIDEO_BUFFERING,t)},this.Rs=function(t){r.Es(C.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH,t)},this.Is=function(t){r.Es(C.APP_TRACKER_EVENT.VIDEO_METADATA_CHANGE,t)},this.Cs=function(t){t={cen:t.name,ced:t.data};r.Es(C.APP_TRACKER_EVENT.VIDEO_CUSTOM_EVENT,t)},this.Ts=function(t){t={cen:t.name,ced:t.data};r.Es(C.APP_TRACKER_EVENT.SDK_CUSTOM_EVENT,t)},this.Ns=function(t){r.Es(C.APP_TRACKER_EVENT.AD_BREAK_START,{cen:"PodStart",ced:t})},this.Os=function(t){r.Es(C.APP_TRACKER_EVENT.AD_BREAK_END,{cen:"PodEnd",ced:t})},this.Es=function(t,n){try{if(r.ds){if(r.ws(),r.ds.name=r.vs.name=t,r.ds.iid=r.vs.iid=r.ge.getConfig().getIid(),r.ds.clid=r.vs.clid=r.ge.getConfig().getClientId(),r.Ot){var i,e=r.Ot;if(e.Ds()?(i=n?n[I.Ps]:void 0,r.ds.sid=r.vs.sid=e.bs.Qt(),r.ds.sst=r.vs.sst=e.Ls,r.ds.url=r.vs.url=i&&i.url?i.url:e.In,r.ds.st=r.vs.st=e.Ms(),r.ds.an=r.vs.an=i&&i.an?i.an:e.An,r.ds.pn=r.vs.pn=i&&i.pn?i.pn:e.Vs,r.ds.tags=r.vs.tags=JSON.stringify(e.wt.yn),r.ds.vid=r.vs.vid=i&&i.vid?i.vid:e._n,e.Us>=0&&(r.ds.cl=r.vs.cl=i&&i.cl?i.cl:e.Us),r.ds.lv=r.vs.lv=i&&i.lv?i.lv:e.ks,r.ds.fw=r.vs.fw=e.Fs(),r.ds.fwv=r.vs.fwv=e.Bs(),e.ke&&(r.ds.mn=r.vs.mn=e.ke.$n(),r.ds.mv=r.vs.mv=e.ke.ti()),(e.Dn>=0||i&&i.br>=0)&&t===C.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH&&(r.ds.br=r.vs.br=i&&i.br?i.br:e.Dn),(e.Pn>=0||i&&i.avgbr>=0)&&t===C.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH&&(r.ds.avgbr=r.vs.avgbr=i&&i.avgbr?i.avgbr:e.Pn)):e.Hs()&&(r.ds.sid=r.vs.sid=e.bs.Qt(),r.ds.sst=r.vs.sst=e.Ls,r.ds.st=r.vs.st=e.Ms(),r.ds.mn=r.vs.mn=e.kn,r.ds.mv=r.vs.mv=e.Fn),n&&(t===C.APP_TRACKER_EVENT.VIDEO_BITRATE_SWITCH||t===C.APP_TRACKER_EVENT.VIDEO_ERROR||t===C.APP_TRACKER_EVENT.VIDEO_METADATA_CHANGE||t===C.APP_TRACKER_EVENT.VIDEO_CUSTOM_EVENT||t===C.APP_TRACKER_EVENT.SDK_CUSTOM_EVENT||t===C.APP_TRACKER_EVENT.AD_BREAK_START||t===C.APP_TRACKER_EVENT.AD_BREAK_END))for(var s=Object.keys(n),o=0;o<s.length;o++)"object"===typeof n[s[o]]?r.ds[s[o]]=r.vs[s[o]]=JSON.stringify(n[s[o]]):r.ds[s[o]]=r.vs[s[o]]=n[s[o]]}"undefined"!==typeof document&&document&&"function"===typeof document.dispatchEvent&&document.dispatchEvent(r.ds)}}catch(t){}},this.ws=function(){if(null!==r.vs)for(var t=Object.keys(r.vs),n=0;n<t.length;n++)delete r.ds[t[n]];r.vs={}},this.Gs=function(t,n,i){try{(r.Ot=i).Ds()?t===I.Ks?n[I.Ps][I.js]?n[I.Ps][I.js]===I.qs?r.As(n):n[I.Ps][I.js]===I.xs?r._s(n):n[I.Ps][I.js]===I.Ws&&r.ys(n):n[I.Ps][I.Ys]||n[I.Ps][I.Xs]?r.Rs(n):r.Is(n):t===I.Js?r.Ss({err:n[I.Qs],ft:n[I.zs]}):t===I.Zs?r.gs():t===C.APP_TRACKER_EVENT.VIDEO_ATTEMPT?r.ps():t===I.$s&&(n[I.no]===C.Events.POD_START?r.Ns(n[I.io]):n[I.no]===C.Events.POD_END?r.Os(n[I.io]):r.Cs({name:n[I.no],data:n[I.io]})):i.Hs()&&t===I.$s&&r.Ts({name:n[I.no],data:n[I.io]})}catch(t){}}},J=M.PlayerMonitor=function(){var e=this;this.eo=null,this.so=null,this.wt=null,this.oo=null,this.bn=a.PlayerState.UNKNOWN,this.ro=-1,this.ao=-1,this.Kn=[],this.uo=null,this.ho=null,this.co=-2,this.fo=-2,this.Mn=-1,this.U=a.DEFAULT_SIGNAL_STRENGTH,this.lo=null,this.mi=null,this.V=null,this.M=null,this.Ae=null,this.do=null,this.vo=null,this.Eo=null,this.po=null,this.Oe=null,this.ye=null,this.jn=null,this.qn=null,this.xn=null,function(t){e.Ae=t}.apply(this,arguments),this.Ao=function(){return e.bn},this.ze=function(t){e.bn!==t&&(e.Ve(),e.bn=t,e.yo())},this.So=function(){return e._o},this.Ro=function(){return e.Io},this.ts=function(t,n){e.Ve(),e._o=t,e.Io=n,e.Co()},this.To=function(){return e.ro},this.Ze=function(t){e.ro=t},this.mo=function(){return e.ao},this.$e=function(t){e.ao=t},this.pe=function(){return e.co},this.ns=function(t){e.co!==t&&(e.co=t,e.yo())},this.No=function(){return e.fo},this.es=function(t){e.fo!==t&&(e.fo=t,e.yo())},this.Oo=function(){return e.Mn},this.ss=function(t){e.Mn=t},this.wo=function(){return e.lo},this.us=function(t){e.lo=t,e.yo()},this.Ti=function(){return e.mi},this.hs=function(t){e.mi=t,e.yo()},this.cs=function(t){e.Do(t)},this.Po=function(){return e.U},this.oi=function(){return e.jn},this.ai=function(){return e.qn},this.hi=function(){return e.xn},this.fs=function(t){e.jn!==t&&(e.jn=t,e.yo())},this.os=function(t){e.qn!==t&&(e.qn=t,e.yo())},this.rs=function(t){e.xn!==t&&(e.xn=t,e.yo())},this.bo=function(){return e.Lo},this.Mo=function(){return e.Vo},this.Qe=function(t,n){n<0&&(n=0),e.Lo===(t=t<0?0:t)&&e.Vo===n||(e.Lo=t,e.Vo=n,e.yo())},this.Uo=function(){return e.so},this.ko=function(){e.Uo()&&(e.wt=new f,e.oo={},e.vo={},e.Fo())},this.Bo=function(t){(e.so||t)&&(this.Ve(),e.so&&(e.so=null,e.ko()),t)&&(e.so=O.Ho(e.so,t),e.ko())},this.Ie=function(t){if(t)if(e.wt){var n,i=!1;for(n in t)if(e.wt[n]!==t[n]){i=!0;break}i&&(e.Ve(),e.so=O.Ho(t),e.Fo())}else e.Bo(t)},this.Te=function(t){t?e.Eo!==t&&(e.Eo=t,e.Go()):(e.Eo=null,e.Ge())},this.Ve=function(){e.Ko||e.Eo&&(e.Ko=!0,e.Eo(),e.Ko=!1)},this.le=function(){return e.eo},this.Ee=function(t,n){e.eo!==t&&(e.Ve(),e.eo&&(e.jo(),e.Ge(),e.Ne()),e.eo=t,e.eo)&&e.Ue(n)},this.qo=function(){return e.uo},this.xo=function(){return e.ho||null},this.Wo=function(){return e.Kn},this.Yo=function(){e.Kn=[]},this.Ei=function(t){this.Ve(),e.Kn.push(t),e.Ii()},this.me=function(t,n){e.Ve(),e.uo=t,e.ho=n,e.Xo()},this.Jo=function(){e.Ve()},this.Go=function(){e.Ge(),e.do=e.Ae.create(e.Jo,1e3,"PlayerMonitor.update")},this.Ge=function(){e.do&&(e.do(),e.do=null)},this.we=function(t,n,i){e.po=i,e.Oe=t,e.Qo(),e.ye=n,e.Oe&&C.AdType.CLIENT_SIDE===e.Oe&&(e.bn=C.PlayerState.UNKNOWN,e.zo(e.Oe,n,i?i[C.POD_POSITION]:null))},this.De=function(){e.Oe&&C.AdType.CLIENT_SIDE===e.Oe&&(e.Zo(),e.bn=C.PlayerState.UNKNOWN),e.$o(),e.Oe=null,e.ye=null},this.tr=function(){return e.po},this.nr=function(){return e.Oe},this.getContentMetadata=function(){return this.wt},this.Ne=function(){this.eo=null,this.so=null,this.wt=null,this.oo=null,this.bn=a.PlayerState.UNKNOWN,this.ro=-1,this.ao=-1,this.Kn=[],this.uo=null,this.ho=null,this.co=-2,this.fo=-2,this.Mn=-1,this.U=a.DEFAULT_SIGNAL_STRENGTH,this.lo=null,this.mi=null,this.V=null,this.M=null,this.Ae=null,this.do=null,this.vo=null,this.Eo=null,this.po=null,this.Oe=null,this.ye=null,this.jn=null,this.qn=null,this.xn=null,e.ke=null,e.He=h.NO_SESSION_KEY}},v=M.PlayerMonitorImpl=function(){var o=this;o.be=null,o.ke=null,o.He=h.NO_SESSION_KEY,function(t,n){J.call(this,n),o.be=t}.apply(this,arguments),this.getPHT=function(){return o.To()},this.getBufferLength=function(){return o.mo()},this.getRenderedFrameRate=function(){return o.Oo()},this.getSignalStrength=function(){return o.Po()},this.Co=function(){o.ke&&o._ContentSessionKey!==h.NO_SESSION_KEY&&(o.So()?o.ke.setPlayerSeekStart(o.Ro()):o.ke.setPlayerSeekEnd())},this.yo=function(){o.ke&&(o.ke.setPlayerState(o.Ao()),o.pe()>0&&o.ke.setBitrateKbps(o.pe()),o.No()>0&&o.ke.setAvgBitrateKbps(o.No()),o.bo()>0&&o.ke.setVideoResolutionWidth(o.bo()),o.Mo()>0&&o.ke.setVideoResolutionHeight(o.Mo()),o.wo()&&o.ke.setCDNServerIP(o.wo()),O.Tt(o.Ti())&&o.ke.setDroppedFramesTotal(o.Ti()),O.bt(o.oi())&&o.ke.setAudioLang(o.oi()),O.bt(o.ai())&&o.ke.setSubtitleLang(o.ai()),O.bt(o.hi()))&&o.ke.setCcLang(o.hi())},this.Mt=function(){o.He!==h.NO_SESSION_KEY&&o.be&&o.be.updateContentMetadata(o.He,o.wt)},this.Fe=function(){if(o.ke){o.vo&&O.Gt(o.vo)>0&&(o.vo[C.MODULE_NAME]&&o.vo[C.MODULE_VERSION]&&(t=o.vo[C.MODULE_NAME],n=o.vo[C.MODULE_VERSION],O.bt(t))&&O.bt(n)&&o.ke.setModuleNameAndVersion(t,n),o.vo[C.FRAMEWORK_NAME]&&(t=o.vo[C.FRAMEWORK_NAME],O.bt(t))&&o.ke.setPlayerType(t),o.vo[C.FRAMEWORK_VERSION])&&(n=o.vo[C.FRAMEWORK_VERSION],O.bt(n))&&o.ke.setPlayerVersion(n);var t,n,i=o.Wo();o.Yo();for(var e=0;e<i.length;e++){var s=i[e];o.ke.Ei(s)}}},this.Zo=function(){o.ke&&o.He!==h.NO_SESSION_KEY&&(o.yo(),this.ir())},this.kt=function(){o.ke&&o.He!==h.NO_SESSION_KEY&&(o.yo(),o.be.Ft(o.He))},this.ir=function(){o.be&&o.He!==C.NO_SESSION_KEY&&o.be.adEnd(o.He)},this.zo=function(t,n,i){var e;o.ke&&o.He!==C.NO_SESSION_KEY&&(e=null,C.AdType.CLIENT_SIDE===t?e=h.AdStream.SEPARATE:C.AdType.SERVER_SIDE===t&&(e=h.AdStream.CONTENT),o.er(e,n,i))},this.Vt=function(){o.ke&&o.He!==C.NO_SESSION_KEY&&o.be.Ut(o.He)},this.er=function(t,n,i){o.be&&o.He!==C.NO_SESSION_KEY&&o.be.adStart(o.He,t,n,i)},this.Ue=function(){if(o.be){o.ke=o.be.getPlayerStateManager(!0),o.Fe(),o.ke.setClientMeasureInterface(this);try{var t;o.wt&&o.wt.custom&&!o.wt.custom[C.UTM_TRACKING_URL]&&(Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var e,s=[],o=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)r in n&&(e=n[r],t.call(o,e,r,n))&&s.push(e);return s}),""!==(t=O.sr().split("?").join("").split("&").filter(function(t){return 2===t.split("=").length&&t.split("=")[0].toLowerCase().indexOf("utm_")>=0}).join("&")))&&(o.wt.custom[C.UTM_TRACKING_URL]=t)}catch(t){o.A.error("PlayerMonitorImpl _createSession : "+t)}o.He=o.be.createSession(o.wt,o.ke,!0)}},this.jo=function(){o.be&&(o.ke&&(o.ke.setPlayerState(C.PlayerState.STOPPED),o.ke=null),o.He!==C.NO_SESSION_KEY)&&(o.be.cleanupSession(o.He),o.He=C.NO_SESSION_KEY)},this.Ii=function(){if(o.be&&o.He!==h.NO_SESSION_KEY){var t=o.Wo();o.Yo();for(var n=0;n<t.length;n++){var i=t[n];o.be.reportError(o.He,i.rr(),i.ar())}}},this.Xo=function(){o.He!==h.NO_SESSION_KEY&&o.be&&o.be.sendCustomEvent(o.He,o.qo(),o.xo())},this.Fo=function(){var t,n=o.Uo(),i=!1,e=!1;for(t in n){var s=n[t];if(O.bt(t)&&null!==s&&void 0!==s)switch(t){case C.STREAM_URL:e=!0,o.wt.streamUrl=s;break;case C.ASSET_NAME:e=!0,o.wt.assetName=s;break;case C.DEFAULT_RESOURCE:e=!0,o.wt.defaultResource=s;break;case C.VIEWER_ID:e=!0,o.wt.viewerId=s;break;case C.PLAYER_NAME:e=!0,o.wt.applicationName=s;break;case C.DURATION:e=!0,o.wt.duration=s;break;case C.IS_LIVE:e=!0,o.wt.streamType=s;break;case C.ENCODED_FRAMERATE:e=!0,o.wt.encodedFrameRate=s;break;case C.MODULE_NAME:case C.MODULE_VERSION:case C.FRAMEWORK_NAME:case C.FRAMEWORK_VERSION:i=!0,o.vo[t]=s;break;default:C.APPLICATION_VERSION;e=!0,o.wt.custom[t]=s}}i&&this.Fe(),e&&this.Mt()},this.Qo=function(){this.ur(C.Events.POD_START)},this.$o=function(){this.ur(C.Events.POD_END)},this.ur=function(t){var n,i,e;o.be&&o.He!==C.NO_SESSION_KEY&&(n={},(e=this.tr())&&((i=e[C.POD_POSITION])&&(n[C.POD_POSITION]=i),(i=e[C.POD_INDEX])&&(n[C.POD_INDEX]=i+""),t===C.Events.POD_START)&&(i=e[C.POD_DURATION])&&(n[C.POD_DURATION]=i+""),(e=this.nr())&&(n[C.AD_TYPE]=e),o.be.sendCustomEvent(o.He,t,n))},this.Do=function(t){o.ke.setDroppedFramesCount(t)},this.hr=function(t){this.He===C.NO_SESSION_KEY&&t!==C.NO_SESSION_KEY&&(this.He=t)},this.Be=function(){return this.He},this.Qt=function(){return o.be.getSessionId(this.He)},this.zt=function(){return o.be.getClientId(this.He)},this.Zt=function(t,n){o.be.Zt(this.He,t,n)},v.prototype=Object.create(J.prototype),v.prototype.constructor=v},V.Impl=V.Impl||{},V.Impl.Html5Http=function(){!function(){}.apply(this,arguments),this.makeRequest=function(){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(t,n,i,e,s,o){var r=new XMLHttpRequest;return r.open(t,n,!0),e&&r.overrideMimeType&&(r.overrideMimeType=e),e&&r.setRequestHeader&&r.setRequestHeader("Content-Type",e),s>0&&(r.timeout=s,r.ontimeout=function(){r.ontimeout=r.onreadystatechange=null,o&&o(!1,"timeout after "+s+" ms")}),r.onreadystatechange=function(){4===r.readyState&&(r.ontimeout=r.onreadystatechange=null,200===r.status?o&&o(!0,r.responseText):o&&o(!1,"http status "+r.status))},r.send(i),null},this.release=function(){}},V.Impl=V.Impl||{},V.Impl.Html5Logging=function(){!function(){}.apply(this,arguments),this.consoleLog=function(t,n){"undefined"!==typeof console&&(console.log&&n===u.LogLevel.DEBUG||n===u.LogLevel.INFO?console.log(t):console.warn&&n===u.LogLevel.WARNING?console.warn(t):console.error&&n===u.LogLevel.ERROR&&console.error(t))},this.release=function(){}},V.Impl=V.Impl||{},V.Impl.Html5Metadata=function(){!function(){}.apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!==typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},V.Impl=V.Impl||{},V.Impl.Html5Storage=function(){!function(){}.apply(this,arguments),this.saveData=function(t,n,i,e){t=t+"."+n;try{localStorage.setItem(t,i),e(!0,null)}catch(t){e(!1,t.toString())}},this.loadData=function(t,n,i){t=t+"."+n;try{i(!0,localStorage.getItem(t))}catch(t){i(!1,t.toString())}},this.release=function(){}},V.Impl=V.Impl||{},V.Impl.Html5Time=function(){!function(){}.apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},V.Impl=V.Impl||{},V.Impl.Html5Timer=function(){!function(){}.apply(this,arguments),this.createTimer=function(t,n){var i=setInterval(t,n);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}},E=M.VideoAnalytics=function(){var s=this;s.ge=null,s.A=null,s._=null,s.Ae=null,s.ve=null,s.Se=null,this.release=function(){s.A&&s.A.debug("VideoAnalytics.release()"),s.ve&&s.ve.le()&&s.ve.Ee(!1),"undefined"!==typeof V.ProxyMonitor&&s.Se&&(V.ProxyMonitor.release(s.Se),s.Se=null),s.ve&&(s.ve.Te(null),s.ve.Ne(),s.ve=null),s.Ae=null},function(t,n){s.ge=t,s._=n,s.Ae=n.buildTimer(C.version),s.A=n.buildLogger(),s.A.setModuleName("VideoAnalytics"),s.ve=new v(s.ge,s.Ae),T.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(t){s.A&&s.A.debug("VideoAnalytics.reportPlaybackRequested()"),s.ve?(O.Gt(t)>0&&s.setContentInfo(t),s.ve.le()||s.ve.Ee(!0)):s.A.error("VideoAnalytics.reportPlaybackRequested() : "+C.v)},this.reportPlaybackEnded=function(){s.A&&s.A.debug("VideoAnalytics.reportPlaybackEnded()"),s.ve?s.ve.le()&&(s.ve.Ee(!1),"undefined"!==typeof V.ProxyMonitor&&s.Se&&(V.ProxyMonitor.release(s.Se),s.Se=null),s.ve.Te(null)):s.A.error("VideoAnalytics.reportPlaybackEnded() : "+C.v)},this.reportPlaybackFailed=function(t,n){s.ve?(O.Gt(n)>0&&s.setContentInfo(n),s.ve.le()||s.ve.Ee(!0),s.A&&s.A.debug("VideoAnalytics.reportPlaybackFailed()"),s.reportPlaybackError(t,h.ErrorSeverity.FATAL),s.reportPlaybackEnded()):s.A.error("VideoAnalytics.reportPlaybackFailed() : "+C.o)},this.setContentInfo=function(t){O.Gt(t)<=0?s.A.error("VideoAnalytics.setContentInfo() : Content Info is not set"):s.ve?(s.A&&s.A.debug("VideoAnalytics.setContentInfo()"),s.ve.Ie(t)):s.A.error("VideoAnalytics.setContentInfo() : "+C.o)},this.setPlayerInfo=function(t){O.Gt(t)<=0?s.A.error("VideoAnalytics.setPlayerInfo() : Player Info is not set"):s.ve?(s.A&&s.A.debug("VideoAnalytics.setPlayerInfo()"),s.ve.Ie(t)):s.A.error("VideoAnalytics.setPlayerInfo() : "+C.o)},this.reportPlaybackMetric=function(){0===arguments.length?s.A.error("VideoAnalytics.reportPlaybackMetric() : Need to report metric mandatory"):1===arguments.length?s.Ce(arguments[0]):2===arguments.length?s.Ce(arguments[0],arguments[1]):3===arguments.length?s.Ce(arguments[0],arguments[1],arguments[2]):4===arguments.length&&s.Ce(arguments[0],arguments[1],arguments[2],arguments[3])},this.reportPlaybackError=function(t,n){s.ve?O.bt(t)?(s.A&&s.A.debug("VideoAnalytics.reportPlaybackError()"),t=new b(t,n),s.ve.Ei(t)):s.A.error("VideoAnalytics.reportPlaybackError() : errorMessage need to be valid string"):s.A.error("VideoAnalytics.reportPlaybackError() : "+C.o)},this.reportPlaybackEvent=function(t,n){if(O.bt(t))if(s.ve){if(s.A&&s.A.debug("VideoAnalytics.reportPlaybackEvent()"),s.ve)switch(t){case C.Events.USER_WAIT_STARTED:case C.Events.BUMPER_VIDEO_STARTED:s.ve.Vt();break;case C.Events.USER_WAIT_ENDED:case C.Events.BUMPER_VIDEO_ENDED:s.ve.kt();break;default:s.ve.me(t,n)}}else s.A.error("VideoAnalytics.reportPlaybackEvent() : "+C.o);else s.A.error("VideoAnalytics.reportPlaybackEvent(): eventType parameter must be a valid string.")},this.setCallback=function(t){s.A&&s.A.debug("setCallback()"),s.ve&&s.ve.Te(t)},this.reportAdBreakStarted=function(t,n,i){s.ve?(s.A&&s.A.debug("VideoAnalytics.reportAdBreakStarted()"),s.ve.we(t,n,i)):s.A.error("VideoAnalytics.reportAdBreakStarted() : "+C.o)},this.reportAdBreakEnded=function(){s.ve?(s.A&&s.A.debug("VideoAnalytics.reportAdBreakEnded()"),s.ve.De()):s.A.error("VideoAnalytics.reportAdBreakEnded() : "+C.o)},this.setPlayer=function(t,n){var i,e;void 0===t?s.A.error("VideoAnalytics.setPlayer() : Need to configure the Player"):(n&&(i=n[C.CONVIVA_MODULE],e=n[C.MEDIA_ELEMENT]),"undefined"!==typeof i?V.ProxyMonitor=i.ProxyMonitor:"undefined"!==typeof ConvivaModule&&(V.ProxyMonitor=ConvivaModule.ProxyMonitor),"undefined"===typeof V.ProxyMonitor?s.A.error("VideoAnalytics.setPlayer() : Include the missing Player Module"):(s.A&&s.A.debug("VideoAnalytics.setPlayer()"),!t&&s.Se?(V.ProxyMonitor.release(s.Se),s.Se=null):t?(s.Se&&V.ProxyMonitor.release(s.Se),s.A&&s.A.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),s.Se="undefined"!==typeof e?V.ProxyMonitor.initConvivaDropIn(t,e,s._,this,V):V.ProxyMonitor.initConvivaDropIn(t,s._,this,V)):"undefined"!==typeof e&&(s.Se=V.ProxyMonitor.initConvivaDropIn(t,e,s._,this,V))))},this.setAdAnalytics=function(t){t?s.getAdType()&&(s.getAdType()===C.AdType.SERVER_SIDE?s.fe=t.getAdPlayerMonitor():s.getAdType()===C.AdType.CLIENT_SIDE&&s.A&&s.A.error("VideoAnalytics.setAdAnalytics() : API is not meant for Client Side Ads")):s.fe=null},this.configureExistingSession=function(t){t===C.NO_SESSION_KEY?s.A.error("VideoAnalytics.configureExistingSession() : Invalid Session Key"):s.ve?(s.A&&s.A.debug("VideoAnalytics.configureExistingSession()"),s.ve.hr(t)):s.A.error("VideoAnalytics.configureExistingSession() : "+C.o)},this.getSessionId=function(){return s.ve?(s.A&&s.A.debug("VideoAnalytics.getSessionId()"),s.ve.Qt()):(s.A.error("VideoAnalytics.getSessionId() : "+C.o),C.NO_SESSION_KEY)},this.getClientId=function(){return s.ve?(s.A&&s.A.debug("VideoAnalytics.getClientId()"),s.ve.zt()):(s.A.error("VideoAnalytics.getClientId() : "+C.o),null)},this.Re=function(){return s.A&&s.A.debug("VideoAnalytics.getPlayerMonitor()"),this.ve},this.getAdType=function(){return s.ve?s.ve.Oe:null},this.Pe=function(){return s.ve?s.ve.ye:null},E.prototype=Object.create(T.prototype),E.prototype.constructor=E},M.JsonParse=(k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(t){throw{name:"SyntaxError",message:t,at:n,text:U}},r=function(t){return t&&t!==s&&o("Expected '"+t+"' instead of '"+s+"'"),s=U.charAt(n),n+=1,s},F=function(){var t,n,i,e="";if('"'===s)for(;r();){if('"'===s)return r(),e;if("\\"===s)if(r(),"u"===s){for(n=i=0;n<4&&(t=parseInt(r(),16),isFinite(t));n+=1)i=16*i+t;e+=String.fromCharCode(i)}else{if("string"!==typeof k[s])break;e+=k[s]}else e+=s}o("Bad string")},i=function(){for(;s&&s<=" ";)r()},e=function(){switch(i(),s){case"{":return vt();case"[":return dt();case'"':return F();case"-":return ft();default:return(s>="0"&&s<="9"?ft:lt)()}},function(t,r){return U=t,n=0,s=" ",t=e(),i(),s&&o("Syntax error"),"function"===typeof r?function t(n,i){var e,s,o=n[i];if(o&&"object"===typeof o)for(e in o)Object.hasOwnProperty.call(o,e)&&(void 0!==(s=t(o,e))?o[e]=s:delete o[e]);return r.call(n,i,o)}({"":t},""):t}),z=M.JSON2={},"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!==typeof z.stringify&&(p=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Q={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},z.stringify=function(t,n,i){var e;if(A=g="","number"===typeof i)for(e=0;e<i;e+=1)A+=" ";else"string"===typeof i&&(A=i);if(!(y=n)||"function"===typeof n||"object"===typeof n&&"number"===typeof n.length)return function t(n,i){var e,s,o,r,a,u=g,h=i[n];switch(h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(n)),typeof(h="function"===typeof y?y.call(i,n,h):h)){case"string":return Et(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(g+=A,a=[],Object.prototype.toString.apply(h)===Object.prototype.toString.apply([])){for(r=h.length,e=0;e<r;e+=1)a[e]=t(e,h)||"null";o=0===a.length?"[]":g?"[\n"+g+a.join(",\n"+g)+"\n"+u+"]":"["+a.join(",")+"]"}else{if(y&&"object"===typeof y)for(r=y.length,e=0;e<r;e+=1)"string"===typeof y[e]&&(o=t(s=y[e],h))&&a.push(Et(s)+(g?": ":":")+o);else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(o=t(s,h))&&a.push(Et(s)+(g?": ":":")+o);o=0===a.length?"{}":g?"{\n"+g+a.join(",\n"+g)+"\n"+u+"}":"{"+a.join(",")+"}"}return g=u,o}}("",{"":t});throw new Error("JSON2.stringify")}),R=M.cr={lr:"0123456789abcdef",dr:function(t){for(var n="",i=7;i>=0;i--)n+=R.lr.charAt(t>>4*i&15);return n},vr:function(t){for(var n=1+(t.length+8>>6),i=new Array(16*n),e=0;e<16*n;e++)i[e]=0;for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<24-e%4*8;return i[e>>2]|=128<<24-e%4*8,i[16*n-1]=8*t.length,i},Er:function(t,n){var i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i},pr:function(t,n){return t<<n|t>>>32-n},gr:function(t,n,i,e){return t<20?n&i|~n&e:!(t<40)&&t<60?n&i|n&e|i&e:n^i^e},Ar:function(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514},yr:function(t){for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return R.Sr(n)},Sr:function(t){if(""===t)return"";for(var n,i=R.vr(t),e=new Array(80),s=1732584193,o=-271733879,r=-1732584194,a=271733878,u=-1009589776,h=0;h<i.length;h+=16){for(var c=s,f=o,l=r,d=a,v=u,E=0;E<80;E++)e[E]=E<16?i[h+E]:R.pr(e[E-3]^e[E-8]^e[E-14]^e[E-16],1),n=R.Er(R.Er(R.pr(s,5),R.gr(E,o,r,a)),R.Er(R.Er(u,e[E]),R.Ar(E))),u=a,a=r,r=R.pr(o,30),o=s,s=n;s=R.Er(s,c),o=R.Er(o,f),r=R.Er(r,l),a=R.Er(a,d),u=R.Er(u,v)}return R.dr(s)+R.dr(o)+R.dr(r)+R.dr(a)+R.dr(u)}},(I=M.CwsProtocol=function(){this._r=function(t,n,i,e){return e.seq=t,e.st=n,e.t=i,e},this.Rr=function(t,n){var i=I.Zs;return this._r(t,n,i,{})}}).version="2.8",I.Ir="/0/wsg",I.H="0",I.Cr=-1,I.Tr=!1,I.mr=!1,I.Nr=2,I.Or=-1,I.wr=-1,I.Dr=1e3,I.Pr="sdk.js.1",I.Ks="CwsStateChangeEvent",I.Js="CwsErrorEvent",I.Zs="CwsSessionEndEvent",I.$s="CwsCustomEvent",I.Lr="CwsSeekEvent",I.Mr="CwsDataSamplesEvent",I.Vr="ok",I.Ur="err",I.kr="clid",I.Fr="cfg",I.Br="evs",I.Hr="maxhbinfos",I.Gr="slg",I.Kr="hbi",I.jr="ad_shb",I.qr="gw",I.Wr="fp",I.Yr="csi_en",I.Xr="CwsSessionHb",I.Jr="t",I.Qr="st",I.zr="sst",I.Zr="lv",I.$r="seq",I.ta="cid",I.na="clid",I.ia="clv",I.ea="pver",I.sa="iid",I.oa="sid",I.ra="vid",I.aa="an",I.ua="pn",I.ha="tags",I.ca="sf",I.fa="evs",I.la="lg",I.da="hbinfos",I.va="sdk",I.Ea="pj",I.js="ps",I.Ys="br",I.Xs="avgbr",I.pa="cl",I.ga="efps",I.Aa="afps",I.ya="rfpstot",I.Sa="rfpscnt",I._a="rs",I.Ra="pht",I.Ia="bl",I.Ca="url",I.Ta="caps",I.ma="pm",I.Na="w",I.Oa="h",I.wa="ct",I.Da="le",I.Pa="dftot",I.ba="dfcnt",I.La="al",I.Ma="sl",I.Va="cal",I.Ua="ss",I.ka="csi_n",I.Fa="csi_t",I.Ba="csi_l",I.Ha="csi_v",I.Ga="csi_c",I.Ka="sch",I.ja="br",I.qa="brv",I.xa="dvb",I.Wa="dvma",I.Ya="dvm",I.Xa="dvt",I.Ja="dvv",I.Qa="sw",I.za="sh",I.Za="scf",I.$a="fw",I.tu="fwv",I.nu="cc",I.iu="mn",I.eu="mv",I.su="os",I.ou="osv",I.ru="cat",I.au="caps",I.uu="t",I.hu="seq",I.cu="st",I.fu="act",I.lu="skto",I.Qs="err",I.zs="ft",I.Ps="new",I.du="old",I.no="name",I.io="attr",I.vu="seq",I.Eu="err",I.pu="rtt",I.gu="ad",I.Au="csi",I.yu=function(t){switch(t){case a.PlayerState.STOPPED:return I.Su;case a.PlayerState.PLAYING:return I.qs;case a.PlayerState.BUFFERING:return I.xs;case a.PlayerState.PAUSED:return I.Ws;case a.PlayerState.NOT_MONITORED:return I._u;default:return I.Ru}},I.Su=1,I.qs=3,I.xs=6,I.Ws=12,I._u=98,I.Ru=100,I.Iu={Cu:0,It:1,Tu:2,mu:4},I.Nu={Ou:0},Z=M.LibJSONInterface=function(){this.wu=function(t){var n=null;try{n=z.stringify(t)}catch(t){}return n},this.Du=function(t){var n=null;try{n=M.JsonParse(t)}catch(t){return n}return n=O.Pu(n)?n:null}},$=M.CwsHeartbeat=function(){this.bu={},function(){}.apply(this,arguments),this.get=function(){return this.bu},this.Lu=function(t,n){this.bu[t]=n},this.Mu=function(t,n,i){this.bu[t]||(this.bu[t]={}),this.bu[t][n]=i},this.Vu=function(t){this.Lu(I.Jr,t)},this.Uu=function(t){this.Lu(I.Qr,t)},this.ku=function(t){this.Lu(I.zr,t)},this.Fu=function(t){this.Lu(I.Zr,t)},this.Bu=function(t){this.Lu(I.$r,t)},this.Hu=function(t){this.Lu(I.ta,t)},this.Gu=function(t){this.Lu(I.na,t)},this.Ku=function(t){this.Lu(I.ia,t)},this.ju=function(t){this.Lu(I.ea,t)},this.qu=function(t){this.Lu(I.au,t)},this.fi=function(t){this.Lu(I.oa,t)},this.xu=function(t){this.Lu(I.sa,t)},this.Wu=function(t){this.Lu(I.ra,t)},this.Yu=function(t){this.Lu(I.aa,t)},this.Xu=function(t){this.Lu(I.ua,t)},this.Ju=function(t){this.Lu(I.ha,t)},this.Qu=function(t){this.Lu(I.ca,t)},this.zu=function(t){this.Lu(I.Ta,t)},this.Zu=function(t){this.Lu(I.fa,t)},this.$u=function(t){this.Lu(I.va,t)},this.th=function(t){this.Lu(I.la,t)},this.nh=function(t){this.Lu(I.da,t)},this.ze=function(t){this.Lu(I.js,t)},this.ih=function(t){this.Lu(I.Ea,t)},this.eh=function(t){this.Lu(I.pa,t)},this.sh=function(t){this.Lu(I.Ys,t)},this.oh=function(t){this.Lu(I.Xs,t)},this.rh=function(t){this.Lu(I._a,t)},this.ah=function(t){this.Lu(I.ga,t)},this.uh=function(t){this.Lu(I.Aa,t)},this.hh=function(t){this.Lu(I.Sa,t)},this.fh=function(t){this.Lu(I.ya,t)},this.lh=function(t){this.Mu(I.ma,I.Ka,t)},this.dh=function(t){this.Mu(I.ma,I.ja,t)},this.Eh=function(t){this.Mu(I.ma,I.qa,t)},this.ph=function(t){this.Mu(I.ma,I.xa,t)},this.gh=function(t){this.Mu(I.ma,I.Wa,t)},this.Ah=function(t){this.Mu(I.ma,I.Ya,t)},this.yh=function(t){this.Mu(I.ma,I.Xa,t)},this.Sh=function(t){this.Mu(I.ma,I.Ja,t)},this._h=function(t){this.Mu(I.ma,I.$a,t),this.Lu(I.$a,t)},this.Rh=function(t){this.Mu(I.ma,I.tu,t),this.Lu(I.tu,t)},this.Ih=function(t){this.Mu(I.ma,I.su,t.toUpperCase())},this.Ch=function(t){this.Mu(I.ma,I.ou,t)},this.Th=function(t){this.Mu(I.ma,I.ru,t)},this.mh=function(t){this.Mu(I.ma,I.Qa,t)},this.Nh=function(t){this.Mu(I.ma,I.za,t)},this.Oh=function(t){this.Mu(I.ma,I.Za,t)},this.wh=function(t){this.Lu(I.Pa,t)},this.Do=function(t){this.Lu(I.ba,t)},this.Dh=function(t){this.Lu(I.Ra,t)},this.Ph=function(t){this.Lu(I.Ia,t)},this.bh=function(t){this.Lu(I.Ca,t)},this.Lh=function(t){this.Lu(I.Na,t)},this.Mh=function(t){this.Lu(I.Oa,t)},this.Vh=function(t){this.Lu(I.wa,t)},this.Uh=function(t){this.Lu(I.Da,t)},this.kh=function(){this.Lu(I.gu,!0)},this.Fh=function(t){this.Lu(I.Ua,t)},this.setModuleName=function(t){this.Mu(I.nu,I.iu,t)},this.Bh=function(t){this.Mu(I.nu,I.eu,t)},this.Hh=function(t){this.Lu(I.Au,t)},this.Gh=function(t){t&&this.Lu(I.ka,t)},this.Kh=function(t){t&&this.Lu(I.Fa,t)},this.jh=function(t){t&&this.Lu(I.Ba,t)},this.qh=function(t){t&&this.Lu(I.Ha,t)},this.xh=function(t){t&&this.Lu(I.Ga,t)},this.Wh=function(t){this.Lu(I.La,t)},this.Yh=function(t){this.Lu(I.Ma,t)},this.Xh=function(t){this.Lu(I.Va,t)}},(m=M.CwsSession=function(){var p=this;p.Qh=null,p.zh=200,p.Zh=5e3,p.wt=null,p.Ls=0,p.$h=0,p.tc=I.Iu.Cu,p.nc=I.Nu.Ou,p.ic=[],p.ec=-1,p.Dn=-2,p.Pn=-2,p.mi=-1,p.sc=-1,p.oc=null,p.bn=a.PlayerState.UNKNOWN,p.On=-1,p.Us=-1,p.In=null,p.Bn=-1,p.Hn=-1,p.ke=null,p.An=null,p._n=null,p.Vs=null,p.ks=null,p.rc={},p.ac=null,p.uc=null,p.hc=null,p.cc=null,p.fc=null,p.lc=null,p.dc=null,p.vc=null,p.Ec=null,p.gc=null,p.Ac=null,p.yc=null,p.Sc=null,p._c=null,p.Rc=null,p.kn=null,p.Fn=null,p.M=null,p.V=null,p.lo=null,p.Ic=null,p.Cc=!1,p.Tc=!1,p.mc=!1,p.Nc=!1,p.Oc=!1,p.wc=null,p.Dc=1e3,p.Pc=0,p.bc=0,p.Lc={},p.D={},p.Mc=!1,p.Vc=null,p.Uc=null,p.kc=null,p.Fc=null,p.Bc=null,p.Hc=null,p.Gc=12e4,p.Kc=I.mr,p.jc=!1,p.qc=null,p.Bi=null,p.jn=null,p.qn=null,p.xn=null,function(t,n,i,e,s,o,r,a,u,h,c,f,l){this.xc=t,this.ge=n,this.Fi=i,this.A=e,this.A.setModuleName("CwsSession"),this.T=s,this.Ae=o,this.Wc=r,this.Yc=a,this.Xc=u,this.Hi=h,this.Jc=c,this.wt=f,this.wt&&(p.On=this.wt.encodedFrameRate,p.In=this.wt.streamUrl,p.Us=this.wt.duration),this.Jc&&(p.qc=p.Jc.get(N.B)),p.Bi=l}.apply(this,arguments),this._t=function(){this.Jc=null,this.Hi=null,this.C=null,this.Xc=null,this.Yc=null,this.Wc=null,this.Ae=null,this.T=null,this.A=null,this.Fi=null,this.ge=null,this.xc.Qc(),this.xc=null,this.Ic=null,this.mc=!0},this.zc=function(t){this.bs=t,this.Zc=this.bs.Zc,this.A.fi(this.bs.N),this.Ls=this.Xc.current(),this.Ds()||this.$c()?(this.tc+=m.Jh,p.A.info("start(): assetName="+p.wt.assetName)):p.A.info("start()"+p.tf())},this.nf=function(){this.Nc=!0},this.if=function(){this.A.debug("initialize()"),(this.Ds()||this.$c()||this.Hs())&&(this.ge&&this.ge.p&&this.ge.p.Gs(C.APP_TRACKER_EVENT.VIDEO_ATTEMPT,{},this),p.ef(),p.sf(),p.rf(),this.Ds()||this.$c())&&p.af()},this.uf=function(){this.A.debug("end(): schedule the last hb before session cleanup"+p.tf()),this.hf(),this.cf(),this.ff(),this.lf()},this.df=function(){var t;this.Nc||(t=p.Jc.get(N.vf),p.$c()&&"boolean"===typeof t&&t||this.lf(),this.Ef())},this.dh=function(t){var n=p.ac;n!==t&&t&&(p.A.debug("Change browserName from "+n+" to "+t),p.ac=t)},this.Eh=function(t){var n=p.uc;n!==t&&t&&(p.A.debug("Change browserVersion from "+n+" to "+t),p.uc=t)},this.ph=function(t){var n=p.hc;n!==t&&t&&(p.A.debug("Change deviceBrand from "+n+" to "+t),p.hc=t)},this.gh=function(t){var n=p.cc;n!==t&&t&&(p.A.debug("Change deviceManufacturer from "+n+" to "+t),p.cc=t)},this.Ah=function(t){var n=p.fc;n!==t&&t&&(p.A.debug("Change deviceModel from "+n+" to "+t),p.fc=t)},this.yh=function(t){var n=p.lc;n!==t&&t&&(p.A.debug("Change deviceType from "+n+" to "+t),p.lc=t)},this.Sh=function(t){var n=p.dc;n!==t&&t&&(p.A.debug("Change deviceVersion from "+n+" to "+t),p.dc=t)},this.Ih=function(t){var n=p.gc;n!==t&&t&&(p.A.debug("Change operatingSystemName from "+n+" to "+t),p.gc=t)},this.Ch=function(t){var n=p.Ac;n!==t&&t&&(p.A.debug("Change operatingSystemVersion from "+n+" to "+t),p.Ac=t)},this.Th=function(t){var n=p.yc;n!==t&&t&&(p.A.debug("Change deviceCategory from "+n+" to "+t),p.yc=t)},this.mh=function(t){var n=p.Sc;n!==t&&t&&(p.A.debug("Change screenWidth from "+n+" to "+t),p.Sc=t)},this.Nh=function(t){var n=p._c;n!==t&&t&&(p.A.debug("Change screenHeight from "+n+" to "+t),p._c=t)},this.Oh=function(t){var n=p.yc;n!==t&&t&&(p.A.debug("Change scaleFactor from "+n+" to "+t),p.Rc=t)},this.Fs=function(){return p.vc},this._h=function(t){var n=p.vc;n!==t&&t&&(p.A.debug("Change frameworkName from "+n+" to "+t),p.vc=t)},this.Bs=function(){return p.Ec},this.Rh=function(t){var n=p.Ec;n!==t&&t&&(p.A.debug("Change frameworkVersion from "+n+" to "+t),p.Ec=t)},this.bh=function(t){var n;p.wt.streamUrl||(n=p.In)!==t&&t&&(p.A.debug("Change stream url from "+n+" to "+t),p.In=t)},this.pf=function(){p.cf(),p.jc||(p.gf(),p.Hc=p.Ae.create(p.gf,p.Gc,"CwsSession.startCdnTimer"),p.A.debug("fetching cdn ip timer started"))},this.cf=function(){p.Hc&&(p.Hc(),p.Af(null,null,null,null,null),p.Hc=null)},this.gf=function(){p.A.debug("detectCDNServerIp(): For "+p.In),p.Kc?p.yf():p.cf()},this.yf=function(){try{var t;"function"===typeof XMLHttpRequest||"object"===typeof XMLHttpRequest?((t=new XMLHttpRequest).open("HEAD",p.In,!0),t.setRequestHeader("Pragma","akamai-x-cache-on"),t.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(this.getAllResponseHeaders().indexOf("x-cache")>=0||this.getAllResponseHeaders().indexOf("X-Cache")>=0)?p.Af("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):p.Af("null","header","null","null",""+this.status))},t.send()):p.A.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){p.A.info("Exception caught in makeAkamaiHeadRequest")}},this.Af=function(t,n,i,e,s){var o={},r={};p.Vc!==t&&(null!==p.Vc&&(r[I.ka]=p.Vc),p.Vc=t,null===p.Vc?o[I.ka]="null":o[I.ka]=p.Vc),p.Uc!==n&&(null!==p.Uc&&(r[I.Fa]=p.Uc),p.Uc=n,null===p.Uc?o[I.Fa]="null":o[I.Fa]=p.Uc),p.kc!==i&&(null!==p.kc&&(r[I.Ba]=p.kc),p.kc=i,null===p.kc?o[I.Ba]="null":o[I.Ba]=p.kc),p.Fc!==e&&(null!==p.Fc&&(r[I.Ha]=p.Fc),p.Fc=e,null===p.Fc?o[I.Ha]="null":o[I.Ha]=p.Fc),p.Bc!==s&&(null!==p.Bc&&(r[I.Ga]=p.Bc),p.Bc=s,null===p.Bc?o[I.Ga]="null":o[I.Ga]=p.Bc),"{}"!==JSON.stringify(o)&&p.Sf(o,r)},this._f=function(t){var n=p.Dn;n!==t&&t>0&&(p.A.info("Change bitrate from "+n+" to "+t),p.Rf(n,t),p.Dn=t)},this.If=function(t){var n=p.Pn;n!==t&&t>0&&(p.A.info("Change Avg bitrate from "+n+" to "+t),p.Cf(n,t),p.Pn=t)},this.wh=function(t){var n=p.mi;n!==t&&t>=0&&(p.A.info("Change dropped frames total from "+n+" to "+t),p.Tf(n,t),p.mi=t)},this.Do=function(t){var n=p.sc,i=t+(-1===p.sc?0:p.sc);n!==t&&i>=0&&(p.A.info("Change dropped frames count from "+n+" to "+i),p.mf(n,i),p.sc=i)},this.rh=function(t){var n=p.oc;n!==t&&t&&(p.A.info("Change resource from "+n+" to "+t),p.oc=t)},this.Yu=function(t){p.An!==t&&t&&(p.A.info("Change assetName from "+p.An+" to "+t),p.An=t)},this.Fu=function(t){var n=p.ks;n!==t&&O.se(t)&&(p.A.info("Change isLive from "+n+" to "+t),p.ks=t)},this.Wu=function(t){var n=p._n;n!==t&&t&&(p.A.info("Change viewerId from "+n+" to "+t),p._n=t)},this.Xu=function(t){var n=p.Vs;n!==t&&t&&(p.A.info("Change playerName from "+n+" to "+t),p.Vs=t)},this.Ju=function(t){var n=p.rc;!O.Nf(n,t)&&t&&(p.A.info("Change tags from "+O.Of(n)+" to "+O.Of(t)),p.rc=t)},this.ah=function(t){p.wt.encodedFrameRate>0||(p.A.debug("setEncodedFrameRate(): "+t),p.On=t)},this.eh=function(t){p.wt.duration>0||(p.A.debug("setContentLength(): "+t),p.Us=t)},this.ze=function(t){var n,i=!1;p.Tc||t!==a.PlayerState.PLAYING||(p.Tc=!0,p.Ds()&&(i=!0),O.bt(p.wt.viewerId)||p.A.error("Missing viewerId. viewerId should be updated before first frame is rendered."),O.bt(p.wt.streamType)&&f.StreamType.UNKNOWN!==p.wt.streamType||p.A.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),O.bt(p.wt.applicationName))||p.A.error("Missing applicationName. applicationName should be updated before first frame is rendered."),p.bn!==t&&(n=p.bn,p.A.info("setPlayerState(): changing player state from "+n+" to "+t),p.wf(n,t),p.bn=t,i)&&(p.A.info("SetPlayerState(): to playing state triggered urgent HB"),p.Df())},this.Pf=function(t){var n=p.Bn;n!==t&&t>0&&(p.A.debug("Change stream resolution width from "+n+" to "+t),p.bf(n,t),p.Bn=t)},this.Lf=function(t){var n=p.Hn;n!==t&&t>0&&(p.A.debug("Change stream resolution height from "+n+" to "+t),p.Mf(n,t),p.Hn=t)},this.Vh=function(t){var n=p.M;n!==t&&t&&(p.A.debug("Change network connection type from "+n+" to "+t),p.Vf(n,t),p.M=t)},this.Uh=function(t){var n=p.V;n!==t&&t&&(p.A.debug("Change network link encryption from "+n+" to "+t),p.Uf(n,t),p.V=t)},this.Hh=function(t){p.jc=!0,p.cf();var n=p.lo;n!==t&&O.bt(t)&&(p.A.debug("Change CDN Server IP from "+n+" to "+t),p.kf(n,t),p.lo=t)},this.Wh=function(t){var n=p.jn;n!==t&&O.bt(t)&&!p.bs.Ff&&(p.A.info("Change Audio Lang from "+n+" to "+t),p.Bf(n,t),p.jn=t)},this.Yh=function(t){var n=p.qn;n!==t&&O.bt(t)&&!p.bs.Hf&&(p.A.info("Change Subtitle Lang from "+n+" to "+t),p.Gf(n,t),p.qn=t)},this.Xh=function(t){var n=p.xn;n!==t&&O.bt(t)&&!p.bs.Kf&&(p.A.info("Change Closed Caption Lang from "+n+" to "+t),p.jf(n,t),p.xn=t)},this.qf=function(t){var n;p.A.debug("togglePauseJoin()"),p.Cc===t?p.A.debug("togglePauseJoin(): same value, ignoring"):(t=p.Cc,n=!p.Cc,p.xf(t,n),p.Cc=!p.Cc)},this.Wf=function(t,n){p.Yf(t,n),p.A.info("sendError(): triggered urgent HB");t=p.Jc.get(N.vf);p.$c()&&"boolean"===typeof t&&t||n&&p.Df()},this.Xf=function(t,n){var i,e;n[I.uu]=t,n[I.cu]=this.Ms(),n[I.hu]=this.xc.Jf(),this.ke&&(i=P.Qf(this.ke.getPHT(),0,null,-1),e=P.Qf(this.ke.getBufferLength(),0,null,-1),i>=0&&(n[I.Ra]=i),e>0)&&(n[I.Ia]=e),this.xc.zf(n),this.ge.p&&this.ge.p.Gs(t,n,this)},this.Zf=function(t){p.ke=t,p.ke?p.$f():p.tl()},this.hf=function(){var t=this.Yc.Rr(this.nl(),this.Ms());this.ge.p&&this.ge.p.Gs(I.Zs,{},this),this.xc.zf(t)},this.Yf=function(t,n){var i={};i[I.Qs]=t,i[I.zs]=n,this.Xf(I.Js,i)},this.Rf=function(t,n){var i={},e={};t>0&&(e[I.Ys]=t),i[I.Ys]=n,this.Sf(i,e)},this.Cf=function(t,n){var i={},e={};t>0&&(e[I.Xs]=t),i[I.Xs]=n,this.Sf(i,e)},this.il=function(t,n){var i={};i[I.fu]=t,n>=0&&(i[I.lu]=n),this.Xf(I.Lr,i)},this.bf=function(t,n){var i={},e={};-1!==t&&(e[I.Na]=t),i[I.Na]=n,this.Sf(i,e)},this.Mf=function(t,n){var i={},e={};-1!==t&&(e[I.Oa]=t),i[I.Oa]=n,this.Sf(i,e)},this.Vf=function(t,n){var i={},e={};null!==t&&(e[I.wa]=t),i[I.wa]=n,this.Sf(i,e)},this.Uf=function(t,n){var i={},e={};null!==t&&(e[I.Da]=t),i[I.Da]=n,this.Sf(i,e)},this.kf=function(t,n){var i={},e={};O.bt(t)&&(e[I.Au]=t),i[I.Au]=n,this.Sf(i,e)},this.Tf=function(t,n){var i={},e={};t>=0&&(e[I.Pa]=t),i[I.Pa]=n,this.Sf(i,e)},this.mf=function(t,n){var i={},e={};t>=0&&(e[I.ba]=t),i[I.ba]=n,this.Sf(i,e)},this.Bf=function(t,n){var i={},e={};t!==n&&("string"===typeof t&&(e[I.La]=t),i[I.La]=n),this.Sf(i,e)},this.Gf=function(t,n){var i={},e={};t!==n&&("string"===typeof t&&(e[I.Ma]=t),i[I.Ma]=n),this.Sf(i,e)},this.jf=function(t,n){var i={},e={};t!==n&&("string"===typeof t&&(e[I.Va]=t),i[I.Va]=n),this.Sf(i,e)},this.xf=function(t,n){var i={},e={};e[I.Ea]=t,i[I.Ea]=n,this.Sf(i,e)},this.wf=function(t,n){var i={},e={};i[I.js]=I.yu(n),e[I.js]=I.yu(t),this.Sf(i,e)},this.Sf=function(t,n){var i={};i[I.Ps]=t,n&&O.Gt(n)>0&&(i[I.du]=n),this.Xf(I.Ks,i)},this.el=function(t,n){var i={};i[I.no]=t,O.Gt(n)>0&&(i[I.io]=n),this.Xf(I.$s,i)},this.ff=function(){p.Qh&&(p.Qh(),p.Qh=null)},this.Ef=function(){p.ff();var t=1e3*p.Fi.heartbeatInterval;p.Qh=p.Ae.create(p.lf,t,"Session.sendHeartbeat:"+this.Zc)},this.tl=function(){p.wc&&(p.wc(),p.wc=null)},this.$f=function(){p.tl(),p.wc=p.Ae.create(p.sl,p.Dc,"Session.startRfpsTimer")},this.ol=function(){var t={err:"pending"};t.seq=p.$h-1,t.sentAt=p.Ms(),t.rtt=-1,p.ic.push(t);for(var n=0;n<p.ic.length;n++)"ok"===(t=p.ic[n]).err&&(p.ic.splice(n,1),n--)},this.rl=function(t,n){for(var i=0;i<p.ic.length;i++){var e=p.ic[i];e.seq===t&&(e.rtt=p.Ms()-e.sentAt,e.err=n)}},this.al=function(t){for(var n=0;n<p.ic.length;n++){var i=p.ic[n];i.seq===t&&(i.rtt=p.Ms()-i.sentAt,i.err="ok")}},this.ul=function(){for(var t,n,i=p.Jc.get(N.hl),e=[],s=-1,o=0;o<p.ic.length;o++)if("ok"===(n=p.ic[o]).err){s=n.seq;break}for(var r=0;r<p.ic.length;r++)((t=(n=p.ic[r]).seq)<p.$h-i||t<s)&&e.push(r);for(var a=[],u=0;u<p.ic.length;u++)t=(n=p.ic[u]).seq,e.indexOf(u)<0&&a.push(p.ic[u]);p.ic=a},this.fl=function(){p.ul();for(var t=[],n=0;n<p.ic.length;n++){var i=p.ic[n],e={};e[I.vu]=i.seq,e[I.pu]=i.rtt,e[I.Eu]=i.err,t.push(e)}return t},this.ll=function(){var t,n=-1,i=-1,e=p.xc.Qc();if(p.Hs()&&0===e.length)return null;var s=new $,o=(s.Vu(I.Xr),s.Hu(p.Fi.customerKey),s.Gu(p.Jc.get(N.B)),s.fi(p.bs.N),s.Bu(p.$h),s.ju(I.version),C.version);if(p.Bi&&(o=p.Bi),s.Ku(o),s.xu(p.ge.N),s.qu(0),p.ge.M?s.Vh(p.ge.M):p.M&&s.Vh(p.M),p.ge.V?s.Uh(p.ge.V):p.V&&s.Uh(p.V),O.bt(p.lo)&&s.Hh(p.lo),s.lh(I.Pr),p.ac&&s.dh(p.ac),p.uc&&s.Eh(p.uc),p.hc&&s.ph(p.hc),p.cc&&s.gh(p.cc),p.fc&&s.Ah(p.fc),p.lc&&s.yh(p.lc),p.dc&&s.Sh(p.dc),p.gc&&s.Ih(p.gc),p.Ac&&s.Ch(p.Ac),p.yc&&s.Th(p.yc),p.vc&&s._h(p.vc),p.Ec&&s.Rh(p.Ec),p.Sc&&!isNaN(p.Sc)&&s.mh(parseInt(p.Sc,10)),p._c&&!isNaN(p._c)&&s.Nh(parseInt(p._c,10)),p.Rc&&!isNaN(p.Rc)?s.Oh(parseFloat(p.Rc)):(p.Sc&&!isNaN(p.Sc)||p._c&&!isNaN(p._c))&&s.Oh(1),p.ke&&(p.kn=p.ke.$n(),p.kn&&s.setModuleName(p.kn),p.Fn=p.ke.ti(),p.Fn&&s.Bh(p.Fn),p.ke.ni()&&(p.vc=p.ke.ni(),s._h(p.vc)),p.ke.ei())&&(p.Ec=p.ke.ei(),s.Rh(p.Ec)),p._n&&s.Wu(p._n),O.Gt(p.rc)>0&&s.Ju(p.rc),p.Ds()||p.$c()){p.$c()&&s.kh(),p.An&&s.Yu(p.An),s.Qu(p.tc);o=I.yu(p.bn),o=(s.ze(o),s.ih(p.Cc),p.Vs&&s.Xu(p.Vs),O.se(p.ks)&&s.Fu(p.ks),p.Us>0&&s.eh(p.Us),p.Dn>0&&s.sh(p.Dn),p.Pn>0&&s.oh(p.Pn),null!==p.oc&&s.rh(p.oc),p.On>0&&s.ah(p.On),p.ke&&(n=P.Qf(p.ke.getPHT(),0,null,-1),i=P.Qf(p.ke.getBufferLength(),0,null,-1)),O.Tt(p.ge.U)?t=p.ge.U:p.ke&&(t=p.ke.getSignalStrength()),n>=0&&s.Dh(n),i>0&&s.Ph(i),p.dl());if(o>0&&s.uh(o),p.bc>0&&s.fh(P.Qf(p.bc,0,null,-1)),p.Pc>0&&s.hh(P.Qf(p.Pc,0,null,-1)),t!==a.DEFAULT_SIGNAL_STRENGTH&&s.Fh(t),p.In&&s.bh(p.In),p.Bn>0&&s.Lh(p.Bn),p.Hn>0&&s.Mh(p.Hn),p.mi>-1&&s.wh(p.mi),p.sc>-1&&(s.Do(p.sc),p.sc>0)&&(p.mf(p.sc,0),p.sc=0),p.jn&&s.Wh(p.jn),p.qn&&s.Yh(p.qn),p.xn&&s.Xh(p.xn),"undefined"!==typeof p.Ic)for(var r in p.Ic)s.Lu(r,p.Ic[r])}else s.Qu(I.Iu.Cu);return e.length>0&&s.Zu(e),s.zu(p.nc),s.$u(!0),p.Jc.get(N.vl)&&s.th(p.Hi.Qc()),p.Jc.get(N.hl)>0&&(n=p.fl()).length>0&&s.nh(n),0===p.$h&&(s=p.El(s)),(s=0!==p.$h?p.pl(s):s).ku(p.Ls),s.Uu(p.Ms()),p.Kc&&(s.Gh(p.Vc),s.Kh(p.Uc),s.jh(p.kc),s.qh(p.Fc),s.xh(p.Bc)),p.$h++,s.get()},this.pl=function(t){var n,i=p.D,e={};for(n in t.bu.tags)Object.prototype.hasOwnProperty.call(i,n)||(e[n]=t.bu.tags[n]);t.bu.tags=e,p.D={};for(var s=0;s<p.Lc.length;s++)Object.prototype.hasOwnProperty.call(p.ge.D,p.Lc[s])?Object.prototype.hasOwnProperty.call(p.ge.L,p.Lc[s])?p.ge.L[p.Lc[s]]===N.tn.nn?(p.D[N.gl+""+p.Lc[s]]=N.tn.nn,p.ge.P("End-user chose to opt-out of personal data collection")):p.ge.L[p.Lc[s]]===N.tn.sn?(p.D[N.gl+""+p.Lc[s]]=N.tn.sn,p.ge.P("End-user chose to opt-out of personal data collection")):p.ge.L[p.Lc[s]]===N.tn.$t?(p.D[N.gl+""+p.Lc[s]]=N.tn.$t,p.ge.P("End-user used privacy settings and chose to opt-out of personal data collection")):(p.D[N.gl+""+p.Lc[s]]=p.ge.D[p.Lc[s]],p.ge.P("Data collection successful")):(p.D[N.gl+""+p.Lc[s]]=p.ge.D[p.Lc[s]],p.ge.P("Data collection successful")):p.D[N.gl+""+p.Lc[s]]=N.tn.Al;var o,r={};for(o in i){var a=o.split(".");"{}"!==JSON.stringify(p.Lc)&&-1!==p.Lc.indexOf(""+a[2])||i[N.gl+""+a[2]]===N.tn.yl||(p.ge.P("Data collection restricted from Conviva back-end"),p.D[N.gl+""+a[2]]=N.tn.yl,r[N.gl+""+a[2]]=N.tn.yl)}if("{}"!==JSON.stringify(p.D)){var u,h=O.Sl(p.D);for(u in t.bu.tags)h[u]=t.bu.tags[u];if(t.bu.tags=h,!O.Nf(i,p.D)){var c={};if("{}"!==JSON.stringify(r)&&(c[I.ha]=r),"{}"!==JSON.stringify(i)){for(var f in i)p.D[f]&&i[f]!==p.D[f]&&(c[I.ha]||(c[I.ha]={}),c[I.ha][f]=p.D[f]);for(var l in p.D)Object.prototype.hasOwnProperty.call(i,l)&&i[l]===p.D[l]||(c[I.ha]||(c[I.ha]={}),c[I.ha][l]=p.D[l])}"{}"===JSON.stringify(i)&&(c[I.ha]=p.D);var d,v,E={};E[I.Ps]=c,E[I.uu]=I.Ks,E[I.cu]=p.Ms(),E[I.hu]=p.xc.Jf(),p.ke&&(d=P.Qf(p.ke.getPHT(),0,null,-1),v=P.Qf(p.ke.getBufferLength(),0,null,-1),d>=0&&(E[I.Ra]=d),v>0)&&(E[I.Ia]=v),t.bu.evs||(t.bu.evs=[]),t.bu.evs.push(E)}}return t},this.El=function(t){var n=p._l();if("{}"!==JSON.stringify(n)){var i,e=O.Sl(n);for(i in t.bu.tags)e[i]=t.bu.tags[i];t.bu.tags=e;var s,o={},n=(o[I.ha]=n,{});n[I.Ps]=o,n[I.uu]=I.Ks,n[I.cu]=p.Ms(),n[I.hu]=p.xc.Jf(),p.ke&&(o=P.Qf(p.ke.getPHT(),0,null,-1),s=P.Qf(p.ke.getBufferLength(),0,null,-1),o>=0&&(n[I.Ra]=o),s>0)&&(n[I.Ia]=s),t.bu.evs||(t.bu.evs=[]),t.bu.evs.push(n)}return t},this._l=function(){var t={};if("undefined"!==typeof navigator&&navigator){if(t["c3.fp.cookie"]="undefined"!==typeof navigator.cookieEnabled&&navigator.cookieEnabled?""+navigator.cookieEnabled:"",t["c3.fp.memory"]="undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?""+navigator.deviceMemory:"",t["c3.fp.hwConc"]="undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",t["c3.fp.java"]=""+("function"!==typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),t["c3.fp.lang"]="undefined"!==typeof navigator.language&&navigator.language?""+navigator.language:"",t["c3.fp.langs"]="undefined"!==typeof navigator.languages&&navigator.languages&&navigator.languages.length>0?""+navigator.languages.toString():"",t["c3.fp.maxTp"]="undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",t["c3.fp.plugins"]="","undefined"!==typeof navigator.plugins&&navigator.plugins&&navigator.plugins.length>0)for(var n=0;n<navigator.plugins.length;n++)t["c3.fp.plugins"]+=navigator.plugins[n].name+",";if(t["c3.fp.mime"]="","undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var i=0;i<navigator.mimeTypes.length;i++)t["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";t["c3.fp.sysLang"]="undefined"!==typeof navigator.systemLanguage&&navigator.systemLanguage?""+navigator.systemLanguage:"",t["c3.fp.platform"]="undefined"!==typeof navigator.platform&&navigator.platform?""+navigator.platform:"",t["c3.fp.product"]="undefined"!==typeof navigator.product&&navigator.product?""+navigator.product:"",t["c3.fp.productSub"]="undefined"!==typeof navigator.productSub&&navigator.productSub?""+navigator.productSub:"",t["c3.fp.vendor"]="undefined"!==typeof navigator.vendor&&navigator.vendor?""+navigator.vendor:"",t["c3.fp.vendorSub"]="undefined"!==typeof navigator.vendorSub&&navigator.vendorSub?""+navigator.vendorSub:"";var e=p.Rl();""!==e&&(t["c3.fp.canvFp"]=e)}return"undefined"!==typeof window&&window&&("undefined"!==typeof window.screen&&window.screen&&(t["c3.fp.availHeight"]="undefined"!==typeof window.screen.availHeight&&window.screen.availHeight?""+window.screen.availHeight:"",t["c3.fp.availWidth"]="undefined"!==typeof window.screen.availWidth&&window.screen.availWidth?""+window.screen.availWidth:"",t["c3.fp.height"]="undefined"!==typeof window.screen.height&&window.screen.height?""+window.screen.height:"",t["c3.fp.width"]="undefined"!==typeof window.screen.width&&window.screen.width?""+window.screen.width:"",t["c3.fp.colorDepth"]="undefined"!==typeof window.screen.colorDepth&&window.screen.colorDepth?""+window.screen.colorDepth:"",t["c3.fp.deviceXDPI"]="undefined"!==typeof window.screen.deviceXDPI&&window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",t["c3.fp.deviceYDPI"]="undefined"!==typeof window.screen.deviceYDPI&&window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),t["c3.fp.dpi"]="undefined"!==typeof window.devicePixelRatio&&window.devicePixelRatio?""+window.devicePixelRatio:"",t["c3.fp.secure"]="boolean"===typeof window.isSecureContext?""+window.isSecureContext:""),t},this.Rl=function(){try{if("undefined"!==typeof document&&document&&"function"===typeof document.createElement){var t,n,i=document.createElement("CANVAS");if("undefined"!==typeof i&&i&&"function"===typeof i.getContext)return t=i.getContext("2d"),n="conviva",t.textBaseline="top",t.font="14px Arial",t.textBaseline="alphabetic",t.fillStyle="#f40",t.fillRect("undefined"!==typeof navigator.plugins&&navigator.plugins?navigator.plugins.length:0,"undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes?navigator.mimeTypes.length:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0,"undefined"!==typeof navigator.vendor&&navigator.vendor?navigator.vendor.length:0),t.fillStyle="#069",t.fillText(n,"undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>=0?navigator.maxTouchPoints:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,"undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?navigator.deviceMemory:0,"undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),R.Sr(i.toDataURL())}return""}catch(t){return""}},this.lf=function(){var t;p.mc||(t=p.ll())&&p.Il(t)},this.sl=function(){var t;p.bn===a.PlayerState.PLAYING&&p.ke&&(t=p.ke.getRenderedFrameRate())>0&&(p.bc+=t,p.Pc++)},this.dl=function(){return p.bc>0&&p.Pc>0||(this.sl(),p.bc>0&&p.Pc>0)?O.Cl.Cast(+p.bc/p.Pc):a.DEFAULT_RENDERED_FRAME_RATE},this.Il=function(t){p.ol();var i=p.$h-1;p.A.info("postHeartbeat(): Send HB["+i+"]"+p.tf());p.Wc.Tl(t,function(t,n){p.ml(t,n,i)})},this.ml=function(e,s,o){p.mc||p.T.F("onHeartbeatResponse",function(){var t,n,i;e?s?(p.A.debug("onHeartbeatResponse(): received valid response for HB["+o+"]"),p.al(o),(i=s[I.kr])&&i!==(t=p.Jc.get(N.B))&&(p.A.debug("onHeartbeatResponse(): setting the client id to "+i+" (from gateway)"),p.Jc.set(N.B,i),p.Jc.Nl(),t===I.H)&&i!==I.H&&(p.ge.k(),p.Oc)&&(p.A.debug("Send enqueued urgent hb as client id is available"),p.Df()),(t=s[I.Ur])&&t!==I.Vr&&p.A.error("onHeartbeatResponse(): error from gateway: "+t),"object"===typeof(i=s[I.Fr])&&((t=i[I.Hr])>=0&&p.Jc.get(N.hl)!==t&&(p.A.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+t+" (from gateway)"),p.Jc.set(N.hl,t)),n=i[I.Gr],(n=!!O.se(n)&&n)!==p.Jc.get(N.vl)&&(p.A.debug("onHeartbeatResponse(): turning "+(n?"on":"off")+" sending of logs"),p.Jc.set(N.vl,n)),n=i[I.Kr],O.Tt(n)&&((n=O.Cl.Cast(n))!==p.Fi.heartbeatInterval&&(p.A.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+n),p.Fi.heartbeatInterval=n,p.Qh)&&p.Ef(),p.Jc.get(N.yt)!==n)&&(p.A.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+t+" (from gateway)"),p.Jc.set(N.yt,n),p.Jc.Nl(),p.Jc.Ol()),(n=i[I.qr])&&n!==p.Fi.gatewayUrl&&(p.A.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),p.Fi.gatewayUrl=n),p.wl()||(p.Lc={},(n=i[I.Wr])&&(p.Mc||(p.Mc=!0),p.A.debug("onHeartbeatResponse(): received fp from gateway: "+n),p.Lc=n.split(",")),p.Kc=i[I.Yr],O.se(p.Kc)&&(p.Kc?(p.A.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),p.Hc||p.pf()):(p.A.debug("onHeartbeatResponse(): disabling the CDN Server IP collection (from gateway)"),p.cf()))),n=i[I.jr],O.se(n)?p.Jc.get(N.vf)!==n&&(p.A.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+t+" (from gateway)"),p.Jc.set(N.vf,n),p.Jc.Nl(),p.Jc.Ol()):p.Jc.get(N.vf)!==I.Tr&&(p.Jc.set(N.vf,I.Tr),p.Jc.Nl(),p.Jc.Ol()))):p.A.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(O.bt(i=s)?O.Dl(i,"HTTP timeout")?p.A.warning("onHeartbeatResponse(): "+i):p.A.error("onHeartbeatResponse(): failed to send heartbeat: "+i):(i=tt.Pl,p.A.error("onHeartbeatResponse(): "+i)),p.rl(o,i))})},this.Ms=function(){return O.Cl.Cast(p.Xc.current()-p.Ls)},this.nl=function(){return this.xc.Jf()},this.tf=function(){return this.Hs()?" (global session)":""},this.Hs=function(){return this.Zc===m.Ct.Cu},this.wl=function(){return this.Zc===m.Ct.Cu&&"T"===this.rc["c3.IPV4IPV6GlobalSession"]},this.Ds=function(){return this.Zc===m.Ct.It},this.$c=function(){return this.Zc===m.Ct.Pt},this.Mt=function(t){p.bl(t),p.ef()},this.bl=function(t){var n={},i={};if(O.bt(t.assetName)&&!p.bs.Ll&&(p.wt.assetName!==t.assetName?(p.wt.assetName&&(n[I.aa]=p.wt.assetName),i[I.aa]=t.assetName,p.wt.assetName=t.assetName):p.A.warning("mergeContentMetadata(): assetName was not changed.")),O.bt(t.applicationName)&&(p.wt.applicationName!==t.applicationName?(p.wt.applicationName&&(n[I.ua]=p.wt.applicationName),i[I.ua]=t.applicationName,p.wt.applicationName=t.applicationName):p.A.warning("mergeContentMetadata(): applicationName was not changed.")),O.bt(t.streamUrl)&&!p.bs.Ml&&(p.wt.streamUrl!==t.streamUrl?(p.wt.streamUrl&&(n[I.Ca]=p.wt.streamUrl),i[I.Ca]=t.streamUrl,p.wt.streamUrl=t.streamUrl,p.In=p.wt.streamUrl):p.A.warning("mergeContentMetadata(): streamUrl was not changed.")),O.bt(t.viewerId)&&(p.wt.viewerId!==t.viewerId?(p.wt.viewerId&&(n[I.ra]=p.wt.viewerId),i[I.ra]=t.viewerId,p.wt.viewerId=t.viewerId):p.A.warning("mergeContentMetadata(): viewerId was not changed.")),O.bt(t.defaultResource)&&!p.bs.Vl&&(p.wt.defaultResource!==t.defaultResource?(p.wt.defaultResource&&(n[I._a]=p.wt.defaultResource),i[I._a]=t.defaultResource,p.wt.defaultResource=t.defaultResource):p.A.warning("mergeContentMetadata(): defaultResource was not changed.")),O.Tt(t.duration)&&t.duration>0&&!p.bs.Ul&&(p.wt.duration!==t.duration?(p.Us>0&&(n[I.pa]=p.Us),i[I.pa]=t.duration,p.wt.duration=t.duration,p.Us=p.wt.duration):p.A.warning("mergeContentMetadata(): duration was not changed.")),O.Tt(t.encodedFrameRate)&&t.encodedFrameRate>0&&!p.bs.kl&&(p.wt.encodedFrameRate!==t.encodedFrameRate?(p.wt.encodedFrameRate>-1&&(n[I.ga]=p.wt.encodedFrameRate),i[I.ga]=t.encodedFrameRate,p.wt.encodedFrameRate=t.encodedFrameRate,p.On=p.wt.encodedFrameRate):p.A.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!==f.StreamType.UNKNOWN&&(p.wt.streamType!==t.streamType?(p.wt.streamType!==f.StreamType.UNKNOWN&&(p.wt.streamType===f.StreamType.LIVE?n[I.Zr]=!0:n[I.Zr]=!1),t.streamType===f.StreamType.LIVE?i[I.Zr]=!0:i[I.Zr]=!1,p.wt.streamType=t.streamType):p.A.warning("mergeContentMetadata(): streamType was not changed.")),O.Gt(t.custom)>0){var e,s={},o={};for(e in t.custom)p.wt.custom[e]!==t.custom[e]?(s[e]=t.custom[e],p.wt.custom[e]&&(o[e]=p.wt.custom[e]),p.wt.custom[e]=t.custom[e]):p.A.info("mergeContentMetadata(): custom."+e+" was not changed.");O.Gt(s)>0?(O.Gt(o)>0&&(n[I.ha]=o),i[I.ha]=s):p.A.warning("mergeContentMetadata(): custom was not changed.")}O.Gt(i)>0&&this.Sf(i,n)},this.ef=function(){var t;p.A.debug("setStatesFromContentMetadata()"),p.wt.defaultResource&&this.rh(p.wt.defaultResource),p.wt.streamUrl&&this.bh(p.wt.streamUrl),p.wt.duration>0&&this.eh(p.wt.duration),p.wt.encodedFrameRate>0&&this.ah(p.wt.encodedFrameRate),p.wt.streamType!==f.StreamType.UNKNOWN&&(t=p.wt.streamType===f.StreamType.LIVE,this.Fu(t)),p.wt.assetName&&this.Yu(p.wt.assetName),p.wt.viewerId&&this.Wu(p.wt.viewerId),(p.wt.applicationName||p.wt.playerName)&&this.Xu(p.wt.applicationName||p.wt.playerName),O.Gt(p.wt.custom)>0&&this.Ju(p.wt.custom)},this.sf=function(){var t={};if(this.Hs()||(p.wt.assetName?t[I.aa]=p.wt.assetName:p.A.warning("enqueueEventForContentMetadata(): assetName was not set."),p.wt.applicationName?t[I.ua]=p.wt.applicationName:p.A.warning("enqueueEventForContentMetadata(): applicationName was not set."),p.wt.streamUrl?t[I.Ca]=p.wt.streamUrl:p.A.warning("enqueueEventForContentMetadata(): streamUrl was not set."),p.wt.viewerId?t[I.ra]=p.wt.viewerId:p.A.warning("enqueueEventForContentMetadata(): viewerId was not set."),p.wt.defaultResource?t[I._a]=p.wt.defaultResource:p.A.warning("enqueueEventForContentMetadata(): defaultResource was not set."),p.wt.duration>-1?t[I.pa]=p.wt.duration:p.A.warning("enqueueEventForContentMetadata(): duration was not set."),p.wt.encodedFrameRate>-1?t[I.ga]=p.wt.encodedFrameRate:p.A.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),p.wt.streamType!==f.StreamType.UNKNOWN?p.wt.streamType===f.StreamType.LIVE?t[I.Zr]=!0:t[I.Zr]=!1:p.A.warning("enqueueEventForContentMetadata(): streamType was not set.")),O.Gt(p.wt.custom)>0)for(var n in t[I.ha]={},p.wt.custom)t[I.ha][n]=p.wt.custom[n];else this.Hs()||p.A.warning("enqueueEventForContentMetadata(): custom tags were not set.");O.Gt(t)>0&&this.Sf(t,null)},this.af=function(){p.wt&&O.bt(p.wt.assetName)||p.A.warning("Missing assetName during session creation"),p.wt&&O.bt(p.wt.defaultResource)||p.A.warning("Missing resource during session creation"),p.wt&&O.bt(p.wt.streamUrl)||p.A.warning("Missing streamUrl during session creation"),(!p.wt||p.wt.encodedFrameRate<=0)&&p.A.warning("Missing encodedFrameRate during session creation"),p.wt&&O.bt(p.wt.viewerId)||p.A.warning("Missing viewerId during session creation"),p.wt&&p.wt.streamType&&f.StreamType.UNKNOWN!==p.wt.streamType||p.A.warning("Missing streamType during session creation"),p.wt&&O.bt(p.wt.applicationName)||p.A.warning("Missing applicationName during session creation"),(!p.wt||p.wt.duration<=0)&&p.A.warning("Missing duration during session creation")},this.Zt=function(t,n){p.Ic||(p.Ic={}),p.Ic[t]=n},this.rf=function(){var t={};p.ge&&p.ge.M&&(t[I.wa]=p.ge.M,p.M=p.ge.M),p.ge&&p.ge.V&&(t[I.Da]=p.ge.V,p.V=p.ge.V),O.Gt(t)>0&&this.Sf(t,null)},this.Df=function(){var t;p.Nc||((t=p.Jc.get(N.B))&&t!==I.H&&""!==t&&"null"!==t?(p.Oc=!1,t=D.Fl(p.zh,p.Zh),p.Ef(),setTimeout(function(){try{p&&(p.lf(),p.Ef())}catch(t){p.A.error("Error in sending urgent heartbeat: "+t)}},t)):(p.A.debug("Delay sending of urgent hb due to missing client id"),p.Oc=!0))}}).Jh=I.Iu.It+I.Iu.Tu+I.Iu.mu,m.Ct={It:"Video",Cu:"Global",Pt:"Ad"},(tt=M.Session=function(){var e=this;e.ke=null,e.N=0,e.Zc=m.Ct.It,e.Bl=!1,e.mc=!1,e.Hl=!1,e.Gl=null,e.ye=null,e.Kl=null,e.jl=!1,e.ql=a.PlayerState.NOT_MONITORED,e.xl=!1,e.Wl=!1,e.Yl=!1,e.kl=!1,e.Xl=!1,e.Hf=!1,e.Kf=!1,e.Ff=!1,e.Ll=!1,e.Ml=!1,e.Jl=!1,e.Ul=!1,e.Vl=!1,e.Ql=!1,function(t,n,i,e,s,o,r){this.N=t,this.Zc=n,this.Jc=i,this.zl=e,this.Ot=s,this.T=o,this.A=r,this.A.setModuleName("Session"),this.A.fi(O.Dt(this.N))}.apply(e,arguments),this.zc=function(t,n){e.Ot.zc(this),t&&e.kt(t),e.Jc.Zl()?e.$l(n):e.Jc.td(function(){e.$l(n)})},this.cleanup=function(){e.A.info("cleanup()"+e.tf()),e.Bl=!0,e.Ot.nf(),e.Jc.Zl()?e.nd():e.Jc.td(function(){e.nd()})},this.ed=function(){e.A.debug("cleanupAll()"+e.tf()),(e.Ds()||e.$c())&&e.ke&&e.sd(),e.A.fi(null),e.A=null,e.T=null,e.ge=null,e.Jc=null,e.zl=null,e.Ot._t(),e.Ot=null,e.mc=!0},this.nd=function(){e.Ot.uf(),e.ed()},this.$l=function(t){e.Ot.if(),e.od(),t?(e.Lt(t.rr(),t.ar()),e.Ot.ze(a.PlayerState.STOPPED),e.Ot.uf(),e.ed()):e.Ot.df()},this.od=function(){e.A.debug("setStatesFromSystemMetadata()");var t=e.zl.get(),n=t[L.BROWSER_NAME],n=(n&&e.Ot.dh(n),t[L.BROWSER_VERSION]),n=(n&&e.Ot.Eh(n),t[L.DEVICE_BRAND]),n=(n&&e.Ot.ph(n),t[L.DEVICE_MANUFACTURER]),n=(n&&e.Ot.gh(n),t[L.DEVICE_MODEL]),n=(n&&e.Ot.Ah(n),t[L.DEVICE_TYPE]),n=(n&&e.Ot.yh(n),t[L.DEVICE_VERSION]),n=(n&&e.Ot.Sh(n),t[L.FRAMEWORK_NAME]),n=(n&&e.Ot._h(n),t[L.FRAMEWORK_VERSION]),n=(n&&e.Ot.Rh(n),t[L.OPERATING_SYSTEM_NAME]),n=(n&&e.Ot.Ih(n),t[L.OPERATING_SYSTEM_VERSION]),n=(n&&e.Ot.Ch(n),t[L.DEVICE_CATEGORY]),n=(n&&e.Ot.Th(n),t[L.SCREEN_WIDTH]),n=(n&&e.Ot.mh(n),t[L.SCREEN_HEIGHT]),n=(n&&e.Ot.Nh(n),t[L.SCALE_FACTOR]);n&&e.Ot.Oh(n)},this.gi=function(t){e.A.debug("onPlayerStateChange(): "+t),e.Ot.bn!==t&&(e.Ot.bn===a.PlayerState.NOT_MONITORED&&t!==a.PlayerState.NOT_MONITORED&&(e.ql=t),e.jl?e.A.debug("onPlayerStateChange(): "+t+" (pooled, "+(e.Hl?"ad playing":"preloading")+")"):e.Ot.ze(t))},this.Ai=function(t){e.A.debug("onBitrateChange(): "+t),e.xl?e.A.info("onBitrateChange(): ignored"):e.Ot._f(t)},this.yi=function(t){e.A.debug("onAvgBitrateChange(): "+t),e.xl?e.A.info("onAvgBitrateChange(): ignored"):e.Ot.If(t)},this.Ni=function(t){e.A.debug("onDroppedFramesTotalChange(): "+t),e.Wl?e.A.info("onDroppedFramesTotalChange(): ignored"):e.Ot.wh(t)},this.Oi=function(t){e.A.debug("onDroppedFramesCountChange(): "+t),e.Wl?e.A.info("onDroppedFramesCountChange(): ignored"):e.Ot.Do(t)},this.Si=function(t,n){!O.Tt(n)&&e.Ql&&(e.A.warning("onSeekEvent(): Ignored non-integer seekToPosition data: "+n),n=-1),e.Ot.il(t,n)},this.Xn=function(t){e.A.debug("onEncodedFrameRateChange(): "+t),t>0?e.kl?e.A.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+t+" (ads)"):(e.Ot.ah(t),e.A.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+t)):e.A.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+t)},this.zn=function(t){e.A.debug("onContentLengthChange(): "+t),t>0?e.Ul?e.A.info("setContentLength(): Ignored content length data: "+t+" (ads)"):(e.Ot.eh(t),e.A.info("setContentLength(): Received content length data: "+t)):e.A.warning("setContentLength(): Ignored invalid content length data: "+t)},this.Zn=function(t){e.A.debug("onStreamUrlChange(): "+t),e.Ot.bh(t)},this._i=function(t){e.A.debug("onStreamResolutionWidthChange(): "+t),e.Ot.Pf(t)},this.Ri=function(t){e.A.debug("onStreamResolutionHeightChange(): "+t),e.Ot.Lf(t)},this.nt=function(t){e.A.debug("onConnectionTypeChange(): "+t),e.Ot.Vh(t)},this.et=function(t){e.A.debug("onLinkEncryptionChange(): "+t),e.Ot.Uh(t)},this.ii=function(t){e.A.debug("onPlayerTypeChange(): "+t),e.Ot.Fs()||e.Ot._h(t)},this.si=function(t){e.A.debug("onPlayerVersionChange(): "+t),e.Ot.Bs()||e.Ot.Rh(t)},this.Ci=function(t){e.A.debug("onCDNServerIPChange(): "+t),e.Ot.Hh(t)},this.ri=function(t){e.A.debug("onAudioLangChange(): "+t),e.Ot.Wh(t)},this.ui=function(t){e.A.debug("onSubtitleLangChange(): "+t),e.Ot.Yh(t)},this.ci=function(t){e.A.debug("onCcLangChange(): "+t),e.Ot.Xh(t)},this.Ii=function(t,n){e.A.debug("onError(): "+t+" ("+n+")"),e.Lt(t,n)},this.Wn=function(){e.A.debug("onRelease()"),e.sd()},this.xt=function(t,n,i){e.A.debug("adStart(): adStream="+t+" adPlayer="+n+" adPosition="+i),e.Hl?e.A.warning("adStart(): multiple _adStart calls, ignoring"):(e.Hl=!0,e.Gl=t,e.ye=n,e.Kl=i,e.Ot.qf(!0),e.Gl===h.AdStream.CONTENT||e.ye===h.AdPlayer.SEPARATE?(e.Ot.bn!==a.PlayerState.NOT_MONITORED&&(e.ql=e.Ot.bn),e.Ot.ze(a.PlayerState.NOT_MONITORED),e.jl=!0):e.Gl===h.AdStream.SEPARATE&&e.ye===h.AdPlayer.CONTENT&&(e.Ot.bn!==a.PlayerState.NOT_MONITORED&&(e.ql=e.Ot.bn),e.Ot.ze(a.PlayerState.NOT_MONITORED),e.jl=!0,e.xl=!0,e.Wl=!0,e.kl=!0,e.Yl=!0,e.Hf=!0,e.Kf=!0,e.Ff=!0,e.Ll=!0,e.Ml=!0,e.Jl=!0,e.Ul=!0,e.Vl=!0,e.Ql=!0))},this.Wt=function(){e.A.debug("adEnd()"),e.Hl?(e.Ot.qf(!1),e.Gl===h.AdStream.CONTENT||e.ye===h.AdPlayer.SEPARATE?e.rd||(e.jl=!1,e.Ot.ze(e.ql)):e.Gl===h.AdStream.SEPARATE&&e.ye===h.AdPlayer.CONTENT&&(e.xl=!1,e.Wl=!1,e.kl=!1,e.Yl=!1,e.Xl=!1,e.rd||(e.jl=!1,e.Ot.ze(e.ql)),e.Hf=!1,e.Kf=!1,e.Ff=!1,e.Ll=!1,e.Ml=!1,e.Jl=!1,e.Ul=!1,e.Vl=!1,e.Ql=!1),e.Hl=!1,e.Gl=e.ye=e.Kl=null):e.A.warning("adEnd(): called before _adStart, ignoring")},this.Vt=function(){e.A.debug("detachPlayer()"),e.ke?e.ke&&(e.T.F("Session.detachPlayer",function(){e.ke.Yn()}),e.ke=null,e.Ot.Zf(null),e.Ot.ze(a.PlayerState.NOT_MONITORED)):e.A.error("detachPlayer(): called before attachPlayer, ignoring")},this.sd=function(){e.ke&&(e.T.F("Session.releasePlayerStateManager",function(){e.ke.Yn()}),e.ke=null,e.Ot.Zf(null),e.Ot.ze(a.PlayerState.NOT_MONITORED))},this.Ut=function(){e.A.debug("offFocus()"),e.Ot.qf(!0),e.Ot.bn!==a.PlayerState.NOT_MONITORED&&(e.ql=e.Ot.bn),e.Ot.ze(a.PlayerState.NOT_MONITORED),e.jl=!0},this.kt=function(t){e.A.debug("attachPlayer()"),e.ke?e.A.error("attachPlayer(): detach current PlayerStateManager first"):t instanceof a?e.T.F("Session.attachPlayer()",function(){t.setMonitoringNotifier(e,e.N)?(t.li(),e.ke=t,e.Ot.Zf(e.ke)):e.A.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")}):e.A.error("attachPlayer(): Incorrect PlayerStateManager instance")},this.Ft=function(){e.A.debug("onFocus()"),e.Ot.qf(!1),e.xl=!1,e.Wl=!1,e.ad=!1,e.Yl=!1,e.Xl=!1,e.Hf=!1,e.Kf=!1,e.Ff=!1,e.Ll=!1,e.Ml=!1,e.Jl=!1,e.Ul=!1,e.Vl=!1,e.Ql=!1,e.rd||(e.jl=!1,e.ql!==a.PlayerState.NOT_MONITORED&&e.Ot.ze(e.ql))},this.Xt=function(){return e.A.debug("getPlayerStateManager()"),e.ke},this.Bt=function(){e.A.debug("contentPreload()"),e.rd?e.A.debug("contentPreload(): called twice, ignoring"):(e.rd=!0,e.jl=!0)},this.Ht=function(){e.A.debug("contentStart()"),e.rd?(e.rd=!1,e.Hl||(e.jl=!1,e.ql!==a.PlayerState.NOT_MONITORED&&e.Ot.ze(e.ql))):e.A.warning("contentStart(): called without _contentPreload, ignoring")},this.Lt=function(t,n){e.A.info("reportError(): "+t),O.bt(t)?n!==h.ErrorSeverity.FATAL&&n!==h.ErrorSeverity.WARNING?e.A.error("reportError(): invalid error severity: "+n):e.Xl?e.A.debug("reportError(): ignored"):(n=n===h.ErrorSeverity.FATAL,e.Ot.Wf(t,n)):e.A.error("reportError(): invalid error message string: "+t)},this.Mt=function(t){e.T.F("Session.updateContentMetadata",function(){e.Ot.Mt(t)})},this.qt=function(t,n){e.A.info("sendEvent(): eventName="+t+e.tf()),e.Ot.el(t,n)},this.Hs=function(){return e.Zc===m.Ct.Cu},this.Ds=function(){return e.Zc===m.Ct.It},this.$c=function(){return e.Zc===m.Ct.Pt},this.tf=function(){return e.Hs()?" (global session)":""},this.Qt=function(){return this.N},this.zt=function(){var t=null;return t=e.Jc.Zl()?e.Jc.get(N.B):t},this.Zt=function(t,n){e.Ot.Zt(t,n)}}).Pl="received no response (or a bad response) to heartbeat POST request",nt=M.SessionFactory=function(){var o=this;o.A=null,o.Hi=null,o.ud=0,o.hd=null,function(t,n,i,e){o.ge=t,o.Fi=n,o.Jc=i,o._=e,o.A=o._.buildLogger(),o.A.setModuleName("SessionFactory"),o.ud=0,o.hd={}}.apply(o,arguments),this._t=function(){for(var t in o.A=null,o.Hi=null,o.hd)o.hd[t].cleanup();o.hd=null,o.ud=0},this.fd=function(){var t=o.ud;return o.ud++,t},this.Rt=function(t,n,i,e,s){return t||(t=new f),o.ld(t,n,i,e,s)},this.W=function(t){return o.ld(t,m.Ct.Cu,void 0,C.version)},this.dd=function(){return D.vd()},this.ld=function(t,n,i,e,s){n=o._.$i(o.ge,o.Fi,o.Jc,o.dd(),n,t.ct(),e),t=o.fd();return"undefined"!==typeof s&&"undefined"!==typeof s.error?n.zc(i,s.error):(o.Ed(t,n),n.zc(i)),t},this.jt=function(t){t=o.hd[t];return t||o.A.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t},this.Nt=function(t){t=this.jt(t);return!t||t.Ds()||t.$c()||(o.A.error("Client: invalid Video sessionKey. Did you cleanup that session previously?"),t=null),t},this.Ed=function(t,n){o.hd[t]=n},this.pd=function(t){delete o.hd[t]},this.Yt=function(t){var n=o.jt(t);o.pd(t),n.cleanup()},this.tt=function(){return o.hd}},it=M.gd=function(t){this.Ae=t,this.Ad=function(i,t,n){var e=!1;this.Ae.createOnce(function(){e||i(!(e=!0),n+" ("+t+" ms)")},t,"CallbackWithTimeout.wrap");return function(t,n){e||(e=!0,i(t,n))}}},(N=M.Config=function(t,n,i){var e=this;this.A=t,this.A.setModuleName("Config"),this.Sd=n,this._d=i,this.Rd={clientId:I.H,iid:I.Cr,sendLogs:!1,maxHbInfos:I.Nr,ad_shb:I.Tr},this.m=O.Sl(this.Rd),this.Id=!1,this.Cd=!1,this.Td=[],this.Zl=function(){return this.Id},this.Et=function(){this.Sd.Et(N.md,function(t,n){t?(e.m[N.md]=e._d.Du(n),e.Nd(n),e.A.debug("load): ad configuration successfully loaded from local storage"+(e.Cd?" (was empty)":"")+".")):e.A.error("load): error loading ad configuration from local storage: "+n)}),this.Sd.Et(N.yd,function(t,n){t?(e.m[N.yd]=e._d.Du(n),e.Od(n),e.A.debug("load): configuration successfully loaded from local storage"+(e.Cd?" (was empty)":"")+".")):e.A.error("load): error loading configuration from local storage: "+n),e.Id=!0,e.wd()})},this.Od=function(t){var n,i,t=this._d.Du(t),e=!1;t?t&&(n=t[N.Dd],i=t[N.gt],n&&n!==I.H&&""!==n&&"null"!==n?(this.m[N.B]=n,this.A.debug("parse(): loaded clientId="+n+" (from local storage)")):(this.m[N.B]=this.Pd(),this.Nl()),i!==I.Cr&&""!==i&&"null"!==i&&(this.m[N.gt]=i,this.A.debug("parse(): loaded iid="+i+" (from local storage)")),(n=t[N.vf])&&n!==I.Tr&&""!==n&&"null"!==n?(this.m[N.vf]=n,this.A.debug("parse(): loaded ad_shb="+n+" (from local storage)")):"undefined"!==typeof this.m[N.vf]&&(e=!0),(i=t[N.yt])&&""!==i&&"null"!==i?(this.m[N.yt]=i,this.A.debug("parse(): loaded hbib="+i+" (from local storage)")):"undefined"!==typeof this.m[N.yt]&&(e=!0),e)&&this.Nl():(this.m[N.B]=this.Pd(),this.Nl(),this.Cd=!0)},this.Nd=function(t){var n,t=this._d.Du(t);t&&((n=t[N.vf])&&n!==I.Tr&&""!==n&&"null"!==n&&(this.m[N.vf]=n,this.A.debug("parse(): loaded ad_shb="+n+" (from local storage)")),n=t[N.yt])&&""!==n&&"null"!==n&&(this.m[N.yt]=n,this.A.debug("parse(): loaded hbib="+n+" (from local storage)"))},this.bd=function(){var t=e.m[N.yd]||{};return t[N.Dd]=this.m.clientId,"undefined"!==typeof this.m[N.vf]?t[N.vf]=this.m[N.vf]:t[N.vf]=I.Tr,"undefined"!==typeof this.m[N.yt]&&(t[N.yt]=this.m[N.yt]),this.A.debug("marshall(): saving clientId="+this.m.clientId+" (to local storage)"),this._d.wu(t)},this.Nl=function(){this.Sd.Nl(N.yd,this.bd(),function(t,n){t?e.A.debug("save(): configuration successfully saved to local storage."):e.A.error("save(): error saving configuration to local storage: "+n)})},this.Ol=function(){var t=e.m[N.md]||{};"undefined"!==typeof this.m[N.vf]?t[N.vf]=this.m[N.vf]:t[N.vf]=I.Tr,"undefined"!==typeof this.m[N.yt]&&(t[N.yt]=this.m[N.yt]),this.A.debug("_saveAd(): saving clientId="+this.m[N.vf]+" (to local storage)"),this.Sd.Nl(N.md,this._d.wu(t),function(t,n){t?e.A.debug("saveAd(): configuration successfully saved to local storage."):e.A.error("saveAd(): error saving configuration to local storage: "+n)})},this.td=function(t){this.Zl()?t():this.Td.push(t)},this.get=function(t){return this.Id?this.m[t]:null},this.set=function(t,n){this.Id&&(this.m[t]=n)},this.wd=function(){for(var t;"undefined"!==typeof(t=this.Td.shift());)t()},this.getClientId=function(){return this.m.clientId},this.Pd=function(){try{var t=2147483647;return Math.floor(Math.random()*t).toString()+"."+Math.floor(Math.random()*t).toString()+"."+Math.floor(Math.random()*t).toString()+"."+Math.floor(Math.random()*t).toString()}catch(t){this.A.debug("error caught in _generateClid()")}return"0"},this.getIid=function(){return this.m.iid}}).yd="sdkConfig",N.md="sdkAdConfig",N.Dd="clId",N.gt="iid",N.vf=I.jr,N.yt="hbi",N.B="clientId",N.vl="sendLogs",N.hl="maxHbInfos",N.gl="c3.fp.",N.tn={Al:"0",Ld:"1",nn:"2",$t:"3",yl:"4",sn:"5",en:"6"},et=M.EventQueue=function(){this.Md=[],this.Vd=0,this.zf=function(t){this.Md.push(t)},this.Jf=function(){var t=this.Vd;return this.Vd++,t},this.Qc=function(){var t=this.Md;return this.Md=[],t}},st=M.ExceptionCatcher=function(t,n,i){this.A=t,this.A.setModuleName("ExceptionCatcher"),this.Ud=n,this.C=i,this.F=function(n,t,i){try{t()}catch(t){if(i)i(t);else{if(this.C.allowUncaughtExceptions)throw t;this.kd(n,t)}}},this.kd=function(t,n){t="Uncaught exception: "+t+": "+n.toString();if(this.Ud)try{this.Ud.Tl(t)}catch(t){this.A.error("Caught exception while sending ping: "+t.toString())}this.A.error(t)}},ot=M.GatewayControl=function(t,n,i,e,s){var o=this;this.Fi=t,this.A=n,this.A.setModuleName("GatewayControl"),this.Fd=i,this._d=e,this.Bd=s,this.Tl=function(t,e){var n=(this.Bd?this.Bd.indexOf("ipv4")>-1?this.Fi.G:this.Fi.Y:this.Fi.gatewayUrl)+I.Ir;this.Fd.Hd("POST",n,this._d.wu(t),"application/json",function(t,n){var i;t?(i=o._d.Du(n),e(t,i)):e(t,n)})}},O=M.Lang={Gd:function(t){return O.bt(t)&&t&&"undefined"!==t&&"null"!==t},Kt:function(t){var n,i,e={};for(n in t)O.Gd(n)&&(i=t[n],O.Gd(i))&&(e[n]=i);return e},Jn:function(t,n,i){if(!t)throw new Error("Expected "+i+" implementation is null.");for(var e in n)if("function"!==typeof t[e])throw new Error("Expected method "+e+" in "+i+" implementation.")},Gt:function(t){var n,i=0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&i++;return i},Dt:function(t){return""+t},Kd:function(t){return Math.floor(t)},ln:function(t){return Math.abs(O.Kd(t))},jd:function(t){return Boolean(t)},bt:function(t){return"string"===typeof t&&""!==t},Dl:function(t,n){return"string"===typeof t&&"string"===typeof n&&"function"===typeof t.indexOf&&0===t.indexOf(n)},se:function(t){return"boolean"===typeof t},qd:function(t){return escape(t)},Pu:function(t){return"object"===typeof t},Of:function(t){var n,i="";for(n in t)i+=n+"="+t[n];return"Object{"+i+"}"},xd:function(t){var n,i=O.Sl(t);for(n in i)i[n]||delete i[n];return i},Sl:function(t){var n,i={};for(n in t)i[n]=t[n];return i},Nf:function(t,n){if(typeof t!==typeof n)return!1;if(t instanceof Object&&n instanceof Object){if(O.Gt(t)!==O.Gt(n))return!1;for(var i in t)if(!(t[i]===n[i]))return!1;return!0}return t===n},Ho:function(){for(var t={},n=0;n<arguments.length;n++)for(var i in arguments[n])arguments[n][i]&&(t[i]=arguments[n][i]);return t},Tt:function(t){return"number"===typeof t&&Math.round(t)===t},Wd:function(t){return"[object Array]"===Object.prototype.toString.call(t)},Yd:function(t,n){if(t!==n){if(!t||!n)return!1;if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(O.Wd(t[i])&&O.Wd(n[i])){if(!O.Yd(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1}return!0},Xd:function(){return"undefined"!==typeof Object.defineProperty&&(()=>{try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}})()},un:function(t,n,i){if(O.Xd())Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:i});else{if("undefined"===typeof t.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");t.__defineGetter__(n,i)}},hn:function(t,n,i){if(O.Xd())Object.defineProperty(t,n,{configurable:!0,set:i});else{if("undefined"===typeof t.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");t.__defineSetter__(n,i)}}},(S={two32:4294967296}).Jd=S.two32-1,S.Qd=0,O.zd=S,O.zd.Cast=function(t){t=parseInt(t,10);return t>S.Jd?t=t%S.two32:t<S.Qd&&(t=S.two32-(t=-t%S.two32)),t},O.zd.Zd=function(t){t=parseInt(t,10);return t<=S.Jd&&t>=S.Qd},_={Jd:2147483647,Qd:-2147483648},O.Cl=_,O.Cl.Cast=function(t){t=parseInt(t,10);return t>_.Jd?t=t%_.Jd:t<_.Qd&&(t=_.Jd-(t=-t%_.Jd)),t},O.Cl.Zd=function(t){t=parseInt(t,10);return t<=_.Jd&&t>=_.Qd},O.sr=function(){return"undefined"!==typeof window&&window&&window.location&&window.location.search?window.location.search:""},O.$d=function(){return document&&document.referrer?document.referrer:""},rt=M.LogBuffer=function(){this.tv=[],this.Er=function(t){this.tv.length>=32&&this.tv.shift(),this.tv.push(t)},this.Qc=function(){var t=this.tv;return this.tv=[],t}},(w=M.Ping=function(t,n,i,e){this.iv=!1,this.ev=null,this.A=t,this.A.setModuleName("Ping"),this.Fd=n,this.Fi=i,this.Bi=e,this.Tl=function(t){this.iv||(this.iv=!0,t=this.sv()+"&d="+O.qd(t.toString()),this.A.error("send(): "+t),this.Fd.Hd("GET",t,null,null,null),this.iv=!1)},this.sv=function(){if(!this.ev){var t=w.ov+"?comp="+w.nv+"&clv="+(this.Bi||h.version);if(this.Fi&&(t+="&cid="+this.Fi.customerKey),t+="&sch="+I.Pr,!this.Fi)return t;this.ev=t}return this.ev}}).nv="sdkjs",w.ov="https://pings.conviva.com/ping.ping",D=M.rv={av:4294967295,uv:2147483647,hv:-2147483648,vd:function(){return Math.floor(Math.random()*D.av)+D.hv},At:function(){return Math.floor(Math.random()*D.av)},Fl:function(t,n){return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1))+t}},P=M.cv={Qf:function(t,n,i,e){return isNaN(t)||"number"!==typeof t||t===e?e:(e=O.Kd(t),P.fv(e,n,i))},fv:function(t,n,i){return O.Tt(i)&&t>i?t=i:O.Tt(n)&&t<n&&(t=n),t},Nn:function(t){return t=-1!==t&&-2!==t?P.Qf(t,0,null,-1):t}},b=M.StreamerError=function(){var i=this;i.errorCode=null,i.severity=h.ErrorSeverity.FATAL,function(t,n){i.errorCode=t,i.severity=n}.apply(i,arguments),this.rr=function(){return i.errorCode},this.ar=function(){return i.severity}},at=M.HttpClient=function(t,n,i,e){this.A=t,this.A.setModuleName("HttpClient"),this.bi=n,this.dv=i,this.C=e,this.Hd=function(t,n,i,e,s){var o=1e3*this.C.httpTimeout,r=null;s&&(r=this.dv.Ad(s,o,"HTTP timeout")),this.A.debug("request(): calling HttpInterface.makeRequest"),this.bi.makeRequest(t,n,i,e,o,r)}},(ut=M.Logger=function(t,n,i,e,s){this.Vi=t,this.Di=n,this.I=i,this.Hi=e,this.ki=s,this.debug=function(t){this.log(t,u.LogLevel.DEBUG)},this.info=function(t){this.log(t,u.LogLevel.INFO)},this.warning=function(t){this.log(t,u.LogLevel.WARNING)},this.error=function(t){this.log(t,u.LogLevel.ERROR)},this.log=function(t,n){t=this.Ev(t,n);this.Hi.Er(t),this.I.logLevel<=n&&this.Vi.consoleLog(t,n)},this.pv=function(t){return"["+this.kn+"] "+t},this.gv=function(t){return"["+this.ki+"] "+t},this.Av=function(t){return"[Conviva] "+t},this.yv=function(t){return"["+(this.Di.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+t},this.Sv=function(t,n){return"["+ut.vv(n)+"] "+t},this._v=function(t){return t=this.Rv?"sid="+this.Rv+" "+t:t},this.fi=function(t){this.Rv=t},this.setModuleName=function(t){this.kn=t},this.Ev=function(t,n){return this.Av(this.yv(this.Sv(this.gv(this.pv(this._v(t))),n)))}}).vv=function(t){var n;switch(t){case u.LogLevel.ERROR:n="ERROR";break;case u.LogLevel.WARNING:n="WARNING";break;case u.LogLevel.INFO:n="INFO";break;case u.LogLevel.DEBUG:n="DEBUG"}return n},M.Storage=function(t,n,i,e){this.A=t,this.A.setModuleName("Storage"),this.Li=n,this.dv=i,this.C=e,this.Et=function(t,n){n=this.dv.Ad(n,1e3*this.C.storageTimeout,"storage load timeout");this.A.debug("load): calling StorageInterface.loadData"),this.Li.loadData(M.Storage.Iv,t,n)},this.Nl=function(t,n,i){i=this.dv.Ad(i,1e3*this.C.storageTimeout,"storage save timeout");this.A.debug("save(): calling StorageInterface.saveData"),this.Li.saveData(M.Storage.Iv,t,n,i)}},M.Storage.Iv="Conviva",(L=M.SystemMetadata=function(t,n,i){this.A=t,this.A.setModuleName("SystemMetadata"),this.Mi=n,this.T=i,this.Cv=null,this.get=function(){return this.Cv||this.retrieve(),this.Cv},this.retrieve=function(){var t,n={},e=(n[L.BROWSER_NAME]=this.Mi.getBrowserName,n[L.BROWSER_VERSION]=this.Mi.getBrowserVersion,n[L.DEVICE_BRAND]=this.Mi.getDeviceBrand,n[L.DEVICE_MANUFACTURER]=this.Mi.getDeviceManufacturer,n[L.DEVICE_MODEL]=this.Mi.getDeviceModel,n[L.DEVICE_TYPE]=this.Mi.getDeviceType,n[L.DEVICE_VERSION]=this.Mi.getDeviceVersion,n[L.FRAMEWORK_NAME]=this.Mi.getFrameworkName,n[L.FRAMEWORK_VERSION]=this.Mi.getFrameworkVersion,n[L.OPERATING_SYSTEM_NAME]=this.Mi.getOperatingSystemName,n[L.OPERATING_SYSTEM_VERSION]=this.Mi.getOperatingSystemVersion,n[L.DEVICE_CATEGORY]=this.Mi.getDeviceCategory,n[L.SCREEN_WIDTH]=this.Mi.getScreenWidth,n[L.SCREEN_HEIGHT]=this.Mi.getScreenHeight,n[L.SCALE_FACTOR]=this.Mi.getScaleFactor,this);for(t in this.A.debug("retrieve(): calling MetadataInterface methods"),n)((n,i)=>{e.T.F("Session.getSystemMetadataSchema(): "+n,function(){var t=i[n];i[n]=t.call(e.Mi)})})(t,n),O.bt(n[t])||delete n[t];var i=!1;if("undefined"!==typeof n[L.DEVICE_TYPE]){for(var s in h.DeviceType)if(n[L.DEVICE_TYPE]===h.DeviceType[s]){i=!0;break}i||delete n[L.DEVICE_TYPE]}if(i=!1,"undefined"!==typeof n[L.DEVICE_CATEGORY]){for(var o in h.DeviceCategory)if(n[L.DEVICE_CATEGORY]===h.DeviceCategory[o]){i=!0;break}i||delete n[L.DEVICE_CATEGORY]}this.Cv=O.xd(n)}}).BROWSER_NAME="browserName",L.BROWSER_VERSION="browserVersion",L.DEVICE_BRAND="deviceBrand",L.DEVICE_MANUFACTURER="deviceManufacturer",L.DEVICE_MODEL="deviceModel",L.DEVICE_TYPE="deviceType",L.DEVICE_VERSION="deviceVersion",L.FRAMEWORK_NAME="frameworkName",L.FRAMEWORK_VERSION="frameworkVersion",L.OPERATING_SYSTEM_NAME="operatingSystemName",L.OPERATING_SYSTEM_VERSION="operatingSystemVersion",L.DEVICE_CATEGORY="deviceCategory",L.SCREEN_WIDTH="screenWidth",L.SCREEN_HEIGHT="screenHeight",L.SCALE_FACTOR="scaleFactor",ht=M.Time=function(t,n){this.Di=t,this.A=n,this.A.setModuleName("Time"),this.current=function(){var t=this.Di.getEpochTimeMs();return O.Tt(t)||this.A.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+t+")"),t}},ct=M.Timer=function(t,n,i){var s=this;this.A=t,this.A.setModuleName("Timer"),this.Pi=n,this.T=i,this.create=function(t,n,i){return this.createTimer(function(){s.T.F(i,function(){t()})},n,i)},this.createOnce=function(t,n,i){var e={cancel:null};return e.cancel=this.createTimer(function(){s.T.F(i,function(){e&&"function"===typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),t()})},n,i),e.cancel},this.createTimer=function(t,n,i){return this.A.debug("createTimer(): calling TimerInterface.create"),this.Pi.createTimer(t,n,i)}},V});