/*! (C) 2023 Conviva, Inc. All rights reserved. Confidential and proprietary. */

!function(t,n){"function"===typeof define&&define.amd?define(n):("object"===typeof exports||"object"===typeof module&&module.exports)&&(module.exports=n()),"undefined"!==typeof t&&t&&(t.Conviva||t.ConvivaLoading||(t.ConvivaLoading=!0,t.Conviva=n(),delete t.ConvivaLoading))}(this,function(){var ht={};return function(){"use strict";var ut={};!function(){var A=ht.Constants={};A.version="4.5.9",A.CUSTOMER_KEY="customerKey",A.GATEWAY_URL="gatewayUrl",A.LOG_LEVEL="logLevel",A.ASSET_NAME="Conviva.assetName",A.PLAYER_NAME="Conviva.applicationName",A.APPLICATION_VERSION="c3.app.version",A.IS_LIVE="Conviva.streamType",A.ENCODED_FRAMERATE="Conviva.encodedFrameRate",A.DEFAULT_RESOURCE="Conviva.defaultResource",A.STREAM_URL="Conviva.streamUrl",A.VIEWER_ID="Conviva.viewerId",A.DURATION="Conviva.duration",A.UTM_TRACKING_URL="c3.cm.utmTrackingUrl",A.POD_INDEX="podIndex",A.POD_POSITION="podPosition",A.POD_DURATION="podDuration",A.AD_TYPE="adType",A.MODULE_NAME="Conviva.moduleName",A.MODULE_VERSION="Conviva.moduleVersion",A.FRAMEWORK_NAME="Conviva.frameworkName",A.FRAMEWORK_VERSION="Conviva.frameworkVersion",A.i="Constants not yet configured",A.e="Invalid : Did you report playback ended?",A.s="Invalid : Did you report ad playback ended?",A.o="Player cannot be null",A.a="PlaybackAnlytics already built",A.u="PlaybackAnlytics not yet built",A.Playback={BITRATE:"BITRATE",PLAY_HEAD_TIME:"PLAY_HEAD_TIME",RESOLUTION:"RESOLUTION",BUFFER_LENGTH:"BUFFER_LENGTH",PLAYER_STATE:"PLAYER_STATE",RENDERED_FRAMERATE:"RENDERED_FRAMERATE",SEEK_STARTED:"SEEK_STARTED",SEEK_ENDED:"SEEK_ENDED",CDN_IP:"CDN_IP",DROPPED_FRAMES_TOTAL:"DROPPED_FRAMES_TOTAL",DROPPED_FRAMES_COUNT:"DROPPED_FRAMES_COUNT"},A.Network={SIGNAL_STRENGTH:"SIGNAL_STRENGTH",LINK_ENCRYPTION:"LINK_ENCRYPTION",CONNECTION_TYPE:"CONNECTION_TYPE"},A.ErrorSeverity={FATAL:1,WARNING:0},A.NO_SESSION_KEY=-2,A.AdPosition={PREROLL:"Pre-roll",MIDROLL:"Mid-roll",POSTROLL:"Post-roll"},A.AdPlayer={CONTENT:"CONTENT",SEPARATE:"SEPARATE"},A.DeviceType={DESKTOP:"DESKTOP",CONSOLE:"Console",SETTOP:"Settop",MOBILE:"Mobile",TABLET:"Tablet",SMARTTV:"SmartTV"},A.AdType={CLIENT_SIDE:"Client Side",SERVER_SIDE:"Server Side"},A.AdSlates={BLACKOUT_SLATE:"Blackout slate",TECHNICAL_DIFFICULTIES_SLATE:"Technical Difficulties slate",COMMERCIAL_SLATE:"Commercial Break slate",OTHER_SLATE:"Other slate",VPAID:"VPAID",REGULAR:"Regular Ad"},A.AdServingType={INLINE:"Inline",WRAPPER:"Wrapper"},A.DeviceCategory={ANDROID_DEVICE:"AND",APPLE_DEVICE:"APL",CHROMECAST:"CHR",DESKTOP_APP:"DSKAPP",DEVICE_SIMULATOR:"SIMULATOR",LG_TV:"LGTV",NINTENDO:"NINTENDO",PLAYSTATION:"PS",ROKU:"RK",SAMSUNG_TV:"SAMSUNGTV",SMART_TV:"TV",SET_TOP_BOX:"STB",TIVO:"TIVO",WEB:"WEB",WINDOWS_DEVICE:"WIN",XBOX:"XB",KAIOS_DEVICE:"KAIOS"},A.LogLevel={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},A.PlayerState={STOPPED:"STOPPED",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED",UNKNOWN:"UNKNOWN",NOT_MONITORED:"NOT_MONITORED"},A.Events={USER_WAIT_STARTED:"Conviva.UserWaitStarted",USER_WAIT_ENDED:"Conviva.UserWaitEnded",BUMPER_VIDEO_STARTED:"Conviva.BumperVideoStarted",BUMPER_VIDEO_ENDED:"Conviva.BumperVideoEnded",AD_REQUESTED:"Conviva.AdRequested",AD_RESPONSE:"Conviva.AdResponse",AD_SLOT_STARTED:"Conviva.SlotStarted",AD_ATTEMPTED:"Conviva.AdAttempted",AD_SLOT_ENDED:"Conviva.SlotEnded",AD_IMPRESSION_START:"Conviva.AdImpression",AD_START:"Conviva.AdStart",AD_FIRST_QUARTILE:"Conviva.AdFirstQuartile",AD_MID_QUARTILE:"Conviva.AdMidQuartile",AD_THIRD_QUARTILE:"Conviva.AdThirdQuartile",AD_COMPLETE:"Conviva.AdComplete",AD_END:"Conviva.AdEnd",AD_IMPRESSION_END:"Conviva.AdImpressionEnd",AD_SKIPPED:"Conviva.AdSkipped",AD_ERROR:"Conviva.AdError",AD_PROGRESS:"Conviva.AdProgress",AD_CLOSE:"Conviva.AdClose",CONTENT_PAUSED:"Conviva.PauseContent",CONTENT_RESUMED:"Conviva.ResumeContent",POD_START:"Conviva.PodStart",POD_END:"Conviva.PodEnd"},A.ErrorType={ERROR_UNKNOWN:"ERROR_UNKNOWN",ERROR_IO:"ERROR_IO",ERROR_TIMEOUT:"ERROR_TIMEOUT",ERROR_NULL_ASSET:"ERROR_NULL_ASSET",ERROR_MISSING_PARAMETER:"ERROR_MISSING_PARAMETER",ERROR_NO_AD_AVAILABLE:"ERROR_NO_AD_AVAILABLE",ERROR_PARSE:"ERROR_PARSE",ERROR_INVALID_VALUE:"ERROR_INVALID_VALUE",ERROR_INVALID_SLOT:"ERROR_INVALID_SLOT",ERROR_3P_COMPONENT:"ERROR_3P_COMPONENT",ERROR_UNSUPPORTED_3P_FEATURE:"ERROR_UNSUPPORTED_3P_FEATURE",ERROR_DEVICE_LIMIT:"ERROR_DEVICE_LIMIT",ERROR_UNMATCHED_SLOT_SIZE:"ERROR_UNMATCHED_SLOT_SIZE"},A.StreamType={UNKNOWN:"UNKNOWN",LIVE:"LIVE",VOD:"VOD"},A.CallbackFunctions={CONSOLE_LOG:"consoleLog",MAKE_REQUEST:"makeRequest",SAVE_DATA:"saveData",LOAD_DATA:"loadData",GET_EPOCH_TIME_IN_MS:"getEpochTimeInMs",CREATE_TIMER:"createTimer",GENERATE_HASH:"generateHash",BASE64_ENCODE:"base64Encode"},A.DeviceMetadata={BRAND:"DeviceBrand",MANUFACTURER:"DeviceManufacturer",MODEL:"DeviceModel",TYPE:"DeviceType",VERSION:"DeviceVersion",OS_NAME:"OperatingSystemName",OS_VERSION:"OperatingSystemVersion",CATEGORY:"DeviceCategory",SCREEN_RESOLUTION_WIDTH:"ScreenWidth",SCREEN_RESOLUTION_HEIGHT:"ScreenHeight",SCREEN_RESOLUTION_SCALE_FACTOR:"ScaleFactor"},A.AD_PRELOAD_FEATURE="adPreloading",A.AD_TAG_URL="adTagUrl",A.IMASDK_CONTENT_PLAYER="imaMainContentPlayer",A.CONVIVA_AD_MODULE="convivaAdModule",A.CONVIVA_MODULE="convivaModule",A.MEDIA_ELEMENT="mediaElement";var h=ht.Client=function(){var u=this;this.h=!1,this.version=h.version,this.c=null,this.l=null,this.d=null,this.v=-1,this.p=null,this.g=null,this.y=null,this.A=null,this.S=-1,this.R=!1,this.m={},this.C=function(){u.c&&arguments.length>0&&u.c.info(" Client:: uniqueIdentifierCallback(): "+arguments[0])},this.T={},this.w=null,this.I=null,this.N=null,this.O=function(){this.y._("Client.makeIPV4IPV6GlobalSessions",function(){var t;!u.A||null!==(t=u.A.get(Y.P))&&t!==H.D&&u.l&&((t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.p.M.indexOf(c.L)>-1?c.L:c.V,u.k=u.l.U(t,null),(t=new f).custom["c3.IPV4IPV6GlobalSession"]="T",t.custom["c3.domain"]=u.p.F.indexOf(c.B)>-1?c.B:c.H,u.G=u.l.U(t,null))})},this.K=function(i){u.y._("Client.updateConnectionType",function(){if(u.w=i,u.l){var t,n=u.l.j();for(t in n)n[t].W(i)}})},this.q=function(i){u.y._("Client.updateLinkEncryption",function(){if(u.I=i,u.l){var t,n=u.l.j();for(t in n)n[t].Y(i)}})},this.J=function(t){u.y._("Client.updateSignalStrength",function(){u.N=t})},function(t,n,i,e){if(!(t instanceof c))throw new Error("clientSettings parameter should be an instance of ClientSettings.");if(!(n instanceof g))throw new Error("systemFactory parameter should be an instance of SystemFactory.");t.gatewayUrl!==c.X+c.Q&&t.gatewayUrl!==c.z+c.Q||(this.h=!0),e&&(this.version=e),this.p=t.Z(),this.d=n,this.d.$("SDK",this.p,this.version),this.y=this.d.tt(this.version),this.y._("Client.init",function(){if(u.A=u.d.nt(),u.A.it(),u.S=u.A.get(Y.et),-1!==u.S&&void 0!==u.S&&null!==u.S||(u.S=tt.rt()),u.c=u.d.buildLogger(),u.c.setModuleName("Client"),u.h&&u.c.info("Gateway URL should not be set to https://cws.conviva.com or http://cws.conviva.com, therefore this call is ignored"),u.c.info("init(): url="+u.p.gatewayUrl+" customerKey="+u.p.customerKey),u.l=u.d.ot(u,u.p,u.A),i)for(var t in i)switch(t){case A.Network.CONNECTION_TYPE:u.K(i[t]);break;case A.Network.LINK_ENCRYPTION:u.q(i[t]);break;case A.Network.SIGNAL_STRENGTH:u.J(i[t])}u.O(),u.c.info("init(): done.")},function(t){throw new Error("Client constructor failed: "+t.message)})}.apply(this,arguments),this.release=function(){this.R||this.y._("Client.release",function(){u.c&&(u.c.info("release()"),u.c=null),u.l.ut(),u.l=null,u.v=-1,u.S=-1,u.y=null,u.p=null,u.g=null,u.d=null,u.R=!0})},this.createSession=function(t,n,i){var e=h.NO_SESSION_KEY;return this.R||(!t||t instanceof f?this.y._("Client.createSession",function(){e=u.l.ht(t,j.ft.ct,n,(i?A:u).version)}):u.c.error("createSession(): expecting an instance of ContentMetadata for contentMetadata parameter")),e},this.createAdSession=function(i,e,s,r,o){var a=h.NO_SESSION_KEY;return this.R||(!e||e instanceof f?this.y._("Client.createAdSession",function(){var t,n;e||(e=new f),!z.lt(i)||i===h.NO_SESSION_KEY||(t=u.l.dt(i))&&(n=e.custom[A.APPLICATION_VERSION],e.applicationName&&e.viewerId&&"undefined"!==typeof n&&n||t.vt&&t.vt.pt&&(!e.viewerId&&t.vt.pt.viewerId&&(e.viewerId=t.vt.pt.viewerId),!e.applicationName&&t.vt.pt.applicationName&&(e.applicationName=t.vt.pt.applicationName),"undefined"!==typeof n&&n||"undefined"!==typeof(n=t.vt.pt.custom[A.APPLICATION_VERSION])&&n&&(e.custom[A.APPLICATION_VERSION]=n)),e.custom["c3.csid"]=z.Et(t.S)),a=u.l.ht(e,j.ft.gt,s,(r?A:u).version,o)}):u.c.error("createAdSession(): expecting an instance of ContentMetadata for adMetadata parameter")),a},this.reportError=function(n,i,e){this.R||(z.yt(i)?e===h.ErrorSeverity.FATAL||e===h.ErrorSeverity.WARNING?this.y._("Client.reportError",function(){var t=u.l.dt(n);t&&t.At(i,e)}):this.c.error("reportError(): invalid error severity: "+e):this.c.error("reportError(): invalid error message string: "+i))},this.updateContentMetadata=function(i,e){this.R||(e instanceof f?this.y._("Client.updateContentMetadata",function(){var t,n=u.l.dt(i);n&&(t=e.Z(),n.St(t))}):u.c.error("updateContentMetadata(): expecting an instance of ContentMetadata for contentMetadata parameter"))},this.detachPlayer=function(n){this.R||this.y._("Client.detachPlayer",function(){var t=u.l.dt(n);t&&t.Rt()})},this.mt=function(n){this.R||this.y._("Client.offFocus",function(){var t=u.l.dt(n);t&&t.mt()})},this.attachPlayer=function(n,i){this.R||(i instanceof a?this.y._("Client.attachPlayer",function(){var t=u.l.dt(n);t&&t.Ct(i)}):u.c.error("attachPlayer(): expecting an instance of PlayerStateManager for playerStateManager parameter"))},this.Tt=function(n){this.R||this.y._("Client.onFocus",function(){var t=u.l.dt(n);t&&t.Tt()})},this.contentPreload=function(n){this.R||this.y._("Client.contentPreload",function(){var t=u.l.dt(n);t&&t.wt()})},this.contentStart=function(n){this.R||this.y._("Client.contentStart",function(){var t=u.l.dt(n);t&&t.It()})},this.sendCustomEvent=function(i,e,s){this.R||(z.yt(e)?(z.Nt(s)<=0&&u.c.warning("eventAttributes(): should have proper data."),this.y._("Client.sendCustomEvent",function(){i===h.NO_SESSION_KEY&&(u.v<0&&(n=new f,u.v=u.l.U(n,null)),i=u.v);var t=z.Ot(s),n=u.l._t(i);n&&n.Pt(e,t)})):u.c.error("sendCustomEvent(): eventName parameter must be a valid string."))},this.adStart=function(n,i,e,s){this.R||(i===h.AdStream.CONTENT||i===h.AdStream.SEPARATE?e===h.AdPlayer.CONTENT||e===h.AdPlayer.SEPARATE?(s!==h.AdPosition.PREROLL&&s!==h.AdPosition.MIDROLL&&s!==h.AdPosition.POSTROLL&&this.c.info("adStart(): ignored, invalid value for adPosition parameter: "+s),this.y._("Client.adStart",function(){var t=u.l.dt(n);t&&t.Dt(i,e,s)})):this.c.error("adStart(): ignored, invalid value for adPlayer parameter: "+e):this.c.error("adStart(): ignored, invalid value for adStream parameter: "+i))},this.adEnd=function(n){this.R||this.y._("Client.adEnd",function(){var t=u.l.dt(n);t&&t.bt()})},this.cleanupSession=function(t){this.R||(t!==h.NO_SESSION_KEY?this.y._("Client.cleanupSession",function(){u.l.dt(t)&&u.l.Mt(t)}):this.c.warning("cleanupSession(): ignored, can't cleanup Client.NO_SESSION_KEY"))},this.getAttachedPlayer=function(n){var i=null;return this.R||(n===h.NO_SESSION_KEY?this.c.warning("getAttachedPlayer(): ignored for Client.NO_SESSION_KEY"):this.y._("Client.getAttachedPlayer",function(){var t=u.l.dt(n);t&&(i=t.Lt())})),i},this.isPlayerAttached=function(t){return!this.R&&null!==this.getAttachedPlayer(t)},this.getPlayerStateManager=function(t){if(this.R)throw new Error("This instance of Conviva.Client has been released.");return new a(this.d,(t?A:u).version)},this.releasePlayerStateManager=function(t){if(this.R)throw new Error("This instance of Conviva.Client has been released.");this.y._("Client.releasePlayerStateManager",function(){t instanceof a&&t.release()})},this.Vt=function(){return this.p},this.getId=function(){return this.S},this.getSessionId=function(n){if(this.R)return A.NO_SESSION_KEY;var i=null;return this.y._("Client.getSessionId",function(){var t=u.l.dt(n);t&&(i=t.kt())}),i},this.getClientId=function(n){if(this.R)return null;var i=null;return this.y._("Client.getClientId",function(){var t=u.l.dt(n);t&&(i=t.Ut())}),i},this.Ft=function(n,i,e){this.R||this.y._("Client.updateCustomMetric",function(){var t=u.l.dt(n);t&&t.Ft(i,e)})},this.setUniqueIdentifier=function(t,n){if(this.R)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)this.m[i]=t[i];n&&(this.C=n)},this.setUserPreferenceForDataCollection=function(t,n){if(this.R)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var i in t)"false"===t[i]?this.T[i]=n?Y.Ht.Bt:Y.Ht.Gt:this.T[i]=Y.Ht.Kt},this.setUserPreferenceForDataDeletion=function(t){if(this.R)throw new Error("This instance of Conviva.Client has been released.");if(!t||"undefined"===typeof t||"{}"===JSON.stringify(t))throw new Error("Identifiers are not set. No action taken !!");for(var n in t)"true"===t[n]?this.T[n]=Y.Ht.jt:this.T[n]=Y.Ht.Kt}};h.version="4.5.9L",h.NO_SESSION_KEY=A.NO_SESSION_KEY,h.AdPosition={PREROLL:A.AdPosition.PREROLL,MIDROLL:A.AdPosition.MIDROLL,POSTROLL:A.AdPosition.POSTROLL},h.AdStream={CONTENT:A.AdPlayer.CONTENT,SEPARATE:A.AdPlayer.SEPARATE},h.AdPlayer={CONTENT:A.AdPlayer.CONTENT,SEPARATE:A.AdPlayer.SEPARATE},h.ErrorSeverity={FATAL:A.ErrorSeverity.FATAL,WARNING:A.ErrorSeverity.WARNING},h.DeviceType={DESKTOP:A.DeviceType.DESKTOP,CONSOLE:A.DeviceType.CONSOLE,SETTOP:A.DeviceType.SETTOP,MOBILE:A.DeviceType.MOBILE,TABLET:A.DeviceType.TABLET,SMARTTV:A.DeviceType.SMARTTV},h.AdTechnology={CLIENT_SIDE:A.AdType.CLIENT_SIDE,SERVER_SIDE:A.AdType.SERVER_SIDE},h.AdType={BLACKOUT_SLATE:A.AdSlates.BLACKOUT_SLATE,TECHNICAL_DIFFICULTIES_SLATE:A.AdSlates.TECHNICAL_DIFFICULTIES_SLATE,COMMERCIAL_SLATE:A.AdSlates.COMMERCIAL_SLATE,OTHER_SLATE:A.AdSlates.OTHER_SLATE,VPAID:A.AdSlates.VPAID,REGULAR:A.AdSlates.REGULAR},h.AdServingType={INLINE:A.AdServingType.INLINE,WRAPPER:A.AdServingType.WRAPPER},h.DeviceCategory={ANDROID_DEVICE:A.DeviceCategory.ANDROID_DEVICE,APPLE_DEVICE:A.DeviceCategory.APPLE_DEVICE,CHROMECAST:A.DeviceCategory.CHROMECAST,DESKTOP_APP:A.DeviceCategory.DESKTOP_APP,DEVICE_SIMULATOR:A.DeviceCategory.DEVICE_SIMULATOR,LG_TV:A.DeviceCategory.LG_TV,NINTENDO:A.DeviceCategory.NINTENDO,PLAYSTATION:A.DeviceCategory.PLAYSTATION,ROKU:A.DeviceCategory.ROKU,SAMSUNG_TV:A.DeviceCategory.SAMSUNG_TV,SMART_TV:A.DeviceCategory.SMART_TV,SET_TOP_BOX:A.DeviceCategory.SET_TOP_BOX,TIVO:A.DeviceCategory.TIVO,WEB:A.DeviceCategory.WEB,WINDOWS_DEVICE:A.DeviceCategory.WINDOWS_DEVICE,XBOX:A.DeviceCategory.XBOX,KAIOS_DEVICE:A.DeviceCategory.KAIOS_DEVICE};var c=ht.ClientSettings=function(){var i=this;this.xt=null,z.Wt(this,"customerKey",function(){return this.xt}),z.qt(this,"customerKey",function(t){z.yt(t)&&(this.xt=t)}),this.Yt=c.Jt,z.Wt(this,"heartbeatInterval",function(){return this.Yt}),z.qt(this,"heartbeatInterval",function(t){var n;"number"!==typeof t||(n=z.Xt(t))===t&&(this.Yt=n)}),this.Qt=null,this.M=null,this.F=null,z.Wt(this,"gatewayUrl",function(){return this.Qt}),z.qt(this,"gatewayUrl",function(t){var n;z.yt(t)&&("https"!==(n=t.split("://"))[0]&&"http"!==n[0]||-1!==t.indexOf(".com",t.length-".com".length)&&(this.Qt=t))}),function(t){if(!z.yt(t))throw new Error("customerKey must be valid");this.customerKey=t}.apply(this,arguments),this.equals=function(t){return this.customerKey===t.customerKey&&this.gatewayUrl===t.gatewayUrl&&this.heartbeatInterval===t.heartbeatInterval},this.Z=function(){var t=new c(this.customerKey);return t.gatewayUrl=function(t){if(z.yt(t)){var n=t.split("://");if(-1===n[1].indexOf("cws.conviva.com")&&("https"===n[0]||"http"===n[0]))return i.M="https://"+i.customerKey+"."+c.V,i.F="https://"+i.customerKey+"."+c.H,t}return i.M="https://"+i.customerKey+"."+c.L,i.F="https://"+i.customerKey+"."+c.B,"https://"+i.customerKey+"."+c.Q}(this.gatewayUrl),t.heartbeatInterval=this.heartbeatInterval,t.M=this.M,t.F=this.F,t}};c.zt="https://conviva.testonly.conviva.com",c.Zt="https://cws.conviva.com",c.Q="cws.conviva.com",c.L="ipv4.cws.conviva.com",c.B="ipv6.cws.conviva.com",c.$t="conviva.testonly.conviva.com",c.V="ipv4.testonly.conviva.com",c.H="ipv6.testonly.conviva.com",c.X="https://",c.z="http://",c.tn=5,c.Jt=20;var f=ht.ContentMetadata=function(){this.nn=null,z.Wt(this,"assetName",function(){return this.nn}),z.qt(this,"assetName",function(t){if("string"!==typeof t)return;this.nn=t}),this.in={},z.Wt(this,"custom",function(){return this.in}),z.qt(this,"custom",function(t){if("object"!==typeof t)return;this.in=z.Ot(t)}),this.en=null,z.Wt(this,"defaultResource",function(){return this.en}),z.qt(this,"defaultResource",function(t){if("string"!==typeof t)return;this.en=t}),this.sn=null,z.Wt(this,"viewerId",function(){return this.sn}),z.qt(this,"viewerId",function(t){if("string"!==typeof t)return;this.sn=t}),this.rn=null,z.Wt(this,"applicationName",function(){return this.rn}),z.qt(this,"applicationName",function(t){if("string"!==typeof t)return;this.rn=t}),this.on=null,z.Wt(this,"streamUrl",function(){return this.on}),z.qt(this,"streamUrl",function(t){if("string"!==typeof t)return;this.on=t}),this.an=f.StreamType.UNKNOWN,z.Wt(this,"streamType",function(){return this.an}),z.qt(this,"streamType",function(t){t!==f.StreamType.UNKNOWN&&t!==f.StreamType.VOD&&t!==f.StreamType.LIVE||(this.an=t)}),this.un=-1,z.Wt(this,"duration",function(){return this.un}),z.qt(this,"duration",function(t){this.un=nt.hn(t)}),this.cn=-1,z.Wt(this,"encodedFrameRate",function(){return this.cn}),z.qt(this,"encodedFrameRate",function(t){this.cn=nt.hn(t)}),function(){}.apply(this,arguments),this.Z=function(){var t,n=new f;for(t in n.assetName=this.assetName,n.applicationName=this.applicationName,n.streamUrl=this.streamUrl,n.viewerId=this.viewerId,n.defaultResource=this.defaultResource,n.streamType=this.streamType,n.duration=this.duration,n.encodedFrameRate=this.encodedFrameRate,this.custom)n.custom[t]=this.custom[t];return n}};f.StreamType={UNKNOWN:A.StreamType.UNKNOWN,LIVE:A.StreamType.LIVE,VOD:A.StreamType.VOD},ht.ErrorType={ERROR_UNKNOWN:A.ErrorType.ERROR_UNKNOWN,ERROR_IO:A.ErrorType.ERROR_IO,ERROR_TIMEOUT:A.ErrorType.ERROR_TIMEOUT,ERROR_NULL_ASSET:A.ErrorType.ERROR_NULL_ASSET,ERROR_MISSING_PARAMETER:A.ErrorType.ERROR_MISSING_PARAMETER,ERROR_NO_AD_AVAILABLE:A.ErrorType.ERROR_NO_AD_AVAILABLE,ERROR_PARSE:A.ErrorType.ERROR_PARSE,ERROR_INVALID_VALUE:A.ErrorType.ERROR_INVALID_VALUE,ERROR_INVALID_SLOT:A.ErrorType.ERROR_INVALID_SLOT,ERROR_3P_COMPONENT:A.ErrorType.ERROR_3P_COMPONENT,ERROR_UNSUPPORTED_3P_FEATURE:A.ErrorType.ERROR_UNSUPPORTED_3P_FEATURE,ERROR_DEVICE_LIMIT:A.ErrorType.ERROR_DEVICE_LIMIT,ERROR_UNMATCHED_SLOT_SIZE:A.ErrorType.ERROR_UNMATCHED_SLOT_SIZE},ht.Events={AD_REQUESTED:A.Events.AD_REQUESTED,AD_RESPONSE:A.Events.AD_RESPONSE,AD_SLOT_STARTED:A.Events.AD_SLOT_STARTED,AD_ATTEMPTED:A.Events.AD_ATTEMPTED,AD_SLOT_ENDED:A.Events.AD_SLOT_ENDED,AD_IMPRESSION_START:A.Events.AD_IMPRESSION_START,AD_START:A.Events.AD_START,AD_FIRST_QUARTILE:A.Events.AD_FIRST_QUARTILE,AD_MID_QUARTILE:A.Events.AD_MID_QUARTILE,AD_THIRD_QUARTILE:A.Events.AD_THIRD_QUARTILE,AD_COMPLETE:A.Events.AD_COMPLETE,AD_END:A.Events.AD_END,AD_IMPRESSION_END:A.Events.AD_IMPRESSION_END,AD_SKIPPED:A.Events.AD_SKIPPED,AD_ERROR:A.Events.AD_ERROR,AD_PROGRESS:A.Events.AD_PROGRESS,AD_CLOSE:A.Events.AD_CLOSE,CONTENT_PAUSED:A.Events.CONTENT_PAUSED,CONTENT_RESUMED:A.Events.CONTENT_RESUMED,POD_START:A.Events.POD_START,POD_END:A.Events.POD_END};var a=ht.PlayerStateManager=function(){var e=this;e.fn=null,e.ln=-2,e.dn=a.PlayerState.UNKNOWN,e.vn={},e.pn=-2,e.cn=-2,e.un=-2,e.En=null,e.gn=null,e.on=null,e.yn=null,e.An=null,e.Sn=-1,e.Rn=-1,e.w=null,e.I=null,e.mn=null,e.Cn=[],e.R=!1,this.release=function(){e.R||e.y._("PlayerStateManager.release",function(){e.fn&&e.fn.Tn(),e.wn(),e.d=null,e.c=null,e.y=null,e.R=!0})},this.setPlayheadTime=function(){},this.setBufferLength=function(){},this.setRenderedFrameRate=function(){},this.getEncodedFrameRate=function(){return e.cn},this.setEncodedFrameRate=function(n){e.R||e.y._("PlayerStateManager.setEncodedFrameRate",function(){var t=nt.hn(n);t>=-1&&(e.cn=t,e.fn&&e.fn.In(e.cn))})},this.getDuration=function(){return e.un},this.setClientMeasureInterface=function(t){z.Nn(t,new ht.ClientMeasureInterface,"ClientMeasureInterface"),this.On=t},this.getPHT=function(){return this.On&&"function"===typeof this.On.getPHT?this.On.getPHT():a.DEFAULT_PHT},this.getBufferLength=function(){return this.On&&"function"===typeof this.On.getBufferLength?this.On.getBufferLength():a.DEFAULT_BUFFER_LENGTH},this.getSignalStrength=function(){return this.On&&"function"===typeof this.On.getSignalStrength?this.On.getSignalStrength():a.DEFAULT_SIGNAL_STRENGTH},this.getRenderedFrameRate=function(){return this.On&&"function"===typeof this.On.getRenderedFrameRate?this.On.getRenderedFrameRate():a.DEFAULT_RENDERED_FRAME_RATE},this.setDuration=function(n){e.R||e.y._("PlayerStateManager.setDuration",function(){var t=nt.hn(n);t>=-1&&(e.un=t,e.fn&&e.fn._n(e.un))})},this.getStreamUrl=function(){return e.on},this.setStreamUrl=function(t){e.R||e.y._("PlayerStateManager.setStreamUrl",function(){t&&(e.on=t,e.fn&&e.fn.Pn(e.on))})},this.Dn=function(){return e.yn},this.bn=function(){return e.An},this.setModuleNameAndVersion=function(t,n){e.yn=t,e.An=n},this.Mn=function(){return e.gn},this.setPlayerType=function(t){e.R||e.y._("PlayerStateManager.setPlayerType",function(){e.gn=t,e.fn&&e.fn.Ln(e.gn)})},this.Vn=function(){return e.En},this.setPlayerVersion=function(t){e.R||e.y._("PlayerStateManager.setPlayerVersion",function(){e.En=t,e.fn&&e.fn.kn(e.En)})},this.setMonitoringNotifier=function(t){return!e.R&&(!e.fn&&(e.fn=t,e.c&&arguments.length>=2&&e.c.Un(arguments[1]),!0))},this.wn=function(){e.R||(e.fn=null,e.c&&e.c.Un(null))},this.Fn=function(){e.setPlayerState(e.getPlayerState()),e.setBitrateKbps(e.Bn()),e.setDuration(e.getDuration()),e.setEncodedFrameRate(e.getEncodedFrameRate()),e.setStreamUrl(e.getStreamUrl()),e.setPlayerType(e.Mn()),e.setPlayerVersion(e.Vn());for(var t=0;t<e.Cn.length;t++){var n=e.Cn[t];e.Hn(n)}e.Cn=[]},this.getPlayerState=function(){return e.dn},this.setPlayerState=function(t){e.R||e.y._("PlayerStateManager.setPlayerState",function(){a.Gn(t)?(e.dn=t,e.fn&&e.fn.Kn(e.dn)):e.c.error("PlayerStateManager.SetPlayerState(): invalid state: "+t)})},this.Bn=function(){return e.ln},this.setBitrateKbps=function(n){e.R||e.y._("PlayerStateManager.setBitrateKbps",function(){var t=nt.hn(n);t>=-1&&(e.ln=t,e.fn&&e.fn.jn(e.ln))})},this.setPlayerSeekStart=function(t){e.R||e.y._("PlayerStateManager.setPlayerSeekStart()",function(){e.fn&&e.fn.xn(a.SEEK_ACTIONS_TYPE.SEEK_START,t)})},this.setPlayerSeekEnd=function(){e.R||e.y._("PlayerStateManager.setPlayerSeekEnd()",function(){e.fn&&e.fn.xn(a.SEEK_ACTIONS_TYPE.SEEK_END,-1)})},this.setUserSeekButtonUp=function(){e.R||e.y._("PlayerStateManager.setUserSeekButtonUp()",function(){e.fn&&e.fn.xn(a.SEEK_ACTIONS_TYPE.BUTTON_UP,-1)})},this.setUserSeekButtonDown=function(){e.R||e.y._("PlayerStateManager.setUserSeekButtonDown()",function(){e.fn&&e.fn.xn(a.SEEK_ACTIONS_TYPE.BUTTON_DOWN,-1)})},this.setVideoResolutionWidth=function(n){e.R||e.y._("PlayerStateManager.setVideoResolutionWidth()",function(){var t=nt.hn(n);t>0&&(e.Sn=t),e.fn&&e.fn.Wn(e.Sn)})},this.setVideoResolutionHeight=function(n){e.R||e.y._("PlayerStateManager.setVideoResolutionHeight()",function(){var t=nt.hn(n);t>0&&(e.Rn=t),e.fn&&e.fn.qn(e.Rn)})},this.setConnectionType=function(t){e.R||e.y._("PlayerStateManager.setConnectionType()",function(){e.w=t,e.fn&&e.fn.W(e.w)})},this.setLinkEncryption=function(t){e.R||e.y._("PlayerStateManager.setLinkEncryption()",function(){e.I=t,e.fn&&e.fn.Y(e.I)})},this.setSignalStrength=function(){},this.Hn=function(t){var n,i;e.mn=t,e.fn?(n=t.errorCode,i=t.severity,e.fn.Yn(n,i)):e.Cn.push(t)},this.sendError=function(n,i){e.R||e.y._("PlayerStateManager.sendError",function(){var t=new it(n,i);e.Hn(t)})},this.reset=function(){e.R||e.y._("PlayerStateManager.reset",function(){e.ln=-2,e.dn=a.PlayerState.UNKNOWN,e.vn={},e.pn=-1,e.cn=-1,e.un=-1,e.En=null,e.gn=null,e.on=null,e.mn=null,e.Cn=[]})},this.setCDNServerIP=function(t){e.R||e.y._("PlayerStateManager.setCDNServerIP",function(){e.fn&&e.fn.Jn(t)})},this.Xn=function(){return e.Qn},this.setDroppedFramesTotal=function(t){e.R||e.y._("PlayerStateManager.setDroppedFramesTotal",function(){e.fn&&e.fn.zn(t)})},this.setDroppedFramesCount=function(t){e.R||e.y._("PlayerStateManager.setDroppedFramesCount",function(){e.fn&&e.fn.Zn(t)})},this.$n=function(){return e.mn},function(t,n){e.d=t,e.c=e.d.buildLogger(),e.c.setModuleName("PlayerStateManager"),e.y=e.d.tt(n)}.apply(e,arguments)};a.PlayerState={STOPPED:A.PlayerState.STOPPED,PLAYING:A.PlayerState.PLAYING,BUFFERING:A.PlayerState.BUFFERING,PAUSED:A.PlayerState.PAUSED,UNKNOWN:A.PlayerState.UNKNOWN,NOT_MONITORED:A.PlayerState.NOT_MONITORED},a.Gn=function(t){return t===a.PlayerState.STOPPED||t===a.PlayerState.PLAYING||t===a.PlayerState.BUFFERING||t===a.PlayerState.PAUSED||t===a.PlayerState.UNKNOWN||t===a.PlayerState.NOT_MONITORED},a.SEEK_ACTIONS_TYPE={SEEK_START:"pss",SEEK_END:"pse",BUTTON_UP:"bu",BUTTON_DOWN:"bd"},a.DEFAULT_SIGNAL_STRENGTH=1e3,a.DEFAULT_RENDERED_FRAME_RATE=-1,a.DEFAULT_BUFFER_LENGTH=-1,a.DEFAULT_PHT=-1,ht.ClientMeasureInterface=function(){this.getPHT=function(){},this.getBufferLength=function(){},this.getSignalStrength=function(){},this.getRenderedFrameRate=function(){}};var o=ht.HttpInterface=function(){this.makeRequest=function(){},this.release=function(){}},u=ht.LoggingInterface=function(){this.consoleLog=function(){},this.release=function(){}},l=ht.MetadataInterface=function(){this.getBrowserName=function(){},this.getBrowserVersion=function(){},this.getDeviceBrand=function(){},this.getDeviceManufacturer=function(){},this.getDeviceModel=function(){},this.getDeviceType=function(){},this.getDeviceVersion=function(){},this.getFrameworkName=function(){},this.getFrameworkVersion=function(){},this.getOperatingSystemName=function(){},this.getOperatingSystemVersion=function(){},this.getDeviceCategory=function(){},this.getScreenWidth=function(){},this.getScreenHeight=function(){},this.getScaleFactor=function(){},this.release=function(){}},d=ht.StorageInterface=function(){this.saveData=function(){},this.loadData=function(){},this.release=function(){}},v=ht.SystemInterface=function(){(function(t,n,i,e,s,r){z.Nn(t,new p,"TimeInterface"),z.Nn(n,new E,"TimerInterface"),z.Nn(i,new o,"HttpInterface"),z.Nn(e,new d,"StorageInterface"),z.Nn(s,new l,"MetadataInterface"),z.Nn(r,new u,"LoggingInterface"),this.ti=t,this.ni=n,this.ii=i,this.ei=e,this.si=s,this.ri=r}).apply(this,arguments),this.release=function(){this.ti&&(this.ti.release(),this.ti=null),this.ni&&(this.ni.release(),this.ni=null),this.ii&&(this.ii.release(),this.ii=null),this.ei&&(this.ei.release(),this.ei=null),this.si&&(this.si.release(),this.si=null),this.ri&&(this.ri.release(),this.ri=null)}},p=ht.TimeInterface=function(){this.getEpochTimeMs=function(){},this.release=function(){}},E=ht.TimerInterface=function(){this.createTimer=function(){},this.release=function(){}},g=ht.SystemFactory=function(){var t=this;(function(t,n){if(!(t instanceof v))throw new Error("systemInterface parameter should be an instance of SystemInterface.");this.oi=t,this.ti=this.oi.ti,this.ni=this.oi.ni,this.ii=this.oi.ii,this.ei=this.oi.ei,this.si=this.oi.si,this.ri=this.oi.ri,this.p=n instanceof y?n.Z():new y}).apply(this,arguments),this.$=function(t,n,i){this.ai=t,this.ui=n,this.hi=i},this.release=function(){this.oi.release(),this.oi=null,this.ai=null,this.p=null,this.ci=null};var n=function(){return new st(t.ri,t.ti,t.Vt(),t.ci,t.ai)};this.buildLogger=function(){return n()},this.ot=function(t,n,i){return new W(t,n,i,this)},this.fi=function(t){return new $(this.buildLogger(),this.li(),this.ui,t)},this.di=function(){return new q(this.buildTimer(t.hi))},this.vi=function(){var t=new at(this.buildLogger(),this.ni,new X(this.buildLogger(),null,this.Vt()));return new q(t)},this.li=function(){return new et(this.buildLogger(),this.ii,this.vi(),this.Vt())},this.tt=function(t){return new X(this.buildLogger(),this.fi(t),this.Vt())},this.buildTime=function(){return new ot(this.ti,this.buildLogger())},this.buildTimer=function(t){return new at(this.buildLogger(),this.ni,this.tt(t))},this.pi=function(){return new ut.Storage(this.buildLogger(),this.ei,this.di(),this.Vt())},this.nt=function(){return new Y(this.buildLogger(),this.pi(),this.Ei())},this.gi=function(t){return new rt(this.buildLogger(),this.si,this.tt(t))},this.yi=function(){return new H},this.Ai=function(t,n){return new Q(t,this.buildLogger(),this.li(),this.Ei(),n)},this.Si=function(t,n,i,e,s){var r=this.Ai(n,e.custom["c3.domain"]);return new j(this.Ri(),t,n,this.buildLogger(),this.tt(s),this.buildTimer(s),r,this.yi(),this.buildTime(),this.mi(),i,e,s)},this.Ci=function(t,n,i,e,s,r,o){r=this.Si(t,n.Z(),i,r,o);return new x(e,s,i,this.gi(o),r,this.tt(o),this.buildLogger())},this.Ri=function(){return new J},this.Ei=function(){return new G},this.mi=function(){return this.ci},this.Vt=function(){return this.p},this.ci=new Z},y=ht.SystemSettings=function(){this.Ti=y.wi,z.Wt(this,"logLevel",function(){return this.Ti}),z.qt(this,"logLevel",function(t){var n;"number"!==typeof t||(n=z.Xt(t))===t&&n>=y.LogLevel.DEBUG&&n<=y.LogLevel.ERROR&&(this.Ti=n)}),this.Ii=y.Ni,z.Wt(this,"allowUncaughtExceptions",function(){return this.Ii}),z.qt(this,"allowUncaughtExceptions",function(t){z.Oi(t)&&(this.Ii=t)}),this._i=y.Pi,z.Wt(this,"storageTimeout",function(){return this._i}),z.qt(this,"storageTimeout",function(t){var n;"number"!==typeof t||(n=z.Xt(t))===t&&(this._i=n)}),this.Di=y.bi,z.Wt(this,"httpTimeout",function(){return this.Di}),z.qt(this,"httpTimeout",function(t){var n;"number"!==typeof t||(n=z.Xt(t))===t&&(this.Di=n)}),function(){}.apply(this,arguments),this.equals=function(t){return this.logLevel===t.logLevel&&this.allowUncaughtExceptions===t.allowUncaughtExceptions&&this.storageTimeout===t.storageTimeout&&this.httpTimeout===t.httpTimeout},this.Z=function(){var t=new y;return t.logLevel=this.logLevel,t.allowUncaughtExceptions=this.allowUncaughtExceptions,t.storageTimeout=this.storageTimeout,t.httpTimeout=this.httpTimeout,t}};y.LogLevel={DEBUG:A.LogLevel.DEBUG,INFO:A.LogLevel.INFO,WARNING:A.LogLevel.WARNING,ERROR:A.LogLevel.ERROR,NONE:A.LogLevel.NONE},y.Mi=y.LogLevel.DEBUG,y.wi=y.LogLevel.NONE,y.Li=!0,y.Ni=!1,y.Pi=10,y.bi=10;var i=ut.AdAnalytics=function(){var e=this;function n(t){e.Vi?(z.Nt(t)>0&&e.setAdInfo(t),e.Vi.ki()||(e.Vi.Ui(e.Fi),e.Vi.Bi(!0))):e.c&&e.c.error("AdAnalytics.onAdInitiated() : contentPlayer - "+A.e)}e.Hi=null,e.c=null,e.d=null,e.Gi=null,e.Fi=null,e.Vi=null,e.Ki=null,e.ji=null,e.xi=null,function(t,n,i){e.Hi=t,e.xi=i,e.d=n,i&&(e.Fi=i.Wi()),e.Gi=n.buildTimer(A.version),e.c=n.buildLogger(),e.c.setModuleName("AdAnalytics"),e.Vi=new r(e.Hi,e.Gi),R.call(this)}.apply(this,arguments),this.setAdInfo=function(t){z.Nt(t)<=0?e.c&&e.c.error("AdAnalytics.setAdInfo() : AD Info is not set"):(e.c&&e.c.debug("AdAnalytics.setAdInfo()"),e.Vi&&e.Vi.qi(t))},this.setAdPlayerInfo=function(t){z.Nt(t)<=0?e.c&&e.c.error("AdAnalytics.setAdPlayerInfo() : Ad Player Info is not set"):(e.c&&e.c.debug("AdAnalytics.setAdPlayerInfo()"),e.Vi&&e.Vi.qi(t))},this.reportAdMetric=function(){0!==arguments.length?1===arguments.length?e.Yi(arguments[0]):2===arguments.length?e.Yi(arguments[0],arguments[1]):3===arguments.length?e.Yi(arguments[0],arguments[1],arguments[2]):4===arguments.length&&e.Yi(arguments[0],arguments[1],arguments[2],arguments[3]):e.c&&e.c.error("AdAnalytics.reportAdMetric() : Need to report metric mandatory")},this.setCallback=function(t){e.Vi&&e.Vi.Ji(t)},this.reportAdFailed=function(t,n){e.Vi?(z.Nt(n)>0&&e.setAdInfo(n),e.Vi.ki()?(e.c&&e.c.debug("AdAnalytics.reportAdFailed() : "+t),e.reportAdError(t,h.ErrorSeverity.FATAL),e.reportAdEnded()):(e.Vi.Ui(e.Fi),e.c&&e.c.debug("AdAnalytics.reportAdFailed() : "+t),t=new it(t,h.ErrorSeverity.FATAL),e.Vi.Bi(!0,t))):e.c&&e.c.error("AdAnalytics.reportAdFailed() : "+A.e)},this.reportAdLoaded=function(t){e.c&&e.c.debug("AdAnalytics.reportAdLoaded()"),n(t)},this.reportAdStarted=function(t){e.c&&e.c.debug("AdAnalytics.reportAdStarted()"),n(t)},this.reportAdEnded=function(){e.Vi?(e.c&&e.c.debug("AdAnalytics.reportAdEnded()"),e.Vi.ki()&&(e.Vi.Ui(null),e.Vi.Bi(!1))):e.c&&e.c.error("AdAnalytics.reportAdEnded() : "+A.s)},this.reportAdError=function(t,n){e.Vi?(e.c&&e.c.debug("AdAnalytics.reportAdError() : "+t),n=new it(t,n),e.Vi.Hn(n)):e.c&&e.c.error("AdAnalytics.reportAdError() : "+A.e)},this.reportAdPlayerEvent=function(t,n){if(z.yt(t))if(e.c&&e.c.debug("AdAnalytics.reportAdPlayerEvent()"),e.Vi)switch(t){case A.Events.USER_WAIT_STARTED:case A.Events.BUMPER_VIDEO_STARTED:e.Vi.Rt();break;case A.Events.USER_WAIT_ENDED:case A.Events.BUMPER_VIDEO_ENDED:e.Vi.Ct();break;default:e.Vi.Xi(t,n)}else e.c&&e.c.error("AdAnalytics.reportAdPlayerEvent() : "+A.e);else e.c&&e.c.error("AdAnalytics.reportAdPlayerEvent(): eventType parameter must be a valid string.")},this.reportAdSkipped=function(){e.Vi?(e.c&&e.c.debug("AdAnalytics.reportAdSkipped()"),e.reportAdPlayerEvent(A.Events.AD_SKIPPED),e.reportAdEnded()):e.c&&e.c.error("AdAnalytics.reportAdSkipped() : "+A.e)},this.release=function(){e.c&&e.c.debug("AdAnalytics.release()"),e.Vi&&(e.Vi.ki()&&(e.Vi.Ui(null),e.Vi.Bi(!1)),e.Vi.Ji(null),e.Vi.Qi(),e.Vi=null),"undefined"!==typeof ht.AdProxyMonitor&&e.ji&&(ht.AdProxyMonitor.release(e.ji),e.ji=null)},this.setAdListener=function(t,n){t?("undefined"!==typeof n&&"undefined"!==typeof n.convivaModule?ht.AdProxyMonitor=n.convivaModule.AdProxyMonitor:"undefined"!==typeof ConvivaModule&&(ht.AdProxyMonitor=ConvivaModule.AdProxyMonitor),"undefined"!==typeof ht.AdProxyMonitor?!t&&e.ji?(ht.AdProxyMonitor.release(e.ji),e.ji=null):t&&e.ji?(ht.AdProxyMonitor.release(e.ji),e.c&&e.c.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.ji=ht.AdProxyMonitor.initConvivaDropIn(t,n,this,ht,e.d)):t&&!e.ji&&(e.c&&e.c.debug("AdAnalytics.setAdListener() : Initializing ad drop-in module"),e.ji=ht.AdProxyMonitor.initConvivaDropIn(t,n,this,ht,e.d)):e.c.error("AdAnalytics.setAdListener() : Include the missing Ads SDK Module")):e.c.error("AdAnalytics.setAdListener() : Need to configure the adListener instance")},this.reportAdBreakStarted=function(t,n,i){e.Fi?(e.c&&e.c.debug("AdAnalytics.reportAdBreakStarted()"),e.zi=t,e.Ki=n,e.Fi.Zi(t,n,i)):e.c.error("AdAnalytics.reportAdBreakStarted() : "+A.e)},this.reportAdBreakEnded=function(){e.Fi?(e.c&&e.c.debug("AdAnalytics.reportAdBreakEnded()"),e.zi=null,e.Ki=null,e.Fi.$i()):e.c.error("AdAnalytics.reportAdBreakEnded() : "+A.e)},this.getSessionId=function(){return e.Fi?(e.c&&e.c.debug("VideoAnalytics.getSessionId()"),e.Vi.kt()):(e.c.error("VideoAnalytics.getSessionId() : "+A.e),A.NO_SESSION_KEY)},this.getClientId=function(){return e.Fi?(e.c&&e.c.debug("VideoAnalytics.getClientId()"),e.Vi.Ut()):(e.c.error("VideoAnalytics.getClientId() : "+A.e),null)},this.getPlayerMonitor=function(){return e.Fi},this.getAdPlayerMonitor=function(){return e.Vi},this.getVideoAnalytics=function(){return e.xi},this.getAdType=function(){return e.Fi?e.Fi.zi:null},this.te=function(){return e.Fi?e.Fi.Ki:null},i.prototype=Object.create(R.prototype),i.prototype.constructor=i},r=ut.AdPlayerMonitorImpl=function(){var s=this;s.ne=null,s.ie=null,function(t,n){m.call(this,t,n)}.apply(this,arguments),this.Ui=function(t){this.ee()!==t&&(this.se(),s.ie=t||null)},this.ee=function(){return s.ie},this.re=function(t){var n,i=this.ee(),e={};e.error=t,s.ne&&(s.oe=s.ne.getPlayerStateManager(!0),s.ae(),s.oe.setClientMeasureInterface(this),n=null,i&&(n=i.ue()),s.he=s.ne.createAdSession(n,s.pt,s.oe,!0,e),"undefined"!==typeof t&&(s.ce(),s.Qi()))},r.prototype=Object.create(m.prototype),r.prototype.constructor=r},S=ht.Analytics={init:function(t,n,i){if(this.Hi)this.c.error("Client is already configured");else{if(arguments.length<=0)throw new Error("customerKey must be valid");var e=null,s=null,r=null;if("string"===typeof t&&(e=t,!z.yt(e)))throw new Error("customerKey must be valid");arguments.length>=2&&"object"===typeof n&&(s=n),arguments.length>=3&&"object"===typeof i&&(r=i);var o=new c(e),a=new y;z.Nt(r)>0&&(r[A.GATEWAY_URL]&&(o.gatewayUrl=r[A.GATEWAY_URL]),r[A.LOG_LEVEL]>=0&&(a.logLevel=r[A.LOG_LEVEL]));t=new ht.Impl.Html5Logging,n=new ht.Impl.Html5Storage,i=new ht.Impl.Html5Http,e=new ht.Impl.Html5Timer,r=new ht.Impl.Html5Time;this.si||(this.si=new ht.Impl.Html5Metadata),s&&(s[A.CallbackFunctions.CONSOLE_LOG]&&(t.consoleLog=s[A.CallbackFunctions.CONSOLE_LOG]),s[A.CallbackFunctions.MAKE_REQUEST]&&(i.makeRequest=s[A.CallbackFunctions.MAKE_REQUEST]),s[A.CallbackFunctions.SAVE_DATA]&&(n.saveData=s[A.CallbackFunctions.SAVE_DATA]),s[A.CallbackFunctions.LOAD_DATA]&&(n.loadData=s[A.CallbackFunctions.LOAD_DATA]),s[A.CallbackFunctions.GET_EPOCH_TIME_IN_MS]&&(r.getEpochTimeMs=s[A.CallbackFunctions.GET_EPOCH_TIME_IN_MS]),s[A.CallbackFunctions.CREATE_TIMER]&&(e.createTimer=s[A.CallbackFunctions.CREATE_TIMER])),this.oi=new v(r,e,i,n,this.si,t),this.d=new g(this.oi,a),this.d.$("Analytics",o),this.Hi=new h(o,this.d,this.fe,S.version),this.c=this.d.buildLogger(),this.c.setModuleName("Analytics")}},release:function(){var t=0;if(this.le){for(t=0;t<this.le.length;t++){var n=this.le[t];n&&(n.release(),n.c=null,n.Gi=null,this.le.splice(t,1),t--)}this.le=null}if(this.de){for(t=0;t<this.de.length;t++){var i=this.de[t];i&&(i.release(),i.c=null,i.Gi=null,this.de.splice(t,1),t--)}this.de=null}this.d&&(this.d.release(),this.d=null),this.Hi&&(this.Hi.release(),this.Hi=null),this.Hi=null,this.c=null,this.oi=null,this.si=null,this.fe=null},setUniqueIdentifier:function(t,n){if(!this.Hi)throw new Error(A.i);this.Hi.setUniqueIdentifier(t,n)},setUserPreferenceForDataCollection:function(t,n){if(!this.Hi)throw new Error(A.i);this.Hi.setUserPreferenceForDataCollection(t,n)},setUserPreferenceForDataDeletion:function(t){if(!this.Hi)throw new Error(A.i);this.Hi.setUserPreferenceForDataDeletion(t)},reportAppEvent:function(t,n){if(!this.Hi)throw new Error(A.i);this.Hi.sendCustomEvent(h.NO_SESSION_KEY,t,n)},reportAppBackgrounded:function(){if(!this.Hi)throw new Error(A.i);this.Hi.sendCustomEvent(h.NO_SESSION_KEY,"App.Backgrounded",null)},reportAppForegrounded:function(){if(!this.Hi)throw new Error(A.i);this.Hi.sendCustomEvent(h.NO_SESSION_KEY,"App.Foregrounded",null)},configureExistingClient:function(t){if(!(t instanceof h))throw new Error(A.i);this.Hi=t,this.d=this.Hi.d,this.c=this.d.buildLogger(),this.c.setModuleName("Analytics")},buildVideoAnalytics:function(){if(!this.Hi)throw new Error(A.i);var t=new I(this.Hi,this.d);return this.de||(this.de=[]),this.de.push(t),t},buildAdAnalytics:function(t){if(!this.Hi)throw new Error(A.i);t=new i(this.Hi,this.d,t||null);return this.le||(this.le=[]),this.le.push(t),t},setDeviceMetadata:function(t){var n,i,e;arguments.length<=0||0===z.Nt(t)?this.c.error("Device Metadata must be valid"):(this.si||(this.si=new ht.Impl.Html5Metadata),t[A.DeviceMetadata.BRAND]&&(this.si.getDeviceBrand=function(){return t[A.DeviceMetadata.BRAND]}),t[A.DeviceMetadata.MANUFACTURER]&&(this.si.getDeviceManufacturer=function(){return t[A.DeviceMetadata.MANUFACTURER]}),t[A.DeviceMetadata.MODEL]&&(this.si.getDeviceModel=function(){return t[A.DeviceMetadata.MODEL]}),t[A.DeviceMetadata.TYPE]&&(this.si.getDeviceType=function(){return t[A.DeviceMetadata.TYPE]}),t[A.DeviceMetadata.VERSION]&&(this.si.getDeviceVersion=function(){return t[A.DeviceMetadata.VERSION]}),t[A.DeviceMetadata.OS_NAME]&&(this.si.getOperatingSystemName=function(){return t[A.DeviceMetadata.OS_NAME]}),t[A.DeviceMetadata.OS_VERSION]&&(this.si.getOperatingSystemVersion=function(){return t[A.DeviceMetadata.OS_VERSION]}),t[A.DeviceMetadata.CATEGORY]&&(this.si.getDeviceCategory=function(){return t[A.DeviceMetadata.CATEGORY]}),n=t[A.DeviceMetadata.SCREEN_RESOLUTION_WIDTH],z.lt(n)&&(this.si.getScreenWidth=function(){return n.toString()}),i=t[A.DeviceMetadata.SCREEN_RESOLUTION_HEIGHT],z.lt(i)&&(this.si.getScreenHeight=function(){return i.toString()}),e=t[A.DeviceMetadata.SCREEN_RESOLUTION_SCALE_FACTOR],z.lt(e)&&(this.si.getScaleFactor=function(){return e.toString()}))},reportDeviceMetric:function(t,n){switch(this.fe||(this.fe={}),t){case A.Network.CONNECTION_TYPE:if(!z.yt(n))return void this.c.error("reportDeviceMetric() : Connection Type is not a valid string");this.fe[t]=n,this.Hi&&this.Hi.K(this.fe[A.Network.CONNECTION_TYPE]);break;case A.Network.LINK_ENCRYPTION:if(!z.yt(n))return void this.c.error("reportDeviceMetric() : Link Encryption is not a valid string");this.fe[t]=n,this.Hi&&this.Hi.q(this.fe[A.Network.LINK_ENCRYPTION]);break;case A.Network.SIGNAL_STRENGTH:var i=parseInt(n,10);if(!z.lt(i))return void this.c.error("reportDeviceMetric() : Signal Strength is not a number");if(a.DEFAULT_SIGNAL_STRENGTH===i)return void this.c.error("reportDeviceMetric() : DEFAULT_SIGNAL_STRENGTH shouldn't be reported");this.fe[t]=i,this.Hi&&this.Hi.J(i);break;default:this.c.error("reportDeviceMetric() : unknown device metric = "+t)}}};S.version="4.5.9";var R=ut.AnalyticsImpl=function(){var h=this;function c(){var t=!!h.Vi,n=h.getAdType(),i=h.te();return n===A.AdType.SERVER_SIDE&&i===A.AdPlayer.CONTENT?R.pe.ve:n!==A.AdType.SERVER_SIDE||i!==A.AdPlayer.SEPARATE?n===A.AdType.CLIENT_SIDE&&i===A.AdPlayer.CONTENT?R.pe.Ee:(n===A.AdType.CLIENT_SIDE&&A.AdPlayer.SEPARATE,t?R.pe.Ee:R.pe.ge):void 0}function f(t,n,i){t=parseInt(t,10),n=parseInt(n,10);isNaN(t)&&isNaN(n)?h.c.error("reportPlaybackResolution() : width and height are not numbers"):(isNaN(t)&&h.c.warning("reportPlaybackResolution() : width is not a number"),isNaN(n)&&h.c.warning("reportPlaybackResolution() : height is not a number"),!h.Vi||i!==R.pe.Ee&&i!==R.pe.ve||h.Vi.ye(t,n),!h.Fi||i!==R.pe.ge&&i!==R.pe.ve||h.Fi.ye(t,n))}function l(t,n){a.Gn(t)?(!h.Vi||n!==R.pe.Ee&&n!==R.pe.ve||h.Vi.Ae(t),(h.Fi&&n===R.pe.ge||n===R.pe.ve)&&h.Fi.Ae(t)):h.c.error("reportPlayerState() : Player State is not valid")}function d(t,n){t=parseInt(t,10);isNaN(t)?h.c.error("reportPlayerPlayHeadTime() : playheadtime is not a number"):(!h.Vi||n!==R.pe.Ee&&n!==R.pe.ve||h.Vi.Se(t),!h.Fi||n!==R.pe.ge&&n!==R.pe.ve||h.Fi.Se(t))}function v(t,n){t=parseInt(t,10);isNaN(t)?h.c.error("reportPlayerBufferLength() : buffer length is not a number"):(!h.Vi||n!==R.pe.Ee&&n!==R.pe.ve||h.Vi.Re(t),!h.Fi||n!==R.pe.ge&&n!==R.pe.ve||h.Fi.Re(t))}function p(t,n){t=parseInt(t,10);!h.Vi||n!==R.pe.Ee&&n!==R.pe.ve||h.Vi.me(!0,t),!h.Fi||n!==R.pe.ge&&n!==R.pe.ve||h.Fi.me(!0,t)}function E(t){!h.Vi||t!==R.pe.Ee&&t!==R.pe.ve||h.Vi.me(!1,-1),!h.Fi||t!==R.pe.ge&&t!==R.pe.ve||h.Fi.me(!1,-1)}function g(t,n){t=parseInt(t,10);isNaN(t)?h.c.error("reportPlayerBitrate() : bitrate is not a number"):(!h.Vi||n!==R.pe.Ee&&n!==R.pe.ve||h.Vi.Ce(t),!h.Fi||n!==R.pe.ge&&n!==R.pe.ve||h.Fi.Ce(t))}function y(t,n){t=parseInt(t,10);isNaN(t)?h.c.error("reportPlayerRenderedFrameRate() : rendered framerate is not a number"):(!h.Vi||n!==R.pe.Ee&&n!==R.pe.ve||h.Vi.Te(t),!h.Fi||n!==R.pe.ge&&n!==R.pe.ve||h.Fi.Te(t))}(function(){}).apply(this,arguments),this.Yi=function(t,n,i,e){switch(h.c&&t!==A.Playback.PLAY_HEAD_TIME&&t!==A.Playback.BUFFER_LENGTH&&h.c.debug("reportMetric() "+t+" "+(void 0!==n&&"CONVIVA"!==n?n:"")+" "+(void 0!==i&&"CONVIVA"!==i&&i!==R.pe.Ee?i:"")+" "+(void 0!==e&&"CONVIVA"!==e&&e!==R.pe.Ee?e:"")),t){case A.Playback.BITRATE:"CONVIVA"===i?h.c.info("Bitrate change requested from the Conviva Library:"):h.c.info("Bitrate change requested from the application:"),e===R.pe.Ee?g(n,R.pe.Ee):g(n,c());break;case A.Playback.PLAY_HEAD_TIME:e===R.pe.Ee?d(n,R.pe.Ee):d(n,c());break;case A.Playback.RESOLUTION:e===R.pe.Ee?f(n,i,R.pe.Ee):f(n,i,c());break;case A.Playback.BUFFER_LENGTH:e===R.pe.Ee?v(n,R.pe.Ee):v(n,c());break;case A.Playback.PLAYER_STATE:e===R.pe.Ee?l(n,R.pe.Ee):l(n,c());break;case A.Playback.RENDERED_FRAMERATE:e===R.pe.Ee?y(n,R.pe.Ee):y(n,c());break;case A.Playback.SEEK_STARTED:arguments.length>=2&&"CONVIVA"!==n?p(n,c()):i===R.pe.Ee?p(-1,R.pe.Ee):p(-1,c());break;case A.Playback.SEEK_ENDED:i===R.pe.Ee?E(R.pe.Ee):E(c());break;case A.Playback.CDN_IP:"CONVIVA"===i?h.c.info("CDN Server IP change requested from the Conviva Library:"):h.c.info("CDN Server IP change requested from the application:"),a=n,u=c(),z.yt(a)?(!h.Vi||u!==R.pe.Ee&&u!==R.pe.ve||h.Vi.we(a),!h.Fi||u!==R.pe.ge&&u!==R.pe.ve||h.Fi.we(a)):h.c.error("reportCDNServerIp() : CDNServerIP is not a valid string");break;case A.Playback.DROPPED_FRAMES_TOTAL:"CONVIVA"===i?h.c.info("Dropped frames total change requested from the Conviva Library:"):h.c.info("Dropped frames total change requested from the application:"),o=n,a=c(),o=parseInt(o,10),isNaN(o)?h.c.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!h.Vi||a!==R.pe.Ee&&a!==R.pe.ve||h.Vi.Ie(o),!h.Fi||a!==R.pe.ge&&a!==R.pe.ve||h.Fi.Ie(o));break;case A.Playback.DROPPED_FRAMES_COUNT:"CONVIVA"===i?h.c.info("Dropped frames count change requested from the Conviva Library:"):h.c.info("Dropped frames count change requested from the application:"),s=n,r=c(),s=parseInt(s,10),isNaN(s)?h.c.error("reportDroppedFramesTotal() : Dropped frames total is not a number"):(!h.Vi||r!==R.pe.Ee&&r!==R.pe.ve||h.Vi.Ne(s),!h.Fi||r!==R.pe.ge&&r!==R.pe.ve||h.Fi.Ne(s));break;default:o=t,r=n,s=c(),!(z.yt(o)&&r?(!h.Vi||s!==R.pe.Ee&&s!==R.pe.ve||h.Vi.Ft(o,r),void(!h.Fi||s!==R.pe.ge&&s!==R.pe.ve||h.Fi.Ft(o,r))):h.c.error("reportMetric() : Metric key/value should be a proper value"))}var s,r,o,a,u}};ut.AnalyticsImpl.pe={Ee:1,ge:2,ve:3};var e=ut.PlayerMonitor=function(){var e=this;this.Oe=null,this._e=null,this.pt=null,this.Pe=null,this.dn=a.PlayerState.UNKNOWN,this.De=-1,this.be=-1,this.Cn=[],this.Me=null,this.Le=null,this.Ve=-2,this.pn=-1,this.N=a.DEFAULT_SIGNAL_STRENGTH,this.ke=null,this.Qn=null,this.I=null,this.w=null,this.Gi=null,this.Ue=null,this.Fe=null,this.Be=null,this.He=null,this.zi=null,this.Ki=null,function(t){e.Gi=t}.apply(this,arguments),this.Ge=function(){return e.dn},this.Ae=function(t){e.dn!==t&&(e.se(),e.dn=t,e.Ke())},this.je=function(){return e.xe},this.We=function(){return e.qe},this.me=function(t,n){e.se(),e.xe=t,e.qe=n,e.Ye()},this.Je=function(){return e.De},this.Se=function(t){e.De=t},this.Xe=function(){return e.be},this.Re=function(t){e.be=t},this.Qe=function(){return e.Ve},this.Ce=function(t){e.Ve!==t&&(e.Ve=t,e.Ke())},this.ze=function(){return e.pn},this.Te=function(t){e.pn=t},this.Ze=function(){return e.ke},this.we=function(t){e.ke=t,e.Ke()},this.Xn=function(){return e.Qn},this.Ie=function(t){e.Qn=t,e.Ke()},this.Ne=function(t){e.$e(t)},this.ts=function(){return e.N},this.ns=function(){return e.es},this.ss=function(){return e.rs},this.ye=function(t,n){t<0&&(t=0),n<0&&(n=0),e.es===t&&e.rs===n||(e.es=t,e.rs=n,e.Ke())},this.os=function(){return e._e},this.as=function(){e.os()&&(e.pt=new f,e.Pe={},e.Fe={},e.us())},this.hs=function(t){(e._e||t)&&(this.se(),e._e&&(e._e=null,e.as()),t&&(e._e=z.cs(e._e,t),e.as()))},this.qi=function(t){if(t)if(e.pt){var n,i=!1;for(n in t)if(e.pt[n]!==t[n]){i=!0;break}i&&(e.se(),e._e=z.cs(t),e.us())}else e.hs(t)},this.Ji=function(t){t?e.Be!==t&&(e.Be=t,e.fs()):(e.Be=null,e.ce())},this.se=function(){e.ls||e.Be&&(e.ls=!0,e.Be(),e.ls=!1)},this.ki=function(){return e.Oe},this.Bi=function(t,n){e.Oe!==t&&(e.se(),e.Oe&&(e.ds(),e.ce(),e.Qi()),e.Oe=t,e.Oe&&e.re(n))},this.vs=function(){return e.Me},this.ps=function(){return e.Le||null},this.Es=function(){return e.Cn},this.gs=function(){e.Cn=[]},this.Hn=function(t){this.se(),e.Cn.push(t),e.Yn()},this.Xi=function(t,n){e.se(),e.Me=t,e.Le=n,e.ys()},this.As=function(){e.se()},this.fs=function(){e.ce(),e.Ue=e.Gi.create(e.As,1e3,"PlayerMonitor.update")},this.ce=function(){e.Ue&&(e.Ue(),e.Ue=null)},this.Zi=function(t,n,i){e.He=i,e.zi=t,e.Ss(),e.Ki=n,e.zi&&A.AdType.CLIENT_SIDE===e.zi&&(e.dn=A.PlayerState.UNKNOWN,e.Rs(e.zi,n,i?i[A.POD_POSITION]:null))},this.$i=function(){e.zi&&A.AdType.CLIENT_SIDE===e.zi&&(e.ms(),e.dn=A.PlayerState.UNKNOWN),e.Cs(),e.zi=null,e.Ki=null},this.Ts=function(){return e.He},this.ws=function(){return e.zi},this.getContentMetadata=function(){return this.pt},this.Qi=function(){this.Oe=null,this._e=null,this.pt=null,this.Pe=null,this.dn=a.PlayerState.UNKNOWN,this.De=-1,this.be=-1,this.Cn=[],this.Me=null,this.Le=null,this.Ve=-2,this.pn=-1,this.N=a.DEFAULT_SIGNAL_STRENGTH,this.ke=null,this.Qn=null,this.I=null,this.w=null,this.Gi=null,this.Ue=null,this.Fe=null,this.Be=null,this.He=null,this.zi=null,this.Ki=null,e.oe=null,e.he=h.NO_SESSION_KEY}},m=ut.PlayerMonitorImpl=function(){var o=this;o.ne=null,o.oe=null,o.he=h.NO_SESSION_KEY,function(t,n){e.call(this,n),o.ne=t}.apply(this,arguments),this.getPHT=function(){return o.Je()},this.getBufferLength=function(){return o.Xe()},this.getRenderedFrameRate=function(){return o.ze()},this.getSignalStrength=function(){return o.ts()},this.Ye=function(){o.oe&&o.Is!==h.NO_SESSION_KEY&&(o.je()?o.oe.setPlayerSeekStart(o.We()):o.oe.setPlayerSeekEnd())},this.Ke=function(){o.oe&&(o.oe.setPlayerState(o.Ge()),o.Qe()>0&&o.oe.setBitrateKbps(o.Qe()),o.ns()>0&&o.oe.setVideoResolutionWidth(o.ns()),o.ss()>0&&o.oe.setVideoResolutionHeight(o.ss()),o.Ze()&&o.oe.setCDNServerIP(o.Ze()),z.lt(o.Xn())&&o.oe.setDroppedFramesTotal(o.Xn()))},this.St=function(){o.he!==h.NO_SESSION_KEY&&o.ne&&o.ne.updateContentMetadata(o.he,o.pt)},this.ae=function(){if(o.oe){var t,n,i;o.Fe&&z.Nt(o.Fe)>0&&(o.Fe[A.MODULE_NAME]&&o.Fe[A.MODULE_VERSION]&&(t=o.Fe[A.MODULE_NAME],n=o.Fe[A.MODULE_VERSION],z.yt(t)&&z.yt(n)&&o.oe.setModuleNameAndVersion(t,n)),o.Fe[A.FRAMEWORK_NAME]&&(i=o.Fe[A.FRAMEWORK_NAME],z.yt(i)&&o.oe.setPlayerType(i)),o.Fe[A.FRAMEWORK_VERSION]&&(i=o.Fe[A.FRAMEWORK_VERSION],z.yt(i)&&o.oe.setPlayerVersion(i)));var e=o.Es();o.gs();for(var s=0;s<e.length;s++){var r=e[s];o.oe.Hn(r)}}},this.ms=function(){o.oe&&o.he!==h.NO_SESSION_KEY&&(o.Ke(),this.Ns())},this.Ct=function(){o.oe&&o.he!==h.NO_SESSION_KEY&&(o.Ke(),o.ne.Tt(o.he))},this.Ns=function(){o.ne&&o.he!==A.NO_SESSION_KEY&&o.ne.adEnd(o.he)},this.Rs=function(t,n,i){var e;o.oe&&o.he!==A.NO_SESSION_KEY&&(e=null,A.AdType.CLIENT_SIDE===t?e=h.AdStream.SEPARATE:A.AdType.SERVER_SIDE===t&&(e=h.AdStream.CONTENT),o.Os(e,n,i))},this.Rt=function(){o.oe&&o.he!==A.NO_SESSION_KEY&&o.ne.mt(o.he)},this.Os=function(t,n,i){o.ne&&o.he!==A.NO_SESSION_KEY&&o.ne.adStart(o.he,t,n,i)},this.re=function(){if(o.ne){o.oe=o.ne.getPlayerStateManager(!0),o.ae(),o.oe.setClientMeasureInterface(this);try{var t;o.pt&&o.pt.custom&&!o.pt.custom[A.UTM_TRACKING_URL]&&(Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var n=Object(this),i=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var e,s=[],r=arguments.length>=2?arguments[1]:void 0,o=0;o<i;o++)o in n&&(e=n[o],t.call(r,e,o,n)&&s.push(e));return s}),""!==(t=z._s().split("?").join("").split("&").filter(function(t){return 2===t.split("=").length&&t.split("=")[0].toLowerCase().indexOf("utm_")>=0}).join("&"))&&(o.pt.custom[A.UTM_TRACKING_URL]=t))}catch(t){o.c.error("PlayerMonitorImpl _createSession : "+t)}o.he=o.ne.createSession(o.pt,o.oe,!0)}},this.ds=function(){o.ne&&(o.oe&&(o.oe.setPlayerState(A.PlayerState.STOPPED),o.oe=null),o.he!==A.NO_SESSION_KEY&&(o.ne.cleanupSession(o.he),o.he=A.NO_SESSION_KEY))},this.Yn=function(){if(o.ne&&o.he!==h.NO_SESSION_KEY){var t=o.Es();o.gs();for(var n=0;n<t.length;n++){var i=t[n];o.ne.reportError(o.he,i.Ps(),i.Ds())}}},this.ys=function(){o.he!==h.NO_SESSION_KEY&&o.ne&&o.ne.sendCustomEvent(o.he,o.vs(),o.ps())},this.us=function(){var t,n=o.os(),i=!1,e=!1;for(t in n){var s=n[t];if(z.yt(t)&&null!==s&&void 0!==s)switch(t){case A.STREAM_URL:e=!0,o.pt.streamUrl=s;break;case A.ASSET_NAME:e=!0,o.pt.assetName=s;break;case A.DEFAULT_RESOURCE:e=!0,o.pt.defaultResource=s;break;case A.VIEWER_ID:e=!0,o.pt.viewerId=s;break;case A.PLAYER_NAME:e=!0,o.pt.applicationName=s;break;case A.DURATION:e=!0,o.pt.duration=s;break;case A.IS_LIVE:e=!0,o.pt.streamType=s;break;case A.ENCODED_FRAMERATE:e=!0,o.pt.encodedFrameRate=s;break;case A.MODULE_NAME:case A.MODULE_VERSION:case A.FRAMEWORK_NAME:case A.FRAMEWORK_VERSION:i=!0,o.Fe[t]=s;break;case A.APPLICATION_VERSION:default:e=!0,o.pt.custom[t]=s}}i&&this.ae(),e&&this.St()},this.Ss=function(){this.bs(A.Events.POD_START)},this.Cs=function(){this.bs(A.Events.POD_END)},this.bs=function(t){var n,i,e,s;o.ne&&o.he!==A.NO_SESSION_KEY&&(i={},(n=this.Ts())&&((e=n[A.POD_POSITION])&&(i[A.POD_POSITION]=e),(e=n[A.POD_INDEX])&&(i[A.POD_INDEX]=e+""),t!==A.Events.POD_START||(s=n[A.POD_DURATION])&&(i[A.POD_DURATION]=s+"")),(s=this.ws())&&(i[A.AD_TYPE]=s),o.ne.sendCustomEvent(o.he,t,i))},this.$e=function(t){o.oe.setDroppedFramesCount(t)},this.Ms=function(t){this.he===A.NO_SESSION_KEY&&t!==A.NO_SESSION_KEY&&(this.he=t)},this.ue=function(){return this.he},this.kt=function(){return o.ne.getSessionId(this.he)},this.Ut=function(){return o.ne.getClientId(this.he)},this.Ft=function(t,n){o.ne.Ft(this.he,t,n)},m.prototype=Object.create(e.prototype),m.prototype.constructor=m};ht.Impl=ht.Impl||{},ht.Impl.Html5Http=function(){(function(){}).apply(this,arguments),this.makeRequest=function(){return this.makeRequestStandard.apply(this,arguments)},this.makeRequestStandard=function(t,n,i,e,s,r){var o=new XMLHttpRequest;return o.open(t,n,!0),e&&o.overrideMimeType&&(o.overrideMimeType=e),e&&o.setRequestHeader&&o.setRequestHeader("Content-Type",e),s>0&&(o.timeout=s,o.ontimeout=function(){o.ontimeout=o.onreadystatechange=null,r&&r(!1,"timeout after "+s+" ms")}),o.onreadystatechange=function(){4===o.readyState&&(o.ontimeout=o.onreadystatechange=null,200===o.status?r&&r(!0,o.responseText):r&&r(!1,"http status "+o.status))},o.send(i),null},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Logging=function(){(function(){}).apply(this,arguments),this.consoleLog=function(t,n){"undefined"!==typeof console&&(console.log&&n===y.LogLevel.DEBUG||n===y.LogLevel.INFO?console.log(t):console.warn&&n===y.LogLevel.WARNING?console.warn(t):console.error&&n===y.LogLevel.ERROR&&console.error(t))},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Metadata=function(){(function(){}).apply(this,arguments),this.getBrowserName=function(){return null},this.getBrowserVersion=function(){return null},this.getDeviceBrand=function(){return null},this.getDeviceManufacturer=function(){return null},this.getDeviceModel=function(){return null},this.getDeviceType=function(){return null},this.getDeviceVersion=function(){return null},this.getFrameworkName=function(){return null},this.getFrameworkVersion=function(){return null},this.getOperatingSystemName=function(){return null},this.getOperatingSystemVersion=function(){return null},this.getDeviceCategory=function(){return null},this.getScreenWidth=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.width?window.screen.width.toString():null},this.getScreenHeight=function(){return"undefined"!==typeof window&&window&&window.screen&&window.screen.height?window.screen.height.toString():null},this.getScaleFactor=function(){return"undefined"!==typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio.toString():null},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Storage=function(){(function(){}).apply(this,arguments),this.saveData=function(t,n,i,e){var s=t+"."+n;try{localStorage.setItem(s,i),e(!0,null)}catch(t){e(!1,t.toString())}},this.loadData=function(t,n,i){var e=t+"."+n;try{i(!0,localStorage.getItem(e))}catch(t){i(!1,t.toString())}},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Time=function(){(function(){}).apply(this,arguments),this.getEpochTimeMs=function(){return(new Date).getTime()},this.release=function(){}},ht.Impl=ht.Impl||{},ht.Impl.Html5Timer=function(){(function(){}).apply(this,arguments),this.createTimer=function(t,n){var i=setInterval(t,n);return function(){-1!==i&&(clearInterval(i),i=-1)}},this.release=function(){}};var n,s,C,T,w,I=ut.VideoAnalytics=function(){var s=this;s.Hi=null,s.c=null,s.d=null,s.Gi=null,s.Fi=null,s.ji=null,this.release=function(){s.c&&s.c.debug("VideoAnalytics.release()"),s.Fi&&s.Fi.ki()&&s.Fi.Bi(!1),"undefined"!==typeof ht.ProxyMonitor&&s.ji&&(ht.ProxyMonitor.release(s.ji),s.ji=null),s.Fi&&(s.Fi.Ji(null),s.Fi.Qi(),s.Fi=null),s.Gi=null},function(t,n){s.Hi=t,s.d=n,s.Gi=n.buildTimer(A.version),s.c=n.buildLogger(),s.c.setModuleName("VideoAnalytics"),s.Fi=new m(s.Hi,s.Gi),R.call(this)}.apply(this,arguments),this.reportPlaybackRequested=function(t){s.c&&s.c.debug("VideoAnalytics.reportPlaybackRequested()"),s.Fi?(z.Nt(t)>0&&s.setContentInfo(t),s.Fi.ki()||s.Fi.Bi(!0)):s.c.error("VideoAnalytics.reportPlaybackRequested() : "+A.u)},this.reportPlaybackEnded=function(){s.c&&s.c.debug("VideoAnalytics.reportPlaybackEnded()"),s.Fi?s.Fi.ki()&&(s.Fi.Bi(!1),"undefined"!==typeof ht.ProxyMonitor&&s.ji&&(ht.ProxyMonitor.release(s.ji),s.ji=null),s.Fi.Ji(null)):s.c.error("VideoAnalytics.reportPlaybackEnded() : "+A.u)},this.reportPlaybackFailed=function(t,n){s.Fi?(z.Nt(n)>0&&s.setContentInfo(n),s.Fi.ki()||s.Fi.Bi(!0),s.c&&s.c.debug("VideoAnalytics.reportPlaybackFailed()"),s.reportPlaybackError(t,h.ErrorSeverity.FATAL),s.reportPlaybackEnded()):s.c.error("VideoAnalytics.reportPlaybackFailed() : "+A.e)},this.setContentInfo=function(t){z.Nt(t)<=0?s.c.error("VideoAnalytics.setContentInfo() : Content Info is not set"):s.Fi?(s.c&&s.c.debug("VideoAnalytics.setContentInfo()"),s.Fi.qi(t)):s.c.error("VideoAnalytics.setContentInfo() : "+A.e)},this.setPlayerInfo=function(t){z.Nt(t)<=0?s.c.error("VideoAnalytics.setPlayerInfo() : Player Info is not set"):s.Fi?(s.c&&s.c.debug("VideoAnalytics.setPlayerInfo()"),s.Fi.qi(t)):s.c.error("VideoAnalytics.setPlayerInfo() : "+A.e)},this.reportPlaybackMetric=function(){0!==arguments.length?1===arguments.length?s.Yi(arguments[0]):2===arguments.length?s.Yi(arguments[0],arguments[1]):3===arguments.length?s.Yi(arguments[0],arguments[1],arguments[2]):4===arguments.length&&s.Yi(arguments[0],arguments[1],arguments[2],arguments[3]):s.c.error("VideoAnalytics.reportPlaybackMetric() : Need to report metric mandatory")},this.reportPlaybackError=function(t,n){s.Fi?z.yt(t)?(s.c&&s.c.debug("VideoAnalytics.reportPlaybackError()"),n=new it(t,n),s.Fi.Hn(n)):s.c.error("VideoAnalytics.reportPlaybackError() : errorMessage need to be valid string"):s.c.error("VideoAnalytics.reportPlaybackError() : "+A.e)},this.reportPlaybackEvent=function(t,n){if(z.yt(t))if(s.Fi){if(s.c&&s.c.debug("VideoAnalytics.reportPlaybackEvent()"),s.Fi)switch(t){case A.Events.USER_WAIT_STARTED:case A.Events.BUMPER_VIDEO_STARTED:s.Fi.Rt();break;case A.Events.USER_WAIT_ENDED:case A.Events.BUMPER_VIDEO_ENDED:s.Fi.Ct();break;default:s.Fi.Xi(t,n)}}else s.c.error("VideoAnalytics.reportPlaybackEvent() : "+A.e);else s.c.error("VideoAnalytics.reportPlaybackEvent(): eventType parameter must be a valid string.")},this.setCallback=function(t){s.c&&s.c.debug("setCallback()"),s.Fi&&s.Fi.Ji(t)},this.reportAdBreakStarted=function(t,n,i){s.Fi?(s.c&&s.c.debug("VideoAnalytics.reportAdBreakStarted()"),s.Fi.Zi(t,n,i)):s.c.error("VideoAnalytics.reportAdBreakStarted() : "+A.e)},this.reportAdBreakEnded=function(){s.Fi?(s.c&&s.c.debug("VideoAnalytics.reportAdBreakEnded()"),s.Fi.$i()):s.c.error("VideoAnalytics.reportAdBreakEnded() : "+A.e)},this.setPlayer=function(t,n){var i,e;void 0!==t?(n&&(i=n[A.CONVIVA_MODULE],e=n[A.MEDIA_ELEMENT]),"undefined"!==typeof i?ht.ProxyMonitor=i.ProxyMonitor:"undefined"!==typeof ConvivaModule&&(ht.ProxyMonitor=ConvivaModule.ProxyMonitor),"undefined"!==typeof ht.ProxyMonitor?(s.c&&s.c.debug("VideoAnalytics.setPlayer()"),!t&&s.ji?(ht.ProxyMonitor.release(s.ji),s.ji=null):t?(s.ji&&ht.ProxyMonitor.release(s.ji),s.c&&s.c.debug("VideoAnalytics.setPlayer() : Initializing drop-in module"),s.ji="undefined"!==typeof e?ht.ProxyMonitor.initConvivaDropIn(t,e,s.d,this,ht):ht.ProxyMonitor.initConvivaDropIn(t,s.d,this,ht)):t||"undefined"===typeof e||(s.ji=ht.ProxyMonitor.initConvivaDropIn(t,e,s.d,this,ht))):s.c.error("VideoAnalytics.setPlayer() : Include the missing Player Module")):s.c.error("VideoAnalytics.setPlayer() : Need to configure the Player")},this.setAdAnalytics=function(t){t?s.getAdType()&&(s.getAdType()===A.AdType.SERVER_SIDE?s.Vi=t.getAdPlayerMonitor():s.getAdType()===A.AdType.CLIENT_SIDE&&s.c&&s.c.error("VideoAnalytics.setAdAnalytics() : API is not meant for Client Side Ads")):s.Vi=null},this.configureExistingSession=function(t){t!==A.NO_SESSION_KEY?s.Fi?(s.c&&s.c.debug("VideoAnalytics.configureExistingSession()"),s.Fi.Ms(t)):s.c.error("VideoAnalytics.configureExistingSession() : "+A.e):s.c.error("VideoAnalytics.configureExistingSession() : Invalid Session Key")},this.getSessionId=function(){return s.Fi?(s.c&&s.c.debug("VideoAnalytics.getSessionId()"),s.Fi.kt()):(s.c.error("VideoAnalytics.getSessionId() : "+A.e),A.NO_SESSION_KEY)},this.getClientId=function(){return s.Fi?(s.c&&s.c.debug("VideoAnalytics.getClientId()"),s.Fi.Ut()):(s.c.error("VideoAnalytics.getClientId() : "+A.e),null)},this.Wi=function(){return s.c&&s.c.debug("VideoAnalytics.getPlayerMonitor()"),this.Fi},this.getAdType=function(){return s.Fi?s.Fi.zi:null},this.te=function(){return s.Fi?s.Fi.Ki:null},I.prototype=Object.create(R.prototype),I.prototype.constructor=I};function N(t){throw{name:"SyntaxError",message:t,at:n,text:C}}function O(t){return t&&t!==s&&N("Expected '"+t+"' instead of '"+s+"'"),s=C.charAt(n),n+=1,s}function t(){var t,n="";for("-"===s&&O(n="-");s>="0"&&s<="9";)n+=s,O();if("."===s)for(n+=".";O()&&s>="0"&&s<="9";)n+=s;if("e"===s||"E"===s)for(n+=s,O(),"-"!==s&&"+"!==s||(n+=s,O());s>="0"&&s<="9";)n+=s,O();if(t=+n,!isNaN(t))return t;N("Bad number")}function _(){var t,n,i,e="";if('"'===s)for(;O();){if('"'===s)return O(),e;if("\\"===s)if(O(),"u"===s){for(n=i=0;n<4&&(t=parseInt(O(),16),isFinite(t));n+=1)i=16*i+t;e+=String.fromCharCode(i)}else{if("string"!==typeof T[s])break;e+=T[s]}else e+=s}N("Bad string")}function P(){for(;s&&s<=" ";)O()}ut.JsonParse=(T={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},w=function(){switch(P(),s){case"{":return function(){var t,n={};if("{"===s){if(O("{"),P(),"}"===s)return O("}"),n;for(;s;){if(t=_(),P(),O(":"),Object.hasOwnProperty.call(n,t)&&N('Duplicate key "'+t+'"'),n[t]=w(),P(),"}"===s)return O("}"),n;O(","),P()}}N("Bad object")}();case"[":return function(){var t=[];if("["===s){if(O("["),P(),"]"===s)return O("]"),t;for(;s;){if(t.push(w()),P(),"]"===s)return O("]"),t;O(","),P()}}N("Bad array")}();case'"':return _();case"-":return t();default:return(s>="0"&&s<="9"?t:function(){switch(s){case"t":return O("t"),O("r"),O("u"),O("e"),!0;case"f":return O("f"),O("a"),O("l"),O("s"),O("e"),!1;case"n":return O("n"),O("u"),O("l"),O("l"),null}N("Unexpected '"+s+"'")})()}},function(t,o){return C=t,n=0,s=" ",t=w(),P(),s&&N("Syntax error"),"function"===typeof o?function t(n,i){var e,s,r=n[i];if(r&&"object"===typeof r)for(e in r)Object.hasOwnProperty.call(r,e)&&(void 0!==(s=t(r,e))?r[e]=s:delete r[e]);return o.call(n,i,r)}({"":t},""):t});var D,b,M,L,V,k=ut.JSON2={};function U(t){return t<10?"0"+t:t}function F(t){return D.lastIndex=0,D.test(t)?'"'+t.replace(D,function(t){var n=L[t];return"string"===typeof n?n:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+U(this.getUTCMonth()+1)+"-"+U(this.getUTCDate())+"T"+U(this.getUTCHours())+":"+U(this.getUTCMinutes())+":"+U(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!==typeof k.stringify&&(D=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,L={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k.stringify=function(t,n,i){var e;if(M=b="","number"===typeof i)for(e=0;e<i;e+=1)M+=" ";else"string"===typeof i&&(M=i);if((V=n)&&"function"!==typeof n&&("object"!==typeof n||"number"!==typeof n.length))throw new Error("JSON2.stringify");return function t(n,i){var e,s,r,o,a,u=b,h=i[n];switch(h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(n)),"function"===typeof V&&(h=V.call(i,n,h)),typeof h){case"string":return F(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(b+=M,a=[],Object.prototype.toString.apply(h)===Object.prototype.toString.apply([])){for(o=h.length,e=0;e<o;e+=1)a[e]=t(e,h)||"null";return r=0===a.length?"[]":b?"[\n"+b+a.join(",\n"+b)+"\n"+u+"]":"["+a.join(",")+"]",b=u,r}if(V&&"object"===typeof V)for(o=V.length,e=0;e<o;e+=1)"string"===typeof V[e]&&(r=t(s=V[e],h))&&a.push(F(s)+(b?": ":":")+r);else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(r=t(s,h))&&a.push(F(s)+(b?": ":":")+r);return r=0===a.length?"{}":b?"{\n"+b+a.join(",\n"+b)+"\n"+u+"}":"{"+a.join(",")+"}",b=u,r}}("",{"":t})});var B=ut.Ls={};B.Vs="0123456789abcdef",B.ks=function(t){for(var n="",i=7;i>=0;i--)n+=B.Vs.charAt(t>>4*i&15);return n},B.Us=function(t){for(var n=1+(t.length+8>>6),i=new Array(16*n),e=0;e<16*n;e++)i[e]=0;for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<24-e%4*8;return i[e>>2]|=128<<24-e%4*8,i[16*n-1]=8*t.length,i},B.Fs=function(t,n){var i=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(i>>16)<<16|65535&i},B.Bs=function(t,n){return t<<n|t>>>32-n},B.Hs=function(t,n,i,e){return t<20?n&i|~n&e:!(t<40)&&t<60?n&i|n&e|i&e:n^i^e},B.Gs=function(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514},B.Ks=function(t){for(var n="",i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return B.js(n)},B.js=function(t){if(""===t)return"";for(var n,i=B.Us(t),e=new Array(80),s=1732584193,r=-271733879,o=-1732584194,a=271733878,u=-1009589776,h=0;h<i.length;h+=16){for(var c=s,f=r,l=o,d=a,v=u,p=0;p<80;p++)e[p]=p<16?i[h+p]:B.Bs(e[p-3]^e[p-8]^e[p-14]^e[p-16],1),n=B.Fs(B.Fs(B.Bs(s,5),B.Hs(p,r,o,a)),B.Fs(B.Fs(u,e[p]),B.Gs(p))),u=a,a=o,o=B.Bs(r,30),r=s,s=n;s=B.Fs(s,c),r=B.Fs(r,f),o=B.Fs(o,l),a=B.Fs(a,d),u=B.Fs(u,v)}return B.ks(s)+B.ks(r)+B.ks(o)+B.ks(a)+B.ks(u)};var H=ut.CwsProtocol=function(){this.xs=function(t,n,i,e){return e.seq=t,e.st=n,e.t=i,e},this.Ws=function(t,n){var i=H.qs;return this.xs(t,n,i,{})}};H.version="2.6",H.Ys="/0/wsg",H.D="0",H.Js=-1,H.Xs=!1,H.Qs=2,H.zs=-1,H.Zs=-1,H.$s=1e3,H.tr="sdk.js.1",H.nr="CwsStateChangeEvent",H.ir="CwsErrorEvent",H.qs="CwsSessionEndEvent",H.er="CwsCustomEvent",H.sr="CwsSeekEvent",H.rr="CwsDataSamplesEvent",H.or="ok",H.ar="err",H.ur="clid",H.hr="cfg",H.cr="evs",H.fr="maxhbinfos",H.lr="slg",H.dr="hbi",H.vr="gw",H.pr="fp",H.Er="csi_en",H.gr="CwsSessionHb",H.yr="t",H.Ar="st",H.Sr="sst",H.Rr="lv",H.mr="seq",H.Cr="cid",H.Tr="clid",H.wr="clv",H.Ir="pver",H.Nr="iid",H.Or="sid",H._r="vid",H.Pr="an",H.Dr="pn",H.br="tags",H.Mr="sf",H.Lr="evs",H.Vr="lg",H.kr="hbinfos",H.Ur="sdk",H.Fr="pj",H.Br="ps",H.Hr="br",H.Gr="cl",H.Kr="efps",H.jr="afps",H.xr="rfpstot",H.Wr="rfpscnt",H.qr="rs",H.Yr="pht",H.Jr="bl",H.Xr="url",H.Qr="caps",H.zr="pm",H.Zr="w",H.$r="h",H.no="ct",H.io="le",H.eo="dftot",H.so="dfcnt",H.ro="ss",H.oo="csi_n",H.ao="csi_t",H.uo="csi_l",H.ho="csi_v",H.co="csi_c",H.fo="sch",H.lo="br",H.do="brv",H.vo="dvb",H.po="dvma",H.Eo="dvm",H.go="dvt",H.yo="dvv",H.Ao="sw",H.So="sh",H.Ro="scf",H.mo="fw",H.Co="fwv",H.To="cc",H.wo="mn",H.Io="mv",H.No="os",H.Oo="osv",H._o="cat",H.Po="caps",H.Do="t",H.bo="seq",H.Mo="st",H.Lo="act",H.Vo="skto",H.ko="err",H.Uo="ft",H.Fo="new",H.Bo="old",H.Ho="name",H.Go="attr",H.Ko="seq",H.jo="err",H.xo="rtt",H.Wo="ad",H.qo="csi",H.Yo=function(t){switch(t){case a.PlayerState.STOPPED:return H.Jo;case a.PlayerState.PLAYING:return H.Xo;case a.PlayerState.BUFFERING:return H.Qo;case a.PlayerState.PAUSED:return H.zo;case a.PlayerState.NOT_MONITORED:return H.Zo;default:return H.$o}},H.Jo=1,H.Xo=3,H.Qo=6,H.zo=12,H.Zo=98,H.$o=100,H.ta={na:0,ct:1,ia:2,ea:4},H.sa={ra:0};var G=ut.LibJSONInterface=function(){this.oa=function(t){var n=null;try{n=k.stringify(t)}catch(t){return n}return n},this.aa=function(t){var n=null;try{n=ut.JsonParse(t)}catch(t){return n}return z.ua(n)||(n=null),n}},K=ut.CwsHeartbeat=function(){this.ha={},function(){}.apply(this,arguments),this.get=function(){return this.ha},this.ca=function(t,n){this.ha[t]=n},this.fa=function(t,n,i){this.ha[t]||(this.ha[t]={}),this.ha[t][n]=i},this.la=function(t){this.ca(H.yr,t)},this.da=function(t){this.ca(H.Ar,t)},this.va=function(t){this.ca(H.Sr,t)},this.pa=function(t){this.ca(H.Rr,t)},this.Ea=function(t){this.ca(H.mr,t)},this.ga=function(t){this.ca(H.Cr,t)},this.ya=function(t){this.ca(H.Tr,t)},this.Aa=function(t){this.ca(H.wr,t)},this.Sa=function(t){this.ca(H.Ir,t)},this.Ra=function(t){this.ca(H.Po,t)},this.Un=function(t){this.ca(H.Or,t)},this.ma=function(t){this.ca(H.Nr,t)},this.Ca=function(t){this.ca(H._r,t)},this.Ta=function(t){this.ca(H.Pr,t)},this.wa=function(t){this.ca(H.Dr,t)},this.Ia=function(t){this.ca(H.br,t)},this.Na=function(t){this.ca(H.Mr,t)},this.Oa=function(t){this.ca(H.Qr,t)},this._a=function(t){this.ca(H.Lr,t)},this.Pa=function(t){this.ca(H.Ur,t)},this.Da=function(t){this.ca(H.Vr,t)},this.ba=function(t){this.ca(H.kr,t)},this.Ae=function(t){this.ca(H.Br,t)},this.Ma=function(t){this.ca(H.Fr,t)},this.La=function(t){this.ca(H.Gr,t)},this.Va=function(t){this.ca(H.Hr,t)},this.ka=function(t){this.ca(H.qr,t)},this.Ua=function(t){this.ca(H.Kr,t)},this.Fa=function(t){this.ca(H.jr,t)},this.Ba=function(t){this.ca(H.Wr,t)},this.Ha=function(t){this.ca(H.xr,t)},this.Ga=function(t){this.fa(H.zr,H.fo,t)},this.Ka=function(t){this.fa(H.zr,H.lo,t)},this.ja=function(t){this.fa(H.zr,H.do,t)},this.xa=function(t){this.fa(H.zr,H.vo,t)},this.Wa=function(t){this.fa(H.zr,H.po,t)},this.qa=function(t){this.fa(H.zr,H.Eo,t)},this.Ya=function(t){this.fa(H.zr,H.go,t)},this.Ja=function(t){this.fa(H.zr,H.yo,t)},this.Xa=function(t){this.fa(H.zr,H.mo,t),this.ca(H.mo,t)},this.Qa=function(t){this.fa(H.zr,H.Co,t),this.ca(H.Co,t)},this.za=function(t){this.fa(H.zr,H.No,t.toUpperCase())},this.Za=function(t){this.fa(H.zr,H.Oo,t)},this.$a=function(t){this.fa(H.zr,H._o,t)},this.tu=function(t){this.fa(H.zr,H.Ao,t)},this.nu=function(t){this.fa(H.zr,H.So,t)},this.iu=function(t){this.fa(H.zr,H.Ro,t)},this.eu=function(t){this.ca(H.eo,t)},this.$e=function(t){this.ca(H.so,t)},this.su=function(t){this.ca(H.Yr,t)},this.ru=function(t){this.ca(H.Jr,t)},this.ou=function(t){this.ca(H.Xr,t)},this.au=function(t){this.ca(H.Zr,t)},this.uu=function(t){this.ca(H.$r,t)},this.hu=function(t){this.ca(H.no,t)},this.cu=function(t){this.ca(H.io,t)},this.fu=function(){this.ca(H.Wo,!0)},this.lu=function(t){this.ca(H.ro,t)},this.setModuleName=function(t){this.fa(H.To,H.wo,t)},this.du=function(t){this.fa(H.To,H.Io,t)},this.vu=function(t){this.ca(H.qo,t)},this.pu=function(t){t&&this.ca(H.oo,t)},this.Eu=function(t){t&&this.ca(H.ao,t)},this.gu=function(t){t&&this.ca(H.uo,t)},this.yu=function(t){t&&this.ca(H.ho,t)},this.Au=function(t){t&&this.ca(H.co,t)}},j=ut.CwsSession=function(){var E=this;E.Su=null,E.pt=null,E.Ru=0,E.mu=0,E.Cu=H.ta.na,E.Tu=H.sa.ra,E.wu=[],E.Iu=-1,E.ln=-2,E.Qn=-1,E.Nu=-1,E.Ou=null,E.dn=a.PlayerState.UNKNOWN,E.cn=-1,E._u=-1,E.on=null,E.Sn=-1,E.Rn=-1,E.oe=null,E.nn=null,E.sn=null,E.Pu=null,E.Du=null,E.bu={},E.Mu=null,E.Lu=null,E.Vu=null,E.ku=null,E.Uu=null,E.Fu=null,E.Bu=null,E.Hu=null,E.Gu=null,E.Ku=null,E.ju=null,E.xu=null,E.Wu=null,E.qu=null,E.Yu=null,E.yn=null,E.An=null,E.w=null,E.I=null,E.ke=null,E.Ju=null,E.Xu=!1,E.Qu=!1,E.zu=!1,E.Zu=!1,E.$u=!1,E.th=null,E.nh=1e3,E.ih=0,E.eh=0,E.sh={},E.m={},E.rh=!1,E.oh=null,E.ah=null,E.uh=null,E.hh=null,E.ch=null,E.fh=null,E.lh=12e4,E.dh=H.Xs,E.vh=!1,E.ph=null,E.hi=null,function(t,n,i,e,s,r,o,a,u,h,c,f,l){this.Eh=t,this.Hi=n,this.ui=i,this.c=e,this.c.setModuleName("CwsSession"),this.y=s,this.Gi=r,this.gh=o,this.yh=a,this.Ah=u,this.ci=h,this.Sh=c,this.pt=f,this.pt&&(E.cn=this.pt.encodedFrameRate,E.on=this.pt.streamUrl,E._u=this.pt.duration),this.Sh&&(E.ph=E.Sh.get(Y.P)),E.hi=l}.apply(this,arguments),this.ut=function(){this.Sh=null,this.ci=null,this.g=null,this.Ah=null,this.yh=null,this.gh=null,this.Gi=null,this.y=null,this.c=null,this.ui=null,this.Hi=null,this.Eh.Rh(),this.Eh=null,this.Ju=null,this.zu=!0},this.mh=function(t){this.Ch=t,this.Th=this.Ch.Th,this.c.Un(this.Ch.S),this.Ru=this.Ah.current(),this.wh()||this.Ih()?(this.Cu+=j.Nh,E.c.info("start(): assetName="+E.pt.assetName)):E.c.info("start()"+E.Oh())},this._h=function(){this.Zu=!0},this.Ph=function(){this.c.debug("initialize()"),(this.wh()||this.Ih()||this.Dh())&&(E.bh(),E.Mh(),E.Lh(),(this.wh()||this.Ih())&&E.Vh())},this.kh=function(){this.c.debug("end(): schedule the last hb before session cleanup"+E.Oh()),this.Uh(),this.Fh(),this.Bh(),this.Hh()},this.Gh=function(){this.Zu||(this.Hh(),this.Kh())},this.Ka=function(t){var n=E.Mu;n!==t&&t&&(E.c.debug("Change browserName from "+n+" to "+t),E.Mu=t)},this.ja=function(t){var n=E.Lu;n!==t&&t&&(E.c.debug("Change browserVersion from "+n+" to "+t),E.Lu=t)},this.xa=function(t){var n=E.Vu;n!==t&&t&&(E.c.debug("Change deviceBrand from "+n+" to "+t),E.Vu=t)},this.Wa=function(t){var n=E.ku;n!==t&&t&&(E.c.debug("Change deviceManufacturer from "+n+" to "+t),E.ku=t)},this.qa=function(t){var n=E.Uu;n!==t&&t&&(E.c.debug("Change deviceModel from "+n+" to "+t),E.Uu=t)},this.Ya=function(t){var n=E.Fu;n!==t&&t&&(E.c.debug("Change deviceType from "+n+" to "+t),E.Fu=t)},this.Ja=function(t){var n=E.Bu;n!==t&&t&&(E.c.debug("Change deviceVersion from "+n+" to "+t),E.Bu=t)},this.za=function(t){var n=E.Ku;n!==t&&t&&(E.c.debug("Change operatingSystemName from "+n+" to "+t),E.Ku=t)},this.Za=function(t){var n=E.ju;n!==t&&t&&(E.c.debug("Change operatingSystemVersion from "+n+" to "+t),E.ju=t)},this.$a=function(t){var n=E.xu;n!==t&&t&&(E.c.debug("Change deviceCategory from "+n+" to "+t),E.xu=t)},this.tu=function(t){var n=E.Wu;n!==t&&t&&(E.c.debug("Change screenWidth from "+n+" to "+t),E.Wu=t)},this.nu=function(t){var n=E.qu;n!==t&&t&&(E.c.debug("Change screenHeight from "+n+" to "+t),E.qu=t)},this.iu=function(t){var n=E.xu;n!==t&&t&&(E.c.debug("Change scaleFactor from "+n+" to "+t),E.Yu=t)},this.jh=function(){return E.Hu},this.Xa=function(t){var n=E.Hu;n!==t&&t&&(E.c.debug("Change frameworkName from "+n+" to "+t),E.Hu=t)},this.xh=function(){return E.Gu},this.Qa=function(t){var n=E.Gu;n!==t&&t&&(E.c.debug("Change frameworkVersion from "+n+" to "+t),E.Gu=t)},this.ou=function(t){var n;E.pt.streamUrl||(n=E.on)!==t&&t&&(E.c.debug("Change stream url from "+n+" to "+t),E.on=t)},this.Wh=function(){E.Fh(),E.vh||(E.qh(),E.fh=E.Gi.create(E.qh,E.lh,"CwsSession.startCdnTimer"),E.c.debug("fetching cdn ip timer started"))},this.Fh=function(){E.fh&&(E.fh(),E.Yh(null,null,null,null,null),E.fh=null)},this.qh=function(){E.c.debug("detectCDNServerIp(): For "+E.on),E.dh?E.Jh():E.Fh()},this.Jh=function(){try{var t;"function"===typeof XMLHttpRequest||"object"===typeof XMLHttpRequest?((t=new XMLHttpRequest).open("HEAD",E.on,!0),t.setRequestHeader("Pragma","akamai-x-cache-on"),t.onreadystatechange=function(){4===this.readyState&&(200===this.status&&(this.getAllResponseHeaders().indexOf("x-cache")>=0||this.getAllResponseHeaders().indexOf("X-Cache")>=0)?E.Yh("Akamai","header","X-Cache",""+this.getResponseHeader("X-Cache"),""+this.status):E.Yh("null","header","null","null",""+this.status))},t.send()):E.c.info("xmlhttpreq is not available here to fetch CDN Server Ip")}catch(t){E.c.info("Exception caught in makeAkamaiHeadRequest")}},this.Yh=function(t,n,i,e,s){var r={},o={};E.oh!==t&&(null!==E.oh&&(o[H.oo]=E.oh),E.oh=t,null===E.oh?r[H.oo]="null":r[H.oo]=E.oh),E.ah!==n&&(null!==E.ah&&(o[H.ao]=E.ah),E.ah=n,null===E.ah?r[H.ao]="null":r[H.ao]=E.ah),E.uh!==i&&(null!==E.uh&&(o[H.uo]=E.uh),E.uh=i,null===E.uh?r[H.uo]="null":r[H.uo]=E.uh),E.hh!==e&&(null!==E.hh&&(o[H.ho]=E.hh),E.hh=e,null===E.hh?r[H.ho]="null":r[H.ho]=E.hh),E.ch!==s&&(null!==E.ch&&(o[H.co]=E.ch),E.ch=s,null===E.ch?r[H.co]="null":r[H.co]=E.ch),"{}"!==JSON.stringify(r)&&E.Xh(r,o)},this.Qh=function(t){var n=E.ln;n!==t&&t>0&&(E.c.info("Change bitrate from "+n+" to "+t),E.zh(n,t),E.ln=t)},this.eu=function(t){var n=E.Qn;n!==t&&t>=0&&(E.c.info("Change dropped frames total from "+n+" to "+t),E.Zh(n,t),E.Qn=t)},this.$e=function(t){var n=E.Nu,i=t+(-1===E.Nu?0:E.Nu);n!==t&&i>=0&&(E.c.info("Change dropped frames count from "+n+" to "+i),E.$h(n,i),E.Nu=i)},this.ka=function(t){var n=E.Ou;n!==t&&t&&(E.c.info("Change resource from "+n+" to "+t),E.Ou=t)},this.Ta=function(t){E.nn!==t&&t&&(E.c.info("Change assetName from "+E.nn+" to "+t),E.nn=t)},this.pa=function(t){var n=E.Du;n!==t&&z.Oi(t)&&(E.c.info("Change isLive from "+n+" to "+t),E.Du=t)},this.Ca=function(t){var n=E.sn;n!==t&&t&&(E.c.info("Change viewerId from "+n+" to "+t),E.sn=t)},this.wa=function(t){var n=E.Pu;n!==t&&t&&(E.c.info("Change playerName from "+n+" to "+t),E.Pu=t)},this.Ia=function(t){var n=E.bu;!z.tc(n,t)&&t&&(E.c.info("Change tags from "+z.nc(n)+" to "+z.nc(t)),E.bu=t)},this.Ua=function(t){E.pt.encodedFrameRate>0||(E.c.debug("setEncodedFrameRate(): "+t),E.cn=t)},this.La=function(t){E.pt.duration>0||(E.c.debug("setContentLength(): "+t),E._u=t)},this.Ae=function(t){var n,i=!1;E.Qu||t!==a.PlayerState.PLAYING||(E.Qu=!0,E.wh()&&(i=!0),z.yt(E.pt.viewerId)||E.c.error("Missing viewerId. viewerId should be updated before first frame is rendered."),z.yt(E.pt.streamType)&&f.StreamType.UNKNOWN!==E.pt.streamType||E.c.error("Missing streamType - Live or VOD. streamType should be updated before first frame is rendered."),z.yt(E.pt.applicationName)||E.c.error("Missing applicationName. applicationName should be updated before first frame is rendered.")),E.dn!==t&&(n=E.dn,E.c.info("setPlayerState(): changing player state from "+n+" to "+t),E.ic(n,t),E.dn=t,i&&(E.c.info("SetPlayerState(): to playing state triggered urgent HB"),E.ec()))},this.sc=function(t){var n=E.Sn;n!==t&&t>0&&(E.c.debug("Change stream resolution width from "+n+" to "+t),E.rc(n,t),E.Sn=t)},this.oc=function(t){var n=E.Rn;n!==t&&t>0&&(E.c.debug("Change stream resolution height from "+n+" to "+t),E.ac(n,t),E.Rn=t)},this.hu=function(t){var n=E.w;n!==t&&t&&(E.c.debug("Change network connection type from "+n+" to "+t),E.uc(n,t),E.w=t)},this.cu=function(t){var n=E.I;n!==t&&t&&(E.c.debug("Change network link encryption from "+n+" to "+t),E.hc(n,t),E.I=t)},this.vu=function(t){E.vh=!0,E.Fh();var n=E.ke;n!==t&&z.yt(t)&&(E.c.debug("Change CDN Server IP from "+n+" to "+t),E.cc(n,t),E.ke=t)},this.fc=function(t){var n;E.c.debug("togglePauseJoin()"),E.Xu!==t?(n=E.Xu,t=!E.Xu,E.lc(n,t),E.Xu=!E.Xu):E.c.debug("togglePauseJoin(): same value, ignoring")},this.dc=function(t,n){E.vc(t,n),E.c.info("sendError(): triggered urgent HB"),E.ec()},this.pc=function(t,n){var i;n[H.Do]=t,n[H.Mo]=this.Ec(),n[H.bo]=this.Eh.gc(),this.oe&&(i=nt.yc(this.oe.getPHT(),0,null,-1),t=nt.yc(this.oe.getBufferLength(),0,null,-1),i>=0&&(n[H.Yr]=i),t>0&&(n[H.Jr]=t)),this.Eh.Ac(n)},this.Sc=function(t){E.oe=t,E.oe?E.Rc():E.mc()},this.Uh=function(){var t=this.yh.Ws(this.Cc(),this.Ec());this.Eh.Ac(t)},this.vc=function(t,n){var i={};i[H.ko]=t,i[H.Uo]=n,this.pc(H.ir,i)},this.zh=function(t,n){var i={},e={};t>0&&(e[H.Hr]=t),i[H.Hr]=n,this.Xh(i,e)},this.Tc=function(t,n){var i={};i[H.Lo]=t,n>=0&&(i[H.Vo]=n),this.pc(H.sr,i)},this.rc=function(t,n){var i={},e={};-1!==t&&(e[H.Zr]=t),i[H.Zr]=n,this.Xh(i,e)},this.ac=function(t,n){var i={},e={};-1!==t&&(e[H.$r]=t),i[H.$r]=n,this.Xh(i,e)},this.uc=function(t,n){var i={},e={};null!==t&&(e[H.no]=t),i[H.no]=n,this.Xh(i,e)},this.hc=function(t,n){var i={},e={};null!==t&&(e[H.io]=t),i[H.io]=n,this.Xh(i,e)},this.cc=function(t,n){var i={},e={};z.yt(t)&&(e[H.qo]=t),i[H.qo]=n,this.Xh(i,e)},this.Zh=function(t,n){var i={},e={};t>=0&&(e[H.eo]=t),i[H.eo]=n,this.Xh(i,e)},this.$h=function(t,n){var i={},e={};t>=0&&(e[H.so]=t),i[H.so]=n,this.Xh(i,e)},this.lc=function(t,n){var i={},e={};e[H.Fr]=t,i[H.Fr]=n,this.Xh(i,e)},this.ic=function(t,n){var i={},e={};i[H.Br]=H.Yo(n),e[H.Br]=H.Yo(t),this.Xh(i,e)},this.Xh=function(t,n){var i={};i[H.Fo]=t,n&&z.Nt(n)>0&&(i[H.Bo]=n),this.pc(H.nr,i)},this.wc=function(t,n){var i={};i[H.Ho]=t,z.Nt(n)>0&&(i[H.Go]=n),this.pc(H.er,i)},this.Bh=function(){E.Su&&(E.Su(),E.Su=null)},this.Kh=function(){E.Bh();var t=1e3*E.ui.heartbeatInterval;E.Su=E.Gi.create(E.Hh,t,"Session.sendHeartbeat:"+this.Th)},this.mc=function(){E.th&&(E.th(),E.th=null)},this.Rc=function(){E.mc(),E.th=E.Gi.create(E.Ic,E.nh,"Session.startRfpsTimer")},this.Nc=function(){var t={err:"pending"};t.seq=E.mu-1,t.sentAt=E.Ec(),t.rtt=-1,E.wu.push(t);for(var n=0;n<E.wu.length;n++)"ok"===(t=E.wu[n]).err&&(E.wu.splice(n,1),n--)},this.Oc=function(t,n){for(var i=0;i<E.wu.length;i++){var e=E.wu[i];e.seq===t&&(e.rtt=E.Ec()-e.sentAt,e.err=n)}},this._c=function(t){for(var n=0;n<E.wu.length;n++){var i=E.wu[n];i.seq===t&&(i.rtt=E.Ec()-i.sentAt,i.err="ok")}},this.Pc=function(){for(var t,n,i=E.Sh.get(Y.Dc),e=[],s=-1,r=0;r<E.wu.length;r++)if("ok"===(n=E.wu[r]).err){s=n.seq;break}for(var o=0;o<E.wu.length;o++)((t=(n=E.wu[o]).seq)<E.mu-i||t<s)&&e.push(o);for(var a=[],u=0;u<E.wu.length;u++)t=(n=E.wu[u]).seq,e.indexOf(u)<0&&a.push(E.wu[u]);E.wu=a},this.bc=function(){E.Pc();for(var t=[],n=0;n<E.wu.length;n++){var i=E.wu[n],e={};e[H.Ko]=i.seq,e[H.xo]=i.rtt,e[H.jo]=i.err,t.push(e)}return t},this.Mc=function(){var t,n=-1,i=-1,e=E.Eh.Rh();if(E.Dh()&&0===e.length)return null;var s=new K;s.la(H.gr),s.ga(E.ui.customerKey),s.ya(E.Sh.get(Y.P)),s.Un(E.Ch.S),s.Ea(E.mu),s.Sa(H.version);var r=A.version;if(E.hi&&(r=E.hi),s.Aa(r),s.ma(E.Hi.S),s.Ra(0),E.Hi.w?s.hu(E.Hi.w):E.w&&s.hu(E.w),E.Hi.I?s.cu(E.Hi.I):E.I&&s.cu(E.I),z.yt(E.ke)&&s.vu(E.ke),s.Ga(H.tr),E.Mu&&s.Ka(E.Mu),E.Lu&&s.ja(E.Lu),E.Vu&&s.xa(E.Vu),E.ku&&s.Wa(E.ku),E.Uu&&s.qa(E.Uu),E.Fu&&s.Ya(E.Fu),E.Bu&&s.Ja(E.Bu),E.Ku&&s.za(E.Ku),E.ju&&s.Za(E.ju),E.xu&&s.$a(E.xu),E.Hu&&s.Xa(E.Hu),E.Gu&&s.Qa(E.Gu),E.Wu&&!isNaN(E.Wu)&&s.tu(parseInt(E.Wu,10)),E.qu&&!isNaN(E.qu)&&s.nu(parseInt(E.qu,10)),E.Yu&&!isNaN(E.Yu)?s.iu(parseFloat(E.Yu)):(E.Wu&&!isNaN(E.Wu)||E.qu&&!isNaN(E.qu))&&s.iu(1),E.oe&&(E.yn=E.oe.Dn(),E.yn&&s.setModuleName(E.yn),E.An=E.oe.bn(),E.An&&s.du(E.An),E.oe.Mn()&&(E.Hu=E.oe.Mn(),s.Xa(E.Hu)),E.oe.Vn()&&(E.Gu=E.oe.Vn(),s.Qa(E.Gu))),E.sn&&s.Ca(E.sn),z.Nt(E.bu)>0&&s.Ia(E.bu),E.wh()||E.Ih()){E.Ih()&&s.fu(),E.nn&&s.Ta(E.nn),s.Na(E.Cu);r=H.Yo(E.dn);s.Ae(r),s.Ma(E.Xu),E.Pu&&s.wa(E.Pu),z.Oi(E.Du)&&s.pa(E.Du),E._u>0&&s.La(E._u),E.ln>0&&s.Va(E.ln),null!==E.Ou&&s.ka(E.Ou),E.cn>0&&s.Ua(E.cn),E.oe&&(n=nt.yc(E.oe.getPHT(),0,null,-1),i=nt.yc(E.oe.getBufferLength(),0,null,-1)),z.lt(E.Hi.N)?t=E.Hi.N:E.oe&&(t=E.oe.getSignalStrength()),n>=0&&s.su(n),i>0&&s.ru(i);i=E.Lc();if(i>0&&s.Fa(i),E.eh>0&&s.Ha(nt.yc(E.eh,0,null,-1)),E.ih>0&&s.Ba(nt.yc(E.ih,0,null,-1)),t!==a.DEFAULT_SIGNAL_STRENGTH&&s.lu(t),E.on&&s.ou(E.on),E.Sn>0&&s.au(E.Sn),E.Rn>0&&s.uu(E.Rn),E.Qn>-1&&s.eu(E.Qn),E.Nu>-1&&(s.$e(E.Nu),E.Nu>0&&(E.$h(E.Nu,0),E.Nu=0)),"undefined"!==typeof E.Ju)for(var o in E.Ju)s.ca(o,E.Ju[o])}else s.Na(H.ta.na);return e.length>0&&s._a(e),s.Oa(E.Tu),s.Pa(!0),E.Sh.get(Y.Vc)&&s.Da(E.ci.Rh()),E.Sh.get(Y.Dc)>0&&((e=E.bc()).length>0&&s.ba(e)),0===E.mu&&(s=E.kc(s)),0!==E.mu&&(s=E.Uc(s)),s.va(E.Ru),s.da(E.Ec()),E.dh&&(s.pu(E.oh),s.Eu(E.ah),s.gu(E.uh),s.yu(E.hh),s.Au(E.ch)),E.mu++,s.get()},this.Uc=function(t){var n,i=E.m,e={};for(n in t.ha.tags)Object.prototype.hasOwnProperty.call(i,n)||(e[n]=t.ha.tags[n]);t.ha.tags=e,E.m={};for(var s=0;s<E.sh.length;s++)Object.prototype.hasOwnProperty.call(E.Hi.m,E.sh[s])?Object.prototype.hasOwnProperty.call(E.Hi.T,E.sh[s])?E.Hi.T[E.sh[s]]===Y.Ht.Gt?(E.m[Y.Fc+""+E.sh[s]]=Y.Ht.Gt,E.Hi.C("End-user chose to opt-out of personal data collection")):E.Hi.T[E.sh[s]]===Y.Ht.jt?(E.m[Y.Fc+""+E.sh[s]]=Y.Ht.jt,E.Hi.C("End-user chose to opt-out of personal data collection")):E.Hi.T[E.sh[s]]===Y.Ht.Bt?(E.m[Y.Fc+""+E.sh[s]]=Y.Ht.Bt,E.Hi.C("End-user used privacy settings and chose to opt-out of personal data collection")):(E.m[Y.Fc+""+E.sh[s]]=E.Hi.m[E.sh[s]],E.Hi.C("Data collection successful")):(E.m[Y.Fc+""+E.sh[s]]=E.Hi.m[E.sh[s]],E.Hi.C("Data collection successful")):E.m[Y.Fc+""+E.sh[s]]=Y.Ht.Bc;var r,o={};for(r in i){var a=r.split(".");"{}"!==JSON.stringify(E.sh)&&-1!==E.sh.indexOf(""+a[2])||i[Y.Fc+""+a[2]]===Y.Ht.Hc||(E.Hi.C("Data collection restricted from Conviva back-end"),E.m[Y.Fc+""+a[2]]=Y.Ht.Hc,o[Y.Fc+""+a[2]]=Y.Ht.Hc)}if("{}"!==JSON.stringify(E.m)){var u,h=z.Gc(E.m);for(u in t.ha.tags)h[u]=t.ha.tags[u];if(t.ha.tags=h,!z.tc(i,E.m)){var c={};if("{}"!==JSON.stringify(o)&&(c[H.br]=o),"{}"!==JSON.stringify(i)){for(var f in i)E.m[f]&&i[f]!==E.m[f]&&(c[H.br]||(c[H.br]={}),c[H.br][f]=E.m[f]);for(var l in E.m)Object.prototype.hasOwnProperty.call(i,l)&&i[l]===E.m[l]||(c[H.br]||(c[H.br]={}),c[H.br][l]=E.m[l])}"{}"===JSON.stringify(i)&&(c[H.br]=E.m);var d,v,p={};p[H.Fo]=c,p[H.Do]=H.nr,p[H.Mo]=E.Ec(),p[H.bo]=E.Eh.gc(),E.oe&&(d=nt.yc(E.oe.getPHT(),0,null,-1),v=nt.yc(E.oe.getBufferLength(),0,null,-1),d>=0&&(p[H.Yr]=d),v>0&&(p[H.Jr]=v)),t.ha.evs||(t.ha.evs=[]),t.ha.evs.push(p)}}return t},this.kc=function(t){var n=E.Kc();if("{}"===JSON.stringify(n))return t;var i,e=z.Gc(n);for(i in t.ha.tags)e[i]=t.ha.tags[i];t.ha.tags=e;var s={};s[H.br]=n;var r={};return r[H.Fo]=s,r[H.Do]=H.nr,r[H.Mo]=E.Ec(),r[H.bo]=E.Eh.gc(),E.oe&&(n=nt.yc(E.oe.getPHT(),0,null,-1),s=nt.yc(E.oe.getBufferLength(),0,null,-1),n>=0&&(r[H.Yr]=n),s>0&&(r[H.Jr]=s)),t.ha.evs||(t.ha.evs=[]),t.ha.evs.push(r),t},this.Kc=function(){var t={};if("undefined"!==typeof navigator&&navigator){if(t["c3.fp.cookie"]="undefined"!==typeof navigator.cookieEnabled&&navigator.cookieEnabled?""+navigator.cookieEnabled:"",t["c3.fp.memory"]="undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?""+navigator.deviceMemory:"",t["c3.fp.hwConc"]="undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?""+navigator.hardwareConcurrency:"",t["c3.fp.java"]=""+("function"!==typeof navigator.javaEnabled)?"false":navigator.javaEnabled(),t["c3.fp.lang"]="undefined"!==typeof navigator.language&&navigator.language?""+navigator.language:"",t["c3.fp.langs"]="undefined"!==typeof navigator.languages&&navigator.languages&&navigator.languages.length>0?""+navigator.languages.toString():"",t["c3.fp.maxTp"]="undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints?""+navigator.maxTouchPoints:"",t["c3.fp.plugins"]="","undefined"!==typeof navigator.plugins&&navigator.plugins&&navigator.plugins.length>0)for(var n=0;n<navigator.plugins.length;n++)t["c3.fp.plugins"]+=navigator.plugins[n].name+",";if(t["c3.fp.mime"]="","undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes&&navigator.mimeTypes.length>0)for(var i=0;i<navigator.mimeTypes.length;i++)t["c3.fp.mime"]+=navigator.mimeTypes[i].type+",";t["c3.fp.sysLang"]="undefined"!==typeof navigator.systemLanguage&&navigator.systemLanguage?""+navigator.systemLanguage:"",t["c3.fp.platform"]="undefined"!==typeof navigator.platform&&navigator.platform?""+navigator.platform:"",t["c3.fp.product"]="undefined"!==typeof navigator.product&&navigator.product?""+navigator.product:"",t["c3.fp.productSub"]="undefined"!==typeof navigator.productSub&&navigator.productSub?""+navigator.productSub:"",t["c3.fp.vendor"]="undefined"!==typeof navigator.vendor&&navigator.vendor?""+navigator.vendor:"",t["c3.fp.vendorSub"]="undefined"!==typeof navigator.vendorSub&&navigator.vendorSub?""+navigator.vendorSub:"";var e=E.jc();""!==e&&(t["c3.fp.canvFp"]=e)}return"undefined"!==typeof window&&window&&("undefined"!==typeof window.screen&&window.screen&&(t["c3.fp.availHeight"]="undefined"!==typeof window.screen.availHeight&&window.screen.availHeight?""+window.screen.availHeight:"",t["c3.fp.availWidth"]="undefined"!==typeof window.screen.availWidth&&window.screen.availWidth?""+window.screen.availWidth:"",t["c3.fp.height"]="undefined"!==typeof window.screen.height&&window.screen.height?""+window.screen.height:"",t["c3.fp.width"]="undefined"!==typeof window.screen.width&&window.screen.width?""+window.screen.width:"",t["c3.fp.colorDepth"]="undefined"!==typeof window.screen.colorDepth&&window.screen.colorDepth?""+window.screen.colorDepth:"",t["c3.fp.deviceXDPI"]="undefined"!==typeof window.screen.deviceXDPI&&window.screen.deviceXDPI?""+window.screen.deviceXDPI:"",t["c3.fp.deviceYDPI"]="undefined"!==typeof window.screen.deviceYDPI&&window.screen.deviceYDPI?""+window.screen.deviceYDPI:""),t["c3.fp.dpi"]="undefined"!==typeof window.devicePixelRatio&&window.devicePixelRatio?""+window.devicePixelRatio:"",t["c3.fp.secure"]="boolean"===typeof window.isSecureContext?""+window.isSecureContext:""),t},this.jc=function(){try{if("undefined"!==typeof document&&document){var t=document.createElement("CANVAS");if("undefined"!==typeof t&&t&&"function"===typeof t.getContext){var n=t.getContext("2d"),i="conviva";return n.textBaseline="top",n.font="14px Arial",n.textBaseline="alphabetic",n.fillStyle="#f40",n.fillRect("undefined"!==typeof navigator.plugins&&navigator.plugins?navigator.plugins.length:0,"undefined"!==typeof navigator.mimeTypes&&navigator.mimeTypes?navigator.mimeTypes.length:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0,"undefined"!==typeof navigator.vendor&&navigator.vendor?navigator.vendor.length:0),n.fillStyle="#069",n.fillText(i,"undefined"!==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>=0?navigator.maxTouchPoints:0,"undefined"!==typeof navigator.product&&navigator.product?navigator.product.length:0),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(i,"undefined"!==typeof navigator.deviceMemory&&navigator.deviceMemory?navigator.deviceMemory:0,"undefined"!==typeof navigator.hardwareConcurrency&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:0),B.js(t.toDataURL())}}return""}catch(t){return""}},this.Hh=function(){var t;E.zu||(t=E.Mc())&&E.xc(t)},this.Ic=function(){var t;E.dn!==a.PlayerState.PLAYING||!E.oe||(t=E.oe.getRenderedFrameRate())>0&&(E.eh+=t,E.ih++)},this.Lc=function(){return E.eh>0&&E.ih>0?z.Wc.Cast(+E.eh/E.ih):(this.Ic(),E.eh>0&&E.ih>0?z.Wc.Cast(+E.eh/E.ih):a.DEFAULT_RENDERED_FRAME_RATE)},this.xc=function(t){E.Nc();var i=E.mu-1;E.c.info("postHeartbeat(): Send HB["+i+"]"+E.Oh());E.gh.qc(t,function(t,n){E.Yc(t,n,i)})},this.Yc=function(e,s,r){E.zu||E.y._("onHeartbeatResponse",function(){var t,n,i;e?s?(E.c.debug("onHeartbeatResponse(): received valid response for HB["+r+"]"),E._c(r),!(i=s[H.ur])||i!==(t=E.Sh.get(Y.P))&&(E.c.debug("onHeartbeatResponse(): setting the client id to "+i+" (from gateway)"),E.Sh.set(Y.P,i),E.Sh.Jc(),t===H.D&&i!==H.D&&(E.Hi.O(),E.$u&&(E.c.debug("Send enqueued urgent hb as client id is available"),E.ec()))),(t=s[H.ar])&&t!==H.or&&E.c.error("onHeartbeatResponse(): error from gateway: "+t),"object"===typeof(i=s[H.hr])&&((t=i[H.fr])>=0&&E.Sh.get(Y.Dc)!==t&&(E.c.debug("onHeartbeatResponse(): setting Maximum Heartbeat Infos to "+t+" (from gateway)"),E.Sh.set(Y.Dc,t)),t=i[H.lr],(t=!!z.Oi(t)&&t)!==E.Sh.get(Y.Vc)&&(E.c.debug("onHeartbeatResponse(): turning "+(t?"on":"off")+" sending of logs"),E.Sh.set(Y.Vc,t)),t=i[H.dr],!z.lt(t)||(n=z.Wc.Cast(t))!==E.ui.heartbeatInterval&&(E.c.debug("onHeartbeatResponse(): received hbIntervalMs from gateway: "+n),E.ui.heartbeatInterval=n,E.Su&&E.Kh()),(n=i[H.vr])&&n!==E.ui.gatewayUrl&&(E.c.debug("onHeartbeatResponse(): received gatewayUrl from gateway: "+n),E.ui.gatewayUrl=n),E.Xc()||(E.sh={},(n=i[H.pr])&&(E.rh||(E.rh=!0),E.c.debug("onHeartbeatResponse(): received fp from gateway: "+n),E.sh=n.split(",")),E.dh=i[H.Er],z.Oi(E.dh)&&(E.dh?(E.c.debug("onHeartbeatResponse(): enabling the CDN Server IP collection"),E.fh||E.Wh()):(E.c.debug("onHeartbeatResponse(): disabling the CDN Server IP collection (from gateway)"),E.Fh()))))):E.c.warning("onHeartbeatResponse(): decoded heartbeat response is null."):(i=s,z.yt(i)?z.Qc(i,"HTTP timeout")?E.c.warning("onHeartbeatResponse(): "+i):E.c.error("onHeartbeatResponse(): failed to send heartbeat: "+i):(i=x.zc,E.c.error("onHeartbeatResponse(): "+i)),E.Oc(r,i))})},this.Ec=function(){return z.Wc.Cast(E.Ah.current()-E.Ru)},this.Cc=function(){return this.Eh.gc()},this.Oh=function(){return this.Dh()?" (global session)":""},this.Dh=function(){return this.Th===j.ft.na},this.Xc=function(){return this.Th===j.ft.na&&"T"===this.bu["c3.IPV4IPV6GlobalSession"]},this.wh=function(){return this.Th===j.ft.ct},this.Ih=function(){return this.Th===j.ft.gt},this.St=function(t){E.Zc(t),E.bh()},this.Zc=function(t){var n={},i={};if(z.yt(t.assetName)&&(E.pt.assetName!==t.assetName?(E.pt.assetName&&(n[H.Pr]=E.pt.assetName),i[H.Pr]=t.assetName,E.pt.assetName=t.assetName):E.c.warning("mergeContentMetadata(): assetName was not changed.")),z.yt(t.applicationName)&&(E.pt.applicationName!==t.applicationName?(E.pt.applicationName&&(n[H.Dr]=E.pt.applicationName),i[H.Dr]=t.applicationName,E.pt.applicationName=t.applicationName):E.c.warning("mergeContentMetadata(): applicationName was not changed.")),z.yt(t.streamUrl)&&(E.pt.streamUrl!==t.streamUrl?(E.pt.streamUrl&&(n[H.Xr]=E.pt.streamUrl),i[H.Xr]=t.streamUrl,E.pt.streamUrl=t.streamUrl,E.on=E.pt.streamUrl):E.c.warning("mergeContentMetadata(): streamUrl was not changed.")),z.yt(t.viewerId)&&(E.pt.viewerId!==t.viewerId?(E.pt.viewerId&&(n[H._r]=E.pt.viewerId),i[H._r]=t.viewerId,E.pt.viewerId=t.viewerId):E.c.warning("mergeContentMetadata(): viewerId was not changed.")),z.yt(t.defaultResource)&&(E.pt.defaultResource!==t.defaultResource?(E.pt.defaultResource&&(n[H.qr]=E.pt.defaultResource),i[H.qr]=t.defaultResource,E.pt.defaultResource=t.defaultResource):E.c.warning("mergeContentMetadata(): defaultResource was not changed.")),z.lt(t.duration)&&t.duration>0&&(E.pt.duration!==t.duration?(E._u>0&&(n[H.Gr]=E._u),i[H.Gr]=t.duration,E.pt.duration=t.duration,E._u=E.pt.duration):E.c.warning("mergeContentMetadata(): duration was not changed.")),z.lt(t.encodedFrameRate)&&t.encodedFrameRate>0&&(E.pt.encodedFrameRate!==t.encodedFrameRate?(E.pt.encodedFrameRate>-1&&(n[H.Kr]=E.pt.encodedFrameRate),i[H.Kr]=t.encodedFrameRate,E.pt.encodedFrameRate=t.encodedFrameRate,E.cn=E.pt.encodedFrameRate):E.c.warning("mergeContentMetadata(): encodedFrameRate was not changed.")),t.streamType!==f.StreamType.UNKNOWN&&(E.pt.streamType!==t.streamType?(E.pt.streamType!==f.StreamType.UNKNOWN&&(E.pt.streamType===f.StreamType.LIVE?n[H.Rr]=!0:n[H.Rr]=!1),t.streamType===f.StreamType.LIVE?i[H.Rr]=!0:i[H.Rr]=!1,E.pt.streamType=t.streamType):E.c.warning("mergeContentMetadata(): streamType was not changed.")),z.Nt(t.custom)>0){var e,s={},r={};for(e in t.custom)E.pt.custom[e]!==t.custom[e]?(s[e]=t.custom[e],E.pt.custom[e]&&(r[e]=E.pt.custom[e]),E.pt.custom[e]=t.custom[e]):E.c.info("mergeContentMetadata(): custom."+e+" was not changed.");z.Nt(s)>0?(z.Nt(r)>0&&(n[H.br]=r),i[H.br]=s):E.c.warning("mergeContentMetadata(): custom was not changed.")}z.Nt(i)>0&&this.Xh(i,n)},this.bh=function(){var t;E.c.debug("setStatesFromContentMetadata()"),E.pt.defaultResource&&this.ka(E.pt.defaultResource),E.pt.streamUrl&&this.ou(E.pt.streamUrl),E.pt.duration>0&&this.La(E.pt.duration),E.pt.encodedFrameRate>0&&this.Ua(E.pt.encodedFrameRate),E.pt.streamType!==f.StreamType.UNKNOWN&&(t=E.pt.streamType===f.StreamType.LIVE,this.pa(t)),E.pt.assetName&&this.Ta(E.pt.assetName),E.pt.viewerId&&this.Ca(E.pt.viewerId),(E.pt.applicationName||E.pt.playerName)&&this.wa(E.pt.applicationName||E.pt.playerName),z.Nt(E.pt.custom)>0&&this.Ia(E.pt.custom)},this.Mh=function(){var t={};if(this.Dh()||(E.pt.assetName?t[H.Pr]=E.pt.assetName:E.c.warning("enqueueEventForContentMetadata(): assetName was not set."),E.pt.applicationName?t[H.Dr]=E.pt.applicationName:E.c.warning("enqueueEventForContentMetadata(): applicationName was not set."),E.pt.streamUrl?t[H.Xr]=E.pt.streamUrl:E.c.warning("enqueueEventForContentMetadata(): streamUrl was not set."),E.pt.viewerId?t[H._r]=E.pt.viewerId:E.c.warning("enqueueEventForContentMetadata(): viewerId was not set."),E.pt.defaultResource?t[H.qr]=E.pt.defaultResource:E.c.warning("enqueueEventForContentMetadata(): defaultResource was not set."),E.pt.duration>-1?t[H.Gr]=E.pt.duration:E.c.warning("enqueueEventForContentMetadata(): duration was not set."),E.pt.encodedFrameRate>-1?t[H.Kr]=E.pt.encodedFrameRate:E.c.warning("enqueueEventForContentMetadata(): encodedFrameRate was not set."),E.pt.streamType!==f.StreamType.UNKNOWN?E.pt.streamType===f.StreamType.LIVE?t[H.Rr]=!0:t[H.Rr]=!1:E.c.warning("enqueueEventForContentMetadata(): streamType was not set.")),z.Nt(E.pt.custom)>0)for(var n in t[H.br]={},E.pt.custom)t[H.br][n]=E.pt.custom[n];else this.Dh()||E.c.warning("enqueueEventForContentMetadata(): custom tags were not set.");z.Nt(t)>0&&this.Xh(t,null)},this.Vh=function(){E.pt&&z.yt(E.pt.assetName)||E.c.warning("Missing assetName during session creation"),E.pt&&z.yt(E.pt.defaultResource)||E.c.warning("Missing resource during session creation"),E.pt&&z.yt(E.pt.streamUrl)||E.c.warning("Missing streamUrl during session creation"),(!E.pt||E.pt.encodedFrameRate<=0)&&E.c.warning("Missing encodedFrameRate during session creation"),E.pt&&z.yt(E.pt.viewerId)||E.c.warning("Missing viewerId during session creation"),E.pt&&E.pt.streamType&&f.StreamType.UNKNOWN!==E.pt.streamType||E.c.warning("Missing streamType during session creation"),E.pt&&z.yt(E.pt.applicationName)||E.c.warning("Missing applicationName during session creation"),(!E.pt||E.pt.duration<=0)&&E.c.warning("Missing duration during session creation")},this.Ft=function(t,n){E.Ju||(E.Ju={}),E.Ju[t]=n},this.Lh=function(){var t={};E.Hi.w&&(t[H.no]=E.Hi.w,E.w=E.Hi.w),E.Hi.I&&(t[H.io]=E.Hi.I,E.I=E.Hi.I),z.Nt(t)>0&&this.Xh(t,null)},this.ec=function(){var t;E.Zu||((t=E.Sh.get(Y.P))&&t!==H.D&&""!==t&&"null"!==t?(E.c.debug("Send urgent hb:::"),E.$u=!1,E.Kh(),E.Hh()):(E.c.debug("Delay sending of urgent hb due to missing client id"),E.$u=!0))}};j.Nh=H.ta.ct+H.ta.ia+H.ta.ea,j.ft={ct:"Video",na:"Global",gt:"Ad"};var x=ut.Session=function(){var e=this;e.oe=null,e.S=0,e.Th=j.ft.ct,e.$c=!1,e.zu=!1,e.tf=!1,e.nf=null,e.Ki=null,e.if=null,e.ef=!1,e.sf=a.PlayerState.NOT_MONITORED,e.rf=!1,e.af=!1,e.uf=!1,e.hf=!1,e.cf=!1,function(t,n,i,e,s,r,o){this.S=t,this.Th=n,this.Sh=i,this.ff=e,this.vt=s,this.y=r,this.c=o,this.c.setModuleName("Session"),this.c.Un(z.Et(this.S))}.apply(e,arguments),this.mh=function(t,n){e.vt.mh(this),t&&e.Ct(t),e.Sh.lf()?e.df(n):e.Sh.vf(function(){e.df(n)})},this.cleanup=function(){e.c.info("cleanup()"+e.Oh()),e.$c=!0,e.vt._h(),e.Sh.lf()?e.pf():e.Sh.vf(function(){e.pf()})},this.Ef=function(){e.c.debug("cleanupAll()"+e.Oh()),(e.wh()||e.Ih())&&e.oe&&e.gf(),e.c.Un(null),e.c=null,e.y=null,e.Hi=null,e.Sh=null,e.ff=null,e.vt.ut(),e.vt=null,e.zu=!0},this.pf=function(){e.vt.kh(),e.Ef()},this.df=function(t){e.vt.Ph(),e.yf(),t?(e.At(t.Ps(),t.Ds()),e.vt.Ae(a.PlayerState.STOPPED),e.vt.kh(),e.Ef()):e.vt.Gh()},this.yf=function(){e.c.debug("setStatesFromSystemMetadata()");var t=e.ff.get(),n=t[rt.BROWSER_NAME];n&&e.vt.Ka(n);n=t[rt.BROWSER_VERSION];n&&e.vt.ja(n);n=t[rt.DEVICE_BRAND];n&&e.vt.xa(n);n=t[rt.DEVICE_MANUFACTURER];n&&e.vt.Wa(n);n=t[rt.DEVICE_MODEL];n&&e.vt.qa(n);n=t[rt.DEVICE_TYPE];n&&e.vt.Ya(n);n=t[rt.DEVICE_VERSION];n&&e.vt.Ja(n);n=t[rt.FRAMEWORK_NAME];n&&e.vt.Xa(n);n=t[rt.FRAMEWORK_VERSION];n&&e.vt.Qa(n);n=t[rt.OPERATING_SYSTEM_NAME];n&&e.vt.za(n);n=t[rt.OPERATING_SYSTEM_VERSION];n&&e.vt.Za(n);n=t[rt.DEVICE_CATEGORY];n&&e.vt.$a(n);n=t[rt.SCREEN_WIDTH];n&&e.vt.tu(n);n=t[rt.SCREEN_HEIGHT];n&&e.vt.nu(n);t=t[rt.SCALE_FACTOR];t&&e.vt.iu(t)},this.Kn=function(t){e.c.debug("onPlayerStateChange(): "+t),e.vt.dn!==t&&(e.vt.dn===a.PlayerState.NOT_MONITORED&&t!==a.PlayerState.NOT_MONITORED&&(e.sf=t),e.ef?e.c.debug("onPlayerStateChange(): "+t+" (pooled, "+(e.tf?"ad playing":"preloading")+")"):e.vt.Ae(t))},this.jn=function(t){e.c.debug("onBitrateChange(): "+t),e.rf?e.c.info("onBitrateChange(): ignored"):e.vt.Qh(t)},this.zn=function(t){e.c.debug("onDroppedFramesTotalChange(): "+t),e.af?e.c.info("onDroppedFramesTotalChange(): ignored"):e.vt.eu(t)},this.Zn=function(t){e.c.debug("onDroppedFramesCountChange(): "+t),e.af?e.c.info("onDroppedFramesCountChange(): ignored"):e.vt.$e(t)},this.xn=function(t,n){z.lt(n)||(e.c.warning("onSeekEvent(): Ignored non-integer seekToPosition data: "+n),n=-1),e.vt.Tc(t,n)},this.In=function(t){e.c.debug("onEncodedFrameRateChange(): "+t),t>0?e.hf?e.c.info("onEncodedFrameRateChange(): Ignored encoded frame rate data: "+t+" (ads)"):(e.vt.Ua(t),e.c.info("onEncodedFrameRateChange(): Received encoded frame rate data: "+t)):e.c.warning("onEncodedFrameRateChange(): Ignored invalid encoded frame rate data: "+t)},this._n=function(t){e.c.debug("onContentLengthChange(): "+t),t>0?e.hf?e.c.info("setContentLength(): Ignored content length data: "+t+" (ads)"):(e.vt.La(t),e.c.info("setContentLength(): Received content length data: "+t)):e.c.warning("setContentLength(): Ignored invalid content length data: "+t)},this.Pn=function(t){e.c.debug("onStreamUrlChange(): "+t),e.vt.ou(t)},this.Wn=function(t){e.c.debug("onStreamResolutionWidthChange(): "+t),e.vt.sc(t)},this.qn=function(t){e.c.debug("onStreamResolutionHeightChange(): "+t),e.vt.oc(t)},this.W=function(t){e.c.debug("onConnectionTypeChange(): "+t),e.vt.hu(t)},this.Y=function(t){e.c.debug("onLinkEncryptionChange(): "+t),e.vt.cu(t)},this.Ln=function(t){e.c.debug("onPlayerTypeChange(): "+t),e.vt.jh()||e.vt.Xa(t)},this.kn=function(t){e.c.debug("onPlayerVersionChange(): "+t),e.vt.xh()||e.vt.Qa(t)},this.Jn=function(t){e.c.debug("onCDNServerIPChange(): "+t),e.vt.vu(t)},this.Yn=function(t,n){e.c.debug("onError(): "+t+" ("+n+")"),e.At(t,n)},this.Tn=function(){e.c.debug("onRelease()"),e.gf()},this.Dt=function(t,n,i){e.c.debug("adStart(): adStream="+t+" adPlayer="+n+" adPosition="+i),e.tf?e.c.warning("adStart(): multiple _adStart calls, ignoring"):(e.tf=!0,e.nf=t,e.Ki=n,e.if=i,e.vt.fc(!0),e.nf===h.AdStream.CONTENT||e.Ki===h.AdPlayer.SEPARATE?(e.vt.dn!==a.PlayerState.NOT_MONITORED&&(e.sf=e.vt.dn),e.vt.Ae(a.PlayerState.NOT_MONITORED),e.ef=!0):e.nf===h.AdStream.SEPARATE&&e.Ki===h.AdPlayer.CONTENT&&(e.vt.dn!==a.PlayerState.NOT_MONITORED&&(e.sf=e.vt.dn),e.vt.Ae(a.PlayerState.NOT_MONITORED),e.ef=!0,e.rf=!0,e.af=!0,e.hf=!0,e.uf=!0))},this.bt=function(){e.c.debug("adEnd()"),e.tf?(e.vt.fc(!1),e.nf===h.AdStream.CONTENT||e.Ki===h.AdPlayer.SEPARATE?e.Af||(e.ef=!1,e.vt.Ae(e.sf)):e.nf===h.AdStream.SEPARATE&&e.Ki===h.AdPlayer.CONTENT&&(e.rf=!1,e.af=!1,e.hf=!1,e.uf=!1,e.cf=!1,e.Af||(e.ef=!1,e.vt.Ae(e.sf))),e.tf=!1,e.nf=e.Ki=e.if=null):e.c.warning("adEnd(): called before _adStart, ignoring")},this.Rt=function(){e.c.debug("detachPlayer()"),e.oe?e.oe&&(e.y._("Session.detachPlayer",function(){e.oe.wn()}),e.oe=null,e.vt.Sc(null),e.vt.Ae(a.PlayerState.NOT_MONITORED)):e.c.error("detachPlayer(): called before attachPlayer, ignoring")},this.gf=function(){e.oe&&(e.y._("Session.releasePlayerStateManager",function(){e.oe.wn()}),e.oe=null,e.vt.Sc(null),e.vt.Ae(a.PlayerState.NOT_MONITORED))},this.mt=function(){e.c.debug("offFocus()"),e.vt.fc(!0),e.vt.dn!==a.PlayerState.NOT_MONITORED&&(e.sf=e.vt.dn),e.vt.Ae(a.PlayerState.NOT_MONITORED),e.ef=!0},this.Ct=function(t){e.c.debug("attachPlayer()"),e.oe?e.c.error("attachPlayer(): detach current PlayerStateManager first"):t instanceof a?e.y._("Session.attachPlayer()",function(){t.setMonitoringNotifier(e,e.S)?(t.Fn(),e.oe=t,e.vt.Sc(e.oe)):e.c.error("attachPlayer(): instance of PlayerStateManager is already attached to a session")}):e.c.error("attachPlayer(): Incorrect PlayerStateManager instance")},this.Tt=function(){e.c.debug("onFocus()"),e.vt.fc(!1),e.rf=!1,e.af=!1,e.hf=!1,e.uf=!1,e.cf=!1,e.Af||(e.ef=!1,e.sf!==a.PlayerState.NOT_MONITORED&&e.vt.Ae(e.sf))},this.Lt=function(){return e.c.debug("getPlayerStateManager()"),e.oe},this.wt=function(){e.c.debug("contentPreload()"),e.Af?e.c.debug("contentPreload(): called twice, ignoring"):(e.Af=!0,e.ef=!0)},this.It=function(){e.c.debug("contentStart()"),e.Af?(e.Af=!1,e.tf||(e.ef=!1,e.sf!==a.PlayerState.NOT_MONITORED&&e.vt.Ae(e.sf))):e.c.warning("contentStart(): called without _contentPreload, ignoring")},this.At=function(t,n){var i;e.c.info("reportError(): "+t),z.yt(t)?n===h.ErrorSeverity.FATAL||n===h.ErrorSeverity.WARNING?e.cf?e.c.debug("reportError(): ignored"):(i=n===h.ErrorSeverity.FATAL,e.vt.dc(t,i)):e.c.error("reportError(): invalid error severity: "+n):e.c.error("reportError(): invalid error message string: "+t)},this.St=function(t){e.y._("Session.updateContentMetadata",function(){e.vt.St(t)})},this.Pt=function(t,n){e.c.info("sendEvent(): eventName="+t+e.Oh()),e.vt.wc(t,n)},this.Dh=function(){return e.Th===j.ft.na},this.wh=function(){return e.Th===j.ft.ct},this.Ih=function(){return e.Th===j.ft.gt},this.Oh=function(){return e.Dh()?" (global session)":""},this.kt=function(){return this.S},this.Ut=function(){var t=null;return e.Sh.lf()&&(t=e.Sh.get(Y.P)),t},this.Ft=function(t,n){e.vt.Ft(t,n)}};x.zc="received no response (or a bad response) to heartbeat POST request";var W=ut.SessionFactory=function(){var r=this;r.c=null,r.ci=null,r.Sf=0,r.Rf=null,function(t,n,i,e){r.Hi=t,r.ui=n,r.Sh=i,r.d=e,r.c=r.d.buildLogger(),r.c.setModuleName("SessionFactory"),r.Sf=0,r.Rf={}}.apply(r,arguments),this.ut=function(){for(var t in r.c=null,r.ci=null,r.Rf)r.Rf[t].cleanup();r.Rf=null,r.Sf=0},this.mf=function(){var t=r.Sf;return r.Sf++,t},this.ht=function(t,n,i,e,s){return t||(t=new f),r.Cf(t,n,i,e,s)},this.U=function(t){return r.Cf(t,j.ft.na,void 0,A.version)},this.Tf=function(){return tt.wf()},this.Cf=function(t,n,i,e,s){t=r.d.Ci(r.Hi,r.ui,r.Sh,r.Tf(),n,t.Z(),e),e=r.mf();return"undefined"!==typeof s&&"undefined"!==typeof s.error?t.mh(i,s.error):(r.If(e,t),t.mh(i)),e},this._t=function(t){t=r.Rf[t];return t||r.c.error("Client: invalid sessionKey. Did you cleanup that session previously?"),t},this.dt=function(t){t=this._t(t);return t&&(t.wh()||t.Ih()||(r.c.error("Client: invalid Video sessionKey. Did you cleanup that session previously?"),t=null)),t},this.If=function(t,n){r.Rf[t]=n},this.Nf=function(t){delete r.Rf[t]},this.Mt=function(t){var n=r._t(t);r.Nf(t),n.cleanup()},this.j=function(){return r.Rf}},q=ut.Of=function(t){this.Gi=t,this._f=function(i,t,n){var e=!1;this.Gi.createOnce(function(){e||i(!(e=!0),n+" ("+t+" ms)")},t,"CallbackWithTimeout.wrap");return function(t,n){e||(e=!0,i(t,n))}}},Y=ut.Config=function(t,n,i){var e=this;this.c=t,this.c.setModuleName("Config"),this.Pf=n,this.Df=i,this.bf={clientId:H.D,iid:H.Js,sendLogs:!1,maxHbInfos:H.Qs},this.A=z.Gc(this.bf),this.Mf=!1,this.Lf=!1,this.Vf=[],this.lf=function(){return this.Mf},this.it=function(){this.Pf.it(Y.kf,function(t,n){t?(e.Uf(n),e.c.debug("load): configuration successfully loaded from local storage"+(e.Lf?" (was empty)":"")+".")):e.c.error("load): error loading configuration from local storage: "+n),e.Mf=!0,e.Ff()})},this.Uf=function(t){var n=this.Df.aa(t);n?n&&(t=n[Y.Bf],n=n[Y.et],t&&t!==H.D&&""!==t&&"null"!==t&&(this.A[Y.P]=t,this.c.debug("parse(): loaded clientId="+t+" (from local storage)")),n!==H.Js&&""!==n&&"null"!==n&&(this.A[Y.et]=n,this.c.debug("parse(): loaded iid="+n+" (from local storage)"))):this.Lf=!0},this.Hf=function(){var t={};return t[Y.Bf]=this.A.clientId,this.c.debug("marshall(): saving clientId="+this.A.clientId+" (to local storage)"),this.Df.oa(t)},this.Jc=function(){this.Pf.Jc(Y.kf,this.Hf(),function(t,n){t?e.c.debug("save(): configuration successfully saved to local storage."):e.c.error("save(): error saving configuration to local storage: "+n)})},this.vf=function(t){this.lf()?t():this.Vf.push(t)},this.get=function(t){return this.Mf?this.A[t]:null},this.set=function(t,n){this.Mf&&(this.A[t]=n)},this.Ff=function(){for(var t;"undefined"!==typeof(t=this.Vf.shift());)t()}};Y.kf="sdkConfig",Y.Bf="clId",Y.et="iid",Y.P="clientId",Y.Vc="sendLogs",Y.Dc="maxHbInfos",Y.Fc="c3.fp.",Y.Ht={Bc:"0",Gf:"1",Gt:"2",Bt:"3",Hc:"4",jt:"5",Kt:"6"};var J=ut.EventQueue=function(){this.Kf=[],this.jf=0,this.Ac=function(t){this.Kf.push(t)},this.gc=function(){var t=this.jf;return this.jf++,t},this.Rh=function(){var t=this.Kf;return this.Kf=[],t}},X=ut.ExceptionCatcher=function(t,n,i){this.c=t,this.c.setModuleName("ExceptionCatcher"),this.xf=n,this.g=i,this._=function(n,t,i){try{t()}catch(t){if(i)i(t);else{if(this.g.allowUncaughtExceptions)throw t;this.Wf(n,t)}}},this.Wf=function(t,n){var i="Uncaught exception: "+t+": "+n.toString();if(this.xf)try{this.xf.qc(i)}catch(t){this.c.error("Caught exception while sending ping: "+t.toString())}this.c.error(i)}},Q=ut.GatewayControl=function(t,n,i,e,s){var r=this;this.ui=t,this.c=n,this.c.setModuleName("GatewayControl"),this.qf=i,this.Df=e,this.Yf=s,this.qc=function(t,e){var n=(this.Yf?this.Yf.indexOf("ipv4")>-1?this.ui.M:this.ui.F:this.ui.gatewayUrl)+H.Ys;this.qf.Jf("POST",n,this.Df.oa(t),"application/json",function(t,n){var i;t?(i=r.Df.aa(n),e(t,i)):e(t,n)})}},z=ut.Lang={};z.Xf=function(t){return z.yt(t)&&t&&"undefined"!==t&&"null"!==t},z.Ot=function(t){var n,i,e={};for(n in t)z.Xf(n)&&(i=t[n],z.Xf(i)&&(e[n]=i));return e},z.Nn=function(t,n,i){if(!t)throw new Error("Expected "+i+" implementation is null.");for(var e in n)if("function"!==typeof t[e])throw new Error("Expected method "+e+" in "+i+" implementation.")},z.Nt=function(t){var n,i=0;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&i++;return i},z.Et=function(t){return""+t},z.Qf=function(t){return Math.floor(t)},z.Xt=function(t){return Math.abs(z.Qf(t))},z.zf=function(t){return Boolean(t)},z.yt=function(t){return"string"===typeof t&&""!==t},z.Qc=function(t,n){return"string"===typeof t&&"string"===typeof n&&("function"===typeof t.indexOf&&0===t.indexOf(n))},z.Oi=function(t){return"boolean"===typeof t},z.Zf=function(t){return escape(t)},z.ua=function(t){return"object"===typeof t},z.nc=function(t){var n,i="";for(n in t)i+=n+"="+t[n];return"Object{"+i+"}"},z.$f=function(t){var n,i=z.Gc(t);for(n in i)i[n]||delete i[n];return i},z.Gc=function(t){var n,i={};for(n in t)i[n]=t[n];return i},z.tc=function(t,n){if(typeof t!==typeof n)return!1;if(t instanceof Object&&n instanceof Object){if(z.Nt(t)!==z.Nt(n))return!1;for(var i in t)if(!(t[i]===n[i]))return!1;return!0}return t===n},z.cs=function(){for(var t={},n=0;n<arguments.length;n++)for(var i in arguments[n])arguments[n][i]&&(t[i]=arguments[n][i]);return t},z.lt=function(t){return"number"===typeof t&&Math.round(t)===t},z.tl=function(t){return"[object Array]"===Object.prototype.toString.call(t)},z.nl=function(t,n){if(t===n)return!0;if(!t||!n)return!1;if(t.length!==n.length)return!1;for(var i=0;i<t.length;++i)if(z.tl(t[i])&&z.tl(n[i])){if(!z.nl(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1;return!0},z.il=function(){return"undefined"!==typeof Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}()},z.Wt=function(t,n,i){if(z.il())Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:i});else{if("undefined"===typeof t.__defineGetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineGetter__");t.__defineGetter__(n,i)}},z.qt=function(t,n,i){if(z.il())Object.defineProperty(t,n,{configurable:!0,set:i});else{if("undefined"===typeof t.__defineSetter__)throw new Error("JavaScript runtime must support either Object.defineProperty or __defineSetter__");t.__defineSetter__(n,i)}},function(){var n={two32:4294967296};n.el=n.two32-1,n.sl=0,z.rl=n,z.rl.Cast=function(t){t=parseInt(t,10);return t>n.el?t=t%n.two32:t<n.sl&&(t=-t%n.two32,t=n.two32-t),t},z.rl.ol=function(t){t=parseInt(t,10);return t<=n.el&&t>=n.sl};var i={el:2147483647,sl:-2147483648};z.Wc=i,z.Wc.Cast=function(t){t=parseInt(t,10);return t>i.el?t=t%i.el:t<i.sl&&(t=-t%i.el,t=i.el-t),t},z.Wc.ol=function(t){t=parseInt(t,10);return t<=i.el&&t>=i.sl},z._s=function(){return window&&window.location&&window.location.search?window.location.search:""},z.al=function(){return document&&document.referrer?document.referrer:""}}();var Z=ut.LogBuffer=function(){this.ul=[],this.Fs=function(t){this.ul.length>=32&&this.ul.shift(),this.ul.push(t)},this.Rh=function(){var t=this.ul;return this.ul=[],t}},$=ut.Ping=function(t,n,i,e){this.hl=!1,this.cl=null,this.c=t,this.c.setModuleName("Ping"),this.qf=n,this.ui=i,this.hi=e,this.qc=function(t){this.hl||(this.hl=!0,t=this.fl()+"&d="+z.Zf(t.toString()),this.c.error("send(): "+t),this.qf.Jf("GET",t,null,null,null),this.hl=!1)},this.fl=function(){if(!this.cl){var t=$.ll+"?comp="+$.dl+"&clv="+(this.hi||h.version);if(this.ui&&(t+="&cid="+this.ui.customerKey),t+="&sch="+H.tr,!this.ui)return t;this.cl=t}return this.cl}};$.dl="sdkjs",$.ll="https://pings.conviva.com/ping.ping";var tt=ut.vl={};tt.pl=4294967295,tt.El=2147483647,tt.gl=-2147483648,tt.wf=function(){return Math.floor(Math.random()*tt.pl)+tt.gl},tt.rt=function(){return Math.floor(Math.random()*tt.pl)};var nt=ut.yl={};nt.yc=function(t,n,i,e){if(isNaN(t))return e;if("number"!==typeof t)return e;if(t===e)return e;t=z.Qf(t);return nt.Al(t,n,i)},nt.Al=function(t,n,i){return z.lt(i)&&t>i?t=i:z.lt(n)&&t<n&&(t=n),t},nt.hn=function(t){return-1===t||-2===t?t:t=nt.yc(t,0,null,-1)};var it=ut.StreamerError=function(){var i=this;i.errorCode=null,i.severity=h.ErrorSeverity.FATAL,function(t,n){i.errorCode=t,i.severity=n}.apply(i,arguments),this.Ps=function(){return i.errorCode},this.Ds=function(){return i.severity}},et=ut.HttpClient=function(t,n,i,e){this.c=t,this.c.setModuleName("HttpClient"),this.ii=n,this.Sl=i,this.g=e,this.Jf=function(t,n,i,e,s){var r=1e3*this.g.httpTimeout,o=null;s&&(o=this.Sl._f(s,r,"HTTP timeout")),this.c.debug("request(): calling HttpInterface.makeRequest"),this.ii.makeRequest(t,n,i,e,r,o)}},st=ut.Logger=function(t,n,i,e,s){this.ri=t,this.ti=n,this.p=i,this.ci=e,this.ai=s,this.debug=function(t){this.log(t,y.LogLevel.DEBUG)},this.info=function(t){this.log(t,y.LogLevel.INFO)},this.warning=function(t){this.log(t,y.LogLevel.WARNING)},this.error=function(t){this.log(t,y.LogLevel.ERROR)},this.log=function(t,n){t=this.Rl(t,n);this.ci.Fs(t),this.p.logLevel<=n&&this.ri.consoleLog(t,n)},this.ml=function(t){return"["+this.yn+"] "+t},this.Cl=function(t){return"["+this.ai+"] "+t},this.Tl=function(t){return"[Conviva] "+t},this.wl=function(t){return"["+(this.ti.getEpochTimeMs()/1e3).toFixed(3).toString()+"] "+t},this.Il=function(t,n){return"["+st.Nl(n)+"] "+t},this.Ol=function(t){return this._l&&(t="sid="+this._l+" "+t),t},this.Un=function(t){this._l=t},this.setModuleName=function(t){this.yn=t},this.Rl=function(t,n){return this.Tl(this.wl(this.Il(this.Cl(this.ml(this.Ol(t))),n)))}};st.Nl=function(t){var n;switch(t){case y.LogLevel.ERROR:n="ERROR";break;case y.LogLevel.WARNING:n="WARNING";break;case y.LogLevel.INFO:n="INFO";break;case y.LogLevel.DEBUG:n="DEBUG"}return n},ut.Storage=function(t,n,i,e){this.c=t,this.c.setModuleName("Storage"),this.ei=n,this.Sl=i,this.g=e,this.it=function(t,n){n=this.Sl._f(n,1e3*this.g.storageTimeout,"storage load timeout");this.c.debug("load): calling StorageInterface.loadData"),this.ei.loadData(ut.Storage.Pl,t,n)},this.Jc=function(t,n,i){i=this.Sl._f(i,1e3*this.g.storageTimeout,"storage save timeout");this.c.debug("save(): calling StorageInterface.saveData"),this.ei.saveData(ut.Storage.Pl,t,n,i)}},ut.Storage.Pl="Conviva";var rt=ut.SystemMetadata=function(t,n,i){this.c=t,this.c.setModuleName("SystemMetadata"),this.si=n,this.y=i,this.Dl=null,this.get=function(){return this.Dl||this.retrieve(),this.Dl},this.retrieve=function(){var t={};t[rt.BROWSER_NAME]=this.si.getBrowserName,t[rt.BROWSER_VERSION]=this.si.getBrowserVersion,t[rt.DEVICE_BRAND]=this.si.getDeviceBrand,t[rt.DEVICE_MANUFACTURER]=this.si.getDeviceManufacturer,t[rt.DEVICE_MODEL]=this.si.getDeviceModel,t[rt.DEVICE_TYPE]=this.si.getDeviceType,t[rt.DEVICE_VERSION]=this.si.getDeviceVersion,t[rt.FRAMEWORK_NAME]=this.si.getFrameworkName,t[rt.FRAMEWORK_VERSION]=this.si.getFrameworkVersion,t[rt.OPERATING_SYSTEM_NAME]=this.si.getOperatingSystemName,t[rt.OPERATING_SYSTEM_VERSION]=this.si.getOperatingSystemVersion,t[rt.DEVICE_CATEGORY]=this.si.getDeviceCategory,t[rt.SCREEN_WIDTH]=this.si.getScreenWidth,t[rt.SCREEN_HEIGHT]=this.si.getScreenHeight,t[rt.SCALE_FACTOR]=this.si.getScaleFactor;var n,e=this;for(n in this.c.debug("retrieve(): calling MetadataInterface methods"),t)!function(n,i){e.y._("Session.getSystemMetadataSchema(): "+n,function(){var t=i[n];i[n]=t.call(e.si)})}(n,t),z.yt(t[n])||delete t[n];var i=!1;if("undefined"!==typeof t[rt.DEVICE_TYPE]){for(var s in h.DeviceType)if(t[rt.DEVICE_TYPE]===h.DeviceType[s]){i=!0;break}i||delete t[rt.DEVICE_TYPE]}if(i=!1,"undefined"!==typeof t[rt.DEVICE_CATEGORY]){for(var r in h.DeviceCategory)if(t[rt.DEVICE_CATEGORY]===h.DeviceCategory[r]){i=!0;break}i||delete t[rt.DEVICE_CATEGORY]}this.Dl=z.$f(t)}};rt.BROWSER_NAME="browserName",rt.BROWSER_VERSION="browserVersion",rt.DEVICE_BRAND="deviceBrand",rt.DEVICE_MANUFACTURER="deviceManufacturer",rt.DEVICE_MODEL="deviceModel",rt.DEVICE_TYPE="deviceType",rt.DEVICE_VERSION="deviceVersion",rt.FRAMEWORK_NAME="frameworkName",rt.FRAMEWORK_VERSION="frameworkVersion",rt.OPERATING_SYSTEM_NAME="operatingSystemName",rt.OPERATING_SYSTEM_VERSION="operatingSystemVersion",rt.DEVICE_CATEGORY="deviceCategory",rt.SCREEN_WIDTH="screenWidth",rt.SCREEN_HEIGHT="screenHeight",rt.SCALE_FACTOR="scaleFactor";var ot=ut.Time=function(t,n){this.ti=t,this.c=n,this.c.setModuleName("Time"),this.current=function(){var t=this.ti.getEpochTimeMs();return z.lt(t)||this.c.error("current(): TimeInterface.getEpochTimeMs() did not return an integer ("+t+")"),t}},at=ut.Timer=function(t,n,i){var s=this;this.c=t,this.c.setModuleName("Timer"),this.ni=n,this.y=i,this.create=function(t,n,i){return this.createTimer(function(){s.y._(i,function(){t()})},n,i)},this.createOnce=function(t,n,i){var e={cancel:null};return e.cancel=this.createTimer(function(){s.y._(i,function(){e&&"function"===typeof e.cancel&&(e.cancel(),e.cancel=null,e=null),t()})},n,i),e.cancel},this.createTimer=function(t,n,i){return this.c.debug("createTimer(): calling TimerInterface.create"),this.ni.createTimer(t,n,i)}}}()}(),ht});